var tk=t=>{throw TypeError(t)};var Lg=(t,e,n)=>e.has(t)||tk("Cannot "+n);var C=(t,e,n)=>(Lg(t,e,"read from private field"),n?n.call(t):e.get(t)),ce=(t,e,n)=>e.has(t)?tk("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),J=(t,e,n,r)=>(Lg(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),ke=(t,e,n)=>(Lg(t,e,"access private method"),n);var of=(t,e,n,r)=>({set _(s){J(t,e,s,n)},get _(){return C(t,e,r)}});function yD(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function PN(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var MN={exports:{}},ym={},DN={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ud=Symbol.for("react.element"),vD=Symbol.for("react.portal"),xD=Symbol.for("react.fragment"),bD=Symbol.for("react.strict_mode"),wD=Symbol.for("react.profiler"),SD=Symbol.for("react.provider"),kD=Symbol.for("react.context"),_D=Symbol.for("react.forward_ref"),ED=Symbol.for("react.suspense"),CD=Symbol.for("react.memo"),ND=Symbol.for("react.lazy"),nk=Symbol.iterator;function TD(t){return t===null||typeof t!="object"?null:(t=nk&&t[nk]||t["@@iterator"],typeof t=="function"?t:null)}var LN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$N=Object.assign,FN={};function _c(t,e,n){this.props=t,this.context=e,this.refs=FN,this.updater=n||LN}_c.prototype.isReactComponent={};_c.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};_c.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function BN(){}BN.prototype=_c.prototype;function Qx(t,e,n){this.props=t,this.context=e,this.refs=FN,this.updater=n||LN}var Jx=Qx.prototype=new BN;Jx.constructor=Qx;$N(Jx,_c.prototype);Jx.isPureReactComponent=!0;var rk=Array.isArray,UN=Object.prototype.hasOwnProperty,Yx={current:null},zN={key:!0,ref:!0,__self:!0,__source:!0};function VN(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)UN.call(e,r)&&!zN.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Ud,type:t,key:i,ref:o,props:s,_owner:Yx.current}}function OD(t,e){return{$$typeof:Ud,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Zx(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ud}function AD(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var sk=/\/+/g;function $g(t,e){return typeof t=="object"&&t!==null&&t.key!=null?AD(""+t.key):e.toString(36)}function oh(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ud:case vD:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+$g(o,0):r,rk(s)?(n="",t!=null&&(n=t.replace(sk,"$&/")+"/"),oh(s,e,n,"",function(c){return c})):s!=null&&(Zx(s)&&(s=OD(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(sk,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",rk(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+$g(i,a);o+=oh(i,e,n,l,s)}else if(l=TD(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+$g(i,a++),o+=oh(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function af(t,e,n){if(t==null)return t;var r=[],s=0;return oh(t,r,"","",function(i){return e.call(n,i,s++)}),r}function RD(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Tn={current:null},ah={transition:null},jD={ReactCurrentDispatcher:Tn,ReactCurrentBatchConfig:ah,ReactCurrentOwner:Yx};function HN(){throw Error("act(...) is not supported in production builds of React.")}Ce.Children={map:af,forEach:function(t,e,n){af(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return af(t,function(){e++}),e},toArray:function(t){return af(t,function(e){return e})||[]},only:function(t){if(!Zx(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ce.Component=_c;Ce.Fragment=xD;Ce.Profiler=wD;Ce.PureComponent=Qx;Ce.StrictMode=bD;Ce.Suspense=ED;Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jD;Ce.act=HN;Ce.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=$N({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Yx.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)UN.call(e,l)&&!zN.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Ud,type:t.type,key:s,ref:i,props:r,_owner:o}};Ce.createContext=function(t){return t={$$typeof:kD,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:SD,_context:t},t.Consumer=t};Ce.createElement=VN;Ce.createFactory=function(t){var e=VN.bind(null,t);return e.type=t,e};Ce.createRef=function(){return{current:null}};Ce.forwardRef=function(t){return{$$typeof:_D,render:t}};Ce.isValidElement=Zx;Ce.lazy=function(t){return{$$typeof:ND,_payload:{_status:-1,_result:t},_init:RD}};Ce.memo=function(t,e){return{$$typeof:CD,type:t,compare:e===void 0?null:e}};Ce.startTransition=function(t){var e=ah.transition;ah.transition={};try{t()}finally{ah.transition=e}};Ce.unstable_act=HN;Ce.useCallback=function(t,e){return Tn.current.useCallback(t,e)};Ce.useContext=function(t){return Tn.current.useContext(t)};Ce.useDebugValue=function(){};Ce.useDeferredValue=function(t){return Tn.current.useDeferredValue(t)};Ce.useEffect=function(t,e){return Tn.current.useEffect(t,e)};Ce.useId=function(){return Tn.current.useId()};Ce.useImperativeHandle=function(t,e,n){return Tn.current.useImperativeHandle(t,e,n)};Ce.useInsertionEffect=function(t,e){return Tn.current.useInsertionEffect(t,e)};Ce.useLayoutEffect=function(t,e){return Tn.current.useLayoutEffect(t,e)};Ce.useMemo=function(t,e){return Tn.current.useMemo(t,e)};Ce.useReducer=function(t,e,n){return Tn.current.useReducer(t,e,n)};Ce.useRef=function(t){return Tn.current.useRef(t)};Ce.useState=function(t){return Tn.current.useState(t)};Ce.useSyncExternalStore=function(t,e,n){return Tn.current.useSyncExternalStore(t,e,n)};Ce.useTransition=function(){return Tn.current.useTransition()};Ce.version="18.3.1";DN.exports=Ce;var w=DN.exports;const se=PN(w),vm=yD({__proto__:null,default:se},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ID=w,PD=Symbol.for("react.element"),MD=Symbol.for("react.fragment"),DD=Object.prototype.hasOwnProperty,LD=ID.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$D={key:!0,ref:!0,__self:!0,__source:!0};function qN(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)DD.call(e,r)&&!$D.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:PD,type:t,key:i,ref:o,props:s,_owner:LD.current}}ym.Fragment=MD;ym.jsx=qN;ym.jsxs=qN;MN.exports=ym;var h=MN.exports,cv={},WN={exports:{}},sr={},KN={exports:{}},GN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(j,V){var ee=j.length;j.push(V);e:for(;0<ee;){var me=ee-1>>>1,ie=j[me];if(0<s(ie,V))j[me]=V,j[ee]=ie,ee=me;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var V=j[0],ee=j.pop();if(ee!==V){j[0]=ee;e:for(var me=0,ie=j.length,vt=ie>>>1;me<vt;){var We=2*(me+1)-1,$t=j[We],D=We+1,te=j[D];if(0>s($t,ee))D<ie&&0>s(te,$t)?(j[me]=te,j[D]=ee,me=D):(j[me]=$t,j[We]=ee,me=We);else if(D<ie&&0>s(te,ee))j[me]=te,j[D]=ee,me=D;else break e}}return V}function s(j,V){var ee=j.sortIndex-V.sortIndex;return ee!==0?ee:j.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,p=!1,m=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(j){for(var V=n(c);V!==null;){if(V.callback===null)r(c);else if(V.startTime<=j)r(c),V.sortIndex=V.expirationTime,e(l,V);else break;V=n(c)}}function S(j){if(g=!1,b(j),!m)if(n(l)!==null)m=!0,W(k);else{var V=n(c);V!==null&&re(S,V.startTime-j)}}function k(j,V){m=!1,g&&(g=!1,v(T),T=-1),p=!0;var ee=f;try{for(b(V),d=n(l);d!==null&&(!(d.expirationTime>V)||j&&!U());){var me=d.callback;if(typeof me=="function"){d.callback=null,f=d.priorityLevel;var ie=me(d.expirationTime<=V);V=t.unstable_now(),typeof ie=="function"?d.callback=ie:d===n(l)&&r(l),b(V)}else r(l);d=n(l)}if(d!==null)var vt=!0;else{var We=n(c);We!==null&&re(S,We.startTime-V),vt=!1}return vt}finally{d=null,f=ee,p=!1}}var E=!1,_=null,T=-1,A=5,O=-1;function U(){return!(t.unstable_now()-O<A)}function P(){if(_!==null){var j=t.unstable_now();O=j;var V=!0;try{V=_(!0,j)}finally{V?L():(E=!1,_=null)}}else E=!1}var L;if(typeof x=="function")L=function(){x(P)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,K=z.port2;z.port1.onmessage=P,L=function(){K.postMessage(null)}}else L=function(){y(P,0)};function W(j){_=j,E||(E=!0,L())}function re(j,V){T=y(function(){j(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,W(k))},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(j){switch(f){case 1:case 2:case 3:var V=3;break;default:V=f}var ee=f;f=V;try{return j()}finally{f=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(j,V){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var ee=f;f=j;try{return V()}finally{f=ee}},t.unstable_scheduleCallback=function(j,V,ee){var me=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?me+ee:me):ee=me,j){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=ee+ie,j={id:u++,callback:V,priorityLevel:j,startTime:ee,expirationTime:ie,sortIndex:-1},ee>me?(j.sortIndex=ee,e(c,j),n(l)===null&&j===n(c)&&(g?(v(T),T=-1):g=!0,re(S,ee-me))):(j.sortIndex=ie,e(l,j),m||p||(m=!0,W(k))),j},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(j){var V=f;return function(){var ee=f;f=V;try{return j.apply(this,arguments)}finally{f=ee}}}})(GN);KN.exports=GN;var FD=KN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BD=w,tr=FD;function F(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var QN=new Set,Hu={};function Pa(t,e){Ql(t,e),Ql(t+"Capture",e)}function Ql(t,e){for(Hu[t]=e,t=0;t<e.length;t++)QN.add(e[t])}var Xs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),uv=Object.prototype.hasOwnProperty,UD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ik={},ok={};function zD(t){return uv.call(ok,t)?!0:uv.call(ik,t)?!1:UD.test(t)?ok[t]=!0:(ik[t]=!0,!1)}function VD(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function HD(t,e,n,r){if(e===null||typeof e>"u"||VD(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function On(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var nn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){nn[t]=new On(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];nn[e]=new On(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){nn[t]=new On(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){nn[t]=new On(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){nn[t]=new On(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){nn[t]=new On(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){nn[t]=new On(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){nn[t]=new On(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){nn[t]=new On(t,5,!1,t.toLowerCase(),null,!1,!1)});var Xx=/[\-:]([a-z])/g;function eb(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Xx,eb);nn[e]=new On(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Xx,eb);nn[e]=new On(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Xx,eb);nn[e]=new On(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){nn[t]=new On(t,1,!1,t.toLowerCase(),null,!1,!1)});nn.xlinkHref=new On("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){nn[t]=new On(t,1,!1,t.toLowerCase(),null,!0,!0)});function tb(t,e,n,r){var s=nn.hasOwnProperty(e)?nn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(HD(e,n,s,r)&&(n=null),r||s===null?zD(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var si=BD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,lf=Symbol.for("react.element"),ul=Symbol.for("react.portal"),dl=Symbol.for("react.fragment"),nb=Symbol.for("react.strict_mode"),dv=Symbol.for("react.profiler"),JN=Symbol.for("react.provider"),YN=Symbol.for("react.context"),rb=Symbol.for("react.forward_ref"),fv=Symbol.for("react.suspense"),hv=Symbol.for("react.suspense_list"),sb=Symbol.for("react.memo"),vi=Symbol.for("react.lazy"),ZN=Symbol.for("react.offscreen"),ak=Symbol.iterator;function Uc(t){return t===null||typeof t!="object"?null:(t=ak&&t[ak]||t["@@iterator"],typeof t=="function"?t:null)}var dt=Object.assign,Fg;function su(t){if(Fg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Fg=e&&e[1]||""}return`
`+Fg+t}var Bg=!1;function Ug(t,e){if(!t||Bg)return"";Bg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Bg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?su(t):""}function qD(t){switch(t.tag){case 5:return su(t.type);case 16:return su("Lazy");case 13:return su("Suspense");case 19:return su("SuspenseList");case 0:case 2:case 15:return t=Ug(t.type,!1),t;case 11:return t=Ug(t.type.render,!1),t;case 1:return t=Ug(t.type,!0),t;default:return""}}function pv(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case dl:return"Fragment";case ul:return"Portal";case dv:return"Profiler";case nb:return"StrictMode";case fv:return"Suspense";case hv:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case YN:return(t.displayName||"Context")+".Consumer";case JN:return(t._context.displayName||"Context")+".Provider";case rb:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case sb:return e=t.displayName||null,e!==null?e:pv(t.type)||"Memo";case vi:e=t._payload,t=t._init;try{return pv(t(e))}catch{}}return null}function WD(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pv(e);case 8:return e===nb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function uo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function XN(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function KD(t){var e=XN(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function cf(t){t._valueTracker||(t._valueTracker=KD(t))}function eT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=XN(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Oh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function mv(t,e){var n=e.checked;return dt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function lk(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=uo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function tT(t,e){e=e.checked,e!=null&&tb(t,"checked",e,!1)}function gv(t,e){tT(t,e);var n=uo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?yv(t,e.type,n):e.hasOwnProperty("defaultValue")&&yv(t,e.type,uo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ck(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function yv(t,e,n){(e!=="number"||Oh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var iu=Array.isArray;function _l(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+uo(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function vv(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return dt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function uk(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(F(92));if(iu(n)){if(1<n.length)throw Error(F(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:uo(n)}}function nT(t,e){var n=uo(e.value),r=uo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function dk(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function rT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xv(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?rT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var uf,sT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(uf=uf||document.createElement("div"),uf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=uf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function qu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var bu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},GD=["Webkit","ms","Moz","O"];Object.keys(bu).forEach(function(t){GD.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),bu[e]=bu[t]})});function iT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||bu.hasOwnProperty(t)&&bu[t]?(""+e).trim():e+"px"}function oT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=iT(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var QD=dt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bv(t,e){if(e){if(QD[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function wv(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sv=null;function ib(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var kv=null,El=null,Cl=null;function fk(t){if(t=Hd(t)){if(typeof kv!="function")throw Error(F(280));var e=t.stateNode;e&&(e=km(e),kv(t.stateNode,t.type,e))}}function aT(t){El?Cl?Cl.push(t):Cl=[t]:El=t}function lT(){if(El){var t=El,e=Cl;if(Cl=El=null,fk(t),e)for(t=0;t<e.length;t++)fk(e[t])}}function cT(t,e){return t(e)}function uT(){}var zg=!1;function dT(t,e,n){if(zg)return t(e,n);zg=!0;try{return cT(t,e,n)}finally{zg=!1,(El!==null||Cl!==null)&&(uT(),lT())}}function Wu(t,e){var n=t.stateNode;if(n===null)return null;var r=km(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(F(231,e,typeof n));return n}var _v=!1;if(Xs)try{var zc={};Object.defineProperty(zc,"passive",{get:function(){_v=!0}}),window.addEventListener("test",zc,zc),window.removeEventListener("test",zc,zc)}catch{_v=!1}function JD(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var wu=!1,Ah=null,Rh=!1,Ev=null,YD={onError:function(t){wu=!0,Ah=t}};function ZD(t,e,n,r,s,i,o,a,l){wu=!1,Ah=null,JD.apply(YD,arguments)}function XD(t,e,n,r,s,i,o,a,l){if(ZD.apply(this,arguments),wu){if(wu){var c=Ah;wu=!1,Ah=null}else throw Error(F(198));Rh||(Rh=!0,Ev=c)}}function Ma(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function fT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function hk(t){if(Ma(t)!==t)throw Error(F(188))}function eL(t){var e=t.alternate;if(!e){if(e=Ma(t),e===null)throw Error(F(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return hk(s),t;if(i===r)return hk(s),e;i=i.sibling}throw Error(F(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(F(189))}}if(n.alternate!==r)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?t:e}function hT(t){return t=eL(t),t!==null?pT(t):null}function pT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=pT(t);if(e!==null)return e;t=t.sibling}return null}var mT=tr.unstable_scheduleCallback,pk=tr.unstable_cancelCallback,tL=tr.unstable_shouldYield,nL=tr.unstable_requestPaint,xt=tr.unstable_now,rL=tr.unstable_getCurrentPriorityLevel,ob=tr.unstable_ImmediatePriority,gT=tr.unstable_UserBlockingPriority,jh=tr.unstable_NormalPriority,sL=tr.unstable_LowPriority,yT=tr.unstable_IdlePriority,xm=null,us=null;function iL(t){if(us&&typeof us.onCommitFiberRoot=="function")try{us.onCommitFiberRoot(xm,t,void 0,(t.current.flags&128)===128)}catch{}}var Hr=Math.clz32?Math.clz32:lL,oL=Math.log,aL=Math.LN2;function lL(t){return t>>>=0,t===0?32:31-(oL(t)/aL|0)|0}var df=64,ff=4194304;function ou(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ih(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=ou(a):(i&=o,i!==0&&(r=ou(i)))}else o=n&~s,o!==0?r=ou(o):i!==0&&(r=ou(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Hr(e),s=1<<n,r|=t[n],e&=~s;return r}function cL(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uL(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Hr(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=cL(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Cv(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function vT(){var t=df;return df<<=1,!(df&4194240)&&(df=64),t}function Vg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function zd(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Hr(e),t[e]=n}function dL(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Hr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function ab(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Hr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var He=0;function xT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var bT,lb,wT,ST,kT,Nv=!1,hf=[],Ki=null,Gi=null,Qi=null,Ku=new Map,Gu=new Map,Ci=[],fL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mk(t,e){switch(t){case"focusin":case"focusout":Ki=null;break;case"dragenter":case"dragleave":Gi=null;break;case"mouseover":case"mouseout":Qi=null;break;case"pointerover":case"pointerout":Ku.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gu.delete(e.pointerId)}}function Vc(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Hd(e),e!==null&&lb(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function hL(t,e,n,r,s){switch(e){case"focusin":return Ki=Vc(Ki,t,e,n,r,s),!0;case"dragenter":return Gi=Vc(Gi,t,e,n,r,s),!0;case"mouseover":return Qi=Vc(Qi,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ku.set(i,Vc(Ku.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Gu.set(i,Vc(Gu.get(i)||null,t,e,n,r,s)),!0}return!1}function _T(t){var e=Uo(t.target);if(e!==null){var n=Ma(e);if(n!==null){if(e=n.tag,e===13){if(e=fT(n),e!==null){t.blockedOn=e,kT(t.priority,function(){wT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function lh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Tv(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Sv=r,n.target.dispatchEvent(r),Sv=null}else return e=Hd(n),e!==null&&lb(e),t.blockedOn=n,!1;e.shift()}return!0}function gk(t,e,n){lh(t)&&n.delete(e)}function pL(){Nv=!1,Ki!==null&&lh(Ki)&&(Ki=null),Gi!==null&&lh(Gi)&&(Gi=null),Qi!==null&&lh(Qi)&&(Qi=null),Ku.forEach(gk),Gu.forEach(gk)}function Hc(t,e){t.blockedOn===e&&(t.blockedOn=null,Nv||(Nv=!0,tr.unstable_scheduleCallback(tr.unstable_NormalPriority,pL)))}function Qu(t){function e(s){return Hc(s,t)}if(0<hf.length){Hc(hf[0],t);for(var n=1;n<hf.length;n++){var r=hf[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ki!==null&&Hc(Ki,t),Gi!==null&&Hc(Gi,t),Qi!==null&&Hc(Qi,t),Ku.forEach(e),Gu.forEach(e),n=0;n<Ci.length;n++)r=Ci[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ci.length&&(n=Ci[0],n.blockedOn===null);)_T(n),n.blockedOn===null&&Ci.shift()}var Nl=si.ReactCurrentBatchConfig,Ph=!0;function mL(t,e,n,r){var s=He,i=Nl.transition;Nl.transition=null;try{He=1,cb(t,e,n,r)}finally{He=s,Nl.transition=i}}function gL(t,e,n,r){var s=He,i=Nl.transition;Nl.transition=null;try{He=4,cb(t,e,n,r)}finally{He=s,Nl.transition=i}}function cb(t,e,n,r){if(Ph){var s=Tv(t,e,n,r);if(s===null)Xg(t,e,r,Mh,n),mk(t,r);else if(hL(s,t,e,n,r))r.stopPropagation();else if(mk(t,r),e&4&&-1<fL.indexOf(t)){for(;s!==null;){var i=Hd(s);if(i!==null&&bT(i),i=Tv(t,e,n,r),i===null&&Xg(t,e,r,Mh,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Xg(t,e,r,null,n)}}var Mh=null;function Tv(t,e,n,r){if(Mh=null,t=ib(r),t=Uo(t),t!==null)if(e=Ma(t),e===null)t=null;else if(n=e.tag,n===13){if(t=fT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Mh=t,null}function ET(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rL()){case ob:return 1;case gT:return 4;case jh:case sL:return 16;case yT:return 536870912;default:return 16}default:return 16}}var Ui=null,ub=null,ch=null;function CT(){if(ch)return ch;var t,e=ub,n=e.length,r,s="value"in Ui?Ui.value:Ui.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return ch=s.slice(t,1<r?1-r:void 0)}function uh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function pf(){return!0}function yk(){return!1}function ir(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?pf:yk,this.isPropagationStopped=yk,this}return dt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=pf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=pf)},persist:function(){},isPersistent:pf}),e}var Ec={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},db=ir(Ec),Vd=dt({},Ec,{view:0,detail:0}),yL=ir(Vd),Hg,qg,qc,bm=dt({},Vd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fb,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qc&&(qc&&t.type==="mousemove"?(Hg=t.screenX-qc.screenX,qg=t.screenY-qc.screenY):qg=Hg=0,qc=t),Hg)},movementY:function(t){return"movementY"in t?t.movementY:qg}}),vk=ir(bm),vL=dt({},bm,{dataTransfer:0}),xL=ir(vL),bL=dt({},Vd,{relatedTarget:0}),Wg=ir(bL),wL=dt({},Ec,{animationName:0,elapsedTime:0,pseudoElement:0}),SL=ir(wL),kL=dt({},Ec,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_L=ir(kL),EL=dt({},Ec,{data:0}),xk=ir(EL),CL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},NL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},TL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function OL(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=TL[t])?!!e[t]:!1}function fb(){return OL}var AL=dt({},Vd,{key:function(t){if(t.key){var e=CL[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=uh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?NL[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fb,charCode:function(t){return t.type==="keypress"?uh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?uh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),RL=ir(AL),jL=dt({},bm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bk=ir(jL),IL=dt({},Vd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fb}),PL=ir(IL),ML=dt({},Ec,{propertyName:0,elapsedTime:0,pseudoElement:0}),DL=ir(ML),LL=dt({},bm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),$L=ir(LL),FL=[9,13,27,32],hb=Xs&&"CompositionEvent"in window,Su=null;Xs&&"documentMode"in document&&(Su=document.documentMode);var BL=Xs&&"TextEvent"in window&&!Su,NT=Xs&&(!hb||Su&&8<Su&&11>=Su),wk=" ",Sk=!1;function TT(t,e){switch(t){case"keyup":return FL.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function OT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var fl=!1;function UL(t,e){switch(t){case"compositionend":return OT(e);case"keypress":return e.which!==32?null:(Sk=!0,wk);case"textInput":return t=e.data,t===wk&&Sk?null:t;default:return null}}function zL(t,e){if(fl)return t==="compositionend"||!hb&&TT(t,e)?(t=CT(),ch=ub=Ui=null,fl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return NT&&e.locale!=="ko"?null:e.data;default:return null}}var VL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kk(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!VL[t.type]:e==="textarea"}function AT(t,e,n,r){aT(r),e=Dh(e,"onChange"),0<e.length&&(n=new db("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ku=null,Ju=null;function HL(t){UT(t,0)}function wm(t){var e=ml(t);if(eT(e))return t}function qL(t,e){if(t==="change")return e}var RT=!1;if(Xs){var Kg;if(Xs){var Gg="oninput"in document;if(!Gg){var _k=document.createElement("div");_k.setAttribute("oninput","return;"),Gg=typeof _k.oninput=="function"}Kg=Gg}else Kg=!1;RT=Kg&&(!document.documentMode||9<document.documentMode)}function Ek(){ku&&(ku.detachEvent("onpropertychange",jT),Ju=ku=null)}function jT(t){if(t.propertyName==="value"&&wm(Ju)){var e=[];AT(e,Ju,t,ib(t)),dT(HL,e)}}function WL(t,e,n){t==="focusin"?(Ek(),ku=e,Ju=n,ku.attachEvent("onpropertychange",jT)):t==="focusout"&&Ek()}function KL(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return wm(Ju)}function GL(t,e){if(t==="click")return wm(e)}function QL(t,e){if(t==="input"||t==="change")return wm(e)}function JL(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Gr=typeof Object.is=="function"?Object.is:JL;function Yu(t,e){if(Gr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!uv.call(e,s)||!Gr(t[s],e[s]))return!1}return!0}function Ck(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Nk(t,e){var n=Ck(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ck(n)}}function IT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?IT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function PT(){for(var t=window,e=Oh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Oh(t.document)}return e}function pb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function YL(t){var e=PT(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&IT(n.ownerDocument.documentElement,n)){if(r!==null&&pb(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Nk(n,i);var o=Nk(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ZL=Xs&&"documentMode"in document&&11>=document.documentMode,hl=null,Ov=null,_u=null,Av=!1;function Tk(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Av||hl==null||hl!==Oh(r)||(r=hl,"selectionStart"in r&&pb(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),_u&&Yu(_u,r)||(_u=r,r=Dh(Ov,"onSelect"),0<r.length&&(e=new db("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=hl)))}function mf(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var pl={animationend:mf("Animation","AnimationEnd"),animationiteration:mf("Animation","AnimationIteration"),animationstart:mf("Animation","AnimationStart"),transitionend:mf("Transition","TransitionEnd")},Qg={},MT={};Xs&&(MT=document.createElement("div").style,"AnimationEvent"in window||(delete pl.animationend.animation,delete pl.animationiteration.animation,delete pl.animationstart.animation),"TransitionEvent"in window||delete pl.transitionend.transition);function Sm(t){if(Qg[t])return Qg[t];if(!pl[t])return t;var e=pl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in MT)return Qg[t]=e[n];return t}var DT=Sm("animationend"),LT=Sm("animationiteration"),$T=Sm("animationstart"),FT=Sm("transitionend"),BT=new Map,Ok="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bo(t,e){BT.set(t,e),Pa(e,[t])}for(var Jg=0;Jg<Ok.length;Jg++){var Yg=Ok[Jg],XL=Yg.toLowerCase(),e$=Yg[0].toUpperCase()+Yg.slice(1);bo(XL,"on"+e$)}bo(DT,"onAnimationEnd");bo(LT,"onAnimationIteration");bo($T,"onAnimationStart");bo("dblclick","onDoubleClick");bo("focusin","onFocus");bo("focusout","onBlur");bo(FT,"onTransitionEnd");Ql("onMouseEnter",["mouseout","mouseover"]);Ql("onMouseLeave",["mouseout","mouseover"]);Ql("onPointerEnter",["pointerout","pointerover"]);Ql("onPointerLeave",["pointerout","pointerover"]);Pa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Pa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Pa("onBeforeInput",["compositionend","keypress","textInput","paste"]);Pa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Pa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Pa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var au="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),t$=new Set("cancel close invalid load scroll toggle".split(" ").concat(au));function Ak(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,XD(r,e,void 0,t),t.currentTarget=null}function UT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Ak(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Ak(s,a,c),i=l}}}if(Rh)throw t=Ev,Rh=!1,Ev=null,t}function Ze(t,e){var n=e[Mv];n===void 0&&(n=e[Mv]=new Set);var r=t+"__bubble";n.has(r)||(zT(e,t,2,!1),n.add(r))}function Zg(t,e,n){var r=0;e&&(r|=4),zT(n,t,r,e)}var gf="_reactListening"+Math.random().toString(36).slice(2);function Zu(t){if(!t[gf]){t[gf]=!0,QN.forEach(function(n){n!=="selectionchange"&&(t$.has(n)||Zg(n,!1,t),Zg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[gf]||(e[gf]=!0,Zg("selectionchange",!1,e))}}function zT(t,e,n,r){switch(ET(e)){case 1:var s=mL;break;case 4:s=gL;break;default:s=cb}n=s.bind(null,e,n,t),s=void 0,!_v||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Xg(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Uo(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}dT(function(){var c=i,u=ib(n),d=[];e:{var f=BT.get(t);if(f!==void 0){var p=db,m=t;switch(t){case"keypress":if(uh(n)===0)break e;case"keydown":case"keyup":p=RL;break;case"focusin":m="focus",p=Wg;break;case"focusout":m="blur",p=Wg;break;case"beforeblur":case"afterblur":p=Wg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=vk;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=xL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=PL;break;case DT:case LT:case $T:p=SL;break;case FT:p=DL;break;case"scroll":p=yL;break;case"wheel":p=$L;break;case"copy":case"cut":case"paste":p=_L;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=bk}var g=(e&4)!==0,y=!g&&t==="scroll",v=g?f!==null?f+"Capture":null:f;g=[];for(var x=c,b;x!==null;){b=x;var S=b.stateNode;if(b.tag===5&&S!==null&&(b=S,v!==null&&(S=Wu(x,v),S!=null&&g.push(Xu(x,S,b)))),y)break;x=x.return}0<g.length&&(f=new p(f,m,null,n,u),d.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==Sv&&(m=n.relatedTarget||n.fromElement)&&(Uo(m)||m[ei]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=n.relatedTarget||n.toElement,p=c,m=m?Uo(m):null,m!==null&&(y=Ma(m),m!==y||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=c),p!==m)){if(g=vk,S="onMouseLeave",v="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(g=bk,S="onPointerLeave",v="onPointerEnter",x="pointer"),y=p==null?f:ml(p),b=m==null?f:ml(m),f=new g(S,x+"leave",p,n,u),f.target=y,f.relatedTarget=b,S=null,Uo(u)===c&&(g=new g(v,x+"enter",m,n,u),g.target=b,g.relatedTarget=y,S=g),y=S,p&&m)t:{for(g=p,v=m,x=0,b=g;b;b=za(b))x++;for(b=0,S=v;S;S=za(S))b++;for(;0<x-b;)g=za(g),x--;for(;0<b-x;)v=za(v),b--;for(;x--;){if(g===v||v!==null&&g===v.alternate)break t;g=za(g),v=za(v)}g=null}else g=null;p!==null&&Rk(d,f,p,g,!1),m!==null&&y!==null&&Rk(d,y,m,g,!0)}}e:{if(f=c?ml(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var k=qL;else if(kk(f))if(RT)k=QL;else{k=KL;var E=WL}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=GL);if(k&&(k=k(t,c))){AT(d,k,n,u);break e}E&&E(t,f,c),t==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&yv(f,"number",f.value)}switch(E=c?ml(c):window,t){case"focusin":(kk(E)||E.contentEditable==="true")&&(hl=E,Ov=c,_u=null);break;case"focusout":_u=Ov=hl=null;break;case"mousedown":Av=!0;break;case"contextmenu":case"mouseup":case"dragend":Av=!1,Tk(d,n,u);break;case"selectionchange":if(ZL)break;case"keydown":case"keyup":Tk(d,n,u)}var _;if(hb)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else fl?TT(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(NT&&n.locale!=="ko"&&(fl||T!=="onCompositionStart"?T==="onCompositionEnd"&&fl&&(_=CT()):(Ui=u,ub="value"in Ui?Ui.value:Ui.textContent,fl=!0)),E=Dh(c,T),0<E.length&&(T=new xk(T,t,null,n,u),d.push({event:T,listeners:E}),_?T.data=_:(_=OT(n),_!==null&&(T.data=_)))),(_=BL?UL(t,n):zL(t,n))&&(c=Dh(c,"onBeforeInput"),0<c.length&&(u=new xk("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=_))}UT(d,e)})}function Xu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Dh(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Wu(t,n),i!=null&&r.unshift(Xu(t,i,s)),i=Wu(t,e),i!=null&&r.push(Xu(t,i,s))),t=t.return}return r}function za(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Rk(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Wu(n,i),l!=null&&o.unshift(Xu(n,l,a))):s||(l=Wu(n,i),l!=null&&o.push(Xu(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var n$=/\r\n?/g,r$=/\u0000|\uFFFD/g;function jk(t){return(typeof t=="string"?t:""+t).replace(n$,`
`).replace(r$,"")}function yf(t,e,n){if(e=jk(e),jk(t)!==e&&n)throw Error(F(425))}function Lh(){}var Rv=null,jv=null;function Iv(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Pv=typeof setTimeout=="function"?setTimeout:void 0,s$=typeof clearTimeout=="function"?clearTimeout:void 0,Ik=typeof Promise=="function"?Promise:void 0,i$=typeof queueMicrotask=="function"?queueMicrotask:typeof Ik<"u"?function(t){return Ik.resolve(null).then(t).catch(o$)}:Pv;function o$(t){setTimeout(function(){throw t})}function ey(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Qu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Qu(e)}function Ji(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Pk(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Cc=Math.random().toString(36).slice(2),as="__reactFiber$"+Cc,ed="__reactProps$"+Cc,ei="__reactContainer$"+Cc,Mv="__reactEvents$"+Cc,a$="__reactListeners$"+Cc,l$="__reactHandles$"+Cc;function Uo(t){var e=t[as];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ei]||n[as]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Pk(t);t!==null;){if(n=t[as])return n;t=Pk(t)}return e}t=n,n=t.parentNode}return null}function Hd(t){return t=t[as]||t[ei],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ml(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(F(33))}function km(t){return t[ed]||null}var Dv=[],gl=-1;function wo(t){return{current:t}}function et(t){0>gl||(t.current=Dv[gl],Dv[gl]=null,gl--)}function Je(t,e){gl++,Dv[gl]=t.current,t.current=e}var fo={},pn=wo(fo),Bn=wo(!1),fa=fo;function Jl(t,e){var n=t.type.contextTypes;if(!n)return fo;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Un(t){return t=t.childContextTypes,t!=null}function $h(){et(Bn),et(pn)}function Mk(t,e,n){if(pn.current!==fo)throw Error(F(168));Je(pn,e),Je(Bn,n)}function VT(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(F(108,WD(t)||"Unknown",s));return dt({},n,r)}function Fh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||fo,fa=pn.current,Je(pn,t),Je(Bn,Bn.current),!0}function Dk(t,e,n){var r=t.stateNode;if(!r)throw Error(F(169));n?(t=VT(t,e,fa),r.__reactInternalMemoizedMergedChildContext=t,et(Bn),et(pn),Je(pn,t)):et(Bn),Je(Bn,n)}var Ms=null,_m=!1,ty=!1;function HT(t){Ms===null?Ms=[t]:Ms.push(t)}function c$(t){_m=!0,HT(t)}function So(){if(!ty&&Ms!==null){ty=!0;var t=0,e=He;try{var n=Ms;for(He=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ms=null,_m=!1}catch(s){throw Ms!==null&&(Ms=Ms.slice(t+1)),mT(ob,So),s}finally{He=e,ty=!1}}return null}var yl=[],vl=0,Bh=null,Uh=0,pr=[],mr=0,ha=null,Us=1,zs="";function Mo(t,e){yl[vl++]=Uh,yl[vl++]=Bh,Bh=t,Uh=e}function qT(t,e,n){pr[mr++]=Us,pr[mr++]=zs,pr[mr++]=ha,ha=t;var r=Us;t=zs;var s=32-Hr(r)-1;r&=~(1<<s),n+=1;var i=32-Hr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Us=1<<32-Hr(e)+s|n<<s|r,zs=i+t}else Us=1<<i|n<<s|r,zs=t}function mb(t){t.return!==null&&(Mo(t,1),qT(t,1,0))}function gb(t){for(;t===Bh;)Bh=yl[--vl],yl[vl]=null,Uh=yl[--vl],yl[vl]=null;for(;t===ha;)ha=pr[--mr],pr[mr]=null,zs=pr[--mr],pr[mr]=null,Us=pr[--mr],pr[mr]=null}var Zn=null,Yn=null,it=!1,Lr=null;function WT(t,e){var n=vr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Lk(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Zn=t,Yn=Ji(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Zn=t,Yn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ha!==null?{id:Us,overflow:zs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=vr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Zn=t,Yn=null,!0):!1;default:return!1}}function Lv(t){return(t.mode&1)!==0&&(t.flags&128)===0}function $v(t){if(it){var e=Yn;if(e){var n=e;if(!Lk(t,e)){if(Lv(t))throw Error(F(418));e=Ji(n.nextSibling);var r=Zn;e&&Lk(t,e)?WT(r,n):(t.flags=t.flags&-4097|2,it=!1,Zn=t)}}else{if(Lv(t))throw Error(F(418));t.flags=t.flags&-4097|2,it=!1,Zn=t}}}function $k(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Zn=t}function vf(t){if(t!==Zn)return!1;if(!it)return $k(t),it=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Iv(t.type,t.memoizedProps)),e&&(e=Yn)){if(Lv(t))throw KT(),Error(F(418));for(;e;)WT(t,e),e=Ji(e.nextSibling)}if($k(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Yn=Ji(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Yn=null}}else Yn=Zn?Ji(t.stateNode.nextSibling):null;return!0}function KT(){for(var t=Yn;t;)t=Ji(t.nextSibling)}function Yl(){Yn=Zn=null,it=!1}function yb(t){Lr===null?Lr=[t]:Lr.push(t)}var u$=si.ReactCurrentBatchConfig;function Wc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var r=n.stateNode}if(!r)throw Error(F(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,t))}return t}function xf(t,e){throw t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Fk(t){var e=t._init;return e(t._payload)}function GT(t){function e(v,x){if(t){var b=v.deletions;b===null?(v.deletions=[x],v.flags|=16):b.push(x)}}function n(v,x){if(!t)return null;for(;x!==null;)e(v,x),x=x.sibling;return null}function r(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function s(v,x){return v=eo(v,x),v.index=0,v.sibling=null,v}function i(v,x,b){return v.index=b,t?(b=v.alternate,b!==null?(b=b.index,b<x?(v.flags|=2,x):b):(v.flags|=2,x)):(v.flags|=1048576,x)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,x,b,S){return x===null||x.tag!==6?(x=ly(b,v.mode,S),x.return=v,x):(x=s(x,b),x.return=v,x)}function l(v,x,b,S){var k=b.type;return k===dl?u(v,x,b.props.children,S,b.key):x!==null&&(x.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===vi&&Fk(k)===x.type)?(S=s(x,b.props),S.ref=Wc(v,x,b),S.return=v,S):(S=yh(b.type,b.key,b.props,null,v.mode,S),S.ref=Wc(v,x,b),S.return=v,S)}function c(v,x,b,S){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=cy(b,v.mode,S),x.return=v,x):(x=s(x,b.children||[]),x.return=v,x)}function u(v,x,b,S,k){return x===null||x.tag!==7?(x=oa(b,v.mode,S,k),x.return=v,x):(x=s(x,b),x.return=v,x)}function d(v,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=ly(""+x,v.mode,b),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case lf:return b=yh(x.type,x.key,x.props,null,v.mode,b),b.ref=Wc(v,null,x),b.return=v,b;case ul:return x=cy(x,v.mode,b),x.return=v,x;case vi:var S=x._init;return d(v,S(x._payload),b)}if(iu(x)||Uc(x))return x=oa(x,v.mode,b,null),x.return=v,x;xf(v,x)}return null}function f(v,x,b,S){var k=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return k!==null?null:a(v,x,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case lf:return b.key===k?l(v,x,b,S):null;case ul:return b.key===k?c(v,x,b,S):null;case vi:return k=b._init,f(v,x,k(b._payload),S)}if(iu(b)||Uc(b))return k!==null?null:u(v,x,b,S,null);xf(v,b)}return null}function p(v,x,b,S,k){if(typeof S=="string"&&S!==""||typeof S=="number")return v=v.get(b)||null,a(x,v,""+S,k);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case lf:return v=v.get(S.key===null?b:S.key)||null,l(x,v,S,k);case ul:return v=v.get(S.key===null?b:S.key)||null,c(x,v,S,k);case vi:var E=S._init;return p(v,x,b,E(S._payload),k)}if(iu(S)||Uc(S))return v=v.get(b)||null,u(x,v,S,k,null);xf(x,S)}return null}function m(v,x,b,S){for(var k=null,E=null,_=x,T=x=0,A=null;_!==null&&T<b.length;T++){_.index>T?(A=_,_=null):A=_.sibling;var O=f(v,_,b[T],S);if(O===null){_===null&&(_=A);break}t&&_&&O.alternate===null&&e(v,_),x=i(O,x,T),E===null?k=O:E.sibling=O,E=O,_=A}if(T===b.length)return n(v,_),it&&Mo(v,T),k;if(_===null){for(;T<b.length;T++)_=d(v,b[T],S),_!==null&&(x=i(_,x,T),E===null?k=_:E.sibling=_,E=_);return it&&Mo(v,T),k}for(_=r(v,_);T<b.length;T++)A=p(_,v,T,b[T],S),A!==null&&(t&&A.alternate!==null&&_.delete(A.key===null?T:A.key),x=i(A,x,T),E===null?k=A:E.sibling=A,E=A);return t&&_.forEach(function(U){return e(v,U)}),it&&Mo(v,T),k}function g(v,x,b,S){var k=Uc(b);if(typeof k!="function")throw Error(F(150));if(b=k.call(b),b==null)throw Error(F(151));for(var E=k=null,_=x,T=x=0,A=null,O=b.next();_!==null&&!O.done;T++,O=b.next()){_.index>T?(A=_,_=null):A=_.sibling;var U=f(v,_,O.value,S);if(U===null){_===null&&(_=A);break}t&&_&&U.alternate===null&&e(v,_),x=i(U,x,T),E===null?k=U:E.sibling=U,E=U,_=A}if(O.done)return n(v,_),it&&Mo(v,T),k;if(_===null){for(;!O.done;T++,O=b.next())O=d(v,O.value,S),O!==null&&(x=i(O,x,T),E===null?k=O:E.sibling=O,E=O);return it&&Mo(v,T),k}for(_=r(v,_);!O.done;T++,O=b.next())O=p(_,v,T,O.value,S),O!==null&&(t&&O.alternate!==null&&_.delete(O.key===null?T:O.key),x=i(O,x,T),E===null?k=O:E.sibling=O,E=O);return t&&_.forEach(function(P){return e(v,P)}),it&&Mo(v,T),k}function y(v,x,b,S){if(typeof b=="object"&&b!==null&&b.type===dl&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case lf:e:{for(var k=b.key,E=x;E!==null;){if(E.key===k){if(k=b.type,k===dl){if(E.tag===7){n(v,E.sibling),x=s(E,b.props.children),x.return=v,v=x;break e}}else if(E.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===vi&&Fk(k)===E.type){n(v,E.sibling),x=s(E,b.props),x.ref=Wc(v,E,b),x.return=v,v=x;break e}n(v,E);break}else e(v,E);E=E.sibling}b.type===dl?(x=oa(b.props.children,v.mode,S,b.key),x.return=v,v=x):(S=yh(b.type,b.key,b.props,null,v.mode,S),S.ref=Wc(v,x,b),S.return=v,v=S)}return o(v);case ul:e:{for(E=b.key;x!==null;){if(x.key===E)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){n(v,x.sibling),x=s(x,b.children||[]),x.return=v,v=x;break e}else{n(v,x);break}else e(v,x);x=x.sibling}x=cy(b,v.mode,S),x.return=v,v=x}return o(v);case vi:return E=b._init,y(v,x,E(b._payload),S)}if(iu(b))return m(v,x,b,S);if(Uc(b))return g(v,x,b,S);xf(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(n(v,x.sibling),x=s(x,b),x.return=v,v=x):(n(v,x),x=ly(b,v.mode,S),x.return=v,v=x),o(v)):n(v,x)}return y}var Zl=GT(!0),QT=GT(!1),zh=wo(null),Vh=null,xl=null,vb=null;function xb(){vb=xl=Vh=null}function bb(t){var e=zh.current;et(zh),t._currentValue=e}function Fv(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Tl(t,e){Vh=t,vb=xl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Fn=!0),t.firstContext=null)}function _r(t){var e=t._currentValue;if(vb!==t)if(t={context:t,memoizedValue:e,next:null},xl===null){if(Vh===null)throw Error(F(308));xl=t,Vh.dependencies={lanes:0,firstContext:t}}else xl=xl.next=t;return e}var zo=null;function wb(t){zo===null?zo=[t]:zo.push(t)}function JT(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,wb(e)):(n.next=s.next,s.next=n),e.interleaved=n,ti(t,r)}function ti(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var xi=!1;function Sb(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function YT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ks(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Yi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Oe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,ti(t,n)}return s=r.interleaved,s===null?(e.next=e,wb(r)):(e.next=s.next,s.next=e),r.interleaved=e,ti(t,n)}function dh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ab(t,n)}}function Bk(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Hh(t,e,n,r){var s=t.updateQueue;xi=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var d=s.baseState;o=0,u=c=l=null,a=i;do{var f=a.lane,p=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,g=a;switch(f=e,p=n,g.tag){case 1:if(m=g.payload,typeof m=="function"){d=m.call(p,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m=="function"?m.call(p,d,f):m,f==null)break e;d=dt({},d,f);break e;case 2:xi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(u===null&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ma|=o,t.lanes=o,t.memoizedState=d}}function Uk(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(F(191,s));s.call(r)}}}var qd={},ds=wo(qd),td=wo(qd),nd=wo(qd);function Vo(t){if(t===qd)throw Error(F(174));return t}function kb(t,e){switch(Je(nd,e),Je(td,t),Je(ds,qd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:xv(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=xv(e,t)}et(ds),Je(ds,e)}function Xl(){et(ds),et(td),et(nd)}function ZT(t){Vo(nd.current);var e=Vo(ds.current),n=xv(e,t.type);e!==n&&(Je(td,t),Je(ds,n))}function _b(t){td.current===t&&(et(ds),et(td))}var lt=wo(0);function qh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ny=[];function Eb(){for(var t=0;t<ny.length;t++)ny[t]._workInProgressVersionPrimary=null;ny.length=0}var fh=si.ReactCurrentDispatcher,ry=si.ReactCurrentBatchConfig,pa=0,ut=null,Mt=null,Bt=null,Wh=!1,Eu=!1,rd=0,d$=0;function on(){throw Error(F(321))}function Cb(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Gr(t[n],e[n]))return!1;return!0}function Nb(t,e,n,r,s,i){if(pa=i,ut=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,fh.current=t===null||t.memoizedState===null?m$:g$,t=n(r,s),Eu){i=0;do{if(Eu=!1,rd=0,25<=i)throw Error(F(301));i+=1,Bt=Mt=null,e.updateQueue=null,fh.current=y$,t=n(r,s)}while(Eu)}if(fh.current=Kh,e=Mt!==null&&Mt.next!==null,pa=0,Bt=Mt=ut=null,Wh=!1,e)throw Error(F(300));return t}function Tb(){var t=rd!==0;return rd=0,t}function es(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?ut.memoizedState=Bt=t:Bt=Bt.next=t,Bt}function Er(){if(Mt===null){var t=ut.alternate;t=t!==null?t.memoizedState:null}else t=Mt.next;var e=Bt===null?ut.memoizedState:Bt.next;if(e!==null)Bt=e,Mt=t;else{if(t===null)throw Error(F(310));Mt=t,t={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},Bt===null?ut.memoizedState=Bt=t:Bt=Bt.next=t}return Bt}function sd(t,e){return typeof e=="function"?e(t):e}function sy(t){var e=Er(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=Mt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var u=c.lane;if((pa&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,ut.lanes|=u,ma|=u}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Gr(r,e.memoizedState)||(Fn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,ut.lanes|=i,ma|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function iy(t){var e=Er(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Gr(i,e.memoizedState)||(Fn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function XT(){}function eO(t,e){var n=ut,r=Er(),s=e(),i=!Gr(r.memoizedState,s);if(i&&(r.memoizedState=s,Fn=!0),r=r.queue,Ob(rO.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Bt!==null&&Bt.memoizedState.tag&1){if(n.flags|=2048,id(9,nO.bind(null,n,r,s,e),void 0,null),Vt===null)throw Error(F(349));pa&30||tO(n,e,s)}return s}function tO(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ut.updateQueue,e===null?(e={lastEffect:null,stores:null},ut.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function nO(t,e,n,r){e.value=n,e.getSnapshot=r,sO(e)&&iO(t)}function rO(t,e,n){return n(function(){sO(e)&&iO(t)})}function sO(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Gr(t,n)}catch{return!0}}function iO(t){var e=ti(t,1);e!==null&&qr(e,t,1,-1)}function zk(t){var e=es();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sd,lastRenderedState:t},e.queue=t,t=t.dispatch=p$.bind(null,ut,t),[e.memoizedState,t]}function id(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ut.updateQueue,e===null?(e={lastEffect:null,stores:null},ut.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function oO(){return Er().memoizedState}function hh(t,e,n,r){var s=es();ut.flags|=t,s.memoizedState=id(1|e,n,void 0,r===void 0?null:r)}function Em(t,e,n,r){var s=Er();r=r===void 0?null:r;var i=void 0;if(Mt!==null){var o=Mt.memoizedState;if(i=o.destroy,r!==null&&Cb(r,o.deps)){s.memoizedState=id(e,n,i,r);return}}ut.flags|=t,s.memoizedState=id(1|e,n,i,r)}function Vk(t,e){return hh(8390656,8,t,e)}function Ob(t,e){return Em(2048,8,t,e)}function aO(t,e){return Em(4,2,t,e)}function lO(t,e){return Em(4,4,t,e)}function cO(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function uO(t,e,n){return n=n!=null?n.concat([t]):null,Em(4,4,cO.bind(null,e,t),n)}function Ab(){}function dO(t,e){var n=Er();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Cb(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function fO(t,e){var n=Er();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Cb(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function hO(t,e,n){return pa&21?(Gr(n,e)||(n=vT(),ut.lanes|=n,ma|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Fn=!0),t.memoizedState=n)}function f$(t,e){var n=He;He=n!==0&&4>n?n:4,t(!0);var r=ry.transition;ry.transition={};try{t(!1),e()}finally{He=n,ry.transition=r}}function pO(){return Er().memoizedState}function h$(t,e,n){var r=Xi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},mO(t))gO(e,n);else if(n=JT(t,e,n,r),n!==null){var s=En();qr(n,t,r,s),yO(n,e,r)}}function p$(t,e,n){var r=Xi(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(mO(t))gO(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Gr(a,o)){var l=e.interleaved;l===null?(s.next=s,wb(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=JT(t,e,s,r),n!==null&&(s=En(),qr(n,t,r,s),yO(n,e,r))}}function mO(t){var e=t.alternate;return t===ut||e!==null&&e===ut}function gO(t,e){Eu=Wh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function yO(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ab(t,n)}}var Kh={readContext:_r,useCallback:on,useContext:on,useEffect:on,useImperativeHandle:on,useInsertionEffect:on,useLayoutEffect:on,useMemo:on,useReducer:on,useRef:on,useState:on,useDebugValue:on,useDeferredValue:on,useTransition:on,useMutableSource:on,useSyncExternalStore:on,useId:on,unstable_isNewReconciler:!1},m$={readContext:_r,useCallback:function(t,e){return es().memoizedState=[t,e===void 0?null:e],t},useContext:_r,useEffect:Vk,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,hh(4194308,4,cO.bind(null,e,t),n)},useLayoutEffect:function(t,e){return hh(4194308,4,t,e)},useInsertionEffect:function(t,e){return hh(4,2,t,e)},useMemo:function(t,e){var n=es();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=es();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=h$.bind(null,ut,t),[r.memoizedState,t]},useRef:function(t){var e=es();return t={current:t},e.memoizedState=t},useState:zk,useDebugValue:Ab,useDeferredValue:function(t){return es().memoizedState=t},useTransition:function(){var t=zk(!1),e=t[0];return t=f$.bind(null,t[1]),es().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ut,s=es();if(it){if(n===void 0)throw Error(F(407));n=n()}else{if(n=e(),Vt===null)throw Error(F(349));pa&30||tO(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Vk(rO.bind(null,r,i,t),[t]),r.flags|=2048,id(9,nO.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=es(),e=Vt.identifierPrefix;if(it){var n=zs,r=Us;n=(r&~(1<<32-Hr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=rd++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=d$++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},g$={readContext:_r,useCallback:dO,useContext:_r,useEffect:Ob,useImperativeHandle:uO,useInsertionEffect:aO,useLayoutEffect:lO,useMemo:fO,useReducer:sy,useRef:oO,useState:function(){return sy(sd)},useDebugValue:Ab,useDeferredValue:function(t){var e=Er();return hO(e,Mt.memoizedState,t)},useTransition:function(){var t=sy(sd)[0],e=Er().memoizedState;return[t,e]},useMutableSource:XT,useSyncExternalStore:eO,useId:pO,unstable_isNewReconciler:!1},y$={readContext:_r,useCallback:dO,useContext:_r,useEffect:Ob,useImperativeHandle:uO,useInsertionEffect:aO,useLayoutEffect:lO,useMemo:fO,useReducer:iy,useRef:oO,useState:function(){return iy(sd)},useDebugValue:Ab,useDeferredValue:function(t){var e=Er();return Mt===null?e.memoizedState=t:hO(e,Mt.memoizedState,t)},useTransition:function(){var t=iy(sd)[0],e=Er().memoizedState;return[t,e]},useMutableSource:XT,useSyncExternalStore:eO,useId:pO,unstable_isNewReconciler:!1};function jr(t,e){if(t&&t.defaultProps){e=dt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Bv(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:dt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Cm={isMounted:function(t){return(t=t._reactInternals)?Ma(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=En(),s=Xi(t),i=Ks(r,s);i.payload=e,n!=null&&(i.callback=n),e=Yi(t,i,s),e!==null&&(qr(e,t,s,r),dh(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=En(),s=Xi(t),i=Ks(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Yi(t,i,s),e!==null&&(qr(e,t,s,r),dh(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=En(),r=Xi(t),s=Ks(n,r);s.tag=2,e!=null&&(s.callback=e),e=Yi(t,s,r),e!==null&&(qr(e,t,r,n),dh(e,t,r))}};function Hk(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Yu(n,r)||!Yu(s,i):!0}function vO(t,e,n){var r=!1,s=fo,i=e.contextType;return typeof i=="object"&&i!==null?i=_r(i):(s=Un(e)?fa:pn.current,r=e.contextTypes,i=(r=r!=null)?Jl(t,s):fo),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Cm,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function qk(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Cm.enqueueReplaceState(e,e.state,null)}function Uv(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Sb(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=_r(i):(i=Un(e)?fa:pn.current,s.context=Jl(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Bv(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Cm.enqueueReplaceState(s,s.state,null),Hh(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ec(t,e){try{var n="",r=e;do n+=qD(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function oy(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function zv(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var v$=typeof WeakMap=="function"?WeakMap:Map;function xO(t,e,n){n=Ks(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Qh||(Qh=!0,Zv=r),zv(t,e)},n}function bO(t,e,n){n=Ks(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){zv(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){zv(t,e),typeof r!="function"&&(Zi===null?Zi=new Set([this]):Zi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Wk(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new v$;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=j$.bind(null,t,e,n),e.then(t,t))}function Kk(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Gk(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ks(-1,1),e.tag=2,Yi(n,e,1))),n.lanes|=1),t)}var x$=si.ReactCurrentOwner,Fn=!1;function bn(t,e,n,r){e.child=t===null?QT(e,null,n,r):Zl(e,t.child,n,r)}function Qk(t,e,n,r,s){n=n.render;var i=e.ref;return Tl(e,s),r=Nb(t,e,n,r,i,s),n=Tb(),t!==null&&!Fn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ni(t,e,s)):(it&&n&&mb(e),e.flags|=1,bn(t,e,r,s),e.child)}function Jk(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!$b(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,wO(t,e,i,r,s)):(t=yh(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Yu,n(o,r)&&t.ref===e.ref)return ni(t,e,s)}return e.flags|=1,t=eo(i,r),t.ref=e.ref,t.return=e,e.child=t}function wO(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Yu(i,r)&&t.ref===e.ref)if(Fn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Fn=!0);else return e.lanes=t.lanes,ni(t,e,s)}return Vv(t,e,n,r,s)}function SO(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Je(wl,qn),qn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Je(wl,qn),qn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Je(wl,qn),qn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Je(wl,qn),qn|=r;return bn(t,e,s,n),e.child}function kO(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Vv(t,e,n,r,s){var i=Un(n)?fa:pn.current;return i=Jl(e,i),Tl(e,s),n=Nb(t,e,n,r,i,s),r=Tb(),t!==null&&!Fn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ni(t,e,s)):(it&&r&&mb(e),e.flags|=1,bn(t,e,n,s),e.child)}function Yk(t,e,n,r,s){if(Un(n)){var i=!0;Fh(e)}else i=!1;if(Tl(e,s),e.stateNode===null)ph(t,e),vO(e,n,r),Uv(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=_r(c):(c=Un(n)?fa:pn.current,c=Jl(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&qk(e,o,r,c),xi=!1;var f=e.memoizedState;o.state=f,Hh(e,r,o,s),l=e.memoizedState,a!==r||f!==l||Bn.current||xi?(typeof u=="function"&&(Bv(e,n,u,r),l=e.memoizedState),(a=xi||Hk(e,n,a,r,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,YT(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:jr(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=_r(l):(l=Un(n)?fa:pn.current,l=Jl(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&qk(e,o,r,l),xi=!1,f=e.memoizedState,o.state=f,Hh(e,r,o,s);var m=e.memoizedState;a!==d||f!==m||Bn.current||xi?(typeof p=="function"&&(Bv(e,n,p,r),m=e.memoizedState),(c=xi||Hk(e,n,c,r,f,m,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Hv(t,e,n,r,i,s)}function Hv(t,e,n,r,s,i){kO(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Dk(e,n,!1),ni(t,e,i);r=e.stateNode,x$.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Zl(e,t.child,null,i),e.child=Zl(e,null,a,i)):bn(t,e,a,i),e.memoizedState=r.state,s&&Dk(e,n,!0),e.child}function _O(t){var e=t.stateNode;e.pendingContext?Mk(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Mk(t,e.context,!1),kb(t,e.containerInfo)}function Zk(t,e,n,r,s){return Yl(),yb(s),e.flags|=256,bn(t,e,n,r),e.child}var qv={dehydrated:null,treeContext:null,retryLane:0};function Wv(t){return{baseLanes:t,cachePool:null,transitions:null}}function EO(t,e,n){var r=e.pendingProps,s=lt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Je(lt,s&1),t===null)return $v(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Om(o,r,0,null),t=oa(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Wv(n),e.memoizedState=qv,t):Rb(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return b$(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=eo(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=eo(a,i):(i=oa(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Wv(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=qv,r}return i=t.child,t=i.sibling,r=eo(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Rb(t,e){return e=Om({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function bf(t,e,n,r){return r!==null&&yb(r),Zl(e,t.child,null,n),t=Rb(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function b$(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=oy(Error(F(422))),bf(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Om({mode:"visible",children:r.children},s,0,null),i=oa(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Zl(e,t.child,null,o),e.child.memoizedState=Wv(o),e.memoizedState=qv,i);if(!(e.mode&1))return bf(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(F(419)),r=oy(i,r,void 0),bf(t,e,o,r)}if(a=(o&t.childLanes)!==0,Fn||a){if(r=Vt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ti(t,s),qr(r,t,s,-1))}return Lb(),r=oy(Error(F(421))),bf(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=I$.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Yn=Ji(s.nextSibling),Zn=e,it=!0,Lr=null,t!==null&&(pr[mr++]=Us,pr[mr++]=zs,pr[mr++]=ha,Us=t.id,zs=t.overflow,ha=e),e=Rb(e,r.children),e.flags|=4096,e)}function Xk(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Fv(t.return,e,n)}function ay(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function CO(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(bn(t,e,r.children,n),r=lt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Xk(t,n,e);else if(t.tag===19)Xk(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Je(lt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&qh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),ay(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&qh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}ay(e,!0,n,null,i);break;case"together":ay(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ph(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ni(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ma|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,n=eo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=eo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function w$(t,e,n){switch(e.tag){case 3:_O(e),Yl();break;case 5:ZT(e);break;case 1:Un(e.type)&&Fh(e);break;case 4:kb(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Je(zh,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Je(lt,lt.current&1),e.flags|=128,null):n&e.child.childLanes?EO(t,e,n):(Je(lt,lt.current&1),t=ni(t,e,n),t!==null?t.sibling:null);Je(lt,lt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return CO(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Je(lt,lt.current),r)break;return null;case 22:case 23:return e.lanes=0,SO(t,e,n)}return ni(t,e,n)}var NO,Kv,TO,OO;NO=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Kv=function(){};TO=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Vo(ds.current);var i=null;switch(n){case"input":s=mv(t,s),r=mv(t,r),i=[];break;case"select":s=dt({},s,{value:void 0}),r=dt({},r,{value:void 0}),i=[];break;case"textarea":s=vv(t,s),r=vv(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Lh)}bv(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Hu.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Hu.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ze("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};OO=function(t,e,n,r){n!==r&&(e.flags|=4)};function Kc(t,e){if(!it)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function an(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function S$(t,e,n){var r=e.pendingProps;switch(gb(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return an(e),null;case 1:return Un(e.type)&&$h(),an(e),null;case 3:return r=e.stateNode,Xl(),et(Bn),et(pn),Eb(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(vf(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Lr!==null&&(t0(Lr),Lr=null))),Kv(t,e),an(e),null;case 5:_b(e);var s=Vo(nd.current);if(n=e.type,t!==null&&e.stateNode!=null)TO(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(F(166));return an(e),null}if(t=Vo(ds.current),vf(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[as]=e,r[ed]=i,t=(e.mode&1)!==0,n){case"dialog":Ze("cancel",r),Ze("close",r);break;case"iframe":case"object":case"embed":Ze("load",r);break;case"video":case"audio":for(s=0;s<au.length;s++)Ze(au[s],r);break;case"source":Ze("error",r);break;case"img":case"image":case"link":Ze("error",r),Ze("load",r);break;case"details":Ze("toggle",r);break;case"input":lk(r,i),Ze("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ze("invalid",r);break;case"textarea":uk(r,i),Ze("invalid",r)}bv(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&yf(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&yf(r.textContent,a,t),s=["children",""+a]):Hu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ze("scroll",r)}switch(n){case"input":cf(r),ck(r,i,!0);break;case"textarea":cf(r),dk(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Lh)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=rT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[as]=e,t[ed]=r,NO(t,e,!1,!1),e.stateNode=t;e:{switch(o=wv(n,r),n){case"dialog":Ze("cancel",t),Ze("close",t),s=r;break;case"iframe":case"object":case"embed":Ze("load",t),s=r;break;case"video":case"audio":for(s=0;s<au.length;s++)Ze(au[s],t);s=r;break;case"source":Ze("error",t),s=r;break;case"img":case"image":case"link":Ze("error",t),Ze("load",t),s=r;break;case"details":Ze("toggle",t),s=r;break;case"input":lk(t,r),s=mv(t,r),Ze("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=dt({},r,{value:void 0}),Ze("invalid",t);break;case"textarea":uk(t,r),s=vv(t,r),Ze("invalid",t);break;default:s=r}bv(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?oT(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&sT(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&qu(t,l):typeof l=="number"&&qu(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Hu.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Ze("scroll",t):l!=null&&tb(t,i,l,o))}switch(n){case"input":cf(t),ck(t,r,!1);break;case"textarea":cf(t),dk(t);break;case"option":r.value!=null&&t.setAttribute("value",""+uo(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?_l(t,!!r.multiple,i,!1):r.defaultValue!=null&&_l(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Lh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return an(e),null;case 6:if(t&&e.stateNode!=null)OO(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(F(166));if(n=Vo(nd.current),Vo(ds.current),vf(e)){if(r=e.stateNode,n=e.memoizedProps,r[as]=e,(i=r.nodeValue!==n)&&(t=Zn,t!==null))switch(t.tag){case 3:yf(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&yf(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[as]=e,e.stateNode=r}return an(e),null;case 13:if(et(lt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(it&&Yn!==null&&e.mode&1&&!(e.flags&128))KT(),Yl(),e.flags|=98560,i=!1;else if(i=vf(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(F(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(F(317));i[as]=e}else Yl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;an(e),i=!1}else Lr!==null&&(t0(Lr),Lr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||lt.current&1?Lt===0&&(Lt=3):Lb())),e.updateQueue!==null&&(e.flags|=4),an(e),null);case 4:return Xl(),Kv(t,e),t===null&&Zu(e.stateNode.containerInfo),an(e),null;case 10:return bb(e.type._context),an(e),null;case 17:return Un(e.type)&&$h(),an(e),null;case 19:if(et(lt),i=e.memoizedState,i===null)return an(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Kc(i,!1);else{if(Lt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=qh(t),o!==null){for(e.flags|=128,Kc(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Je(lt,lt.current&1|2),e.child}t=t.sibling}i.tail!==null&&xt()>tc&&(e.flags|=128,r=!0,Kc(i,!1),e.lanes=4194304)}else{if(!r)if(t=qh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Kc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!it)return an(e),null}else 2*xt()-i.renderingStartTime>tc&&n!==1073741824&&(e.flags|=128,r=!0,Kc(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=xt(),e.sibling=null,n=lt.current,Je(lt,r?n&1|2:n&1),e):(an(e),null);case 22:case 23:return Db(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?qn&1073741824&&(an(e),e.subtreeFlags&6&&(e.flags|=8192)):an(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function k$(t,e){switch(gb(e),e.tag){case 1:return Un(e.type)&&$h(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Xl(),et(Bn),et(pn),Eb(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return _b(e),null;case 13:if(et(lt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));Yl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return et(lt),null;case 4:return Xl(),null;case 10:return bb(e.type._context),null;case 22:case 23:return Db(),null;case 24:return null;default:return null}}var wf=!1,un=!1,_$=typeof WeakSet=="function"?WeakSet:Set,ne=null;function bl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){gt(t,e,r)}else n.current=null}function Gv(t,e,n){try{n()}catch(r){gt(t,e,r)}}var e_=!1;function E$(t,e){if(Rv=Ph,t=PT(),pb(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var p;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===n&&++c===s&&(a=o),f===i&&++u===r&&(l=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(jv={focusedElem:t,selectionRange:n},Ph=!1,ne=e;ne!==null;)if(e=ne,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ne=t;else for(;ne!==null;){e=ne;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,y=m.memoizedState,v=e.stateNode,x=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:jr(e.type,g),y);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(S){gt(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,ne=t;break}ne=e.return}return m=e_,e_=!1,m}function Cu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Gv(e,n,i)}s=s.next}while(s!==r)}}function Nm(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Qv(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function AO(t){var e=t.alternate;e!==null&&(t.alternate=null,AO(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[as],delete e[ed],delete e[Mv],delete e[a$],delete e[l$])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function RO(t){return t.tag===5||t.tag===3||t.tag===4}function t_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||RO(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Jv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Lh));else if(r!==4&&(t=t.child,t!==null))for(Jv(t,e,n),t=t.sibling;t!==null;)Jv(t,e,n),t=t.sibling}function Yv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Yv(t,e,n),t=t.sibling;t!==null;)Yv(t,e,n),t=t.sibling}var Jt=null,Mr=!1;function ui(t,e,n){for(n=n.child;n!==null;)jO(t,e,n),n=n.sibling}function jO(t,e,n){if(us&&typeof us.onCommitFiberUnmount=="function")try{us.onCommitFiberUnmount(xm,n)}catch{}switch(n.tag){case 5:un||bl(n,e);case 6:var r=Jt,s=Mr;Jt=null,ui(t,e,n),Jt=r,Mr=s,Jt!==null&&(Mr?(t=Jt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Jt.removeChild(n.stateNode));break;case 18:Jt!==null&&(Mr?(t=Jt,n=n.stateNode,t.nodeType===8?ey(t.parentNode,n):t.nodeType===1&&ey(t,n),Qu(t)):ey(Jt,n.stateNode));break;case 4:r=Jt,s=Mr,Jt=n.stateNode.containerInfo,Mr=!0,ui(t,e,n),Jt=r,Mr=s;break;case 0:case 11:case 14:case 15:if(!un&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Gv(n,e,o),s=s.next}while(s!==r)}ui(t,e,n);break;case 1:if(!un&&(bl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){gt(n,e,a)}ui(t,e,n);break;case 21:ui(t,e,n);break;case 22:n.mode&1?(un=(r=un)||n.memoizedState!==null,ui(t,e,n),un=r):ui(t,e,n);break;default:ui(t,e,n)}}function n_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new _$),e.forEach(function(r){var s=P$.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Tr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Jt=a.stateNode,Mr=!1;break e;case 3:Jt=a.stateNode.containerInfo,Mr=!0;break e;case 4:Jt=a.stateNode.containerInfo,Mr=!0;break e}a=a.return}if(Jt===null)throw Error(F(160));jO(i,o,s),Jt=null,Mr=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){gt(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)IO(e,t),e=e.sibling}function IO(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Tr(e,t),Xr(t),r&4){try{Cu(3,t,t.return),Nm(3,t)}catch(g){gt(t,t.return,g)}try{Cu(5,t,t.return)}catch(g){gt(t,t.return,g)}}break;case 1:Tr(e,t),Xr(t),r&512&&n!==null&&bl(n,n.return);break;case 5:if(Tr(e,t),Xr(t),r&512&&n!==null&&bl(n,n.return),t.flags&32){var s=t.stateNode;try{qu(s,"")}catch(g){gt(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&tT(s,i),wv(a,o);var c=wv(a,i);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?oT(s,d):u==="dangerouslySetInnerHTML"?sT(s,d):u==="children"?qu(s,d):tb(s,u,d,c)}switch(a){case"input":gv(s,i);break;case"textarea":nT(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?_l(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?_l(s,!!i.multiple,i.defaultValue,!0):_l(s,!!i.multiple,i.multiple?[]:"",!1))}s[ed]=i}catch(g){gt(t,t.return,g)}}break;case 6:if(Tr(e,t),Xr(t),r&4){if(t.stateNode===null)throw Error(F(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){gt(t,t.return,g)}}break;case 3:if(Tr(e,t),Xr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Qu(e.containerInfo)}catch(g){gt(t,t.return,g)}break;case 4:Tr(e,t),Xr(t);break;case 13:Tr(e,t),Xr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Pb=xt())),r&4&&n_(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(un=(c=un)||u,Tr(e,t),un=c):Tr(e,t),Xr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(ne=t,u=t.child;u!==null;){for(d=ne=u;ne!==null;){switch(f=ne,p=f.child,f.tag){case 0:case 11:case 14:case 15:Cu(4,f,f.return);break;case 1:bl(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){gt(r,n,g)}}break;case 5:bl(f,f.return);break;case 22:if(f.memoizedState!==null){s_(d);continue}}p!==null?(p.return=f,ne=p):s_(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=iT("display",o))}catch(g){gt(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){gt(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Tr(e,t),Xr(t),r&4&&n_(t);break;case 21:break;default:Tr(e,t),Xr(t)}}function Xr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(RO(n)){var r=n;break e}n=n.return}throw Error(F(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(qu(s,""),r.flags&=-33);var i=t_(t);Yv(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=t_(t);Jv(t,a,o);break;default:throw Error(F(161))}}catch(l){gt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function C$(t,e,n){ne=t,PO(t)}function PO(t,e,n){for(var r=(t.mode&1)!==0;ne!==null;){var s=ne,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||wf;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||un;a=wf;var c=un;if(wf=o,(un=l)&&!c)for(ne=s;ne!==null;)o=ne,l=o.child,o.tag===22&&o.memoizedState!==null?i_(s):l!==null?(l.return=o,ne=l):i_(s);for(;i!==null;)ne=i,PO(i),i=i.sibling;ne=s,wf=a,un=c}r_(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ne=i):r_(t)}}function r_(t){for(;ne!==null;){var e=ne;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:un||Nm(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!un)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:jr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Uk(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Uk(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Qu(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}un||e.flags&512&&Qv(e)}catch(f){gt(e,e.return,f)}}if(e===t){ne=null;break}if(n=e.sibling,n!==null){n.return=e.return,ne=n;break}ne=e.return}}function s_(t){for(;ne!==null;){var e=ne;if(e===t){ne=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ne=n;break}ne=e.return}}function i_(t){for(;ne!==null;){var e=ne;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Nm(4,e)}catch(l){gt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){gt(e,s,l)}}var i=e.return;try{Qv(e)}catch(l){gt(e,i,l)}break;case 5:var o=e.return;try{Qv(e)}catch(l){gt(e,o,l)}}}catch(l){gt(e,e.return,l)}if(e===t){ne=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ne=a;break}ne=e.return}}var N$=Math.ceil,Gh=si.ReactCurrentDispatcher,jb=si.ReactCurrentOwner,br=si.ReactCurrentBatchConfig,Oe=0,Vt=null,Ct=null,tn=0,qn=0,wl=wo(0),Lt=0,od=null,ma=0,Tm=0,Ib=0,Nu=null,Ln=null,Pb=0,tc=1/0,Rs=null,Qh=!1,Zv=null,Zi=null,Sf=!1,zi=null,Jh=0,Tu=0,Xv=null,mh=-1,gh=0;function En(){return Oe&6?xt():mh!==-1?mh:mh=xt()}function Xi(t){return t.mode&1?Oe&2&&tn!==0?tn&-tn:u$.transition!==null?(gh===0&&(gh=vT()),gh):(t=He,t!==0||(t=window.event,t=t===void 0?16:ET(t.type)),t):1}function qr(t,e,n,r){if(50<Tu)throw Tu=0,Xv=null,Error(F(185));zd(t,n,r),(!(Oe&2)||t!==Vt)&&(t===Vt&&(!(Oe&2)&&(Tm|=n),Lt===4&&Ni(t,tn)),zn(t,r),n===1&&Oe===0&&!(e.mode&1)&&(tc=xt()+500,_m&&So()))}function zn(t,e){var n=t.callbackNode;uL(t,e);var r=Ih(t,t===Vt?tn:0);if(r===0)n!==null&&pk(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&pk(n),e===1)t.tag===0?c$(o_.bind(null,t)):HT(o_.bind(null,t)),i$(function(){!(Oe&6)&&So()}),n=null;else{switch(xT(r)){case 1:n=ob;break;case 4:n=gT;break;case 16:n=jh;break;case 536870912:n=yT;break;default:n=jh}n=zO(n,MO.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function MO(t,e){if(mh=-1,gh=0,Oe&6)throw Error(F(327));var n=t.callbackNode;if(Ol()&&t.callbackNode!==n)return null;var r=Ih(t,t===Vt?tn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Yh(t,r);else{e=r;var s=Oe;Oe|=2;var i=LO();(Vt!==t||tn!==e)&&(Rs=null,tc=xt()+500,ia(t,e));do try{A$();break}catch(a){DO(t,a)}while(!0);xb(),Gh.current=i,Oe=s,Ct!==null?e=0:(Vt=null,tn=0,e=Lt)}if(e!==0){if(e===2&&(s=Cv(t),s!==0&&(r=s,e=e0(t,s))),e===1)throw n=od,ia(t,0),Ni(t,r),zn(t,xt()),n;if(e===6)Ni(t,r);else{if(s=t.current.alternate,!(r&30)&&!T$(s)&&(e=Yh(t,r),e===2&&(i=Cv(t),i!==0&&(r=i,e=e0(t,i))),e===1))throw n=od,ia(t,0),Ni(t,r),zn(t,xt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(F(345));case 2:Do(t,Ln,Rs);break;case 3:if(Ni(t,r),(r&130023424)===r&&(e=Pb+500-xt(),10<e)){if(Ih(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){En(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Pv(Do.bind(null,t,Ln,Rs),e);break}Do(t,Ln,Rs);break;case 4:if(Ni(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Hr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=xt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*N$(r/1960))-r,10<r){t.timeoutHandle=Pv(Do.bind(null,t,Ln,Rs),r);break}Do(t,Ln,Rs);break;case 5:Do(t,Ln,Rs);break;default:throw Error(F(329))}}}return zn(t,xt()),t.callbackNode===n?MO.bind(null,t):null}function e0(t,e){var n=Nu;return t.current.memoizedState.isDehydrated&&(ia(t,e).flags|=256),t=Yh(t,e),t!==2&&(e=Ln,Ln=n,e!==null&&t0(e)),t}function t0(t){Ln===null?Ln=t:Ln.push.apply(Ln,t)}function T$(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Gr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ni(t,e){for(e&=~Ib,e&=~Tm,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Hr(e),r=1<<n;t[n]=-1,e&=~r}}function o_(t){if(Oe&6)throw Error(F(327));Ol();var e=Ih(t,0);if(!(e&1))return zn(t,xt()),null;var n=Yh(t,e);if(t.tag!==0&&n===2){var r=Cv(t);r!==0&&(e=r,n=e0(t,r))}if(n===1)throw n=od,ia(t,0),Ni(t,e),zn(t,xt()),n;if(n===6)throw Error(F(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Do(t,Ln,Rs),zn(t,xt()),null}function Mb(t,e){var n=Oe;Oe|=1;try{return t(e)}finally{Oe=n,Oe===0&&(tc=xt()+500,_m&&So())}}function ga(t){zi!==null&&zi.tag===0&&!(Oe&6)&&Ol();var e=Oe;Oe|=1;var n=br.transition,r=He;try{if(br.transition=null,He=1,t)return t()}finally{He=r,br.transition=n,Oe=e,!(Oe&6)&&So()}}function Db(){qn=wl.current,et(wl)}function ia(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,s$(n)),Ct!==null)for(n=Ct.return;n!==null;){var r=n;switch(gb(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&$h();break;case 3:Xl(),et(Bn),et(pn),Eb();break;case 5:_b(r);break;case 4:Xl();break;case 13:et(lt);break;case 19:et(lt);break;case 10:bb(r.type._context);break;case 22:case 23:Db()}n=n.return}if(Vt=t,Ct=t=eo(t.current,null),tn=qn=e,Lt=0,od=null,Ib=Tm=ma=0,Ln=Nu=null,zo!==null){for(e=0;e<zo.length;e++)if(n=zo[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}zo=null}return t}function DO(t,e){do{var n=Ct;try{if(xb(),fh.current=Kh,Wh){for(var r=ut.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Wh=!1}if(pa=0,Bt=Mt=ut=null,Eu=!1,rd=0,jb.current=null,n===null||n.return===null){Lt=1,od=e,Ct=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=tn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=Kk(o);if(p!==null){p.flags&=-257,Gk(p,o,a,i,e),p.mode&1&&Wk(i,c,e),e=p,l=c;var m=e.updateQueue;if(m===null){var g=new Set;g.add(l),e.updateQueue=g}else m.add(l);break e}else{if(!(e&1)){Wk(i,c,e),Lb();break e}l=Error(F(426))}}else if(it&&a.mode&1){var y=Kk(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),Gk(y,o,a,i,e),yb(ec(l,a));break e}}i=l=ec(l,a),Lt!==4&&(Lt=2),Nu===null?Nu=[i]:Nu.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=xO(i,l,e);Bk(i,v);break e;case 1:a=l;var x=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Zi===null||!Zi.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var S=bO(i,a,e);Bk(i,S);break e}}i=i.return}while(i!==null)}FO(n)}catch(k){e=k,Ct===n&&n!==null&&(Ct=n=n.return);continue}break}while(!0)}function LO(){var t=Gh.current;return Gh.current=Kh,t===null?Kh:t}function Lb(){(Lt===0||Lt===3||Lt===2)&&(Lt=4),Vt===null||!(ma&268435455)&&!(Tm&268435455)||Ni(Vt,tn)}function Yh(t,e){var n=Oe;Oe|=2;var r=LO();(Vt!==t||tn!==e)&&(Rs=null,ia(t,e));do try{O$();break}catch(s){DO(t,s)}while(!0);if(xb(),Oe=n,Gh.current=r,Ct!==null)throw Error(F(261));return Vt=null,tn=0,Lt}function O$(){for(;Ct!==null;)$O(Ct)}function A$(){for(;Ct!==null&&!tL();)$O(Ct)}function $O(t){var e=UO(t.alternate,t,qn);t.memoizedProps=t.pendingProps,e===null?FO(t):Ct=e,jb.current=null}function FO(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=k$(n,e),n!==null){n.flags&=32767,Ct=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Lt=6,Ct=null;return}}else if(n=S$(n,e,qn),n!==null){Ct=n;return}if(e=e.sibling,e!==null){Ct=e;return}Ct=e=t}while(e!==null);Lt===0&&(Lt=5)}function Do(t,e,n){var r=He,s=br.transition;try{br.transition=null,He=1,R$(t,e,n,r)}finally{br.transition=s,He=r}return null}function R$(t,e,n,r){do Ol();while(zi!==null);if(Oe&6)throw Error(F(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(F(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(dL(t,i),t===Vt&&(Ct=Vt=null,tn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Sf||(Sf=!0,zO(jh,function(){return Ol(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=br.transition,br.transition=null;var o=He;He=1;var a=Oe;Oe|=4,jb.current=null,E$(t,n),IO(n,t),YL(jv),Ph=!!Rv,jv=Rv=null,t.current=n,C$(n),nL(),Oe=a,He=o,br.transition=i}else t.current=n;if(Sf&&(Sf=!1,zi=t,Jh=s),i=t.pendingLanes,i===0&&(Zi=null),iL(n.stateNode),zn(t,xt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Qh)throw Qh=!1,t=Zv,Zv=null,t;return Jh&1&&t.tag!==0&&Ol(),i=t.pendingLanes,i&1?t===Xv?Tu++:(Tu=0,Xv=t):Tu=0,So(),null}function Ol(){if(zi!==null){var t=xT(Jh),e=br.transition,n=He;try{if(br.transition=null,He=16>t?16:t,zi===null)var r=!1;else{if(t=zi,zi=null,Jh=0,Oe&6)throw Error(F(331));var s=Oe;for(Oe|=4,ne=t.current;ne!==null;){var i=ne,o=i.child;if(ne.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ne=c;ne!==null;){var u=ne;switch(u.tag){case 0:case 11:case 15:Cu(8,u,i)}var d=u.child;if(d!==null)d.return=u,ne=d;else for(;ne!==null;){u=ne;var f=u.sibling,p=u.return;if(AO(u),u===c){ne=null;break}if(f!==null){f.return=p,ne=f;break}ne=p}}}var m=i.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}ne=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ne=o;else e:for(;ne!==null;){if(i=ne,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Cu(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,ne=v;break e}ne=i.return}}var x=t.current;for(ne=x;ne!==null;){o=ne;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,ne=b;else e:for(o=x;ne!==null;){if(a=ne,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Nm(9,a)}}catch(k){gt(a,a.return,k)}if(a===o){ne=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,ne=S;break e}ne=a.return}}if(Oe=s,So(),us&&typeof us.onPostCommitFiberRoot=="function")try{us.onPostCommitFiberRoot(xm,t)}catch{}r=!0}return r}finally{He=n,br.transition=e}}return!1}function a_(t,e,n){e=ec(n,e),e=xO(t,e,1),t=Yi(t,e,1),e=En(),t!==null&&(zd(t,1,e),zn(t,e))}function gt(t,e,n){if(t.tag===3)a_(t,t,n);else for(;e!==null;){if(e.tag===3){a_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Zi===null||!Zi.has(r))){t=ec(n,t),t=bO(e,t,1),e=Yi(e,t,1),t=En(),e!==null&&(zd(e,1,t),zn(e,t));break}}e=e.return}}function j$(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=En(),t.pingedLanes|=t.suspendedLanes&n,Vt===t&&(tn&n)===n&&(Lt===4||Lt===3&&(tn&130023424)===tn&&500>xt()-Pb?ia(t,0):Ib|=n),zn(t,e)}function BO(t,e){e===0&&(t.mode&1?(e=ff,ff<<=1,!(ff&130023424)&&(ff=4194304)):e=1);var n=En();t=ti(t,e),t!==null&&(zd(t,e,n),zn(t,n))}function I$(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),BO(t,n)}function P$(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(F(314))}r!==null&&r.delete(e),BO(t,n)}var UO;UO=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Bn.current)Fn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Fn=!1,w$(t,e,n);Fn=!!(t.flags&131072)}else Fn=!1,it&&e.flags&1048576&&qT(e,Uh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ph(t,e),t=e.pendingProps;var s=Jl(e,pn.current);Tl(e,n),s=Nb(null,e,r,t,s,n);var i=Tb();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Un(r)?(i=!0,Fh(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Sb(e),s.updater=Cm,e.stateNode=s,s._reactInternals=e,Uv(e,r,t,n),e=Hv(null,e,r,!0,i,n)):(e.tag=0,it&&i&&mb(e),bn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ph(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=D$(r),t=jr(r,t),s){case 0:e=Vv(null,e,r,t,n);break e;case 1:e=Yk(null,e,r,t,n);break e;case 11:e=Qk(null,e,r,t,n);break e;case 14:e=Jk(null,e,r,jr(r.type,t),n);break e}throw Error(F(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:jr(r,s),Vv(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:jr(r,s),Yk(t,e,r,s,n);case 3:e:{if(_O(e),t===null)throw Error(F(387));r=e.pendingProps,i=e.memoizedState,s=i.element,YT(t,e),Hh(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ec(Error(F(423)),e),e=Zk(t,e,r,n,s);break e}else if(r!==s){s=ec(Error(F(424)),e),e=Zk(t,e,r,n,s);break e}else for(Yn=Ji(e.stateNode.containerInfo.firstChild),Zn=e,it=!0,Lr=null,n=QT(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Yl(),r===s){e=ni(t,e,n);break e}bn(t,e,r,n)}e=e.child}return e;case 5:return ZT(e),t===null&&$v(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Iv(r,s)?o=null:i!==null&&Iv(r,i)&&(e.flags|=32),kO(t,e),bn(t,e,o,n),e.child;case 6:return t===null&&$v(e),null;case 13:return EO(t,e,n);case 4:return kb(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Zl(e,null,r,n):bn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:jr(r,s),Qk(t,e,r,s,n);case 7:return bn(t,e,e.pendingProps,n),e.child;case 8:return bn(t,e,e.pendingProps.children,n),e.child;case 12:return bn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Je(zh,r._currentValue),r._currentValue=o,i!==null)if(Gr(i.value,o)){if(i.children===s.children&&!Bn.current){e=ni(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Ks(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Fv(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(F(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Fv(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}bn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Tl(e,n),s=_r(s),r=r(s),e.flags|=1,bn(t,e,r,n),e.child;case 14:return r=e.type,s=jr(r,e.pendingProps),s=jr(r.type,s),Jk(t,e,r,s,n);case 15:return wO(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:jr(r,s),ph(t,e),e.tag=1,Un(r)?(t=!0,Fh(e)):t=!1,Tl(e,n),vO(e,r,s),Uv(e,r,s,n),Hv(null,e,r,!0,t,n);case 19:return CO(t,e,n);case 22:return SO(t,e,n)}throw Error(F(156,e.tag))};function zO(t,e){return mT(t,e)}function M$(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vr(t,e,n,r){return new M$(t,e,n,r)}function $b(t){return t=t.prototype,!(!t||!t.isReactComponent)}function D$(t){if(typeof t=="function")return $b(t)?1:0;if(t!=null){if(t=t.$$typeof,t===rb)return 11;if(t===sb)return 14}return 2}function eo(t,e){var n=t.alternate;return n===null?(n=vr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function yh(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")$b(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case dl:return oa(n.children,s,i,e);case nb:o=8,s|=8;break;case dv:return t=vr(12,n,e,s|2),t.elementType=dv,t.lanes=i,t;case fv:return t=vr(13,n,e,s),t.elementType=fv,t.lanes=i,t;case hv:return t=vr(19,n,e,s),t.elementType=hv,t.lanes=i,t;case ZN:return Om(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case JN:o=10;break e;case YN:o=9;break e;case rb:o=11;break e;case sb:o=14;break e;case vi:o=16,r=null;break e}throw Error(F(130,t==null?t:typeof t,""))}return e=vr(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function oa(t,e,n,r){return t=vr(7,t,r,e),t.lanes=n,t}function Om(t,e,n,r){return t=vr(22,t,r,e),t.elementType=ZN,t.lanes=n,t.stateNode={isHidden:!1},t}function ly(t,e,n){return t=vr(6,t,null,e),t.lanes=n,t}function cy(t,e,n){return e=vr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function L$(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vg(0),this.expirationTimes=Vg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vg(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Fb(t,e,n,r,s,i,o,a,l){return t=new L$(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=vr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sb(i),t}function $$(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ul,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function VO(t){if(!t)return fo;t=t._reactInternals;e:{if(Ma(t)!==t||t.tag!==1)throw Error(F(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Un(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(t.tag===1){var n=t.type;if(Un(n))return VT(t,n,e)}return e}function HO(t,e,n,r,s,i,o,a,l){return t=Fb(n,r,!0,t,s,i,o,a,l),t.context=VO(null),n=t.current,r=En(),s=Xi(n),i=Ks(r,s),i.callback=e??null,Yi(n,i,s),t.current.lanes=s,zd(t,s,r),zn(t,r),t}function Am(t,e,n,r){var s=e.current,i=En(),o=Xi(s);return n=VO(n),e.context===null?e.context=n:e.pendingContext=n,e=Ks(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Yi(s,e,o),t!==null&&(qr(t,s,o,i),dh(t,s,o)),o}function Zh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function l_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Bb(t,e){l_(t,e),(t=t.alternate)&&l_(t,e)}function F$(){return null}var qO=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ub(t){this._internalRoot=t}Rm.prototype.render=Ub.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));Am(t,e,null,null)};Rm.prototype.unmount=Ub.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ga(function(){Am(null,t,null,null)}),e[ei]=null}};function Rm(t){this._internalRoot=t}Rm.prototype.unstable_scheduleHydration=function(t){if(t){var e=ST();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ci.length&&e!==0&&e<Ci[n].priority;n++);Ci.splice(n,0,t),n===0&&_T(t)}};function zb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function jm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function c_(){}function B$(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Zh(o);i.call(c)}}var o=HO(e,r,t,0,null,!1,!1,"",c_);return t._reactRootContainer=o,t[ei]=o.current,Zu(t.nodeType===8?t.parentNode:t),ga(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Zh(l);a.call(c)}}var l=Fb(t,0,!1,null,null,!1,!1,"",c_);return t._reactRootContainer=l,t[ei]=l.current,Zu(t.nodeType===8?t.parentNode:t),ga(function(){Am(e,l,n,r)}),l}function Im(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Zh(o);a.call(l)}}Am(e,o,t,s)}else o=B$(n,e,t,s,r);return Zh(o)}bT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ou(e.pendingLanes);n!==0&&(ab(e,n|1),zn(e,xt()),!(Oe&6)&&(tc=xt()+500,So()))}break;case 13:ga(function(){var r=ti(t,1);if(r!==null){var s=En();qr(r,t,1,s)}}),Bb(t,1)}};lb=function(t){if(t.tag===13){var e=ti(t,134217728);if(e!==null){var n=En();qr(e,t,134217728,n)}Bb(t,134217728)}};wT=function(t){if(t.tag===13){var e=Xi(t),n=ti(t,e);if(n!==null){var r=En();qr(n,t,e,r)}Bb(t,e)}};ST=function(){return He};kT=function(t,e){var n=He;try{return He=t,e()}finally{He=n}};kv=function(t,e,n){switch(e){case"input":if(gv(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=km(r);if(!s)throw Error(F(90));eT(r),gv(r,s)}}}break;case"textarea":nT(t,n);break;case"select":e=n.value,e!=null&&_l(t,!!n.multiple,e,!1)}};cT=Mb;uT=ga;var U$={usingClientEntryPoint:!1,Events:[Hd,ml,km,aT,lT,Mb]},Gc={findFiberByHostInstance:Uo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},z$={bundleType:Gc.bundleType,version:Gc.version,rendererPackageName:Gc.rendererPackageName,rendererConfig:Gc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:si.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=hT(t),t===null?null:t.stateNode},findFiberByHostInstance:Gc.findFiberByHostInstance||F$,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kf.isDisabled&&kf.supportsFiber)try{xm=kf.inject(z$),us=kf}catch{}}sr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U$;sr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zb(e))throw Error(F(200));return $$(t,e,null,n)};sr.createRoot=function(t,e){if(!zb(t))throw Error(F(299));var n=!1,r="",s=qO;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Fb(t,1,!1,null,null,n,!1,r,s),t[ei]=e.current,Zu(t.nodeType===8?t.parentNode:t),new Ub(e)};sr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=hT(e),t=t===null?null:t.stateNode,t};sr.flushSync=function(t){return ga(t)};sr.hydrate=function(t,e,n){if(!jm(e))throw Error(F(200));return Im(null,t,e,!0,n)};sr.hydrateRoot=function(t,e,n){if(!zb(t))throw Error(F(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=qO;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=HO(e,null,t,1,n??null,s,!1,i,o),t[ei]=e.current,Zu(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Rm(e)};sr.render=function(t,e,n){if(!jm(e))throw Error(F(200));return Im(null,t,e,!1,n)};sr.unmountComponentAtNode=function(t){if(!jm(t))throw Error(F(40));return t._reactRootContainer?(ga(function(){Im(null,null,t,!1,function(){t._reactRootContainer=null,t[ei]=null})}),!0):!1};sr.unstable_batchedUpdates=Mb;sr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!jm(n))throw Error(F(200));if(t==null||t._reactInternals===void 0)throw Error(F(38));return Im(t,e,n,!1,r)};sr.version="18.3.1-next-f1338f8080-20240426";function WO(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(WO)}catch(t){console.error(t)}}WO(),WN.exports=sr;var ko=WN.exports;const KO=PN(ko);var u_=ko;cv.createRoot=u_.createRoot,cv.hydrateRoot=u_.hydrateRoot;const GO=Object.prototype.toString;function Vb(t){switch(GO.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return ya(t,Error)}}function Nc(t,e){return GO.call(t)===`[object ${e}]`}function Hb(t){return Nc(t,"ErrorEvent")}function d_(t){return Nc(t,"DOMError")}function V$(t){return Nc(t,"DOMException")}function Gs(t){return Nc(t,"String")}function qb(t){return typeof t=="object"&&t!==null&&"__sentry_template_string__"in t&&"__sentry_template_values__"in t}function Wb(t){return t===null||qb(t)||typeof t!="object"&&typeof t!="function"}function nc(t){return Nc(t,"Object")}function Pm(t){return typeof Event<"u"&&ya(t,Event)}function H$(t){return typeof Element<"u"&&ya(t,Element)}function q$(t){return Nc(t,"RegExp")}function Mm(t){return!!(t&&t.then&&typeof t.then=="function")}function W$(t){return nc(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}function K$(t){return typeof t=="number"&&t!==t}function ya(t,e){try{return t instanceof e}catch{return!1}}function QO(t){return!!(typeof t=="object"&&t!==null&&(t.__isVue||t._isVue))}function Al(t,e=0){return typeof t!="string"||e===0||t.length<=e?t:`${t.slice(0,e)}...`}function f_(t,e){if(!Array.isArray(t))return"";const n=[];for(let r=0;r<t.length;r++){const s=t[r];try{QO(s)?n.push("[VueViewModel]"):n.push(String(s))}catch{n.push("[value cannot be serialized]")}}return n.join(e)}function G$(t,e,n=!1){return Gs(t)?q$(e)?e.test(t):Gs(e)?n?t===e:t.includes(e):!1:!1}function Dm(t,e=[],n=!1){return e.some(r=>G$(t,r,n))}function Q$(t,e,n=250,r,s,i,o){if(!i.exception||!i.exception.values||!o||!ya(o.originalException,Error))return;const a=i.exception.values.length>0?i.exception.values[i.exception.values.length-1]:void 0;a&&(i.exception.values=J$(n0(t,e,s,o.originalException,r,i.exception.values,a,0),n))}function n0(t,e,n,r,s,i,o,a){if(i.length>=n+1)return i;let l=[...i];if(ya(r[s],Error)){h_(o,a);const c=t(e,r[s]),u=l.length;p_(c,s,u,a),l=n0(t,e,n,r[s],s,[c,...l],c,u)}return Array.isArray(r.errors)&&r.errors.forEach((c,u)=>{if(ya(c,Error)){h_(o,a);const d=t(e,c),f=l.length;p_(d,`errors[${u}]`,f,a),l=n0(t,e,n,c,s,[d,...l],d,f)}}),l}function h_(t,e){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,...t.type==="AggregateError"&&{is_exception_group:!0},exception_id:e}}function p_(t,e,n,r){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,type:"chained",source:e,exception_id:n,parent_id:r}}function J$(t,e){return t.map(n=>(n.value&&(n.value=Al(n.value,e)),n))}function _f(t){return t&&t.Math==Math?t:void 0}const De=typeof globalThis=="object"&&_f(globalThis)||typeof window=="object"&&_f(window)||typeof self=="object"&&_f(self)||typeof global=="object"&&_f(global)||function(){return this}()||{};function Kb(){return De}function JO(t,e,n){const r=n||De,s=r.__SENTRY__=r.__SENTRY__||{};return s[t]||(s[t]=e())}const Gb=Kb(),Y$=80;function YO(t,e={}){if(!t)return"<unknown>";try{let n=t;const r=5,s=[];let i=0,o=0;const a=" > ",l=a.length;let c;const u=Array.isArray(e)?e:e.keyAttrs,d=!Array.isArray(e)&&e.maxStringLength||Y$;for(;n&&i++<r&&(c=Z$(n,u),!(c==="html"||i>1&&o+s.length*l+c.length>=d));)s.push(c),o+=c.length,n=n.parentNode;return s.reverse().join(a)}catch{return"<unknown>"}}function Z$(t,e){const n=t,r=[];let s,i,o,a,l;if(!n||!n.tagName)return"";if(Gb.HTMLElement&&n instanceof HTMLElement&&n.dataset&&n.dataset.sentryComponent)return n.dataset.sentryComponent;r.push(n.tagName.toLowerCase());const c=e&&e.length?e.filter(d=>n.getAttribute(d)).map(d=>[d,n.getAttribute(d)]):null;if(c&&c.length)c.forEach(d=>{r.push(`[${d[0]}="${d[1]}"]`)});else if(n.id&&r.push(`#${n.id}`),s=n.className,s&&Gs(s))for(i=s.split(/\s+/),l=0;l<i.length;l++)r.push(`.${i[l]}`);const u=["aria-label","type","name","title","alt"];for(l=0;l<u.length;l++)o=u[l],a=n.getAttribute(o),a&&r.push(`[${o}="${a}"]`);return r.join("")}function X$(){try{return Gb.document.location.href}catch{return""}}function eF(t){if(!Gb.HTMLElement)return null;let e=t;const n=5;for(let r=0;r<n;r++){if(!e)return null;if(e instanceof HTMLElement&&e.dataset.sentryComponent)return e.dataset.sentryComponent;e=e.parentNode}return null}const Wd=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,tF="Sentry Logger ",r0=["debug","info","warn","error","log","assert","trace"],Xh={};function Lm(t){if(!("console"in De))return t();const e=De.console,n={},r=Object.keys(Xh);r.forEach(s=>{const i=Xh[s];n[s]=e[s],e[s]=i});try{return t()}finally{r.forEach(s=>{e[s]=n[s]})}}function nF(){let t=!1;const e={enable:()=>{t=!0},disable:()=>{t=!1},isEnabled:()=>t};return Wd?r0.forEach(n=>{e[n]=(...r)=>{t&&Lm(()=>{De.console[n](`${tF}[${n}]:`,...r)})}}):r0.forEach(n=>{e[n]=()=>{}}),e}const pe=nF(),rF=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function sF(t){return t==="http"||t==="https"}function Tc(t,e=!1){const{host:n,path:r,pass:s,port:i,projectId:o,protocol:a,publicKey:l}=t;return`${a}://${l}${e&&s?`:${s}`:""}@${n}${i?`:${i}`:""}/${r&&`${r}/`}${o}`}function iF(t){const e=rF.exec(t);if(!e){Lm(()=>{console.error(`Invalid Sentry Dsn: ${t}`)});return}const[n,r,s="",i,o="",a]=e.slice(1);let l="",c=a;const u=c.split("/");if(u.length>1&&(l=u.slice(0,-1).join("/"),c=u.pop()),c){const d=c.match(/^\d+/);d&&(c=d[0])}return ZO({host:i,pass:s,path:l,projectId:c,port:o,protocol:n,publicKey:r})}function ZO(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function oF(t){if(!Wd)return!0;const{port:e,projectId:n,protocol:r}=t;return["protocol","publicKey","host","projectId"].find(o=>t[o]?!1:(pe.error(`Invalid Sentry Dsn: ${o} missing`),!0))?!1:n.match(/^\d+$/)?sF(r)?e&&isNaN(parseInt(e,10))?(pe.error(`Invalid Sentry Dsn: Invalid port ${e}`),!1):!0:(pe.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(pe.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function XO(t){const e=typeof t=="string"?iF(t):ZO(t);if(!(!e||!oF(e)))return e}class ls extends Error{constructor(e,n="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=n}}function en(t,e,n){if(!(e in t))return;const r=t[e],s=n(r);typeof s=="function"&&eA(s,r),t[e]=s}function ad(t,e,n){try{Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}catch{Wd&&pe.log(`Failed to add non-enumerable property "${e}" to object`,t)}}function eA(t,e){try{const n=e.prototype||{};t.prototype=e.prototype=n,ad(t,"__sentry_original__",e)}catch{}}function Qb(t){return t.__sentry_original__}function aF(t){return Object.keys(t).map(e=>`${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`).join("&")}function tA(t){if(Vb(t))return{message:t.message,name:t.name,stack:t.stack,...g_(t)};if(Pm(t)){const e={type:t.type,target:m_(t.target),currentTarget:m_(t.currentTarget),...g_(t)};return typeof CustomEvent<"u"&&ya(t,CustomEvent)&&(e.detail=t.detail),e}else return t}function m_(t){try{return H$(t)?YO(t):Object.prototype.toString.call(t)}catch{return"<unknown>"}}function g_(t){if(typeof t=="object"&&t!==null){const e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}else return{}}function lF(t,e=40){const n=Object.keys(tA(t));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=e)return Al(n[0],e);for(let r=n.length;r>0;r--){const s=n.slice(0,r).join(", ");if(!(s.length>e))return r===n.length?s:Al(s,e)}return""}function Vs(t){return s0(t,new Map)}function s0(t,e){if(cF(t)){const n=e.get(t);if(n!==void 0)return n;const r={};e.set(t,r);for(const s of Object.keys(t))typeof t[s]<"u"&&(r[s]=s0(t[s],e));return r}if(Array.isArray(t)){const n=e.get(t);if(n!==void 0)return n;const r=[];return e.set(t,r),t.forEach(s=>{r.push(s0(s,e))}),r}return t}function cF(t){if(!nc(t))return!1;try{const e=Object.getPrototypeOf(t).constructor.name;return!e||e==="Object"}catch{return!0}}const nA=50,y_=/\(error: (.*)\)/,v_=/captureMessage|captureException/;function rA(...t){const e=t.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0)=>{const s=[],i=n.split(`
`);for(let o=r;o<i.length;o++){const a=i[o];if(a.length>1024)continue;const l=y_.test(a)?a.replace(y_,"$1"):a;if(!l.match(/\S*Error: /)){for(const c of e){const u=c(l);if(u){s.push(u);break}}if(s.length>=nA)break}}return dF(s)}}function uF(t){return Array.isArray(t)?rA(...t):t}function dF(t){if(!t.length)return[];const e=Array.from(t);return/sentryWrapped/.test(e[e.length-1].function||"")&&e.pop(),e.reverse(),v_.test(e[e.length-1].function||"")&&(e.pop(),v_.test(e[e.length-1].function||"")&&e.pop()),e.slice(0,nA).map(n=>({...n,filename:n.filename||e[e.length-1].filename,function:n.function||"?"}))}const uy="<anonymous>";function ho(t){try{return!t||typeof t!="function"?uy:t.name||uy}catch{return uy}}const vh={},x_={};function Da(t,e){vh[t]=vh[t]||[],vh[t].push(e)}function La(t,e){x_[t]||(e(),x_[t]=!0)}function Wr(t,e){const n=t&&vh[t];if(n)for(const r of n)try{r(e)}catch(s){Wd&&pe.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${ho(r)}
Error:`,s)}}function fF(t){const e="console";Da(e,t),La(e,hF)}function hF(){"console"in De&&r0.forEach(function(t){t in De.console&&en(De.console,t,function(e){return Xh[t]=e,function(...n){Wr("console",{args:n,level:t});const s=Xh[t];s&&s.apply(De.console,n)}})})}function wr(){const t=De,e=t.crypto||t.msCrypto;let n=()=>Math.random()*16;try{if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");e&&e.getRandomValues&&(n=()=>{const r=new Uint8Array(1);return e.getRandomValues(r),r[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,r=>(r^(n()&15)>>r/4).toString(16))}function sA(t){return t.exception&&t.exception.values?t.exception.values[0]:void 0}function Ti(t){const{message:e,event_id:n}=t;if(e)return e;const r=sA(t);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function i0(t,e,n){const r=t.exception=t.exception||{},s=r.values=r.values||[],i=s[0]=s[0]||{};i.value||(i.value=e||""),i.type||(i.type="Error")}function ld(t,e){const n=sA(t);if(!n)return;const r={type:"generic",handled:!0},s=n.mechanism;if(n.mechanism={...r,...s,...e},e&&"data"in e){const i={...s&&s.data,...e.data};n.mechanism.data=i}}function b_(t){if(t&&t.__sentry_captured__)return!0;try{ad(t,"__sentry_captured__",!0)}catch{}return!1}function iA(t){return Array.isArray(t)?t:[t]}const tl=De,pF=1e3;let w_,o0,a0;function mF(t){const e="dom";Da(e,t),La(e,gF)}function gF(){if(!tl.document)return;const t=Wr.bind(null,"dom"),e=S_(t,!0);tl.document.addEventListener("click",e,!1),tl.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach(n=>{const r=tl[n]&&tl[n].prototype;!r||!r.hasOwnProperty||!r.hasOwnProperty("addEventListener")||(en(r,"addEventListener",function(s){return function(i,o,a){if(i==="click"||i=="keypress")try{const l=this,c=l.__sentry_instrumentation_handlers__=l.__sentry_instrumentation_handlers__||{},u=c[i]=c[i]||{refCount:0};if(!u.handler){const d=S_(t);u.handler=d,s.call(this,i,d,a)}u.refCount++}catch{}return s.call(this,i,o,a)}}),en(r,"removeEventListener",function(s){return function(i,o,a){if(i==="click"||i=="keypress")try{const l=this,c=l.__sentry_instrumentation_handlers__||{},u=c[i];u&&(u.refCount--,u.refCount<=0&&(s.call(this,i,u.handler,a),u.handler=void 0,delete c[i]),Object.keys(c).length===0&&delete l.__sentry_instrumentation_handlers__)}catch{}return s.call(this,i,o,a)}}))})}function yF(t){if(t.type!==o0)return!1;try{if(!t.target||t.target._sentryId!==a0)return!1}catch{}return!0}function vF(t,e){return t!=="keypress"?!1:!e||!e.tagName?!0:!(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable)}function S_(t,e=!1){return n=>{if(!n||n._sentryCaptured)return;const r=xF(n);if(vF(n.type,r))return;ad(n,"_sentryCaptured",!0),r&&!r._sentryId&&ad(r,"_sentryId",wr());const s=n.type==="keypress"?"input":n.type;yF(n)||(t({event:n,name:s,global:e}),o0=n.type,a0=r?r._sentryId:void 0),clearTimeout(w_),w_=tl.setTimeout(()=>{a0=void 0,o0=void 0},pF)}}function xF(t){try{return t.target}catch{return null}}const l0=Kb();function oA(){if(!("fetch"in l0))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function c0(t){return t&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function bF(){if(typeof EdgeRuntime=="string")return!0;if(!oA())return!1;if(c0(l0.fetch))return!0;let t=!1;const e=l0.document;if(e&&typeof e.createElement=="function")try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(t=c0(n.contentWindow.fetch)),e.head.removeChild(n)}catch(n){Wd&&pe.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return t}function wF(t){const e="fetch";Da(e,t),La(e,SF)}function SF(){bF()&&en(De,"fetch",function(t){return function(...e){const{method:n,url:r}=kF(e),s={args:e,fetchData:{method:n,url:r},startTimestamp:Date.now()};return Wr("fetch",{...s}),t.apply(De,e).then(i=>{const o={...s,endTimestamp:Date.now(),response:i};return Wr("fetch",o),i},i=>{const o={...s,endTimestamp:Date.now(),error:i};throw Wr("fetch",o),i})}})}function u0(t,e){return!!t&&typeof t=="object"&&!!t[e]}function k_(t){return typeof t=="string"?t:t?u0(t,"url")?t.url:t.toString?t.toString():"":""}function kF(t){if(t.length===0)return{method:"GET",url:""};if(t.length===2){const[n,r]=t;return{url:k_(n),method:u0(r,"method")?String(r.method).toUpperCase():"GET"}}const e=t[0];return{url:k_(e),method:u0(e,"method")?String(e.method).toUpperCase():"GET"}}let Ef=null;function _F(t){const e="error";Da(e,t),La(e,EF)}function EF(){Ef=De.onerror,De.onerror=function(t,e,n,r,s){return Wr("error",{column:r,error:s,line:n,msg:t,url:e}),Ef&&!Ef.__SENTRY_LOADER__?Ef.apply(this,arguments):!1},De.onerror.__SENTRY_INSTRUMENTED__=!0}let Cf=null;function CF(t){const e="unhandledrejection";Da(e,t),La(e,NF)}function NF(){Cf=De.onunhandledrejection,De.onunhandledrejection=function(t){return Wr("unhandledrejection",t),Cf&&!Cf.__SENTRY_LOADER__?Cf.apply(this,arguments):!0},De.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const Nf=Kb();function TF(){const t=Nf.chrome,e=t&&t.app&&t.app.runtime,n="history"in Nf&&!!Nf.history.pushState&&!!Nf.history.replaceState;return!e&&n}const Qc=De;let Tf;function aA(t){const e="history";Da(e,t),La(e,OF)}function OF(){if(!TF())return;const t=Qc.onpopstate;Qc.onpopstate=function(...n){const r=Qc.location.href,s=Tf;if(Tf=r,Wr("history",{from:s,to:r}),t)try{return t.apply(this,n)}catch{}};function e(n){return function(...r){const s=r.length>2?r[2]:void 0;if(s){const i=Tf,o=String(s);Tf=o,Wr("history",{from:i,to:o})}return n.apply(this,r)}}en(Qc.history,"pushState",e),en(Qc.history,"replaceState",e)}const AF=De,lu="__sentry_xhr_v3__";function RF(t){const e="xhr";Da(e,t),La(e,jF)}function jF(){if(!AF.XMLHttpRequest)return;const t=XMLHttpRequest.prototype;en(t,"open",function(e){return function(...n){const r=Date.now(),s=Gs(n[0])?n[0].toUpperCase():void 0,i=IF(n[1]);if(!s||!i)return e.apply(this,n);this[lu]={method:s,url:i,request_headers:{}},s==="POST"&&i.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const o=()=>{const a=this[lu];if(a&&this.readyState===4){try{a.status_code=this.status}catch{}const l={args:[s,i],endTimestamp:Date.now(),startTimestamp:r,xhr:this};Wr("xhr",l)}};return"onreadystatechange"in this&&typeof this.onreadystatechange=="function"?en(this,"onreadystatechange",function(a){return function(...l){return o(),a.apply(this,l)}}):this.addEventListener("readystatechange",o),en(this,"setRequestHeader",function(a){return function(...l){const[c,u]=l,d=this[lu];return d&&Gs(c)&&Gs(u)&&(d.request_headers[c.toLowerCase()]=u),a.apply(this,l)}}),e.apply(this,n)}}),en(t,"send",function(e){return function(...n){const r=this[lu];if(!r)return e.apply(this,n);n[0]!==void 0&&(r.body=n[0]);const s={args:[r.method,r.url],startTimestamp:Date.now(),xhr:this};return Wr("xhr",s),e.apply(this,n)}})}function IF(t){if(Gs(t))return t;try{return t.toString()}catch{}}function PF(){return"npm"}function MF(){const t=typeof WeakSet=="function",e=t?new WeakSet:[];function n(s){if(t)return e.has(s)?!0:(e.add(s),!1);for(let i=0;i<e.length;i++)if(e[i]===s)return!0;return e.push(s),!1}function r(s){if(t)e.delete(s);else for(let i=0;i<e.length;i++)if(e[i]===s){e.splice(i,1);break}}return[n,r]}function bi(t,e=100,n=1/0){try{return d0("",t,e,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function lA(t,e=3,n=100*1024){const r=bi(t,e);return FF(r)>n?lA(t,e-1,n):r}function d0(t,e,n=1/0,r=1/0,s=MF()){const[i,o]=s;if(e==null||["number","boolean","string"].includes(typeof e)&&!K$(e))return e;const a=DF(t,e);if(!a.startsWith("[object "))return a;if(e.__sentry_skip_normalization__)return e;const l=typeof e.__sentry_override_normalization_depth__=="number"?e.__sentry_override_normalization_depth__:n;if(l===0)return a.replace("object ","");if(i(e))return"[Circular ~]";const c=e;if(c&&typeof c.toJSON=="function")try{const p=c.toJSON();return d0("",p,l-1,r,s)}catch{}const u=Array.isArray(e)?[]:{};let d=0;const f=tA(e);for(const p in f){if(!Object.prototype.hasOwnProperty.call(f,p))continue;if(d>=r){u[p]="[MaxProperties ~]";break}const m=f[p];u[p]=d0(p,m,l-1,r,s),d++}return o(e),u}function DF(t,e){try{if(t==="domain"&&e&&typeof e=="object"&&e._events)return"[Domain]";if(t==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&e===global)return"[Global]";if(typeof window<"u"&&e===window)return"[Window]";if(typeof document<"u"&&e===document)return"[Document]";if(QO(e))return"[VueViewModel]";if(W$(e))return"[SyntheticEvent]";if(typeof e=="number"&&e!==e)return"[NaN]";if(typeof e=="function")return`[Function: ${ho(e)}]`;if(typeof e=="symbol")return`[${String(e)}]`;if(typeof e=="bigint")return`[BigInt: ${String(e)}]`;const n=LF(e);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function LF(t){const e=Object.getPrototypeOf(t);return e?e.constructor.name:"null prototype"}function $F(t){return~-encodeURI(t).split(/%..|./).length}function FF(t){return $F(JSON.stringify(t))}var js;(function(t){t[t.PENDING=0]="PENDING";const n=1;t[t.RESOLVED=n]="RESOLVED";const r=2;t[t.REJECTED=r]="REJECTED"})(js||(js={}));function rc(t){return new Gn(e=>{e(t)})}function Jb(t){return new Gn((e,n)=>{n(t)})}class Gn{constructor(e){Gn.prototype.__init.call(this),Gn.prototype.__init2.call(this),Gn.prototype.__init3.call(this),Gn.prototype.__init4.call(this),this._state=js.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(n){this._reject(n)}}then(e,n){return new Gn((r,s)=>{this._handlers.push([!1,i=>{if(!e)r(i);else try{r(e(i))}catch(o){s(o)}},i=>{if(!n)s(i);else try{r(n(i))}catch(o){s(o)}}]),this._executeHandlers()})}catch(e){return this.then(n=>n,e)}finally(e){return new Gn((n,r)=>{let s,i;return this.then(o=>{i=!1,s=o,e&&e()},o=>{i=!0,s=o,e&&e()}).then(()=>{if(i){r(s);return}n(s)})})}__init(){this._resolve=e=>{this._setResult(js.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(js.REJECTED,e)}}__init3(){this._setResult=(e,n)=>{if(this._state===js.PENDING){if(Mm(n)){n.then(this._resolve,this._reject);return}this._state=e,this._value=n,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===js.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach(n=>{n[0]||(this._state===js.RESOLVED&&n[1](this._value),this._state===js.REJECTED&&n[2](this._value),n[0]=!0)})}}}function BF(t){const e=[];function n(){return t===void 0||e.length<t}function r(o){return e.splice(e.indexOf(o),1)[0]}function s(o){if(!n())return Jb(new ls("Not adding Promise because buffer limit was reached."));const a=o();return e.indexOf(a)===-1&&e.push(a),a.then(()=>r(a)).then(null,()=>r(a).then(null,()=>{})),a}function i(o){return new Gn((a,l)=>{let c=e.length;if(!c)return a(!0);const u=setTimeout(()=>{o&&o>0&&a(!1)},o);e.forEach(d=>{rc(d).then(()=>{--c||(clearTimeout(u),a(!0))},l)})})}return{$:e,add:s,drain:i}}function dy(t){if(!t)return{};const e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const n=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:n,hash:r,relative:e[5]+n+r}}const UF=["fatal","error","warning","log","info","debug"];function zF(t){return t==="warn"?"warning":UF.includes(t)?t:"log"}const cA=1e3;function Kd(){return Date.now()/cA}function VF(){const{performance:t}=De;if(!t||!t.now)return Kd;const e=Date.now()-t.now(),n=t.timeOrigin==null?e:t.timeOrigin;return()=>(n+t.now())/cA}const uA=VF();(()=>{const{performance:t}=De;if(!t||!t.now)return;const e=3600*1e3,n=t.now(),r=Date.now(),s=t.timeOrigin?Math.abs(t.timeOrigin+n-r):e,i=s<e,o=t.timing&&t.timing.navigationStart,l=typeof o=="number"?Math.abs(o+n-r):e,c=l<e;return i||c?s<=l?t.timeOrigin:o:r})();function Oc(t,e=[]){return[t,e]}function HF(t,e){const[n,r]=t;return[n,[...r,e]]}function __(t,e){const n=t[1];for(const r of n){const s=r[0].type;if(e(r,s))return!0}return!1}function f0(t,e){return(e||new TextEncoder).encode(t)}function qF(t,e){const[n,r]=t;let s=JSON.stringify(n);function i(o){typeof s=="string"?s=typeof o=="string"?s+o:[f0(s,e),o]:s.push(typeof o=="string"?f0(o,e):o)}for(const o of r){const[a,l]=o;if(i(`
${JSON.stringify(a)}
`),typeof l=="string"||l instanceof Uint8Array)i(l);else{let c;try{c=JSON.stringify(l)}catch{c=JSON.stringify(bi(l))}i(c)}}return typeof s=="string"?s:WF(s)}function WF(t){const e=t.reduce((s,i)=>s+i.length,0),n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function KF(t,e){const n=typeof t.data=="string"?f0(t.data,e):t.data;return[Vs({type:"attachment",length:n.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType}),n]}const GF={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function E_(t){return GF[t]}function dA(t){if(!t||!t.sdk)return;const{name:e,version:n}=t.sdk;return{name:e,version:n}}function QF(t,e,n,r){const s=t.sdkProcessingMetadata&&t.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:t.event_id,sent_at:new Date().toISOString(),...e&&{sdk:e},...!!n&&r&&{dsn:Tc(r)},...s&&{trace:Vs({...s})}}}function JF(t,e,n){const r=[{type:"client_report"},{timestamp:Kd(),discarded_events:t}];return Oc(e?{dsn:e}:{},[r])}const YF=60*1e3;function ZF(t,e=Date.now()){const n=parseInt(`${t}`,10);if(!isNaN(n))return n*1e3;const r=Date.parse(`${t}`);return isNaN(r)?YF:r-e}function XF(t,e){return t[e]||t.all||0}function e4(t,e,n=Date.now()){return XF(t,e)>n}function t4(t,{statusCode:e,headers:n},r=Date.now()){const s={...t},i=n&&n["x-sentry-rate-limits"],o=n&&n["retry-after"];if(i)for(const a of i.trim().split(",")){const[l,c,,,u]=a.split(":",5),d=parseInt(l,10),f=(isNaN(d)?60:d)*1e3;if(!c)s.all=r+f;else for(const p of c.split(";"))p==="metric_bucket"?(!u||u.split(";").includes("custom"))&&(s[p]=r+f):s[p]=r+f}else o?s.all=r+ZF(o,r):e===429&&(s.all=r+60*1e3);return s}const Qe=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,$m="production";function Yb(){return JO("globalEventProcessors",()=>[])}function n4(t){Yb().push(t)}function ep(t,e,n,r=0){return new Gn((s,i)=>{const o=t[r];if(e===null||typeof o!="function")s(e);else{const a=o({...e},n);Qe&&o.id&&a===null&&pe.log(`Event processor "${o.id}" dropped event`),Mm(a)?a.then(l=>ep(t,l,n,r+1).then(s)).then(null,i):ep(t,a,n,r+1).then(s).then(null,i)}})}function fA(t){const e=uA(),n={sid:wr(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>r4(n)};return t&&va(n,t),n}function va(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),!t.did&&!e.did&&(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||uA(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:wr()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const n=t.timestamp-t.started;t.duration=n>=0?n:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}function hA(t,e){let n={};t.status==="ok"&&(n={status:"exited"}),va(t,n)}function r4(t){return Vs({sid:`${t.sid}`,init:t.init,started:new Date(t.started*1e3).toISOString(),timestamp:new Date(t.timestamp*1e3).toISOString(),status:t.status,errors:t.errors,did:typeof t.did=="number"||typeof t.did=="string"?`${t.did}`:void 0,duration:t.duration,abnormal_mechanism:t.abnormal_mechanism,attrs:{release:t.release,environment:t.environment,ip_address:t.ipAddress,user_agent:t.userAgent}})}const s4=1;function i4(t){const{spanId:e,traceId:n}=t.spanContext(),{data:r,op:s,parent_span_id:i,status:o,tags:a,origin:l}=cd(t);return Vs({data:r,op:s,parent_span_id:i,span_id:e,status:o,tags:a,trace_id:n,origin:l})}function cd(t){return o4(t)?t.getSpanJSON():typeof t.toJSON=="function"?t.toJSON():{}}function o4(t){return typeof t.getSpanJSON=="function"}function a4(t){const{traceFlags:e}=t.spanContext();return!!(e&s4)}function l4(t,e,n,r,s,i){const{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=t,l={...e,event_id:e.event_id||n.event_id||wr(),timestamp:e.timestamp||Kd()},c=n.integrations||t.integrations.map(y=>y.name);c4(l,t),f4(l,c),e.type===void 0&&u4(l,t.stackParser);const u=p4(r,n.captureContext);n.mechanism&&ld(l,n.mechanism);const d=s&&s.getEventProcessors?s.getEventProcessors():[],f=C4().getScopeData();if(i){const y=i.getScopeData();O_(f,y)}if(u){const y=u.getScopeData();O_(f,y)}const p=[...n.attachments||[],...f.attachments];p.length&&(n.attachments=p),wA(l,f);const m=[...d,...Yb(),...f.eventProcessors];return ep(m,l,n).then(y=>(y&&d4(y),typeof o=="number"&&o>0?h4(y,o,a):y))}function c4(t,e){const{environment:n,release:r,dist:s,maxValueLength:i=250}=e;"environment"in t||(t.environment="environment"in e?n:$m),t.release===void 0&&r!==void 0&&(t.release=r),t.dist===void 0&&s!==void 0&&(t.dist=s),t.message&&(t.message=Al(t.message,i));const o=t.exception&&t.exception.values&&t.exception.values[0];o&&o.value&&(o.value=Al(o.value,i));const a=t.request;a&&a.url&&(a.url=Al(a.url,i))}const C_=new WeakMap;function u4(t,e){const n=De._sentryDebugIds;if(!n)return;let r;const s=C_.get(e);s?r=s:(r=new Map,C_.set(e,r));const i=Object.keys(n).reduce((o,a)=>{let l;const c=r.get(a);c?l=c:(l=e(a),r.set(a,l));for(let u=l.length-1;u>=0;u--){const d=l[u];if(d.filename){o[d.filename]=n[a];break}}return o},{});try{t.exception.values.forEach(o=>{o.stacktrace.frames.forEach(a=>{a.filename&&(a.debug_id=i[a.filename])})})}catch{}}function d4(t){const e={};try{t.exception.values.forEach(r=>{r.stacktrace.frames.forEach(s=>{s.debug_id&&(s.abs_path?e[s.abs_path]=s.debug_id:s.filename&&(e[s.filename]=s.debug_id),delete s.debug_id)})})}catch{}if(Object.keys(e).length===0)return;t.debug_meta=t.debug_meta||{},t.debug_meta.images=t.debug_meta.images||[];const n=t.debug_meta.images;Object.keys(e).forEach(r=>{n.push({type:"sourcemap",code_file:r,debug_id:e[r]})})}function f4(t,e){e.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=[...t.sdk.integrations||[],...e])}function h4(t,e,n){if(!t)return null;const r={...t,...t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map(s=>({...s,...s.data&&{data:bi(s.data,e,n)}}))},...t.user&&{user:bi(t.user,e,n)},...t.contexts&&{contexts:bi(t.contexts,e,n)},...t.extra&&{extra:bi(t.extra,e,n)}};return t.contexts&&t.contexts.trace&&r.contexts&&(r.contexts.trace=t.contexts.trace,t.contexts.trace.data&&(r.contexts.trace.data=bi(t.contexts.trace.data,e,n))),t.spans&&(r.spans=t.spans.map(s=>{const i=cd(s).data;return i&&(s.data=bi(i,e,n)),s})),r}function p4(t,e){if(!e)return t;const n=t?t.clone():new Qs;return n.update(e),n}function m4(t){if(t)return g4(t)?{captureContext:t}:v4(t)?{captureContext:t}:t}function g4(t){return t instanceof Qs||typeof t=="function"}const y4=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function v4(t){return Object.keys(t).some(e=>y4.includes(e))}function pA(t,e){return xs().captureException(t,m4(e))}function mA(t,e){return xs().captureEvent(t,e)}function xa(t,e){xs().addBreadcrumb(t,e)}function gA(...t){const e=xs();if(t.length===2){const[n,r]=t;return n?e.withScope(()=>(e.getStackTop().scope=n,r(n))):e.withScope(r)}return e.withScope(t[0])}function An(){return xs().getClient()}function Gd(){return xs().getScope()}function N_(t){const e=An(),n=Bm(),r=Gd(),{release:s,environment:i=$m}=e&&e.getOptions()||{},{userAgent:o}=De.navigator||{},a=fA({release:s,environment:i,user:r.getUser()||n.getUser(),...o&&{userAgent:o},...t}),l=n.getSession();return l&&l.status==="ok"&&va(l,{status:"exited"}),yA(),n.setSession(a),r.setSession(a),a}function yA(){const t=Bm(),e=Gd(),n=e.getSession()||t.getSession();n&&hA(n),vA(),t.setSession(),e.setSession()}function vA(){const t=Bm(),e=Gd(),n=An(),r=e.getSession()||t.getSession();r&&n&&n.captureSession&&n.captureSession(r)}function T_(t=!1){if(t){yA();return}vA()}function xA(t){return t.transaction}function bA(t,e,n){const r=e.getOptions(),{publicKey:s}=e.getDsn()||{},{segment:i}=n&&n.getUser()||{},o=Vs({environment:r.environment||$m,release:r.release,user_segment:i,public_key:s,trace_id:t});return e.emit&&e.emit("createDsc",o),o}function x4(t){const e=An();if(!e)return{};const n=bA(cd(t).trace_id||"",e,Gd()),r=xA(t);if(!r)return n;const s=r&&r._frozenDynamicSamplingContext;if(s)return s;const{sampleRate:i,source:o}=r.metadata;i!=null&&(n.sample_rate=`${i}`);const a=cd(r);return o&&o!=="url"&&(n.transaction=a.description),n.sampled=String(a4(r)),e.emit&&e.emit("createDsc",n),n}function wA(t,e){const{fingerprint:n,span:r,breadcrumbs:s,sdkProcessingMetadata:i}=e;b4(t,e),r&&k4(t,r),_4(t,n),w4(t,s),S4(t,i)}function O_(t,e){const{extra:n,tags:r,user:s,contexts:i,level:o,sdkProcessingMetadata:a,breadcrumbs:l,fingerprint:c,eventProcessors:u,attachments:d,propagationContext:f,transactionName:p,span:m}=e;Jc(t,"extra",n),Jc(t,"tags",r),Jc(t,"user",s),Jc(t,"contexts",i),Jc(t,"sdkProcessingMetadata",a),o&&(t.level=o),p&&(t.transactionName=p),m&&(t.span=m),l.length&&(t.breadcrumbs=[...t.breadcrumbs,...l]),c.length&&(t.fingerprint=[...t.fingerprint,...c]),u.length&&(t.eventProcessors=[...t.eventProcessors,...u]),d.length&&(t.attachments=[...t.attachments,...d]),t.propagationContext={...t.propagationContext,...f}}function Jc(t,e,n){if(n&&Object.keys(n).length){t[e]={...t[e]};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[e][r]=n[r])}}function b4(t,e){const{extra:n,tags:r,user:s,contexts:i,level:o,transactionName:a}=e,l=Vs(n);l&&Object.keys(l).length&&(t.extra={...l,...t.extra});const c=Vs(r);c&&Object.keys(c).length&&(t.tags={...c,...t.tags});const u=Vs(s);u&&Object.keys(u).length&&(t.user={...u,...t.user});const d=Vs(i);d&&Object.keys(d).length&&(t.contexts={...d,...t.contexts}),o&&(t.level=o),a&&(t.transaction=a)}function w4(t,e){const n=[...t.breadcrumbs||[],...e];t.breadcrumbs=n.length?n:void 0}function S4(t,e){t.sdkProcessingMetadata={...t.sdkProcessingMetadata,...e}}function k4(t,e){t.contexts={trace:i4(e),...t.contexts};const n=xA(e);if(n){t.sdkProcessingMetadata={dynamicSamplingContext:x4(e),...t.sdkProcessingMetadata};const r=cd(n).description;r&&(t.tags={transaction:r,...t.tags})}}function _4(t,e){t.fingerprint=t.fingerprint?iA(t.fingerprint):[],e&&(t.fingerprint=t.fingerprint.concat(e)),t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint}const E4=100;let fy;class Qs{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=A_()}static clone(e){return e?e.clone():new Qs}clone(){const e=new Qs;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._span=this._span,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e}setClient(e){this._client=e}getClient(){return this._client}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&va(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,n){return this._tags={...this._tags,[e]:n},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,n){return this._extra={...this._extra,[e]:n},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,n){return n===null?delete this._contexts[e]:this._contexts[e]=n,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this._span;return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const n=typeof e=="function"?e(this):e;if(n instanceof Qs){const r=n.getScopeData();this._tags={...this._tags,...r.tags},this._extra={...this._extra,...r.extra},this._contexts={...this._contexts,...r.contexts},r.user&&Object.keys(r.user).length&&(this._user=r.user),r.level&&(this._level=r.level),r.fingerprint.length&&(this._fingerprint=r.fingerprint),n.getRequestSession()&&(this._requestSession=n.getRequestSession()),r.propagationContext&&(this._propagationContext=r.propagationContext)}else if(nc(n)){const r=e;this._tags={...this._tags,...r.tags},this._extra={...this._extra,...r.extra},this._contexts={...this._contexts,...r.contexts},r.user&&(this._user=r.user),r.level&&(this._level=r.level),r.fingerprint&&(this._fingerprint=r.fingerprint),r.requestSession&&(this._requestSession=r.requestSession),r.propagationContext&&(this._propagationContext=r.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=A_(),this}addBreadcrumb(e,n){const r=typeof n=="number"?n:E4;if(r<=0)return this;const s={timestamp:Kd(),...e},i=this._breadcrumbs;return i.push(s),this._breadcrumbs=i.length>r?i.slice(-r):i,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:e,_attachments:n,_contexts:r,_tags:s,_extra:i,_user:o,_level:a,_fingerprint:l,_eventProcessors:c,_propagationContext:u,_sdkProcessingMetadata:d,_transactionName:f,_span:p}=this;return{breadcrumbs:e,attachments:n,contexts:r,tags:s,extra:i,user:o,level:a,fingerprint:l||[],eventProcessors:c,propagationContext:u,sdkProcessingMetadata:d,transactionName:f,span:p}}applyToEvent(e,n={},r=[]){wA(e,this.getScopeData());const s=[...r,...Yb(),...this._eventProcessors];return ep(s,e,n)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,n){const r=n&&n.event_id?n.event_id:wr();if(!this._client)return pe.warn("No client configured on scope - will not capture exception!"),r;const s=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:s,...n,event_id:r},this),r}captureMessage(e,n,r){const s=r&&r.event_id?r.event_id:wr();if(!this._client)return pe.warn("No client configured on scope - will not capture message!"),s;const i=new Error(e);return this._client.captureMessage(e,n,{originalException:e,syntheticException:i,...r,event_id:s},this),s}captureEvent(e,n){const r=n&&n.event_id?n.event_id:wr();return this._client?(this._client.captureEvent(e,{...n,event_id:r},this),r):(pe.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}function C4(){return fy||(fy=new Qs),fy}function A_(){return{traceId:wr(),spanId:wr().substring(16)}}const h0="7.120.4",SA=parseFloat(h0),N4=100;class kA{constructor(e,n,r,s=SA){this._version=s;let i;n?i=n:(i=new Qs,i.setClient(e));let o;r?o=r:(o=new Qs,o.setClient(e)),this._stack=[{scope:i}],e&&this.bindClient(e),this._isolationScope=o}isOlderThan(e){return this._version<e}bindClient(e){const n=this.getStackTop();n.client=e,n.scope.setClient(e),e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}withScope(e){const n=this.pushScope();let r;try{r=e(n)}catch(s){throw this.popScope(),s}return Mm(r)?r.then(s=>(this.popScope(),s),s=>{throw this.popScope(),s}):(this.popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,n){const r=this._lastEventId=n&&n.event_id?n.event_id:wr(),s=new Error("Sentry syntheticException");return this.getScope().captureException(e,{originalException:e,syntheticException:s,...n,event_id:r}),r}captureMessage(e,n,r){const s=this._lastEventId=r&&r.event_id?r.event_id:wr(),i=new Error(e);return this.getScope().captureMessage(e,n,{originalException:e,syntheticException:i,...r,event_id:s}),s}captureEvent(e,n){const r=n&&n.event_id?n.event_id:wr();return e.type||(this._lastEventId=r),this.getScope().captureEvent(e,{...n,event_id:r}),r}lastEventId(){return this._lastEventId}addBreadcrumb(e,n){const{scope:r,client:s}=this.getStackTop();if(!s)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:o=N4}=s.getOptions&&s.getOptions()||{};if(o<=0)return;const l={timestamp:Kd(),...e},c=i?Lm(()=>i(l,n)):l;c!==null&&(s.emit&&s.emit("beforeAddBreadcrumb",c,n),r.addBreadcrumb(c,o))}setUser(e){this.getScope().setUser(e),this.getIsolationScope().setUser(e)}setTags(e){this.getScope().setTags(e),this.getIsolationScope().setTags(e)}setExtras(e){this.getScope().setExtras(e),this.getIsolationScope().setExtras(e)}setTag(e,n){this.getScope().setTag(e,n),this.getIsolationScope().setTag(e,n)}setExtra(e,n){this.getScope().setExtra(e,n),this.getIsolationScope().setExtra(e,n)}setContext(e,n){this.getScope().setContext(e,n),this.getIsolationScope().setContext(e,n)}configureScope(e){const{scope:n,client:r}=this.getStackTop();r&&e(n)}run(e){const n=R_(this);try{e(this)}finally{R_(n)}}getIntegration(e){const n=this.getClient();if(!n)return null;try{return n.getIntegration(e)}catch{return Qe&&pe.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,n){const r=this._callExtensionMethod("startTransaction",e,n);return Qe&&!r&&(this.getClient()?pe.warn(`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`):pe.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")),r}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const n=this.getStackTop().scope,r=n.getSession();r&&hA(r),this._sendSessionUpdate(),n.setSession()}startSession(e){const{scope:n,client:r}=this.getStackTop(),{release:s,environment:i=$m}=r&&r.getOptions()||{},{userAgent:o}=De.navigator||{},a=fA({release:s,environment:i,user:n.getUser(),...o&&{userAgent:o},...e}),l=n.getSession&&n.getSession();return l&&l.status==="ok"&&va(l,{status:"exited"}),this.endSession(),n.setSession(a),a}shouldSendDefaultPii(){const e=this.getClient(),n=e&&e.getOptions();return!!(n&&n.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:n}=this.getStackTop(),r=e.getSession();r&&n&&n.captureSession&&n.captureSession(r)}_callExtensionMethod(e,...n){const s=Fm().__SENTRY__;if(s&&s.extensions&&typeof s.extensions[e]=="function")return s.extensions[e].apply(this,n);Qe&&pe.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function Fm(){return De.__SENTRY__=De.__SENTRY__||{extensions:{},hub:void 0},De}function R_(t){const e=Fm(),n=p0(e);return _A(e,t),n}function xs(){const t=Fm();if(t.__SENTRY__&&t.__SENTRY__.acs){const e=t.__SENTRY__.acs.getCurrentHub();if(e)return e}return T4(t)}function Bm(){return xs().getIsolationScope()}function T4(t=Fm()){return(!O4(t)||p0(t).isOlderThan(SA))&&_A(t,new kA),p0(t)}function O4(t){return!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)}function p0(t){return JO("hub",()=>new kA,t)}function _A(t,e){if(!t)return!1;const n=t.__SENTRY__=t.__SENTRY__||{};return n.hub=e,!0}function A4(t,e){return e&&(t.sdk=t.sdk||{},t.sdk.name=t.sdk.name||e.name,t.sdk.version=t.sdk.version||e.version,t.sdk.integrations=[...t.sdk.integrations||[],...e.integrations||[]],t.sdk.packages=[...t.sdk.packages||[],...e.packages||[]]),t}function R4(t,e,n,r){const s=dA(n),i={sent_at:new Date().toISOString(),...s&&{sdk:s},...!!r&&e&&{dsn:Tc(e)}},o="aggregates"in t?[{type:"sessions"},t]:[{type:"session"},t.toJSON()];return Oc(i,[o])}function j4(t,e,n,r){const s=dA(n),i=t.type&&t.type!=="replay_event"?t.type:"event";A4(t,n&&n.sdk);const o=QF(t,s,r,e);return delete t.sdkProcessingMetadata,Oc(o,[[{type:i},t]])}const I4="7";function EA(t){const e=t.protocol?`${t.protocol}:`:"",n=t.port?`:${t.port}`:"";return`${e}//${t.host}${n}${t.path?`/${t.path}`:""}/api/`}function P4(t){return`${EA(t)}${t.projectId}/envelope/`}function M4(t,e){return aF({sentry_key:t.publicKey,sentry_version:I4,...e&&{sentry_client:`${e.name}/${e.version}`}})}function D4(t,e={}){const n=typeof e=="string"?e:e.tunnel,r=typeof e=="string"||!e._metadata?void 0:e._metadata.sdk;return n||`${P4(t)}?${M4(t,r)}`}function L4(t,e){const n=XO(t);if(!n)return"";const r=`${EA(n)}embed/error-page/`;let s=`dsn=${Tc(n)}`;for(const i in e)if(i!=="dsn"&&i!=="onClose")if(i==="user"){const o=e.user;if(!o)continue;o.name&&(s+=`&name=${encodeURIComponent(o.name)}`),o.email&&(s+=`&email=${encodeURIComponent(o.email)}`)}else s+=`&${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`;return`${r}?${s}`}const j_=[];function $4(t){const e={};return t.forEach(n=>{const{name:r}=n,s=e[r];s&&!s.isDefaultInstance&&n.isDefaultInstance||(e[r]=n)}),Object.keys(e).map(n=>e[n])}function F4(t){const e=t.defaultIntegrations||[],n=t.integrations;e.forEach(o=>{o.isDefaultInstance=!0});let r;Array.isArray(n)?r=[...e,...n]:typeof n=="function"?r=iA(n(e)):r=e;const s=$4(r),i=U4(s,o=>o.name==="Debug");if(i!==-1){const[o]=s.splice(i,1);s.push(o)}return s}function B4(t,e){const n={};return e.forEach(r=>{r&&CA(t,r,n)}),n}function I_(t,e){for(const n of e)n&&n.afterAllSetup&&n.afterAllSetup(t)}function CA(t,e,n){if(n[e.name]){Qe&&pe.log(`Integration skipped because it was already installed: ${e.name}`);return}if(n[e.name]=e,j_.indexOf(e.name)===-1&&(e.setupOnce(n4,xs),j_.push(e.name)),e.setup&&typeof e.setup=="function"&&e.setup(t),t.on&&typeof e.preprocessEvent=="function"){const r=e.preprocessEvent.bind(e);t.on("preprocessEvent",(s,i)=>r(s,i,t))}if(t.addEventProcessor&&typeof e.processEvent=="function"){const r=e.processEvent.bind(e),s=(i,o)=>r(i,o,t);s.id=e.name,t.addEventProcessor(s)}Qe&&pe.log(`Integration installed: ${e.name}`)}function U4(t,e){for(let n=0;n<t.length;n++)if(e(t[n])===!0)return n;return-1}function z4(t){let e="";for(const n of t){const r=Object.entries(n.tags),s=r.length>0?`|#${r.map(([i,o])=>`${i}:${o}`).join(",")}`:"";e+=`${n.name}@${n.unit}:${n.metric}|${n.metricType}${s}|T${n.timestamp}
`}return e}function V4(t,e,n,r){const s={sent_at:new Date().toISOString()};n&&n.sdk&&(s.sdk={name:n.sdk.name,version:n.sdk.version}),r&&e&&(s.dsn=Tc(e));const i=H4(t);return Oc(s,[i])}function H4(t){const e=z4(t);return[{type:"statsd",length:e.length},e]}const P_="Not capturing exception because it's already been captured.";class q4{constructor(e){if(this._options=e,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=XO(e.dsn):Qe&&pe.warn("No DSN provided, client will not send events."),this._dsn){const n=D4(this._dsn,e);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:n})}}captureException(e,n,r){if(b_(e)){Qe&&pe.log(P_);return}let s=n&&n.event_id;return this._process(this.eventFromException(e,n).then(i=>this._captureEvent(i,n,r)).then(i=>{s=i})),s}captureMessage(e,n,r,s){let i=r&&r.event_id;const o=qb(e)?e:String(e),a=Wb(e)?this.eventFromMessage(o,n,r):this.eventFromException(e,r);return this._process(a.then(l=>this._captureEvent(l,r,s)).then(l=>{i=l})),i}captureEvent(e,n,r){if(n&&n.originalException&&b_(n.originalException)){Qe&&pe.log(P_);return}let s=n&&n.event_id;const o=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,n,o||r).then(a=>{s=a})),s}captureSession(e){typeof e.release!="string"?Qe&&pe.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),va(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const n=this._transport;return n?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(e).then(r=>n.flush(e).then(s=>r&&s))):rc(!0)}close(e){return this.flush(e).then(n=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),n))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}setupIntegrations(e){(e&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&this._setupIntegrations()}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationById(e){return this.getIntegrationByName(e)}getIntegrationByName(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch{return Qe&&pe.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}addIntegration(e){const n=this._integrations[e.name];CA(this,e,this._integrations),n||I_(this,[e])}sendEvent(e,n={}){this.emit("beforeSendEvent",e,n);let r=j4(e,this._dsn,this._options._metadata,this._options.tunnel);for(const i of n.attachments||[])r=HF(r,KF(i,this._options.transportOptions&&this._options.transportOptions.textEncoder));const s=this._sendEnvelope(r);s&&s.then(i=>this.emit("afterSendEvent",e,i),null)}sendSession(e){const n=R4(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(n)}recordDroppedEvent(e,n,r){if(this._options.sendClientReports){const s=typeof r=="number"?r:1,i=`${e}:${n}`;Qe&&pe.log(`Recording outcome: "${i}"${s>1?` (${s} times)`:""}`),this._outcomes[i]=(this._outcomes[i]||0)+s}}captureAggregateMetrics(e){Qe&&pe.log(`Flushing aggregated metrics, number of metrics: ${e.length}`);const n=V4(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(n)}on(e,n){this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(n)}emit(e,...n){this._hooks[e]&&this._hooks[e].forEach(r=>r(...n))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=B4(this,e),I_(this,e),this._integrationsInitialized=!0}_updateSessionFromEvent(e,n){let r=!1,s=!1;const i=n.exception&&n.exception.values;if(i){s=!0;for(const l of i){const c=l.mechanism;if(c&&c.handled===!1){r=!0;break}}}const o=e.status==="ok";(o&&e.errors===0||o&&r)&&(va(e,{...r&&{status:"crashed"},errors:e.errors||Number(s||r)}),this.captureSession(e))}_isClientDoneProcessing(e){return new Gn(n=>{let r=0;const s=1,i=setInterval(()=>{this._numProcessing==0?(clearInterval(i),n(!0)):(r+=s,e&&r>=e&&(clearInterval(i),n(!1)))},s)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(e,n,r,s=Bm()){const i=this.getOptions(),o=Object.keys(this._integrations);return!n.integrations&&o.length>0&&(n.integrations=o),this.emit("preprocessEvent",e,n),l4(i,e,n,r,this,s).then(a=>{if(a===null)return a;const l={...s.getPropagationContext(),...r?r.getPropagationContext():void 0};if(!(a.contexts&&a.contexts.trace)&&l){const{traceId:u,spanId:d,parentSpanId:f,dsc:p}=l;a.contexts={trace:{trace_id:u,span_id:d,parent_span_id:f},...a.contexts};const m=p||bA(u,this,r);a.sdkProcessingMetadata={dynamicSamplingContext:m,...a.sdkProcessingMetadata}}return a})}_captureEvent(e,n={},r){return this._processEvent(e,n,r).then(s=>s.event_id,s=>{if(Qe){const i=s;i.logLevel==="log"?pe.log(i.message):pe.warn(i)}})}_processEvent(e,n,r){const s=this.getOptions(),{sampleRate:i}=s,o=TA(e),a=NA(e),l=e.type||"error",c=`before send for type \`${l}\``;if(a&&typeof i=="number"&&Math.random()>i)return this.recordDroppedEvent("sample_rate","error",e),Jb(new ls(`Discarding event because it's not included in the random sample (sampling rate = ${i})`,"log"));const u=l==="replay_event"?"replay":l,f=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,n,r,f).then(p=>{if(p===null)throw this.recordDroppedEvent("event_processor",u,e),new ls("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return p;const g=K4(s,p,n);return W4(g,c)}).then(p=>{if(p===null){if(this.recordDroppedEvent("before_send",u,e),o){const v=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",v)}throw new ls(`${c} returned \`null\`, will not send event.`,"log")}const m=r&&r.getSession();if(!o&&m&&this._updateSessionFromEvent(m,p),o){const y=p.sdkProcessingMetadata&&p.sdkProcessingMetadata.spanCountBeforeProcessing||0,v=p.spans?p.spans.length:0,x=y-v;x>0&&this.recordDroppedEvent("before_send","span",x)}const g=p.transaction_info;if(o&&g&&p.transaction!==e.transaction){const y="custom";p.transaction_info={...g,source:y}}return this.sendEvent(p,n),p}).then(null,p=>{throw p instanceof ls?p:(this.captureException(p,{data:{__sentry__:!0},originalException:p}),new ls(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${p}`))})}_process(e){this._numProcessing++,e.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_sendEnvelope(e){if(this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport)return this._transport.send(e).then(null,n=>{Qe&&pe.error("Error while sending event:",n)});Qe&&pe.error("Transport disabled")}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.keys(e).map(n=>{const[r,s]=n.split(":");return{reason:r,category:s,quantity:e[n]}})}}function W4(t,e){const n=`${e} must return \`null\` or a valid event.`;if(Mm(t))return t.then(r=>{if(!nc(r)&&r!==null)throw new ls(n);return r},r=>{throw new ls(`${e} rejected with ${r}`)});if(!nc(t)&&t!==null)throw new ls(n);return t}function K4(t,e,n){const{beforeSend:r,beforeSendTransaction:s}=t;if(NA(e)&&r)return r(e,n);if(TA(e)&&s){if(e.spans){const i=e.spans.length;e.sdkProcessingMetadata={...e.sdkProcessingMetadata,spanCountBeforeProcessing:i}}return s(e,n)}return e}function NA(t){return t.type===void 0}function TA(t){return t.type==="transaction"}function G4(t,e){e.debug===!0&&(Qe?pe.enable():Lm(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),Gd().update(e.initialScope);const r=new t(e);Q4(r),J4(r)}function Q4(t){const n=xs().getStackTop();n.client=t,n.scope.setClient(t)}function J4(t){t.init?t.init():t.setupIntegrations&&t.setupIntegrations()}const Y4=30;function OA(t,e,n=BF(t.bufferSize||Y4)){let r={};const s=o=>n.drain(o);function i(o){const a=[];if(__(o,(d,f)=>{const p=E_(f);if(e4(r,p)){const m=M_(d,f);t.recordDroppedEvent("ratelimit_backoff",p,m)}else a.push(d)}),a.length===0)return rc();const l=Oc(o[0],a),c=d=>{__(l,(f,p)=>{const m=M_(f,p);t.recordDroppedEvent(d,E_(p),m)})},u=()=>e({body:qF(l,t.textEncoder)}).then(d=>(d.statusCode!==void 0&&(d.statusCode<200||d.statusCode>=300)&&Qe&&pe.warn(`Sentry responded with status code ${d.statusCode} to sent event.`),r=t4(r,d),d),d=>{throw c("network_error"),d});return n.add(u).then(d=>d,d=>{if(d instanceof ls)return Qe&&pe.error("Skipped sending event because buffer is full."),c("queue_overflow"),rc();throw d})}return i.__sentry__baseTransport__=!0,{send:i,flush:s}}function M_(t,e){if(!(e!=="event"&&e!=="transaction"))return Array.isArray(t)?t[1]:void 0}function AA(t,e,n=[e],r="npm"){const s=t._metadata||{};s.sdk||(s.sdk={name:`sentry.javascript.${e}`,packages:n.map(i=>({name:`${r}:@sentry/${i}`,version:h0})),version:h0}),t._metadata=s}const Z4=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/],X4=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],eB="InboundFilters",tB=(t={})=>({name:eB,setupOnce(){},processEvent(e,n,r){const s=r.getOptions(),i=rB(t,s);return sB(e,i)?null:e}}),nB=tB;function rB(t={},e={}){return{allowUrls:[...t.allowUrls||[],...e.allowUrls||[]],denyUrls:[...t.denyUrls||[],...e.denyUrls||[]],ignoreErrors:[...t.ignoreErrors||[],...e.ignoreErrors||[],...t.disableErrorDefaults?[]:Z4],ignoreTransactions:[...t.ignoreTransactions||[],...e.ignoreTransactions||[],...t.disableTransactionDefaults?[]:X4],ignoreInternal:t.ignoreInternal!==void 0?t.ignoreInternal:!0}}function sB(t,e){return e.ignoreInternal&&uB(t)?(Qe&&pe.warn(`Event dropped due to being internal Sentry Error.
Event: ${Ti(t)}`),!0):iB(t,e.ignoreErrors)?(Qe&&pe.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Ti(t)}`),!0):oB(t,e.ignoreTransactions)?(Qe&&pe.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Ti(t)}`),!0):aB(t,e.denyUrls)?(Qe&&pe.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Ti(t)}.
Url: ${tp(t)}`),!0):lB(t,e.allowUrls)?!1:(Qe&&pe.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Ti(t)}.
Url: ${tp(t)}`),!0)}function iB(t,e){return t.type||!e||!e.length?!1:cB(t).some(n=>Dm(n,e))}function oB(t,e){if(t.type!=="transaction"||!e||!e.length)return!1;const n=t.transaction;return n?Dm(n,e):!1}function aB(t,e){if(!e||!e.length)return!1;const n=tp(t);return n?Dm(n,e):!1}function lB(t,e){if(!e||!e.length)return!0;const n=tp(t);return n?Dm(n,e):!0}function cB(t){const e=[];t.message&&e.push(t.message);let n;try{n=t.exception.values[t.exception.values.length-1]}catch{}return n&&n.value&&(e.push(n.value),n.type&&e.push(`${n.type}: ${n.value}`)),Qe&&e.length===0&&pe.error(`Could not extract message for event ${Ti(t)}`),e}function uB(t){try{return t.exception.values[0].type==="SentryError"}catch{}return!1}function dB(t=[]){for(let e=t.length-1;e>=0;e--){const n=t[e];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function tp(t){try{let e;try{e=t.exception.values[0].stacktrace.frames}catch{}return e?dB(e):null}catch{return Qe&&pe.error(`Cannot extract url for event ${Ti(t)}`),null}}let D_;const fB="FunctionToString",L_=new WeakMap,hB=()=>({name:fB,setupOnce(){D_=Function.prototype.toString;try{Function.prototype.toString=function(...t){const e=Qb(this),n=L_.has(An())&&e!==void 0?e:this;return D_.apply(n,t)}}catch{}},setup(t){L_.set(t,!0)}}),pB=hB,Te=De;let m0=0;function RA(){return m0>0}function mB(){m0++,setTimeout(()=>{m0--})}function sc(t,e={},n){if(typeof t!="function")return t;try{const s=t.__sentry_wrapped__;if(s)return typeof s=="function"?s:t;if(Qb(t))return t}catch{return t}const r=function(){const s=Array.prototype.slice.call(arguments);try{const i=s.map(o=>sc(o,e));return t.apply(this,i)}catch(i){throw mB(),gA(o=>{o.addEventProcessor(a=>(e.mechanism&&(i0(a,void 0),ld(a,e.mechanism)),a.extra={...a.extra,arguments:s},a)),pA(i)}),i}};try{for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}catch{}eA(r,t),ad(t,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return t.name}})}catch{}return r}const xr=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function jA(t,e){const n=Zb(t,e),r={type:e&&e.name,value:xB(e)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function gB(t,e,n,r){const s=An(),i=s&&s.getOptions().normalizeDepth,o={exception:{values:[{type:Pm(e)?e.constructor.name:r?"UnhandledRejection":"Error",value:SB(e,{isUnhandledRejection:r})}]},extra:{__serialized__:lA(e,i)}};if(n){const a=Zb(t,n);a.length&&(o.exception.values[0].stacktrace={frames:a})}return o}function hy(t,e){return{exception:{values:[jA(t,e)]}}}function Zb(t,e){const n=e.stacktrace||e.stack||"",r=vB(e);try{return t(n,r)}catch{}return[]}const yB=/Minified React error #\d+;/i;function vB(t){if(t){if(typeof t.framesToPop=="number")return t.framesToPop;if(yB.test(t.message))return 1}return 0}function xB(t){const e=t&&t.message;return e?e.error&&typeof e.error.message=="string"?e.error.message:e:"No error message"}function bB(t,e,n,r){const s=n&&n.syntheticException||void 0,i=Xb(t,e,s,r);return ld(i),i.level="error",n&&n.event_id&&(i.event_id=n.event_id),rc(i)}function wB(t,e,n="info",r,s){const i=r&&r.syntheticException||void 0,o=g0(t,e,i,s);return o.level=n,r&&r.event_id&&(o.event_id=r.event_id),rc(o)}function Xb(t,e,n,r,s){let i;if(Hb(e)&&e.error)return hy(t,e.error);if(d_(e)||V$(e)){const o=e;if("stack"in e)i=hy(t,e);else{const a=o.name||(d_(o)?"DOMError":"DOMException"),l=o.message?`${a}: ${o.message}`:a;i=g0(t,l,n,r),i0(i,l)}return"code"in o&&(i.tags={...i.tags,"DOMException.code":`${o.code}`}),i}return Vb(e)?hy(t,e):nc(e)||Pm(e)?(i=gB(t,e,n,s),ld(i,{synthetic:!0}),i):(i=g0(t,e,n,r),i0(i,`${e}`),ld(i,{synthetic:!0}),i)}function g0(t,e,n,r){const s={};if(r&&n){const i=Zb(t,n);i.length&&(s.exception={values:[{value:e,stacktrace:{frames:i}}]})}if(qb(e)){const{__sentry_template_string__:i,__sentry_template_values__:o}=e;return s.logentry={message:i,params:o},s}return s.message=e,s}function SB(t,{isUnhandledRejection:e}){const n=lF(t),r=e?"promise rejection":"exception";return Hb(t)?`Event \`ErrorEvent\` captured as ${r} with message \`${t.message}\``:Pm(t)?`Event \`${kB(t)}\` (type=${t.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function kB(t){try{const e=Object.getPrototypeOf(t);return e?e.constructor.name:void 0}catch{}}function _B(t,{metadata:e,tunnel:n,dsn:r}){const s={event_id:t.event_id,sent_at:new Date().toISOString(),...e&&e.sdk&&{sdk:{name:e.sdk.name,version:e.sdk.version}},...!!n&&!!r&&{dsn:Tc(r)}},i=EB(t);return Oc(s,[i])}function EB(t){return[{type:"user_report"},t]}class CB extends q4{constructor(e){const n=Te.SENTRY_SDK_SOURCE||PF();AA(e,"browser",["browser"],n),super(e),e.sendClientReports&&Te.document&&Te.document.addEventListener("visibilitychange",()=>{Te.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(e,n){return bB(this._options.stackParser,e,n,this._options.attachStacktrace)}eventFromMessage(e,n="info",r){return wB(this._options.stackParser,e,n,r,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled()){xr&&pe.warn("SDK not enabled, will not capture user feedback.");return}const n=_B(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(n)}_prepareEvent(e,n,r){return e.platform=e.platform||"javascript",super._prepareEvent(e,n,r)}_flushOutcomes(){const e=this._clearOutcomes();if(e.length===0){xr&&pe.log("No outcomes to send");return}if(!this._dsn){xr&&pe.log("No dsn provided, will not send outcomes");return}xr&&pe.log("Sending outcomes:",e);const n=JF(e,this._options.tunnel&&Tc(this._dsn));this._sendEnvelope(n)}}let cu;function NB(){if(cu)return cu;if(c0(Te.fetch))return cu=Te.fetch.bind(Te);const t=Te.document;let e=Te.fetch;if(t&&typeof t.createElement=="function")try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n);const r=n.contentWindow;r&&r.fetch&&(e=r.fetch),t.head.removeChild(n)}catch(n){xr&&pe.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return cu=e.bind(Te)}function TB(){cu=void 0}function OB(t,e=NB()){let n=0,r=0;function s(i){const o=i.body.length;n+=o,r++;const a={body:i.body,method:"POST",referrerPolicy:"origin",headers:t.headers,keepalive:n<=6e4&&r<15,...t.fetchOptions};try{return e(t.url,a).then(l=>(n-=o,r--,{statusCode:l.status,headers:{"x-sentry-rate-limits":l.headers.get("X-Sentry-Rate-Limits"),"retry-after":l.headers.get("Retry-After")}}))}catch(l){return TB(),n-=o,r--,Jb(l)}}return OA(t,s)}const AB=4;function RB(t){function e(n){return new Gn((r,s)=>{const i=new XMLHttpRequest;i.onerror=s,i.onreadystatechange=()=>{i.readyState===AB&&r({statusCode:i.status,headers:{"x-sentry-rate-limits":i.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":i.getResponseHeader("Retry-After")}})},i.open("POST",t.url);for(const o in t.headers)Object.prototype.hasOwnProperty.call(t.headers,o)&&i.setRequestHeader(o,t.headers[o]);i.send(n.body)})}return OA(t,e)}const Um="?",jB=30,IB=40,PB=50;function ew(t,e,n,r){const s={filename:t,function:e,in_app:!0};return n!==void 0&&(s.lineno=n),r!==void 0&&(s.colno=r),s}const MB=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,DB=/\((\S*)(?::(\d+))(?::(\d+))\)/,LB=t=>{const e=MB.exec(t);if(e){if(e[2]&&e[2].indexOf("eval")===0){const i=DB.exec(e[2]);i&&(e[2]=i[1],e[3]=i[2],e[4]=i[3])}const[r,s]=IA(e[1]||Um,e[2]);return ew(s,r,e[3]?+e[3]:void 0,e[4]?+e[4]:void 0)}},$B=[jB,LB],FB=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,BB=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,UB=t=>{const e=FB.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){const i=BB.exec(e[3]);i&&(e[1]=e[1]||"eval",e[3]=i[1],e[4]=i[2],e[5]="")}let r=e[3],s=e[1]||Um;return[s,r]=IA(s,r),ew(r,s,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}},zB=[PB,UB],VB=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,HB=t=>{const e=VB.exec(t);return e?ew(e[2],e[1]||Um,+e[3],e[4]?+e[4]:void 0):void 0},qB=[IB,HB],WB=[$B,zB,qB],KB=rA(...WB),IA=(t,e)=>{const n=t.indexOf("safari-extension")!==-1,r=t.indexOf("safari-web-extension")!==-1;return n||r?[t.indexOf("@")!==-1?t.split("@")[0]:Um,n?`safari-extension:${e}`:`safari-web-extension:${e}`]:[t,e]},Of=1024,GB="Breadcrumbs",QB=(t={})=>{const e={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...t};return{name:GB,setupOnce(){},setup(n){e.console&&fF(XB(n)),e.dom&&mF(ZB(n,e.dom)),e.xhr&&RF(eU(n)),e.fetch&&wF(tU(n)),e.history&&aA(nU(n)),e.sentry&&n.on&&n.on("beforeSendEvent",YB(n))}}},JB=QB;function YB(t){return function(n){An()===t&&xa({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:Ti(n)},{event:n})}}function ZB(t,e){return function(r){if(An()!==t)return;let s,i,o=typeof e=="object"?e.serializeAttribute:void 0,a=typeof e=="object"&&typeof e.maxStringLength=="number"?e.maxStringLength:void 0;a&&a>Of&&(xr&&pe.warn(`\`dom.maxStringLength\` cannot exceed ${Of}, but a value of ${a} was configured. Sentry will use ${Of} instead.`),a=Of),typeof o=="string"&&(o=[o]);try{const c=r.event,u=rU(c)?c.target:c;s=YO(u,{keyAttrs:o,maxStringLength:a}),i=eF(u)}catch{s="<unknown>"}if(s.length===0)return;const l={category:`ui.${r.name}`,message:s};i&&(l.data={"ui.component_name":i}),xa(l,{event:r.event,name:r.name,global:r.global})}}function XB(t){return function(n){if(An()!==t)return;const r={category:"console",data:{arguments:n.args,logger:"console"},level:zF(n.level),message:f_(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message=`Assertion failed: ${f_(n.args.slice(1)," ")||"console.assert"}`,r.data.arguments=n.args.slice(1);else return;xa(r,{input:n.args,level:n.level})}}function eU(t){return function(n){if(An()!==t)return;const{startTimestamp:r,endTimestamp:s}=n,i=n.xhr[lu];if(!r||!s||!i)return;const{method:o,url:a,status_code:l,body:c}=i,u={method:o,url:a,status_code:l},d={xhr:n.xhr,input:c,startTimestamp:r,endTimestamp:s};xa({category:"xhr",data:u,type:"http"},d)}}function tU(t){return function(n){if(An()!==t)return;const{startTimestamp:r,endTimestamp:s}=n;if(s&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.error){const i=n.fetchData,o={data:n.error,input:n.args,startTimestamp:r,endTimestamp:s};xa({category:"fetch",data:i,level:"error",type:"http"},o)}else{const i=n.response,o={...n.fetchData,status_code:i&&i.status},a={input:n.args,response:i,startTimestamp:r,endTimestamp:s};xa({category:"fetch",data:o,type:"http"},a)}}}function nU(t){return function(n){if(An()!==t)return;let r=n.from,s=n.to;const i=dy(Te.location.href);let o=r?dy(r):void 0;const a=dy(s);(!o||!o.path)&&(o=i),i.protocol===a.protocol&&i.host===a.host&&(s=a.relative),i.protocol===o.protocol&&i.host===o.host&&(r=o.relative),xa({category:"navigation",data:{from:r,to:s}})}}function rU(t){return!!t&&!!t.target}const sU="Dedupe",iU=()=>{let t;return{name:sU,setupOnce(){},processEvent(e){if(e.type)return e;try{if(aU(e,t))return xr&&pe.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return t=e}}},oU=iU;function aU(t,e){return e?!!(lU(t,e)||cU(t,e)):!1}function lU(t,e){const n=t.message,r=e.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!MA(t,e)||!PA(t,e))}function cU(t,e){const n=$_(e),r=$_(t);return!(!n||!r||n.type!==r.type||n.value!==r.value||!MA(t,e)||!PA(t,e))}function PA(t,e){let n=F_(t),r=F_(e);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let s=0;s<r.length;s++){const i=r[s],o=n[s];if(i.filename!==o.filename||i.lineno!==o.lineno||i.colno!==o.colno||i.function!==o.function)return!1}return!0}function MA(t,e){let n=t.fingerprint,r=e.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function $_(t){return t.exception&&t.exception.values&&t.exception.values[0]}function F_(t){const e=t.exception;if(e)try{return e.values[0].stacktrace.frames}catch{return}}const uU="GlobalHandlers",dU=(t={})=>{const e={onerror:!0,onunhandledrejection:!0,...t};return{name:uU,setupOnce(){Error.stackTraceLimit=50},setup(n){e.onerror&&(hU(n),B_("onerror")),e.onunhandledrejection&&(pU(n),B_("onunhandledrejection"))}}},fU=dU;function hU(t){_F(e=>{const{stackParser:n,attachStacktrace:r}=LA();if(An()!==t||RA())return;const{msg:s,url:i,line:o,column:a,error:l}=e,c=l===void 0&&Gs(s)?yU(s,i,o,a):DA(Xb(n,l||s,void 0,r,!1),i,o,a);c.level="error",mA(c,{originalException:l,mechanism:{handled:!1,type:"onerror"}})})}function pU(t){CF(e=>{const{stackParser:n,attachStacktrace:r}=LA();if(An()!==t||RA())return;const s=mU(e),i=Wb(s)?gU(s):Xb(n,s,void 0,r,!0);i.level="error",mA(i,{originalException:s,mechanism:{handled:!1,type:"onunhandledrejection"}})})}function mU(t){if(Wb(t))return t;const e=t;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return t}function gU(t){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(t)}`}]}}}function yU(t,e,n,r){const s=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let i=Hb(t)?t.message:t,o="Error";const a=i.match(s);return a&&(o=a[1],i=a[2]),DA({exception:{values:[{type:o,value:i}]}},e,n,r)}function DA(t,e,n,r){const s=t.exception=t.exception||{},i=s.values=s.values||[],o=i[0]=i[0]||{},a=o.stacktrace=o.stacktrace||{},l=a.frames=a.frames||[],c=isNaN(parseInt(r,10))?void 0:r,u=isNaN(parseInt(n,10))?void 0:n,d=Gs(e)&&e.length>0?e:X$();return l.length===0&&l.push({colno:c,filename:d,function:"?",in_app:!0,lineno:u}),t}function B_(t){xr&&pe.log(`Global Handler attached: ${t}`)}function LA(){const t=An();return t&&t.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const vU="HttpContext",xU=()=>({name:vU,setupOnce(){},preprocessEvent(t){if(!Te.navigator&&!Te.location&&!Te.document)return;const e=t.request&&t.request.url||Te.location&&Te.location.href,{referrer:n}=Te.document||{},{userAgent:r}=Te.navigator||{},s={...t.request&&t.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},i={...t.request,...e&&{url:e},headers:s};t.request=i}}),bU=xU,wU="cause",SU=5,kU="LinkedErrors",_U=(t={})=>{const e=t.limit||SU,n=t.key||wU;return{name:kU,setupOnce(){},preprocessEvent(r,s,i){const o=i.getOptions();Q$(jA,o.stackParser,o.maxValueLength,n,e,r,s)}}},EU=_U,CU=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],NU="TryCatch",TU=(t={})=>{const e={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...t};return{name:NU,setupOnce(){e.setTimeout&&en(Te,"setTimeout",U_),e.setInterval&&en(Te,"setInterval",U_),e.requestAnimationFrame&&en(Te,"requestAnimationFrame",AU),e.XMLHttpRequest&&"XMLHttpRequest"in Te&&en(XMLHttpRequest.prototype,"send",RU);const n=e.eventTarget;n&&(Array.isArray(n)?n:CU).forEach(jU)}}},OU=TU;function U_(t){return function(...e){const n=e[0];return e[0]=sc(n,{mechanism:{data:{function:ho(t)},handled:!1,type:"instrument"}}),t.apply(this,e)}}function AU(t){return function(e){return t.apply(this,[sc(e,{mechanism:{data:{function:"requestAnimationFrame",handler:ho(t)},handled:!1,type:"instrument"}})])}}function RU(t){return function(...e){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(s=>{s in n&&typeof n[s]=="function"&&en(n,s,function(i){const o={mechanism:{data:{function:s,handler:ho(i)},handled:!1,type:"instrument"}},a=Qb(i);return a&&(o.mechanism.data.handler=ho(a)),sc(i,o)})}),t.apply(this,e)}}function jU(t){const e=Te,n=e[t]&&e[t].prototype;!n||!n.hasOwnProperty||!n.hasOwnProperty("addEventListener")||(en(n,"addEventListener",function(r){return function(s,i,o){try{typeof i.handleEvent=="function"&&(i.handleEvent=sc(i.handleEvent,{mechanism:{data:{function:"handleEvent",handler:ho(i),target:t},handled:!1,type:"instrument"}}))}catch{}return r.apply(this,[s,sc(i,{mechanism:{data:{function:"addEventListener",handler:ho(i),target:t},handled:!1,type:"instrument"}}),o])}}),en(n,"removeEventListener",function(r){return function(s,i,o){const a=i;try{const l=a&&a.__sentry_wrapped__;l&&r.call(this,s,l,o)}catch{}return r.call(this,s,a,o)}}))}const IU=[nB(),pB(),OU(),JB(),fU(),EU(),oU(),bU()];function PU(t){return[...IU]}function MU(t={}){t.defaultIntegrations===void 0&&(t.defaultIntegrations=PU()),t.release===void 0&&(typeof __SENTRY_RELEASE__=="string"&&(t.release=__SENTRY_RELEASE__),Te.SENTRY_RELEASE&&Te.SENTRY_RELEASE.id&&(t.release=Te.SENTRY_RELEASE.id)),t.autoSessionTracking===void 0&&(t.autoSessionTracking=!0),t.sendClientReports===void 0&&(t.sendClientReports=!0);const e={...t,stackParser:uF(t.stackParser||KB),integrations:F4(t),transport:t.transport||(oA()?OB:RB)};G4(CB,e),t.autoSessionTracking&&DU()}const z_=(t={},e=xs())=>{if(!Te.document){xr&&pe.error("Global document not defined in showReportDialog call");return}const{client:n,scope:r}=e.getStackTop(),s=t.dsn||n&&n.getDsn();if(!s){xr&&pe.error("DSN not configured for showReportDialog call");return}r&&(t.user={...r.getUser(),...t.user}),t.eventId||(t.eventId=e.lastEventId());const i=Te.document.createElement("script");i.async=!0,i.crossOrigin="anonymous",i.src=L4(s,t),t.onLoad&&(i.onload=t.onLoad);const{onClose:o}=t;if(o){const l=c=>{if(c.data==="__sentry_reportdialog_closed__")try{o()}finally{Te.removeEventListener("message",l)}};Te.addEventListener("message",l)}const a=Te.document.head||Te.document.body;a?a.appendChild(i):xr&&pe.error("Not injecting report dialog. No injection point found in HTML")};function DU(){if(typeof Te.document>"u"){xr&&pe.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}N_({ignoreDuration:!0}),T_(),aA(({from:t,to:e})=>{t!==void 0&&t!==e&&(N_({ignoreDuration:!0}),T_())})}function LU(t){const e={...t};AA(e,"react"),MU(e)}var $A={exports:{}},qe={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wt=typeof Symbol=="function"&&Symbol.for,tw=Wt?Symbol.for("react.element"):60103,nw=Wt?Symbol.for("react.portal"):60106,zm=Wt?Symbol.for("react.fragment"):60107,Vm=Wt?Symbol.for("react.strict_mode"):60108,Hm=Wt?Symbol.for("react.profiler"):60114,qm=Wt?Symbol.for("react.provider"):60109,Wm=Wt?Symbol.for("react.context"):60110,rw=Wt?Symbol.for("react.async_mode"):60111,Km=Wt?Symbol.for("react.concurrent_mode"):60111,Gm=Wt?Symbol.for("react.forward_ref"):60112,Qm=Wt?Symbol.for("react.suspense"):60113,$U=Wt?Symbol.for("react.suspense_list"):60120,Jm=Wt?Symbol.for("react.memo"):60115,Ym=Wt?Symbol.for("react.lazy"):60116,FU=Wt?Symbol.for("react.block"):60121,BU=Wt?Symbol.for("react.fundamental"):60117,UU=Wt?Symbol.for("react.responder"):60118,zU=Wt?Symbol.for("react.scope"):60119;function or(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case tw:switch(t=t.type,t){case rw:case Km:case zm:case Hm:case Vm:case Qm:return t;default:switch(t=t&&t.$$typeof,t){case Wm:case Gm:case Ym:case Jm:case qm:return t;default:return e}}case nw:return e}}}function FA(t){return or(t)===Km}qe.AsyncMode=rw;qe.ConcurrentMode=Km;qe.ContextConsumer=Wm;qe.ContextProvider=qm;qe.Element=tw;qe.ForwardRef=Gm;qe.Fragment=zm;qe.Lazy=Ym;qe.Memo=Jm;qe.Portal=nw;qe.Profiler=Hm;qe.StrictMode=Vm;qe.Suspense=Qm;qe.isAsyncMode=function(t){return FA(t)||or(t)===rw};qe.isConcurrentMode=FA;qe.isContextConsumer=function(t){return or(t)===Wm};qe.isContextProvider=function(t){return or(t)===qm};qe.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===tw};qe.isForwardRef=function(t){return or(t)===Gm};qe.isFragment=function(t){return or(t)===zm};qe.isLazy=function(t){return or(t)===Ym};qe.isMemo=function(t){return or(t)===Jm};qe.isPortal=function(t){return or(t)===nw};qe.isProfiler=function(t){return or(t)===Hm};qe.isStrictMode=function(t){return or(t)===Vm};qe.isSuspense=function(t){return or(t)===Qm};qe.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===zm||t===Km||t===Hm||t===Vm||t===Qm||t===$U||typeof t=="object"&&t!==null&&(t.$$typeof===Ym||t.$$typeof===Jm||t.$$typeof===qm||t.$$typeof===Wm||t.$$typeof===Gm||t.$$typeof===BU||t.$$typeof===UU||t.$$typeof===zU||t.$$typeof===FU)};qe.typeOf=or;$A.exports=qe;var VU=$A.exports,BA=VU,HU={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},qU={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},UA={};UA[BA.ForwardRef]=HU;UA[BA.Memo]=qU;const WU=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function KU(t){const e=t.match(/^([^.]+)/);return e!==null&&parseInt(e[0])>=17}const V_={componentStack:null,error:null,eventId:null};function GU(t,e){const n=new WeakMap;function r(s,i){if(!n.has(s)){if(s.cause)return n.set(s,!0),r(s.cause,i);s.cause=i}}r(t,e)}class sw extends w.Component{constructor(e){super(e),sw.prototype.__init.call(this),this.state=V_,this._openFallbackReportDialog=!0;const n=An();n&&n.on&&e.showDialog&&(this._openFallbackReportDialog=!1,n.on("afterSendEvent",r=>{!r.type&&r.event_id===this._lastEventId&&z_({...e.dialogOptions,eventId:this._lastEventId})}))}componentDidCatch(e,{componentStack:n}){const{beforeCapture:r,onError:s,showDialog:i,dialogOptions:o}=this.props;gA(a=>{if(KU(w.version)&&Vb(e)){const c=new Error(e.message);c.name=`React ErrorBoundary ${e.name}`,c.stack=n,GU(e,c)}r&&r(a,e,n);const l=pA(e,{captureContext:{contexts:{react:{componentStack:n}}},mechanism:{handled:!!this.props.fallback}});s&&s(e,n,l),i&&(this._lastEventId=l,this._openFallbackReportDialog&&z_({...o,eventId:l})),this.setState({error:e,componentStack:n,eventId:l})})}componentDidMount(){const{onMount:e}=this.props;e&&e()}componentWillUnmount(){const{error:e,componentStack:n,eventId:r}=this.state,{onUnmount:s}=this.props;s&&s(e,n,r)}__init(){this.resetErrorBoundary=()=>{const{onReset:e}=this.props,{error:n,componentStack:r,eventId:s}=this.state;e&&e(n,r,s),this.setState(V_)}}render(){const{fallback:e,children:n}=this.props,r=this.state;if(r.error){let s;return typeof e=="function"?s=e({error:r.error,componentStack:r.componentStack,resetError:this.resetErrorBoundary,eventId:r.eventId}):s=e,w.isValidElement(s)?s:(e&&WU&&pe.warn("fallback did not produce a valid ReactElement"),null)}return typeof n=="function"?n():n}}var Ac=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},QU={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},ji,Gx,kN,JU=(kN=class{constructor(){ce(this,ji,QU);ce(this,Gx,!1)}setTimeoutProvider(t){J(this,ji,t)}setTimeout(t,e){return C(this,ji).setTimeout(t,e)}clearTimeout(t){C(this,ji).clearTimeout(t)}setInterval(t,e){return C(this,ji).setInterval(t,e)}clearInterval(t){C(this,ji).clearInterval(t)}},ji=new WeakMap,Gx=new WeakMap,kN),Ho=new JU;function YU(t){setTimeout(t,0)}var ba=typeof window>"u"||"Deno"in globalThis;function wn(){}function ZU(t,e){return typeof t=="function"?t(e):t}function y0(t){return typeof t=="number"&&t>=0&&t!==1/0}function zA(t,e){return Math.max(t+(e||0)-Date.now(),0)}function to(t,e){return typeof t=="function"?t(e):t}function fr(t,e){return typeof t=="function"?t(e):t}function H_(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==iw(o,e.options))return!1}else if(!ud(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function q_(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(wa(e.options.mutationKey)!==wa(i))return!1}else if(!ud(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function iw(t,e){return((e==null?void 0:e.queryKeyHashFn)||wa)(t)}function wa(t){return JSON.stringify(t,(e,n)=>v0(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function ud(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>ud(t[n],e[n])):!1}var XU=Object.prototype.hasOwnProperty;function VA(t,e,n=0){if(t===e)return t;if(n>500)return e;const r=W_(t)&&W_(e);if(!r&&!(v0(t)&&v0(e)))return e;const i=(r?t:Object.keys(t)).length,o=r?e:Object.keys(e),a=o.length,l=r?new Array(a):{};let c=0;for(let u=0;u<a;u++){const d=r?u:o[u],f=t[d],p=e[d];if(f===p){l[d]=f,(r?u<i:XU.call(t,d))&&c++;continue}if(f===null||p===null||typeof f!="object"||typeof p!="object"){l[d]=p;continue}const m=VA(f,p,n+1);l[d]=m,m===f&&c++}return i===a&&c===i?t:l}function np(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function W_(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function v0(t){if(!K_(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!K_(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function K_(t){return Object.prototype.toString.call(t)==="[object Object]"}function e3(t){return new Promise(e=>{Ho.setTimeout(e,t)})}function x0(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?VA(t,e):e}function t3(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function n3(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var ow=Symbol();function HA(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===ow?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function aw(t,e){return typeof t=="function"?t(...e):!!t}function r3(t,e,n){let r=!1,s;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(s??(s=e()),r||(r=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),t}var Jo,Ii,Ll,_N,s3=(_N=class extends Ac{constructor(){super();ce(this,Jo);ce(this,Ii);ce(this,Ll);J(this,Ll,e=>{if(!ba&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){C(this,Ii)||this.setEventListener(C(this,Ll))}onUnsubscribe(){var e;this.hasListeners()||((e=C(this,Ii))==null||e.call(this),J(this,Ii,void 0))}setEventListener(e){var n;J(this,Ll,e),(n=C(this,Ii))==null||n.call(this),J(this,Ii,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){C(this,Jo)!==e&&(J(this,Jo,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof C(this,Jo)=="boolean"?C(this,Jo):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Jo=new WeakMap,Ii=new WeakMap,Ll=new WeakMap,_N),lw=new s3;function b0(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}var i3=YU;function o3(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=i3;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var Dt=o3(),$l,Pi,Fl,EN,a3=(EN=class extends Ac{constructor(){super();ce(this,$l,!0);ce(this,Pi);ce(this,Fl);J(this,Fl,e=>{if(!ba&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){C(this,Pi)||this.setEventListener(C(this,Fl))}onUnsubscribe(){var e;this.hasListeners()||((e=C(this,Pi))==null||e.call(this),J(this,Pi,void 0))}setEventListener(e){var n;J(this,Fl,e),(n=C(this,Pi))==null||n.call(this),J(this,Pi,e(this.setOnline.bind(this)))}setOnline(e){C(this,$l)!==e&&(J(this,$l,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return C(this,$l)}},$l=new WeakMap,Pi=new WeakMap,Fl=new WeakMap,EN),rp=new a3;function l3(t){return Math.min(1e3*2**t,3e4)}function qA(t){return(t??"online")==="online"?rp.isOnline():!0}var w0=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function WA(t){let e=!1,n=0,r;const s=b0(),i=()=>s.status!=="pending",o=g=>{var y;if(!i()){const v=new w0(g);f(v),(y=t.onCancel)==null||y.call(t,v)}},a=()=>{e=!0},l=()=>{e=!1},c=()=>lw.isFocused()&&(t.networkMode==="always"||rp.isOnline())&&t.canRun(),u=()=>qA(t.networkMode)&&t.canRun(),d=g=>{i()||(r==null||r(),s.resolve(g))},f=g=>{i()||(r==null||r(),s.reject(g))},p=()=>new Promise(g=>{var y;r=v=>{(i()||c())&&g(v)},(y=t.onPause)==null||y.call(t)}).then(()=>{var g;r=void 0,i()||(g=t.onContinue)==null||g.call(t)}),m=()=>{if(i())return;let g;const y=n===0?t.initialPromise:void 0;try{g=y??t.fn()}catch(v){g=Promise.reject(v)}Promise.resolve(g).then(d).catch(v=>{var E;if(i())return;const x=t.retry??(ba?0:3),b=t.retryDelay??l3,S=typeof b=="function"?b(n,v):b,k=x===!0||typeof x=="number"&&n<x||typeof x=="function"&&x(n,v);if(e||!k){f(v);return}n++,(E=t.onFail)==null||E.call(t,n,v),e3(S).then(()=>c()?void 0:p()).then(()=>{e?f(v):m()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?m():p().then(m),s)}}var Yo,CN,KA=(CN=class{constructor(){ce(this,Yo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),y0(this.gcTime)&&J(this,Yo,Ho.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(ba?1/0:5*60*1e3))}clearGcTimeout(){C(this,Yo)&&(Ho.clearTimeout(C(this,Yo)),J(this,Yo,void 0))}},Yo=new WeakMap,CN),Zo,Bl,dr,Xo,Ft,Dd,ea,Ir,Ts,NN,c3=(NN=class extends KA{constructor(e){super();ce(this,Ir);ce(this,Zo);ce(this,Bl);ce(this,dr);ce(this,Xo);ce(this,Ft);ce(this,Dd);ce(this,ea);J(this,ea,!1),J(this,Dd,e.defaultOptions),this.setOptions(e.options),this.observers=[],J(this,Xo,e.client),J(this,dr,C(this,Xo).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,J(this,Zo,Q_(this.options)),this.state=e.state??C(this,Zo),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=C(this,Ft))==null?void 0:e.promise}setOptions(e){if(this.options={...C(this,Dd),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=Q_(this.options);n.data!==void 0&&(this.setState(G_(n.data,n.dataUpdatedAt)),J(this,Zo,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&C(this,dr).remove(this)}setData(e,n){const r=x0(this.state.data,e,this.options);return ke(this,Ir,Ts).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){ke(this,Ir,Ts).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=C(this,Ft))==null?void 0:r.promise;return(s=C(this,Ft))==null||s.cancel(e),n?n.then(wn).catch(wn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(C(this,Zo))}isActive(){return this.observers.some(e=>fr(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ow||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>to(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!zA(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=C(this,Ft))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=C(this,Ft))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),C(this,dr).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(C(this,Ft)&&(C(this,ea)?C(this,Ft).cancel({revert:!0}):C(this,Ft).cancelRetry()),this.scheduleGc()),C(this,dr).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ke(this,Ir,Ts).call(this,{type:"invalidate"})}async fetch(e,n){var l,c,u,d,f,p,m,g,y,v,x,b;if(this.state.fetchStatus!=="idle"&&((l=C(this,Ft))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(C(this,Ft))return C(this,Ft).continueRetry(),C(this,Ft).promise}if(e&&this.setOptions(e),!this.options.queryFn){const S=this.observers.find(k=>k.options.queryFn);S&&this.setOptions(S.options)}const r=new AbortController,s=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(J(this,ea,!0),r.signal)})},i=()=>{const S=HA(this.options,n),E=(()=>{const _={client:C(this,Xo),queryKey:this.queryKey,meta:this.meta};return s(_),_})();return J(this,ea,!1),this.options.persister?this.options.persister(S,E,this):S(E)},a=(()=>{const S={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:C(this,Xo),state:this.state,fetchFn:i};return s(S),S})();(c=this.options.behavior)==null||c.onFetch(a,this),J(this,Bl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&ke(this,Ir,Ts).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta}),J(this,Ft,WA({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,onCancel:S=>{S instanceof w0&&S.revert&&this.setState({...C(this,Bl),fetchStatus:"idle"}),r.abort()},onFail:(S,k)=>{ke(this,Ir,Ts).call(this,{type:"failed",failureCount:S,error:k})},onPause:()=>{ke(this,Ir,Ts).call(this,{type:"pause"})},onContinue:()=>{ke(this,Ir,Ts).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const S=await C(this,Ft).start();if(S===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(S),(p=(f=C(this,dr).config).onSuccess)==null||p.call(f,S,this),(g=(m=C(this,dr).config).onSettled)==null||g.call(m,S,this.state.error,this),S}catch(S){if(S instanceof w0){if(S.silent)return C(this,Ft).promise;if(S.revert){if(this.state.data===void 0)throw S;return this.state.data}}throw ke(this,Ir,Ts).call(this,{type:"error",error:S}),(v=(y=C(this,dr).config).onError)==null||v.call(y,S,this),(b=(x=C(this,dr).config).onSettled)==null||b.call(x,this.state.data,S,this),S}finally{this.scheduleGc()}}},Zo=new WeakMap,Bl=new WeakMap,dr=new WeakMap,Xo=new WeakMap,Ft=new WeakMap,Dd=new WeakMap,ea=new WeakMap,Ir=new WeakSet,Ts=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...GA(r.data,this.options),fetchMeta:e.meta??null};case"success":const s={...r,...G_(e.data,e.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return J(this,Bl,e.manual?s:void 0),s;case"error":const i=e.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),Dt.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),C(this,dr).notify({query:this,type:"updated",action:e})})},NN);function GA(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:qA(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function G_(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Q_(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Rn,Ne,Ld,vn,ta,Ul,Ls,Mi,$d,zl,Vl,na,ra,Di,Hl,Le,uu,S0,k0,_0,E0,C0,N0,T0,QA,TN,u3=(TN=class extends Ac{constructor(e,n){super();ce(this,Le);ce(this,Rn);ce(this,Ne);ce(this,Ld);ce(this,vn);ce(this,ta);ce(this,Ul);ce(this,Ls);ce(this,Mi);ce(this,$d);ce(this,zl);ce(this,Vl);ce(this,na);ce(this,ra);ce(this,Di);ce(this,Hl,new Set);this.options=n,J(this,Rn,e),J(this,Mi,null),J(this,Ls,b0()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(C(this,Ne).addObserver(this),J_(C(this,Ne),this.options)?ke(this,Le,uu).call(this):this.updateResult(),ke(this,Le,E0).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return O0(C(this,Ne),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return O0(C(this,Ne),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ke(this,Le,C0).call(this),ke(this,Le,N0).call(this),C(this,Ne).removeObserver(this)}setOptions(e){const n=this.options,r=C(this,Ne);if(this.options=C(this,Rn).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof fr(this.options.enabled,C(this,Ne))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ke(this,Le,T0).call(this),C(this,Ne).setOptions(this.options),n._defaulted&&!np(this.options,n)&&C(this,Rn).getQueryCache().notify({type:"observerOptionsUpdated",query:C(this,Ne),observer:this});const s=this.hasListeners();s&&Y_(C(this,Ne),r,this.options,n)&&ke(this,Le,uu).call(this),this.updateResult(),s&&(C(this,Ne)!==r||fr(this.options.enabled,C(this,Ne))!==fr(n.enabled,C(this,Ne))||to(this.options.staleTime,C(this,Ne))!==to(n.staleTime,C(this,Ne)))&&ke(this,Le,S0).call(this);const i=ke(this,Le,k0).call(this);s&&(C(this,Ne)!==r||fr(this.options.enabled,C(this,Ne))!==fr(n.enabled,C(this,Ne))||i!==C(this,Di))&&ke(this,Le,_0).call(this,i)}getOptimisticResult(e){const n=C(this,Rn).getQueryCache().build(C(this,Rn),e),r=this.createResult(n,e);return f3(this,r)&&(J(this,vn,r),J(this,Ul,this.options),J(this,ta,C(this,Ne).state)),r}getCurrentResult(){return C(this,vn)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&C(this,Ls).status==="pending"&&C(this,Ls).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,s))})}trackProp(e){C(this,Hl).add(e)}getCurrentQuery(){return C(this,Ne)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=C(this,Rn).defaultQueryOptions(e),r=C(this,Rn).getQueryCache().build(C(this,Rn),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return ke(this,Le,uu).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),C(this,vn)))}createResult(e,n){var A;const r=C(this,Ne),s=this.options,i=C(this,vn),o=C(this,ta),a=C(this,Ul),c=e!==r?e.state:C(this,Ld),{state:u}=e;let d={...u},f=!1,p;if(n._optimisticResults){const O=this.hasListeners(),U=!O&&J_(e,n),P=O&&Y_(e,r,n,s);(U||P)&&(d={...d,...GA(u.data,e.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:m,errorUpdatedAt:g,status:y}=d;p=d.data;let v=!1;if(n.placeholderData!==void 0&&p===void 0&&y==="pending"){let O;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(O=i.data,v=!0):O=typeof n.placeholderData=="function"?n.placeholderData((A=C(this,Vl))==null?void 0:A.state.data,C(this,Vl)):n.placeholderData,O!==void 0&&(y="success",p=x0(i==null?void 0:i.data,O,n),f=!0)}if(n.select&&p!==void 0&&!v)if(i&&p===(o==null?void 0:o.data)&&n.select===C(this,$d))p=C(this,zl);else try{J(this,$d,n.select),p=n.select(p),p=x0(i==null?void 0:i.data,p,n),J(this,zl,p),J(this,Mi,null)}catch(O){J(this,Mi,O)}C(this,Mi)&&(m=C(this,Mi),p=C(this,zl),g=Date.now(),y="error");const x=d.fetchStatus==="fetching",b=y==="pending",S=y==="error",k=b&&x,E=p!==void 0,T={status:y,fetchStatus:d.fetchStatus,isPending:b,isSuccess:y==="success",isError:S,isInitialLoading:k,isLoading:k,data:p,dataUpdatedAt:d.dataUpdatedAt,error:m,errorUpdatedAt:g,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>c.dataUpdateCount||d.errorUpdateCount>c.errorUpdateCount,isFetching:x,isRefetching:x&&!b,isLoadingError:S&&!E,isPaused:d.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:S&&E,isStale:cw(e,n),refetch:this.refetch,promise:C(this,Ls),isEnabled:fr(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const O=T.data!==void 0,U=T.status==="error"&&!O,P=K=>{U?K.reject(T.error):O&&K.resolve(T.data)},L=()=>{const K=J(this,Ls,T.promise=b0());P(K)},z=C(this,Ls);switch(z.status){case"pending":e.queryHash===r.queryHash&&P(z);break;case"fulfilled":(U||T.data!==z.value)&&L();break;case"rejected":(!U||T.error!==z.reason)&&L();break}}return T}updateResult(){const e=C(this,vn),n=this.createResult(C(this,Ne),this.options);if(J(this,ta,C(this,Ne).state),J(this,Ul,this.options),C(this,ta).data!==void 0&&J(this,Vl,C(this,Ne)),np(n,e))return;J(this,vn,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!C(this,Hl).size)return!0;const o=new Set(i??C(this,Hl));return this.options.throwOnError&&o.add("error"),Object.keys(C(this,vn)).some(a=>{const l=a;return C(this,vn)[l]!==e[l]&&o.has(l)})};ke(this,Le,QA).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ke(this,Le,E0).call(this)}},Rn=new WeakMap,Ne=new WeakMap,Ld=new WeakMap,vn=new WeakMap,ta=new WeakMap,Ul=new WeakMap,Ls=new WeakMap,Mi=new WeakMap,$d=new WeakMap,zl=new WeakMap,Vl=new WeakMap,na=new WeakMap,ra=new WeakMap,Di=new WeakMap,Hl=new WeakMap,Le=new WeakSet,uu=function(e){ke(this,Le,T0).call(this);let n=C(this,Ne).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(wn)),n},S0=function(){ke(this,Le,C0).call(this);const e=to(this.options.staleTime,C(this,Ne));if(ba||C(this,vn).isStale||!y0(e))return;const r=zA(C(this,vn).dataUpdatedAt,e)+1;J(this,na,Ho.setTimeout(()=>{C(this,vn).isStale||this.updateResult()},r))},k0=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(C(this,Ne)):this.options.refetchInterval)??!1},_0=function(e){ke(this,Le,N0).call(this),J(this,Di,e),!(ba||fr(this.options.enabled,C(this,Ne))===!1||!y0(C(this,Di))||C(this,Di)===0)&&J(this,ra,Ho.setInterval(()=>{(this.options.refetchIntervalInBackground||lw.isFocused())&&ke(this,Le,uu).call(this)},C(this,Di)))},E0=function(){ke(this,Le,S0).call(this),ke(this,Le,_0).call(this,ke(this,Le,k0).call(this))},C0=function(){C(this,na)&&(Ho.clearTimeout(C(this,na)),J(this,na,void 0))},N0=function(){C(this,ra)&&(Ho.clearInterval(C(this,ra)),J(this,ra,void 0))},T0=function(){const e=C(this,Rn).getQueryCache().build(C(this,Rn),this.options);if(e===C(this,Ne))return;const n=C(this,Ne);J(this,Ne,e),J(this,Ld,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},QA=function(e){Dt.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(C(this,vn))}),C(this,Rn).getQueryCache().notify({query:C(this,Ne),type:"observerResultsUpdated"})})},TN);function d3(t,e){return fr(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function J_(t,e){return d3(t,e)||t.state.data!==void 0&&O0(t,e,e.refetchOnMount)}function O0(t,e,n){if(fr(e.enabled,t)!==!1&&to(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&cw(t,e)}return!1}function Y_(t,e,n,r){return(t!==e||fr(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&cw(t,n)}function cw(t,e){return fr(e.enabled,t)!==!1&&t.isStaleByTime(to(e.staleTime,t))}function f3(t,e){return!np(t.getCurrentResult(),e)}function Z_(t){return{onFetch:(e,n)=>{var u,d,f,p,m;const r=e.options,s=(f=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:f.direction,i=((p=e.state.data)==null?void 0:p.pages)||[],o=((m=e.state.data)==null?void 0:m.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let g=!1;const y=b=>{r3(b,()=>e.signal,()=>g=!0)},v=HA(e.options,e.fetchOptions),x=async(b,S,k)=>{if(g)return Promise.reject();if(S==null&&b.pages.length)return Promise.resolve(b);const _=(()=>{const U={client:e.client,queryKey:e.queryKey,pageParam:S,direction:k?"backward":"forward",meta:e.options.meta};return y(U),U})(),T=await v(_),{maxPages:A}=e.options,O=k?n3:t3;return{pages:O(b.pages,T,A),pageParams:O(b.pageParams,S,A)}};if(s&&i.length){const b=s==="backward",S=b?h3:X_,k={pages:i,pageParams:o},E=S(r,k);a=await x(k,E,b)}else{const b=t??i.length;do{const S=l===0?o[0]??r.initialPageParam:X_(r,a);if(l>0&&S==null)break;a=await x(a,S),l++}while(l<b)}return a};e.options.persister?e.fetchFn=()=>{var g,y;return(y=(g=e.options).persister)==null?void 0:y.call(g,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function X_(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function h3(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Fd,rs,ln,sa,ss,mi,ON,p3=(ON=class extends KA{constructor(e){super();ce(this,ss);ce(this,Fd);ce(this,rs);ce(this,ln);ce(this,sa);J(this,Fd,e.client),this.mutationId=e.mutationId,J(this,ln,e.mutationCache),J(this,rs,[]),this.state=e.state||JA(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){C(this,rs).includes(e)||(C(this,rs).push(e),this.clearGcTimeout(),C(this,ln).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){J(this,rs,C(this,rs).filter(n=>n!==e)),this.scheduleGc(),C(this,ln).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){C(this,rs).length||(this.state.status==="pending"?this.scheduleGc():C(this,ln).remove(this))}continue(){var e;return((e=C(this,sa))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,a,l,c,u,d,f,p,m,g,y,v,x,b,S,k,E,_;const n=()=>{ke(this,ss,mi).call(this,{type:"continue"})},r={client:C(this,Fd),meta:this.options.meta,mutationKey:this.options.mutationKey};J(this,sa,WA({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(T,A)=>{ke(this,ss,mi).call(this,{type:"failed",failureCount:T,error:A})},onPause:()=>{ke(this,ss,mi).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>C(this,ln).canRun(this)}));const s=this.state.status==="pending",i=!C(this,sa).canStart();try{if(s)n();else{ke(this,ss,mi).call(this,{type:"pending",variables:e,isPaused:i}),C(this,ln).config.onMutate&&await C(this,ln).config.onMutate(e,this,r);const A=await((a=(o=this.options).onMutate)==null?void 0:a.call(o,e,r));A!==this.state.context&&ke(this,ss,mi).call(this,{type:"pending",context:A,variables:e,isPaused:i})}const T=await C(this,sa).start();return await((c=(l=C(this,ln).config).onSuccess)==null?void 0:c.call(l,T,e,this.state.context,this,r)),await((d=(u=this.options).onSuccess)==null?void 0:d.call(u,T,e,this.state.context,r)),await((p=(f=C(this,ln).config).onSettled)==null?void 0:p.call(f,T,null,this.state.variables,this.state.context,this,r)),await((g=(m=this.options).onSettled)==null?void 0:g.call(m,T,null,e,this.state.context,r)),ke(this,ss,mi).call(this,{type:"success",data:T}),T}catch(T){try{await((v=(y=C(this,ln).config).onError)==null?void 0:v.call(y,T,e,this.state.context,this,r))}catch(A){Promise.reject(A)}try{await((b=(x=this.options).onError)==null?void 0:b.call(x,T,e,this.state.context,r))}catch(A){Promise.reject(A)}try{await((k=(S=C(this,ln).config).onSettled)==null?void 0:k.call(S,void 0,T,this.state.variables,this.state.context,this,r))}catch(A){Promise.reject(A)}try{await((_=(E=this.options).onSettled)==null?void 0:_.call(E,void 0,T,e,this.state.context,r))}catch(A){Promise.reject(A)}throw ke(this,ss,mi).call(this,{type:"error",error:T}),T}finally{C(this,ln).runNext(this)}}},Fd=new WeakMap,rs=new WeakMap,ln=new WeakMap,sa=new WeakMap,ss=new WeakSet,mi=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Dt.batch(()=>{C(this,rs).forEach(r=>{r.onMutationUpdate(e)}),C(this,ln).notify({mutation:this,type:"updated",action:e})})},ON);function JA(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var $s,Pr,Bd,AN,m3=(AN=class extends Ac{constructor(e={}){super();ce(this,$s);ce(this,Pr);ce(this,Bd);this.config=e,J(this,$s,new Set),J(this,Pr,new Map),J(this,Bd,0)}build(e,n,r){const s=new p3({client:e,mutationCache:this,mutationId:++of(this,Bd)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){C(this,$s).add(e);const n=Af(e);if(typeof n=="string"){const r=C(this,Pr).get(n);r?r.push(e):C(this,Pr).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(C(this,$s).delete(e)){const n=Af(e);if(typeof n=="string"){const r=C(this,Pr).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&C(this,Pr).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Af(e);if(typeof n=="string"){const r=C(this,Pr).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=Af(e);if(typeof n=="string"){const s=(r=C(this,Pr).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Dt.batch(()=>{C(this,$s).forEach(e=>{this.notify({type:"removed",mutation:e})}),C(this,$s).clear(),C(this,Pr).clear()})}getAll(){return Array.from(C(this,$s))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>q_(n,r))}findAll(e={}){return this.getAll().filter(n=>q_(e,n))}notify(e){Dt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Dt.batch(()=>Promise.all(e.map(n=>n.continue().catch(wn))))}},$s=new WeakMap,Pr=new WeakMap,Bd=new WeakMap,AN);function Af(t){var e;return(e=t.options.scope)==null?void 0:e.id}var Fs,Li,jn,Bs,Zs,xh,A0,RN,g3=(RN=class extends Ac{constructor(n,r){super();ce(this,Zs);ce(this,Fs);ce(this,Li);ce(this,jn);ce(this,Bs);J(this,Fs,n),this.setOptions(r),this.bindMethods(),ke(this,Zs,xh).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=C(this,Fs).defaultMutationOptions(n),np(this.options,r)||C(this,Fs).getMutationCache().notify({type:"observerOptionsUpdated",mutation:C(this,jn),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&wa(r.mutationKey)!==wa(this.options.mutationKey)?this.reset():((s=C(this,jn))==null?void 0:s.state.status)==="pending"&&C(this,jn).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=C(this,jn))==null||n.removeObserver(this)}onMutationUpdate(n){ke(this,Zs,xh).call(this),ke(this,Zs,A0).call(this,n)}getCurrentResult(){return C(this,Li)}reset(){var n;(n=C(this,jn))==null||n.removeObserver(this),J(this,jn,void 0),ke(this,Zs,xh).call(this),ke(this,Zs,A0).call(this)}mutate(n,r){var s;return J(this,Bs,r),(s=C(this,jn))==null||s.removeObserver(this),J(this,jn,C(this,Fs).getMutationCache().build(C(this,Fs),this.options)),C(this,jn).addObserver(this),C(this,jn).execute(n)}},Fs=new WeakMap,Li=new WeakMap,jn=new WeakMap,Bs=new WeakMap,Zs=new WeakSet,xh=function(){var r;const n=((r=C(this,jn))==null?void 0:r.state)??JA();J(this,Li,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},A0=function(n){Dt.batch(()=>{var r,s,i,o,a,l,c,u;if(C(this,Bs)&&this.hasListeners()){const d=C(this,Li).variables,f=C(this,Li).context,p={client:C(this,Fs),meta:this.options.meta,mutationKey:this.options.mutationKey};if((n==null?void 0:n.type)==="success"){try{(s=(r=C(this,Bs)).onSuccess)==null||s.call(r,n.data,d,f,p)}catch(m){Promise.reject(m)}try{(o=(i=C(this,Bs)).onSettled)==null||o.call(i,n.data,null,d,f,p)}catch(m){Promise.reject(m)}}else if((n==null?void 0:n.type)==="error"){try{(l=(a=C(this,Bs)).onError)==null||l.call(a,n.error,d,f,p)}catch(m){Promise.reject(m)}try{(u=(c=C(this,Bs)).onSettled)==null||u.call(c,void 0,n.error,d,f,p)}catch(m){Promise.reject(m)}}}this.listeners.forEach(d=>{d(C(this,Li))})})},RN),is,jN,y3=(jN=class extends Ac{constructor(e={}){super();ce(this,is);this.config=e,J(this,is,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??iw(s,n);let o=this.get(i);return o||(o=new c3({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){C(this,is).has(e.queryHash)||(C(this,is).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=C(this,is).get(e.queryHash);n&&(e.destroy(),n===e&&C(this,is).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Dt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return C(this,is).get(e)}getAll(){return[...C(this,is).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>H_(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>H_(e,r)):n}notify(e){Dt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Dt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Dt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},is=new WeakMap,jN),pt,$i,Fi,ql,Wl,Bi,Kl,Gl,IN,v3=(IN=class{constructor(t={}){ce(this,pt);ce(this,$i);ce(this,Fi);ce(this,ql);ce(this,Wl);ce(this,Bi);ce(this,Kl);ce(this,Gl);J(this,pt,t.queryCache||new y3),J(this,$i,t.mutationCache||new m3),J(this,Fi,t.defaultOptions||{}),J(this,ql,new Map),J(this,Wl,new Map),J(this,Bi,0)}mount(){of(this,Bi)._++,C(this,Bi)===1&&(J(this,Kl,lw.subscribe(async t=>{t&&(await this.resumePausedMutations(),C(this,pt).onFocus())})),J(this,Gl,rp.subscribe(async t=>{t&&(await this.resumePausedMutations(),C(this,pt).onOnline())})))}unmount(){var t,e;of(this,Bi)._--,C(this,Bi)===0&&((t=C(this,Kl))==null||t.call(this),J(this,Kl,void 0),(e=C(this,Gl))==null||e.call(this),J(this,Gl,void 0))}isFetching(t){return C(this,pt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return C(this,$i).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=C(this,pt).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=C(this,pt).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(to(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return C(this,pt).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=C(this,pt).get(r.queryHash),i=s==null?void 0:s.state.data,o=ZU(e,i);if(o!==void 0)return C(this,pt).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Dt.batch(()=>C(this,pt).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=C(this,pt).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=C(this,pt);Dt.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=C(this,pt);return Dt.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Dt.batch(()=>C(this,pt).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(wn).catch(wn)}invalidateQueries(t,e={}){return Dt.batch(()=>(C(this,pt).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Dt.batch(()=>C(this,pt).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(wn)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(wn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=C(this,pt).build(this,e);return n.isStaleByTime(to(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(wn).catch(wn)}fetchInfiniteQuery(t){return t.behavior=Z_(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(wn).catch(wn)}ensureInfiniteQueryData(t){return t.behavior=Z_(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return rp.isOnline()?C(this,$i).resumePausedMutations():Promise.resolve()}getQueryCache(){return C(this,pt)}getMutationCache(){return C(this,$i)}getDefaultOptions(){return C(this,Fi)}setDefaultOptions(t){J(this,Fi,t)}setQueryDefaults(t,e){C(this,ql).set(wa(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...C(this,ql).values()],n={};return e.forEach(r=>{ud(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){C(this,Wl).set(wa(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...C(this,Wl).values()],n={};return e.forEach(r=>{ud(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...C(this,Fi).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=iw(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===ow&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...C(this,Fi).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){C(this,pt).clear(),C(this,$i).clear()}},pt=new WeakMap,$i=new WeakMap,Fi=new WeakMap,ql=new WeakMap,Wl=new WeakMap,Bi=new WeakMap,Kl=new WeakMap,Gl=new WeakMap,IN),YA=w.createContext(void 0),Rt=t=>{const e=w.useContext(YA);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},x3=({client:t,children:e})=>(w.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),h.jsx(YA.Provider,{value:t,children:e})),ZA=w.createContext(!1),b3=()=>w.useContext(ZA);ZA.Provider;function w3(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var S3=w.createContext(w3()),k3=()=>w.useContext(S3),_3=(t,e,n)=>{const r=n!=null&&n.state.error&&typeof t.throwOnError=="function"?aw(t.throwOnError,[n.state.error,n]):t.throwOnError;(t.suspense||t.experimental_prefetchInRender||r)&&(e.isReset()||(t.retryOnMount=!1))},E3=t=>{w.useEffect(()=>{t.clearReset()},[t])},C3=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||aw(n,[t.error,r])),N3=t=>{if(t.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},T3=(t,e)=>t.isLoading&&t.isFetching&&!e,O3=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,e1=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function A3(t,e,n){var f,p,m,g;const r=b3(),s=k3(),i=Rt(),o=i.defaultQueryOptions(t);(p=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||p.call(f,o);const a=i.getQueryCache().get(o.queryHash);o._optimisticResults=r?"isRestoring":"optimistic",N3(o),_3(o,s,a),E3(s);const l=!i.getQueryCache().get(o.queryHash),[c]=w.useState(()=>new e(i,o)),u=c.getOptimisticResult(o),d=!r&&t.subscribed!==!1;if(w.useSyncExternalStore(w.useCallback(y=>{const v=d?c.subscribe(Dt.batchCalls(y)):wn;return c.updateResult(),v},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),w.useEffect(()=>{c.setOptions(o)},[o,c]),O3(o,u))throw e1(o,c,s);if(C3({result:u,errorResetBoundary:s,throwOnError:o.throwOnError,query:a,suspense:o.suspense}))throw u.error;if((g=(m=i.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||g.call(m,o,u),o.experimental_prefetchInRender&&!ba&&T3(u,r)){const y=l?e1(o,c,s):a==null?void 0:a.promise;y==null||y.catch(wn).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?u:c.trackResult(u)}function Cr(t,e){return A3(t,u3)}function Kt(t,e){const n=Rt(),[r]=w.useState(()=>new g3(n,t));w.useEffect(()=>{r.setOptions(t)},[r,t]);const s=w.useSyncExternalStore(w.useCallback(o=>r.subscribe(Dt.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=w.useCallback((o,a)=>{r.mutate(o,a).catch(wn)},[r]);if(s.error&&aw(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dd(){return dd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dd.apply(this,arguments)}var Vi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Vi||(Vi={}));const t1="popstate";function R3(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return R0("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:sp(s)}return I3(e,n,null,t)}function bt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function uw(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function j3(){return Math.random().toString(36).substr(2,8)}function n1(t,e){return{usr:t.state,key:t.key,idx:e}}function R0(t,e,n,r){return n===void 0&&(n=null),dd({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Rc(e):e,{state:n,key:e&&e.key||r||j3()})}function sp(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Rc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function I3(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Vi.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(dd({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=Vi.Pop;let y=u(),v=y==null?null:y-c;c=y,l&&l({action:a,location:g.location,delta:v})}function f(y,v){a=Vi.Push;let x=R0(g.location,y,v);c=u()+1;let b=n1(x,c),S=g.createHref(x);try{o.pushState(b,"",S)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;s.location.assign(S)}i&&l&&l({action:a,location:g.location,delta:1})}function p(y,v){a=Vi.Replace;let x=R0(g.location,y,v);c=u();let b=n1(x,c),S=g.createHref(x);o.replaceState(b,"",S),i&&l&&l({action:a,location:g.location,delta:0})}function m(y){let v=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof y=="string"?y:sp(y);return x=x.replace(/ $/,"%20"),bt(v,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,v)}let g={get action(){return a},get location(){return t(s,o)},listen(y){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(t1,d),l=y,()=>{s.removeEventListener(t1,d),l=null}},createHref(y){return e(s,y)},createURL:m,encodeLocation(y){let v=m(y);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:p,go(y){return o.go(y)}};return g}var r1;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(r1||(r1={}));function P3(t,e,n){return n===void 0&&(n="/"),M3(t,e,n)}function M3(t,e,n,r){let s=typeof e=="string"?Rc(e):e,i=dw(s.pathname||"/",n);if(i==null)return null;let o=XA(t);D3(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=G3(i);a=q3(o[l],c)}return a}function XA(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(bt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=no([r,l.relativePath]),u=n.concat(l);i.children&&i.children.length>0&&(bt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),XA(i.children,e,u,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:V3(c,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of eR(i.path))s(i,o,l)}),e}function eR(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=eR(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function D3(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:H3(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const L3=/^:[\w-]+$/,$3=3,F3=2,B3=1,U3=10,z3=-2,s1=t=>t==="*";function V3(t,e){let n=t.split("/"),r=n.length;return n.some(s1)&&(r+=z3),e&&(r+=F3),n.filter(s=>!s1(s)).reduce((s,i)=>s+(L3.test(i)?$3:i===""?B3:U3),r)}function H3(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function q3(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=W3({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:no([i,d.pathname]),pathnameBase:X3(no([i,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(i=no([i,d.pathnameBase]))}return o}function W3(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=K3(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,u,d)=>{let{paramName:f,isOptional:p}=u;if(f==="*"){let g=a[d]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const m=a[d];return p&&!m?c[f]=void 0:c[f]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function K3(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),uw(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function G3(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return uw(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function dw(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const Q3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,J3=t=>Q3.test(t);function Y3(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Rc(t):t,i;if(n)if(J3(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),uw(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=i1(n.substring(1),"/"):i=i1(n,e)}else i=e;return{pathname:i,search:ez(r),hash:tz(s)}}function i1(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function py(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Z3(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function fw(t,e){let n=Z3(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function hw(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Rc(t):(s=dd({},t),bt(!s.pathname||!s.pathname.includes("?"),py("?","pathname","search",s)),bt(!s.pathname||!s.pathname.includes("#"),py("#","pathname","hash",s)),bt(!s.search||!s.search.includes("#"),py("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;s.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=Y3(s,a),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const no=t=>t.join("/").replace(/\/\/+/g,"/"),X3=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),ez=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,tz=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function nz(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const tR=["post","put","patch","delete"];new Set(tR);const rz=["get",...tR];new Set(rz);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fd(){return fd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fd.apply(this,arguments)}const pw=w.createContext(null),sz=w.createContext(null),_o=w.createContext(null),Zm=w.createContext(null),bs=w.createContext({outlet:null,matches:[],isDataRoute:!1}),nR=w.createContext(null);function iz(t,e){let{relative:n}=e===void 0?{}:e;jc()||bt(!1);let{basename:r,navigator:s}=w.useContext(_o),{hash:i,pathname:o,search:a}=sR(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:no([r,o])),s.createHref({pathname:l,search:a,hash:i})}function jc(){return w.useContext(Zm)!=null}function Ic(){return jc()||bt(!1),w.useContext(Zm).location}function rR(t){w.useContext(_o).static||w.useLayoutEffect(t)}function ws(){let{isDataRoute:t}=w.useContext(bs);return t?bz():oz()}function oz(){jc()||bt(!1);let t=w.useContext(pw),{basename:e,future:n,navigator:r}=w.useContext(_o),{matches:s}=w.useContext(bs),{pathname:i}=Ic(),o=JSON.stringify(fw(s,n.v7_relativeSplatPath)),a=w.useRef(!1);return rR(()=>{a.current=!0}),w.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=hw(c,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:no([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,i,t])}const az=w.createContext(null);function lz(t){let e=w.useContext(bs).outlet;return e&&w.createElement(az.Provider,{value:t},e)}function mw(){let{matches:t}=w.useContext(bs),e=t[t.length-1];return e?e.params:{}}function sR(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=w.useContext(_o),{matches:s}=w.useContext(bs),{pathname:i}=Ic(),o=JSON.stringify(fw(s,r.v7_relativeSplatPath));return w.useMemo(()=>hw(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function cz(t,e){return uz(t,e)}function uz(t,e,n,r){jc()||bt(!1);let{navigator:s}=w.useContext(_o),{matches:i}=w.useContext(bs),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Ic(),u;if(e){var d;let y=typeof e=="string"?Rc(e):e;l==="/"||(d=y.pathname)!=null&&d.startsWith(l)||bt(!1),u=y}else u=c;let f=u.pathname||"/",p=f;if(l!=="/"){let y=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(y.length).join("/")}let m=P3(t,{pathname:p}),g=mz(m&&m.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:no([l,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:no([l,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,n,r);return e&&g?w.createElement(Zm.Provider,{value:{location:fd({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Vi.Pop}},g):g}function dz(){let t=xz(),e=nz(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),n?w.createElement("pre",{style:s},n):null,null)}const fz=w.createElement(dz,null);class hz extends w.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?w.createElement(bs.Provider,{value:this.props.routeContext},w.createElement(nR.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function pz(t){let{routeContext:e,match:n,children:r}=t,s=w.useContext(pw);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),w.createElement(bs.Provider,{value:e},r)}function mz(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||bt(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:f,errors:p}=n,m=d.route.loader&&f[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||m){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,d,f)=>{let p,m=!1,g=null,y=null;n&&(p=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||fz,l&&(c<0&&f===0?(wz("route-fallback"),m=!0,y=null):c===f&&(m=!0,y=d.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,f+1)),x=()=>{let b;return p?b=g:m?b=y:d.route.Component?b=w.createElement(d.route.Component,null):d.route.element?b=d.route.element:b=u,w.createElement(pz,{match:d,routeContext:{outlet:u,matches:v,isDataRoute:n!=null},children:b})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?w.createElement(hz,{location:n.location,revalidation:n.revalidation,component:g,error:p,children:x(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):x()},null)}var iR=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(iR||{}),oR=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(oR||{});function gz(t){let e=w.useContext(pw);return e||bt(!1),e}function yz(t){let e=w.useContext(sz);return e||bt(!1),e}function vz(t){let e=w.useContext(bs);return e||bt(!1),e}function aR(t){let e=vz(),n=e.matches[e.matches.length-1];return n.route.id||bt(!1),n.route.id}function xz(){var t;let e=w.useContext(nR),n=yz(),r=aR();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function bz(){let{router:t}=gz(iR.UseNavigateStable),e=aR(oR.UseNavigateStable),n=w.useRef(!1);return rR(()=>{n.current=!0}),w.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,fd({fromRouteId:e},i)))},[t,e])}const o1={};function wz(t,e,n){o1[t]||(o1[t]=!0)}function Sz(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function kz(t){let{to:e,replace:n,state:r,relative:s}=t;jc()||bt(!1);let{future:i,static:o}=w.useContext(_o),{matches:a}=w.useContext(bs),{pathname:l}=Ic(),c=ws(),u=hw(e,fw(a,i.v7_relativeSplatPath),l,s==="path"),d=JSON.stringify(u);return w.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:s}),[c,d,s,n,r]),null}function _z(t){return lz(t.context)}function It(t){bt(!1)}function Ez(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Vi.Pop,navigator:i,static:o=!1,future:a}=t;jc()&&bt(!1);let l=e.replace(/^\/*/,"/"),c=w.useMemo(()=>({basename:l,navigator:i,static:o,future:fd({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=Rc(r));let{pathname:u="/",search:d="",hash:f="",state:p=null,key:m="default"}=r,g=w.useMemo(()=>{let y=dw(u,l);return y==null?null:{location:{pathname:y,search:d,hash:f,state:p,key:m},navigationType:s}},[l,u,d,f,p,m,s]);return g==null?null:w.createElement(_o.Provider,{value:c},w.createElement(Zm.Provider,{children:n,value:g}))}function Cz(t){let{children:e,location:n}=t;return cz(j0(e),n)}new Promise(()=>{});function j0(t,e){e===void 0&&(e=[]);let n=[];return w.Children.forEach(t,(r,s)=>{if(!w.isValidElement(r))return;let i=[...e,s];if(r.type===w.Fragment){n.push.apply(n,j0(r.props.children,i));return}r.type!==It&&bt(!1),!r.props.index||!r.props.children||bt(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=j0(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function I0(){return I0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},I0.apply(this,arguments)}function Nz(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Tz(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Oz(t,e){return t.button===0&&(!e||e==="_self")&&!Tz(t)}const Az=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Rz="6";try{window.__reactRouterVersion=Rz}catch{}const jz="startTransition",a1=vm[jz];function Iz(t){let{basename:e,children:n,future:r,window:s}=t,i=w.useRef();i.current==null&&(i.current=R3({window:s,v5Compat:!0}));let o=i.current,[a,l]=w.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=w.useCallback(d=>{c&&a1?a1(()=>l(d)):l(d)},[l,c]);return w.useLayoutEffect(()=>o.listen(u),[o,u]),w.useEffect(()=>Sz(r),[r]),w.createElement(Ez,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const Pz=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Mz=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Sn=w.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:d}=e,f=Nz(e,Az),{basename:p}=w.useContext(_o),m,g=!1;if(typeof c=="string"&&Mz.test(c)&&(m=c,Pz))try{let b=new URL(window.location.href),S=c.startsWith("//")?new URL(b.protocol+c):new URL(c),k=dw(S.pathname,p);S.origin===b.origin&&k!=null?c=k+S.search+S.hash:g=!0}catch{}let y=iz(c,{relative:s}),v=Dz(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:s,viewTransition:d});function x(b){r&&r(b),b.defaultPrevented||v(b)}return w.createElement("a",I0({},f,{href:m||y,onClick:g||i?r:x,ref:n,target:l}))});var l1;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(l1||(l1={}));var c1;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(c1||(c1={}));function Dz(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=ws(),c=Ic(),u=sR(t,{relative:o});return w.useCallback(d=>{if(Oz(d,n)){d.preventDefault();let f=r!==void 0?r:sp(c)===sp(u);l(t,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,u,r,s,n,t,i,o,a])}/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Lz={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $z=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),he=(t,e)=>{const n=w.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:a="",children:l,...c},u)=>w.createElement("svg",{ref:u,...Lz,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${$z(t)}`,a].join(" "),...c},[...e.map(([d,f])=>w.createElement(d,f)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lR=he("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1=he("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fz=he("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bz=he("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uz=he("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zz=he("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vz=he("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ou=he("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hz=he("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cR=he("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ic=he("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uR=he("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dR=he("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qz=he("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wz=he("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kz=he("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gz=he("ChevronsLeft",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qz=he("ChevronsRight",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jz=he("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yz=he("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gw=he("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yw=he("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fR=he("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d1=he("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zz=he("Heading2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0=he("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hR=he("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pR=he("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xz=he("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eV=he("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ip=he("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tV=he("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nV=he("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rV=he("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=he("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sV=he("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iV=he("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=he("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oV=he("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xm=he("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aV=he("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lV=he("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cV=he("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=he("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uV=he("Subscript",[["path",{d:"m4 5 8 8",key:"1eunvl"}],["path",{d:"m12 5-8 8",key:"1ah0jp"}],["path",{d:"M20 19h-4c0-1.5.44-2 1.5-2.5S20 15.33 20 14c0-.47-.17-.93-.48-1.29a2.11 2.11 0 0 0-2.62-.44c-.42.24-.74.62-.9 1.07",key:"e8ta8j"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dV=he("Superscript",[["path",{d:"m4 19 8-8",key:"hr47gm"}],["path",{d:"m12 19-8-8",key:"1dhhmo"}],["path",{d:"M20 12h-4c0-1.5.442-2 1.5-2.5S20 8.334 20 7.002c0-.472-.17-.93-.484-1.29a2.105 2.105 0 0 0-2.617-.436c-.42.239-.738.614-.899 1.06",key:"1dfcux"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eg=he("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fV=he("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hV=he("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pV=he("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hd=he("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mV=he("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0=he("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sa=he("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),mR=w.createContext(void 0);function gV({children:t}){const[e,n]=w.useState([]),r=w.useCallback((a,l="success")=>{const c=Date.now().toString();n(u=>[...u,{id:c,message:a,type:l}]),setTimeout(()=>{n(u=>u.filter(d=>d.id!==c))},4e3)},[]),s=w.useCallback(a=>{n(l=>l.filter(c=>c.id!==a))},[]),i=a=>{switch(a){case"success":return h.jsx(cR,{className:"w-5 h-5 text-green-500"});case"error":return h.jsx(lR,{className:"w-5 h-5 text-red-500"});case"info":return h.jsx(pR,{className:"w-5 h-5 text-blue-500"})}},o=a=>{switch(a){case"success":return"border-green-200 bg-green-50";case"error":return"border-red-200 bg-red-50";case"info":return"border-blue-200 bg-blue-50"}};return h.jsxs(mR.Provider,{value:{showToast:r},children:[t,h.jsx("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col gap-2",children:e.map(a=>h.jsxs("div",{className:`flex items-center gap-3 px-4 py-3 rounded-lg border shadow-lg animate-slide-up ${o(a.type)}`,children:[i(a.type),h.jsx("p",{className:"text-sm font-medium text-gray-800",children:a.message}),h.jsx("button",{onClick:()=>s(a.id),className:"ml-2 text-gray-400 hover:text-gray-600",children:h.jsx(Sa,{className:"w-4 h-4"})})]},a.id))})]})}function vw(){const t=w.useContext(mR);if(!t)throw new Error("useToast must be used within a ToastProvider");return t}var Qd=t=>t.type==="checkbox",qo=t=>t instanceof Date,In=t=>t==null;const gR=t=>typeof t=="object";var Tt=t=>!In(t)&&!Array.isArray(t)&&gR(t)&&!qo(t),yR=t=>Tt(t)&&t.target?Qd(t.target)?t.target.checked:t.target.value:t,yV=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,vR=(t,e)=>t.has(yV(e)),vV=t=>{const e=t.constructor&&t.constructor.prototype;return Tt(e)&&e.hasOwnProperty("isPrototypeOf")},xw=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function wt(t){if(t instanceof Date)return new Date(t);const e=typeof FileList<"u"&&t instanceof FileList;if(xw&&(t instanceof Blob||e))return t;const n=Array.isArray(t);if(!n&&!(Tt(t)&&vV(t)))return t;const r=n?[]:Object.create(Object.getPrototypeOf(t));for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=wt(t[s]));return r}var tg=t=>/^\w*$/.test(t),rt=t=>t===void 0,bw=t=>Array.isArray(t)?t.filter(Boolean):[],ww=t=>bw(t.replace(/["|']|\]/g,"").split(/\.|\[/)),G=(t,e,n)=>{if(!e||!Tt(t))return n;const r=(tg(e)?[e]:ww(e)).reduce((s,i)=>In(s)?s:s[i],t);return rt(r)||r===t?rt(t[e])?n:t[e]:r},Wn=t=>typeof t=="boolean",kn=t=>typeof t=="function",ze=(t,e,n)=>{let r=-1;const s=tg(e)?[e]:ww(e),i=s.length,o=i-1;for(;++r<i;){const a=s[r];let l=n;if(r!==o){const c=t[a];l=Tt(c)||Array.isArray(c)?c:isNaN(+s[r+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;t[a]=l,t=t[a]}};const op={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},$r={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ks={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Sw=se.createContext(null);Sw.displayName="HookFormControlContext";const kw=()=>se.useContext(Sw);var xR=(t,e,n,r=!0)=>{const s={defaultValues:e._defaultValues};for(const i in t)Object.defineProperty(s,i,{get:()=>{const o=i;return e._proxyFormState[o]!==$r.all&&(e._proxyFormState[o]=!r||$r.all),n&&(n[o]=!0),t[o]}});return s};const _w=typeof window<"u"?se.useLayoutEffect:se.useEffect;function xV(t){const e=kw(),{control:n=e,disabled:r,name:s,exact:i}=t||{},[o,a]=se.useState(n._formState),l=se.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return _w(()=>n._subscribe({name:s,formState:l.current,exact:i,callback:c=>{!r&&a({...n._formState,...c})}}),[s,r,i]),se.useEffect(()=>{l.current.isValid&&n._setValid(!0)},[n]),se.useMemo(()=>xR(o,n,l.current,!1),[o,n])}var Qn=t=>typeof t=="string",D0=(t,e,n,r,s)=>Qn(t)?(r&&e.watch.add(t),G(n,t,s)):Array.isArray(t)?t.map(i=>(r&&e.watch.add(i),G(n,i))):(r&&(e.watchAll=!0),n),L0=t=>In(t)||!gR(t);function Fr(t,e,n=new WeakSet){if(L0(t)||L0(e))return Object.is(t,e);if(qo(t)&&qo(e))return Object.is(t.getTime(),e.getTime());const r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return!1;if(n.has(t)||n.has(e))return!0;n.add(t),n.add(e);for(const i of r){const o=t[i];if(!s.includes(i))return!1;if(i!=="ref"){const a=e[i];if(qo(o)&&qo(a)||Tt(o)&&Tt(a)||Array.isArray(o)&&Array.isArray(a)?!Fr(o,a,n):!Object.is(o,a))return!1}}return!0}function bV(t){const e=kw(),{control:n=e,name:r,defaultValue:s,disabled:i,exact:o,compute:a}=t||{},l=se.useRef(s),c=se.useRef(a),u=se.useRef(void 0),d=se.useRef(n),f=se.useRef(r);c.current=a;const[p,m]=se.useState(()=>{const S=n._getWatch(r,l.current);return c.current?c.current(S):S}),g=se.useCallback(S=>{const k=D0(r,n._names,S||n._formValues,!1,l.current);return c.current?c.current(k):k},[n._formValues,n._names,r]),y=se.useCallback(S=>{if(!i){const k=D0(r,n._names,S||n._formValues,!1,l.current);if(c.current){const E=c.current(k);Fr(E,u.current)||(m(E),u.current=E)}else m(k)}},[n._formValues,n._names,i,r]);_w(()=>((d.current!==n||!Fr(f.current,r))&&(d.current=n,f.current=r,y()),n._subscribe({name:r,formState:{values:!0},exact:o,callback:S=>{y(S.values)}})),[n,o,r,y]),se.useEffect(()=>n._removeUnmounted());const v=d.current!==n,x=f.current,b=se.useMemo(()=>{if(i)return null;const S=!v&&!Fr(x,r);return v||S?g():null},[i,v,r,x,g]);return b!==null?b:p}function wV(t){const e=kw(),{name:n,disabled:r,control:s=e,shouldUnregister:i,defaultValue:o,exact:a=!0}=t,l=vR(s._names.array,n),c=se.useMemo(()=>G(s._formValues,n,G(s._defaultValues,n,o)),[s,n,o]),u=bV({control:s,name:n,defaultValue:c,exact:a}),d=xV({control:s,name:n,exact:a}),f=se.useRef(t),p=se.useRef(void 0),m=se.useRef(s.register(n,{...t.rules,value:u,...Wn(t.disabled)?{disabled:t.disabled}:{}}));f.current=t;const g=se.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!G(d.errors,n)},isDirty:{enumerable:!0,get:()=>!!G(d.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!G(d.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!G(d.validatingFields,n)},error:{enumerable:!0,get:()=>G(d.errors,n)}}),[d,n]),y=se.useCallback(S=>m.current.onChange({target:{value:yR(S),name:n},type:op.CHANGE}),[n]),v=se.useCallback(()=>m.current.onBlur({target:{value:G(s._formValues,n),name:n},type:op.BLUR}),[n,s._formValues]),x=se.useCallback(S=>{const k=G(s._fields,n);k&&k._f&&S&&(k._f.ref={focus:()=>kn(S.focus)&&S.focus(),select:()=>kn(S.select)&&S.select(),setCustomValidity:E=>kn(S.setCustomValidity)&&S.setCustomValidity(E),reportValidity:()=>kn(S.reportValidity)&&S.reportValidity()})},[s._fields,n]),b=se.useMemo(()=>({name:n,value:u,...Wn(r)||d.disabled?{disabled:d.disabled||r}:{},onChange:y,onBlur:v,ref:x}),[n,r,d.disabled,y,v,x,u]);return se.useEffect(()=>{const S=s._options.shouldUnregister||i,k=p.current;k&&k!==n&&!l&&s.unregister(k),s.register(n,{...f.current.rules,...Wn(f.current.disabled)?{disabled:f.current.disabled}:{}});const E=(_,T)=>{const A=G(s._fields,_);A&&A._f&&(A._f.mount=T)};if(E(n,!0),S){const _=wt(G(s._options.defaultValues,n,f.current.defaultValue));ze(s._defaultValues,n,_),rt(G(s._formValues,n))&&ze(s._formValues,n,_)}return!l&&s.register(n),p.current=n,()=>{(l?S&&!s._state.action:S)?s.unregister(n):E(n,!1)}},[n,s,l,i]),se.useEffect(()=>{s._setDisabledField({disabled:r,name:n})},[r,n,s]),se.useMemo(()=>({field:b,formState:d,fieldState:g}),[b,d,g])}const SV=t=>t.render(wV(t)),Ew=se.createContext(null);Ew.displayName="HookFormContext";const kV=()=>se.useContext(Ew),_V=t=>{const{children:e,watch:n,getValues:r,getFieldState:s,setError:i,clearErrors:o,setValue:a,trigger:l,formState:c,resetField:u,reset:d,handleSubmit:f,unregister:p,control:m,register:g,setFocus:y,subscribe:v}=t;return se.createElement(Ew.Provider,{value:se.useMemo(()=>({watch:n,getValues:r,getFieldState:s,setError:i,clearErrors:o,setValue:a,trigger:l,formState:c,resetField:u,reset:d,handleSubmit:f,unregister:p,control:m,register:g,setFocus:y,subscribe:v}),[o,m,c,s,r,f,g,d,u,i,y,a,v,l,p,n])},se.createElement(Sw.Provider,{value:m},e))};var bR=(t,e,n,r,s)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:s||!0}}:{},Au=t=>Array.isArray(t)?t:[t],f1=()=>{let t=[];return{get observers(){return t},next:s=>{for(const i of t)i.next&&i.next(s)},subscribe:s=>(t.push(s),{unsubscribe:()=>{t=t.filter(i=>i!==s)}}),unsubscribe:()=>{t=[]}}};function wR(t,e){const n={};for(const r in t)if(t.hasOwnProperty(r)){const s=t[r],i=e[r];if(s&&Tt(s)&&i){const o=wR(s,i);Tt(o)&&(n[r]=o)}else t[r]&&(n[r]=i)}return n}var xn=t=>Tt(t)&&!Object.keys(t).length,Cw=t=>t.type==="file",ap=t=>{if(!xw)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},SR=t=>t.type==="select-multiple",Nw=t=>t.type==="radio",EV=t=>Nw(t)||Qd(t),my=t=>ap(t)&&t.isConnected;function CV(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=rt(t)?r++:t[e[r++]];return t}function NV(t){for(const e in t)if(t.hasOwnProperty(e)&&!rt(t[e]))return!1;return!0}function St(t,e){const n=Array.isArray(e)?e:tg(e)?[e]:ww(e),r=n.length===1?t:CV(t,n),s=n.length-1,i=n[s];return r&&delete r[i],s!==0&&(Tt(r)&&xn(r)||Array.isArray(r)&&NV(r))&&St(t,n.slice(0,-1)),t}var TV=t=>{for(const e in t)if(kn(t[e]))return!0;return!1};function kR(t){return Array.isArray(t)||Tt(t)&&!TV(t)}function $0(t,e={}){for(const n in t){const r=t[n];kR(r)?(e[n]=Array.isArray(r)?[]:{},$0(r,e[n])):rt(r)||(e[n]=!0)}return e}function nl(t,e,n){n||(n=$0(e));for(const r in t){const s=t[r];if(kR(s))rt(e)||L0(n[r])?n[r]=$0(s,Array.isArray(s)?[]:{}):nl(s,In(e)?{}:e[r],n[r]);else{const i=e[r];n[r]=!Fr(s,i)}}return n}const h1={value:!1,isValid:!1},p1={value:!0,isValid:!0};var _R=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!rt(t[0].attributes.value)?rt(t[0].value)||t[0].value===""?p1:{value:t[0].value,isValid:!0}:p1:h1}return h1},ER=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>rt(t)?t:e?t===""?NaN:t&&+t:n&&Qn(t)?new Date(t):r?r(t):t;const m1={isValid:!1,value:null};var CR=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,m1):m1;function g1(t){const e=t.ref;return Cw(e)?e.files:Nw(e)?CR(t.refs).value:SR(e)?[...e.selectedOptions].map(({value:n})=>n):Qd(e)?_R(t.refs).value:ER(rt(e.value)?t.ref.value:e.value,t)}var OV=(t,e,n,r)=>{const s={};for(const i of t){const o=G(e,i);o&&ze(s,i,o._f)}return{criteriaMode:n,names:[...t],fields:s,shouldUseNativeValidation:r}},lp=t=>t instanceof RegExp,Yc=t=>rt(t)?t:lp(t)?t.source:Tt(t)?lp(t.value)?t.value.source:t.value:t,y1=t=>({isOnSubmit:!t||t===$r.onSubmit,isOnBlur:t===$r.onBlur,isOnChange:t===$r.onChange,isOnAll:t===$r.all,isOnTouch:t===$r.onTouched});const v1="AsyncFunction";var AV=t=>!!t&&!!t.validate&&!!(kn(t.validate)&&t.validate.constructor.name===v1||Tt(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===v1)),RV=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),x1=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const Ru=(t,e,n,r)=>{for(const s of n||Object.keys(t)){const i=G(t,s);if(i){const{_f:o,...a}=i;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],s)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(Ru(a,e))break}else if(Tt(a)&&Ru(a,e))break}}};function b1(t,e,n){const r=G(t,n);if(r||tg(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const i=s.join("."),o=G(e,i),a=G(t,i);if(o&&!Array.isArray(o)&&n!==i)return{name:n};if(a&&a.type)return{name:i,error:a};if(a&&a.root&&a.root.type)return{name:`${i}.root`,error:a.root};s.pop()}return{name:n}}var jV=(t,e,n,r)=>{n(t);const{name:s,...i}=t;return xn(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(o=>e[o]===(!r||$r.all))},IV=(t,e,n)=>!t||!e||t===e||Au(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),PV=(t,e,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(e||t):(n?r.isOnBlur:s.isOnBlur)?!t:(n?r.isOnChange:s.isOnChange)?t:!0,MV=(t,e)=>!bw(G(t,e)).length&&St(t,e),DV=(t,e,n)=>{const r=Au(G(t,n));return ze(r,"root",e[n]),ze(t,n,r),t};function w1(t,e,n="validate"){if(Qn(t)||Array.isArray(t)&&t.every(Qn)||Wn(t)&&!t)return{type:n,message:Qn(t)?t:"",ref:e}}var Va=t=>Tt(t)&&!lp(t)?t:{value:t,message:""},S1=async(t,e,n,r,s,i)=>{const{ref:o,refs:a,required:l,maxLength:c,minLength:u,min:d,max:f,pattern:p,validate:m,name:g,valueAsNumber:y,mount:v}=t._f,x=G(n,g);if(!v||e.has(g))return{};const b=a?a[0]:o,S=P=>{s&&b.reportValidity&&(b.setCustomValidity(Wn(P)?"":P||""),b.reportValidity())},k={},E=Nw(o),_=Qd(o),T=E||_,A=(y||Cw(o))&&rt(o.value)&&rt(x)||ap(o)&&o.value===""||x===""||Array.isArray(x)&&!x.length,O=bR.bind(null,g,r,k),U=(P,L,z,K=ks.maxLength,W=ks.minLength)=>{const re=P?L:z;k[g]={type:P?K:W,message:re,ref:o,...O(P?K:W,re)}};if(i?!Array.isArray(x)||!x.length:l&&(!T&&(A||In(x))||Wn(x)&&!x||_&&!_R(a).isValid||E&&!CR(a).isValid)){const{value:P,message:L}=Qn(l)?{value:!!l,message:l}:Va(l);if(P&&(k[g]={type:ks.required,message:L,ref:b,...O(ks.required,L)},!r))return S(L),k}if(!A&&(!In(d)||!In(f))){let P,L;const z=Va(f),K=Va(d);if(!In(x)&&!isNaN(x)){const W=o.valueAsNumber||x&&+x;In(z.value)||(P=W>z.value),In(K.value)||(L=W<K.value)}else{const W=o.valueAsDate||new Date(x),re=ee=>new Date(new Date().toDateString()+" "+ee),j=o.type=="time",V=o.type=="week";Qn(z.value)&&x&&(P=j?re(x)>re(z.value):V?x>z.value:W>new Date(z.value)),Qn(K.value)&&x&&(L=j?re(x)<re(K.value):V?x<K.value:W<new Date(K.value))}if((P||L)&&(U(!!P,z.message,K.message,ks.max,ks.min),!r))return S(k[g].message),k}if((c||u)&&!A&&(Qn(x)||i&&Array.isArray(x))){const P=Va(c),L=Va(u),z=!In(P.value)&&x.length>+P.value,K=!In(L.value)&&x.length<+L.value;if((z||K)&&(U(z,P.message,L.message),!r))return S(k[g].message),k}if(p&&!A&&Qn(x)){const{value:P,message:L}=Va(p);if(lp(P)&&!x.match(P)&&(k[g]={type:ks.pattern,message:L,ref:o,...O(ks.pattern,L)},!r))return S(L),k}if(m){if(kn(m)){const P=await m(x,n),L=w1(P,b);if(L&&(k[g]={...L,...O(ks.validate,L.message)},!r))return S(L.message),k}else if(Tt(m)){let P={};for(const L in m){if(!xn(P)&&!r)break;const z=w1(await m[L](x,n),b,L);z&&(P={...z,...O(L,z.message)},S(z.message),r&&(k[g]=P))}if(!xn(P)&&(k[g]={ref:b,...P},!r))return k}}return S(!0),k};const LV={mode:$r.onSubmit,reValidateMode:$r.onChange,shouldFocusError:!0};function $V(t={}){let e={...LV,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:kn(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},s=Tt(e.defaultValues)||Tt(e.values)?wt(e.defaultValues||e.values)||{}:{},i=e.shouldUnregister?{}:wt(s),o={action:!1,mount:!1,watch:!1,keepIsValid:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},d={...u};let f={...d};const p={array:f1(),state:f1()},m=e.criteriaMode===$r.all,g=N=>R=>{clearTimeout(c),c=setTimeout(N,R)},y=async N=>{if(!o.keepIsValid&&!e.disabled&&(d.isValid||f.isValid||N)){let R;e.resolver?(R=xn((await T()).errors),v()):R=await O(r,!0),R!==n.isValid&&p.state.next({isValid:R})}},v=(N,R)=>{!e.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((N||Array.from(a.mount)).forEach(I=>{I&&(R?ze(n.validatingFields,I,R):St(n.validatingFields,I))}),p.state.next({validatingFields:n.validatingFields,isValidating:!xn(n.validatingFields)}))},x=(N,R=[],I,Z,q=!0,H=!0)=>{if(Z&&I&&!e.disabled){if(o.action=!0,H&&Array.isArray(G(r,N))){const fe=I(G(r,N),Z.argA,Z.argB);q&&ze(r,N,fe)}if(H&&Array.isArray(G(n.errors,N))){const fe=I(G(n.errors,N),Z.argA,Z.argB);q&&ze(n.errors,N,fe),MV(n.errors,N)}if((d.touchedFields||f.touchedFields)&&H&&Array.isArray(G(n.touchedFields,N))){const fe=I(G(n.touchedFields,N),Z.argA,Z.argB);q&&ze(n.touchedFields,N,fe)}(d.dirtyFields||f.dirtyFields)&&(n.dirtyFields=nl(s,i)),p.state.next({name:N,isDirty:P(N,R),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else ze(i,N,R)},b=(N,R)=>{ze(n.errors,N,R),p.state.next({errors:n.errors})},S=N=>{n.errors=N,p.state.next({errors:n.errors,isValid:!1})},k=(N,R,I,Z)=>{const q=G(r,N);if(q){const H=G(i,N,rt(I)?G(s,N):I);rt(H)||Z&&Z.defaultChecked||R?ze(i,N,R?H:g1(q._f)):K(N,H),o.mount&&!o.action&&y()}},E=(N,R,I,Z,q)=>{let H=!1,fe=!1;const Be={name:N};if(!e.disabled){if(!I||Z){(d.isDirty||f.isDirty)&&(fe=n.isDirty,n.isDirty=Be.isDirty=P(),H=fe!==Be.isDirty);const Ue=Fr(G(s,N),R);fe=!!G(n.dirtyFields,N),Ue?St(n.dirtyFields,N):ze(n.dirtyFields,N,!0),Be.dirtyFields=n.dirtyFields,H=H||(d.dirtyFields||f.dirtyFields)&&fe!==!Ue}if(I){const Ue=G(n.touchedFields,N);Ue||(ze(n.touchedFields,N,I),Be.touchedFields=n.touchedFields,H=H||(d.touchedFields||f.touchedFields)&&Ue!==I)}H&&q&&p.state.next(Be)}return H?Be:{}},_=(N,R,I,Z)=>{const q=G(n.errors,N),H=(d.isValid||f.isValid)&&Wn(R)&&n.isValid!==R;if(e.delayError&&I?(l=g(()=>b(N,I)),l(e.delayError)):(clearTimeout(c),l=null,I?ze(n.errors,N,I):St(n.errors,N)),(I?!Fr(q,I):q)||!xn(Z)||H){const fe={...Z,...H&&Wn(R)?{isValid:R}:{},errors:n.errors,name:N};n={...n,...fe},p.state.next(fe)}},T=async N=>(v(N,!0),await e.resolver(i,e.context,OV(N||a.mount,r,e.criteriaMode,e.shouldUseNativeValidation))),A=async N=>{const{errors:R}=await T(N);if(v(N),N)for(const I of N){const Z=G(R,I);Z?ze(n.errors,I,Z):St(n.errors,I)}else n.errors=R;return R},O=async(N,R,I={valid:!0})=>{for(const Z in N){const q=N[Z];if(q){const{_f:H,...fe}=q;if(H){const Be=a.array.has(H.name),Ue=q._f&&AV(q._f);Ue&&d.validatingFields&&v([H.name],!0);const yn=await S1(q,a.disabled,i,m,e.shouldUseNativeValidation&&!R,Be);if(Ue&&d.validatingFields&&v([H.name]),yn[H.name]&&(I.valid=!1,R||t.shouldUseNativeValidation))break;!R&&(G(yn,H.name)?Be?DV(n.errors,yn,H.name):ze(n.errors,H.name,yn[H.name]):St(n.errors,H.name))}!xn(fe)&&await O(fe,R,I)}}return I.valid},U=()=>{for(const N of a.unMount){const R=G(r,N);R&&(R._f.refs?R._f.refs.every(I=>!my(I)):!my(R._f.ref))&&Fe(N)}a.unMount=new Set},P=(N,R)=>!e.disabled&&(N&&R&&ze(i,N,R),!Fr(me(),s)),L=(N,R,I)=>D0(N,a,{...o.mount?i:rt(R)?s:Qn(N)?{[N]:R}:R},I,R),z=N=>bw(G(o.mount?i:s,N,e.shouldUnregister?G(s,N,[]):[])),K=(N,R,I={})=>{const Z=G(r,N);let q=R;if(Z){const H=Z._f;H&&(!H.disabled&&ze(i,N,ER(R,H)),q=ap(H.ref)&&In(R)?"":R,SR(H.ref)?[...H.ref.options].forEach(fe=>fe.selected=q.includes(fe.value)):H.refs?Qd(H.ref)?H.refs.forEach(fe=>{(!fe.defaultChecked||!fe.disabled)&&(Array.isArray(q)?fe.checked=!!q.find(Be=>Be===fe.value):fe.checked=q===fe.value||!!q)}):H.refs.forEach(fe=>fe.checked=fe.value===q):Cw(H.ref)?H.ref.value="":(H.ref.value=q,H.ref.type||p.state.next({name:N,values:wt(i)})))}(I.shouldDirty||I.shouldTouch)&&E(N,q,I.shouldTouch,I.shouldDirty,!0),I.shouldValidate&&ee(N)},W=(N,R,I)=>{for(const Z in R){if(!R.hasOwnProperty(Z))return;const q=R[Z],H=N+"."+Z,fe=G(r,H);(a.array.has(N)||Tt(q)||fe&&!fe._f)&&!qo(q)?W(H,q,I):K(H,q,I)}},re=(N,R,I={})=>{const Z=G(r,N),q=a.array.has(N),H=wt(R);ze(i,N,H),q?(p.array.next({name:N,values:wt(i)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&I.shouldDirty&&p.state.next({name:N,dirtyFields:nl(s,i),isDirty:P(N,H)})):Z&&!Z._f&&!In(H)?W(N,H,I):K(N,H,I),x1(N,a)?p.state.next({...n,name:N,values:wt(i)}):p.state.next({name:o.mount?N:void 0,values:wt(i)})},j=async N=>{o.mount=!0;const R=N.target;let I=R.name,Z=!0;const q=G(r,I),H=Ue=>{Z=Number.isNaN(Ue)||qo(Ue)&&isNaN(Ue.getTime())||Fr(Ue,G(i,I,Ue))},fe=y1(e.mode),Be=y1(e.reValidateMode);if(q){let Ue,yn;const Ro=R.type?g1(q._f):yR(N),ci=N.type===op.BLUR||N.type===op.FOCUS_OUT,pD=!RV(q._f)&&!e.resolver&&!G(n.errors,I)&&!q._f.deps||PV(ci,G(n.touchedFields,I),n.isSubmitted,Be,fe),Mg=x1(I,a,ci);ze(i,I,Ro),ci?(!R||!R.readOnly)&&(q._f.onBlur&&q._f.onBlur(N),l&&l(0)):q._f.onChange&&q._f.onChange(N);const Dg=E(I,Ro,ci),mD=!xn(Dg)||Mg;if(!ci&&p.state.next({name:I,type:N.type,values:wt(i)}),pD)return(d.isValid||f.isValid)&&(e.mode==="onBlur"?ci&&y():ci||y()),mD&&p.state.next({name:I,...Mg?{}:Dg});if(!ci&&Mg&&p.state.next({...n}),e.resolver){const{errors:XS}=await T([I]);if(v([I]),H(Ro),Z){const gD=b1(n.errors,r,I),ek=b1(XS,r,gD.name||I);Ue=ek.error,I=ek.name,yn=xn(XS)}}else v([I],!0),Ue=(await S1(q,a.disabled,i,m,e.shouldUseNativeValidation))[I],v([I]),H(Ro),Z&&(Ue?yn=!1:(d.isValid||f.isValid)&&(yn=await O(r,!0)));Z&&(q._f.deps&&(!Array.isArray(q._f.deps)||q._f.deps.length>0)&&ee(q._f.deps),_(I,yn,Ue,Dg))}},V=(N,R)=>{if(G(n.errors,R)&&N.focus)return N.focus(),1},ee=async(N,R={})=>{let I,Z;const q=Au(N);if(e.resolver){const H=await A(rt(N)?N:q);I=xn(H),Z=N?!q.some(fe=>G(H,fe)):I}else N?(Z=(await Promise.all(q.map(async H=>{const fe=G(r,H);return await O(fe&&fe._f?{[H]:fe}:fe)}))).every(Boolean),!(!Z&&!n.isValid)&&y()):Z=I=await O(r);return p.state.next({...!Qn(N)||(d.isValid||f.isValid)&&I!==n.isValid?{}:{name:N},...e.resolver||!N?{isValid:I}:{},errors:n.errors}),R.shouldFocus&&!Z&&Ru(r,V,N?q:a.mount),Z},me=(N,R)=>{let I={...o.mount?i:s};return R&&(I=wR(R.dirtyFields?n.dirtyFields:n.touchedFields,I)),rt(N)?I:Qn(N)?G(I,N):N.map(Z=>G(I,Z))},ie=(N,R)=>({invalid:!!G((R||n).errors,N),isDirty:!!G((R||n).dirtyFields,N),error:G((R||n).errors,N),isValidating:!!G(n.validatingFields,N),isTouched:!!G((R||n).touchedFields,N)}),vt=N=>{N&&Au(N).forEach(R=>St(n.errors,R)),p.state.next({errors:N?n.errors:{}})},We=(N,R,I)=>{const Z=(G(r,N,{_f:{}})._f||{}).ref,q=G(n.errors,N)||{},{ref:H,message:fe,type:Be,...Ue}=q;ze(n.errors,N,{...Ue,...R,ref:Z}),p.state.next({name:N,errors:n.errors,isValid:!1}),I&&I.shouldFocus&&Z&&Z.focus&&Z.focus()},$t=(N,R)=>kn(N)?p.state.subscribe({next:I=>"values"in I&&N(L(void 0,R),I)}):L(N,R,!0),D=N=>p.state.subscribe({next:R=>{IV(N.name,R.name,N.exact)&&jV(R,N.formState||d,Pg,N.reRenderRoot)&&N.callback({values:{...i},...n,...R,defaultValues:s})}}).unsubscribe,te=N=>(o.mount=!0,f={...f,...N.formState},D({...N,formState:{...u,...N.formState}})),Fe=(N,R={})=>{for(const I of N?Au(N):a.mount)a.mount.delete(I),a.array.delete(I),R.keepValue||(St(r,I),St(i,I)),!R.keepError&&St(n.errors,I),!R.keepDirty&&St(n.dirtyFields,I),!R.keepTouched&&St(n.touchedFields,I),!R.keepIsValidating&&St(n.validatingFields,I),!e.shouldUnregister&&!R.keepDefaultValue&&St(s,I);p.state.next({values:wt(i)}),p.state.next({...n,...R.keepDirty?{isDirty:P()}:{}}),!R.keepIsValid&&y()},jt=({disabled:N,name:R})=>{if(Wn(N)&&o.mount||N||a.disabled.has(R)){const q=a.disabled.has(R)!==!!N;N?a.disabled.add(R):a.disabled.delete(R),q&&o.mount&&!o.action&&y()}},Pe=(N,R={})=>{let I=G(r,N);const Z=Wn(R.disabled)||Wn(e.disabled);return ze(r,N,{...I||{},_f:{...I&&I._f?I._f:{ref:{name:N}},name:N,mount:!0,...R}}),a.mount.add(N),I?jt({disabled:Wn(R.disabled)?R.disabled:e.disabled,name:N}):k(N,!0,R.value),{...Z?{disabled:R.disabled||e.disabled}:{},...e.progressive?{required:!!R.required,min:Yc(R.min),max:Yc(R.max),minLength:Yc(R.minLength),maxLength:Yc(R.maxLength),pattern:Yc(R.pattern)}:{},name:N,onChange:j,onBlur:j,ref:q=>{if(q){Pe(N,R),I=G(r,N);const H=rt(q.value)&&q.querySelectorAll&&q.querySelectorAll("input,select,textarea")[0]||q,fe=EV(H),Be=I._f.refs||[];if(fe?Be.find(Ue=>Ue===H):H===I._f.ref)return;ze(r,N,{_f:{...I._f,...fe?{refs:[...Be.filter(my),H,...Array.isArray(G(s,N))?[{}]:[]],ref:{type:H.type,name:N}}:{ref:H}}}),k(N,!1,void 0,H)}else I=G(r,N,{}),I._f&&(I._f.mount=!1),(e.shouldUnregister||R.shouldUnregister)&&!(vR(a.array,N)&&o.action)&&a.unMount.add(N)}}},Re=()=>e.shouldFocusError&&Ru(r,V,a.mount),Me=N=>{Wn(N)&&(p.state.next({disabled:N}),Ru(r,(R,I)=>{const Z=G(r,I);Z&&(R.disabled=Z._f.disabled||N,Array.isArray(Z._f.refs)&&Z._f.refs.forEach(q=>{q.disabled=Z._f.disabled||N}))},0,!1))},sn=(N,R)=>async I=>{let Z;I&&(I.preventDefault&&I.preventDefault(),I.persist&&I.persist());let q=wt(i);if(p.state.next({isSubmitting:!0}),e.resolver){const{errors:H,values:fe}=await T();v(),n.errors=H,q=wt(fe)}else await O(r);if(a.disabled.size)for(const H of a.disabled)St(q,H);if(St(n.errors,"root"),xn(n.errors)){p.state.next({errors:{}});try{await N(q,I)}catch(H){Z=H}}else R&&await R({...n.errors},I),Re(),setTimeout(Re);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:xn(n.errors)&&!Z,submitCount:n.submitCount+1,errors:n.errors}),Z)throw Z},lr=(N,R={})=>{G(r,N)&&(rt(R.defaultValue)?re(N,wt(G(s,N))):(re(N,R.defaultValue),ze(s,N,wt(R.defaultValue))),R.keepTouched||St(n.touchedFields,N),R.keepDirty||(St(n.dirtyFields,N),n.isDirty=R.defaultValue?P(N,wt(G(s,N))):P()),R.keepError||(St(n.errors,N),d.isValid&&y()),p.state.next({...n}))},ai=(N,R={})=>{const I=N?wt(N):s,Z=wt(I),q=xn(N),H=q?s:Z;if(R.keepDefaultValues||(s=I),!R.keepValues){if(R.keepDirtyValues){const fe=new Set([...a.mount,...Object.keys(nl(s,i))]);for(const Be of Array.from(fe)){const Ue=G(n.dirtyFields,Be),yn=G(i,Be),Ro=G(H,Be);Ue&&!rt(yn)?ze(H,Be,yn):!Ue&&!rt(Ro)&&re(Be,Ro)}}else{if(xw&&rt(N))for(const fe of a.mount){const Be=G(r,fe);if(Be&&Be._f){const Ue=Array.isArray(Be._f.refs)?Be._f.refs[0]:Be._f.ref;if(ap(Ue)){const yn=Ue.closest("form");if(yn){yn.reset();break}}}}if(R.keepFieldsRef)for(const fe of a.mount)re(fe,G(H,fe));else r={}}i=e.shouldUnregister?R.keepDefaultValues?wt(s):{}:wt(H),p.array.next({values:{...H}}),p.state.next({values:{...H}})}a={mount:R.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!R.keepIsValid||!!R.keepDirtyValues||!e.shouldUnregister&&!xn(H),o.watch=!!e.shouldUnregister,o.keepIsValid=!!R.keepIsValid,o.action=!1,R.keepErrors||(n.errors={}),p.state.next({submitCount:R.keepSubmitCount?n.submitCount:0,isDirty:q?!1:R.keepDirty?n.isDirty:!!(R.keepDefaultValues&&!Fr(N,s)),isSubmitted:R.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:q?{}:R.keepDirtyValues?R.keepDefaultValues&&i?nl(s,i):n.dirtyFields:R.keepDefaultValues&&N?nl(s,N):R.keepDirty?n.dirtyFields:{},touchedFields:R.keepTouched?n.touchedFields:{},errors:R.keepErrors?n.errors:{},isSubmitSuccessful:R.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:s})},li=(N,R)=>ai(kn(N)?N(i):N,{...e.resetOptions,...R}),Ao=(N,R={})=>{const I=G(r,N),Z=I&&I._f;if(Z){const q=Z.refs?Z.refs[0]:Z.ref;q.focus&&setTimeout(()=>{q.focus(),R.shouldSelect&&kn(q.select)&&q.select()})}},Pg=N=>{n={...n,...N}},ZS={control:{register:Pe,unregister:Fe,getFieldState:ie,handleSubmit:sn,setError:We,_subscribe:D,_runSchema:T,_updateIsValidating:v,_focusError:Re,_getWatch:L,_getDirty:P,_setValid:y,_setFieldArray:x,_setDisabledField:jt,_setErrors:S,_getFieldArray:z,_reset:ai,_resetDefaultValues:()=>kn(e.defaultValues)&&e.defaultValues().then(N=>{li(N,e.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:U,_disableForm:Me,_subjects:p,_proxyFormState:d,get _fields(){return r},get _formValues(){return i},get _state(){return o},set _state(N){o=N},get _defaultValues(){return s},get _names(){return a},set _names(N){a=N},get _formState(){return n},get _options(){return e},set _options(N){e={...e,...N}}},subscribe:te,trigger:ee,register:Pe,handleSubmit:sn,watch:$t,setValue:re,getValues:me,reset:li,resetField:lr,clearErrors:vt,unregister:Fe,setError:We,setFocus:Ao,getFieldState:ie};return{...ZS,formControl:ZS}}function pd(t={}){const e=se.useRef(void 0),n=se.useRef(void 0),[r,s]=se.useState({isDirty:!1,isValidating:!1,isLoading:kn(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:kn(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:r},t.defaultValues&&!kn(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...a}=$V(t);e.current={...a,formState:r}}const i=e.current.control;return i._options=t,_w(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0});return s(a=>({...a,isReady:!0})),i._formState.isReady=!0,o},[i]),se.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),se.useEffect(()=>{t.mode&&(i._options.mode=t.mode),t.reValidateMode&&(i._options.reValidateMode=t.reValidateMode)},[i,t.mode,t.reValidateMode]),se.useEffect(()=>{t.errors&&(i._setErrors(t.errors),i._focusError())},[i,t.errors]),se.useEffect(()=>{t.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,t.shouldUnregister]),se.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==r.isDirty&&i._subjects.state.next({isDirty:o})}},[i,r.isDirty]),se.useEffect(()=>{var o;t.values&&!Fr(t.values,n.current)?(i._reset(t.values,{keepFieldsRef:!0,...i._options.resetOptions}),!((o=i._options.resetOptions)===null||o===void 0)&&o.keepIsValid||i._setValid(),n.current=t.values,s(a=>({...a}))):i._resetDefaultValues()},[i,t.values]),se.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),e.current.formState=se.useMemo(()=>xR(r,i),[i,r]),e.current}const k1=(t,e,n)=>{if(t&&"reportValidity"in t){const r=G(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},NR=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?k1(r.ref,n,t):r.refs&&r.refs.forEach(s=>k1(s,n,t))}},FV=(t,e)=>{e.shouldUseNativeValidation&&NR(t,e);const n={};for(const r in t){const s=G(e.fields,r),i=Object.assign(t[r]||{},{ref:s&&s.ref});if(BV(e.names||Object.keys(t),r)){const o=Object.assign({},G(n,r));ze(o,"root",i),ze(n,r,o)}else ze(n,r,i)}return n},BV=(t,e)=>t.some(n=>n.startsWith(e+"."));var UV=function(t,e){for(var n={};t.length;){var r=t[0],s=r.code,i=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var a=r.unionErrors[0].errors[0];n[o]={message:a.message,type:a.code}}else n[o]={message:i,type:s};if("unionErrors"in r&&r.unionErrors.forEach(function(u){return u.errors.forEach(function(d){return t.push(d)})}),e){var l=n[o].types,c=l&&l[r.code];n[o]=bR(o,e,n,s,c?[].concat(c,r.message):r.message)}t.shift()}return n},md=function(t,e,n){return n===void 0&&(n={}),function(r,s,i){try{return Promise.resolve(function(o,a){try{var l=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(c){return i.shouldUseNativeValidation&&NR({},i),{errors:{},values:n.raw?r:c}})}catch(c){return a(c)}return l&&l.then?l.then(void 0,a):l}(0,function(o){if(function(a){return Array.isArray(a==null?void 0:a.errors)}(o))return{values:{},errors:FV(UV(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}},je;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(je||(je={}));var _1;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(_1||(_1={}));const oe=je.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),wi=t=>{switch(typeof t){case"undefined":return oe.undefined;case"string":return oe.string;case"number":return Number.isNaN(t)?oe.nan:oe.number;case"boolean":return oe.boolean;case"function":return oe.function;case"bigint":return oe.bigint;case"symbol":return oe.symbol;case"object":return Array.isArray(t)?oe.array:t===null?oe.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?oe.promise:typeof Map<"u"&&t instanceof Map?oe.map:typeof Set<"u"&&t instanceof Set?oe.set:typeof Date<"u"&&t instanceof Date?oe.date:oe.object;default:return oe.unknown}},B=je.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ri extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return s(this),r}static assert(e){if(!(e instanceof ri))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,je.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)if(s.path.length>0){const i=s.path[0];n[i]=n[i]||[],n[i].push(e(s))}else r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}ri.create=t=>new ri(t);const F0=(t,e)=>{let n;switch(t.code){case B.invalid_type:t.received===oe.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case B.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,je.jsonStringifyReplacer)}`;break;case B.unrecognized_keys:n=`Unrecognized key(s) in object: ${je.joinValues(t.keys,", ")}`;break;case B.invalid_union:n="Invalid input";break;case B.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${je.joinValues(t.options)}`;break;case B.invalid_enum_value:n=`Invalid enum value. Expected ${je.joinValues(t.options)}, received '${t.received}'`;break;case B.invalid_arguments:n="Invalid function arguments";break;case B.invalid_return_type:n="Invalid function return type";break;case B.invalid_date:n="Invalid date";break;case B.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:je.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case B.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case B.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case B.custom:n="Invalid input";break;case B.invalid_intersection_types:n="Intersection results could not be merged";break;case B.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case B.not_finite:n="Number must be finite";break;default:n=e.defaultError,je.assertNever(t)}return{message:n}};let zV=F0;function VV(){return zV}const HV=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let a="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:e,defaultError:a}).message;return{...s,path:i,message:a}};function X(t,e){const n=VV(),r=HV({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===F0?void 0:F0].filter(s=>!!s)});t.common.issues.push(r)}class nr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return be;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n){const i=await s.key,o=await s.value;r.push({key:i,value:o})}return nr.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return be;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const be=Object.freeze({status:"aborted"}),du=t=>({status:"dirty",value:t}),Nr=t=>({status:"valid",value:t}),E1=t=>t.status==="aborted",C1=t=>t.status==="dirty",lc=t=>t.status==="valid",cp=t=>typeof Promise<"u"&&t instanceof Promise;var ae;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ae||(ae={}));class po{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const N1=(t,e)=>{if(lc(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new ri(t.common.issues);return this._error=n,this._error}}};function Ee(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>{const{message:l}=t;return o.code==="invalid_enum_value"?{message:l??a.defaultError}:typeof a.data>"u"?{message:l??r??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:l??n??a.defaultError}},description:s}}class Ae{get description(){return this._def.description}_getType(e){return wi(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:wi(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new nr,ctx:{common:e.parent.common,data:e.data,parsedType:wi(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(cp(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:wi(e)},s=this._parseSync({data:e,path:r.path,parent:r});return N1(r,s)}"~validate"(e){var r,s;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:wi(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:n});return lc(i)?{value:i.value}:{issues:n.common.issues}}catch(i){(s=(r=i==null?void 0:i.message)==null?void 0:r.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(i=>lc(i)?{value:i.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:wi(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(cp(s)?s:Promise.resolve(s));return N1(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:B.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new dc({schema:this,typeName:we.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return ro.create(this,this._def)}nullable(){return fc.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return hs.create(this)}promise(){return hp.create(this,this._def)}or(e){return dp.create([this,e],this._def)}and(e){return fp.create(this,e,this._def)}transform(e){return new dc({...Ee(this._def),schema:this,typeName:we.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new z0({...Ee(this._def),innerType:this,defaultValue:n,typeName:we.ZodDefault})}brand(){return new h5({typeName:we.ZodBranded,type:this,...Ee(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new V0({...Ee(this._def),innerType:this,catchValue:n,typeName:we.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Tw.create(this,e)}readonly(){return H0.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const qV=/^c[^\s-]{8,}$/i,WV=/^[0-9a-z]+$/,KV=/^[0-9A-HJKMNP-TV-Z]{26}$/i,GV=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,QV=/^[a-z0-9_-]{21}$/i,JV=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,YV=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,ZV=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,XV="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let gy;const e5=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,t5=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,n5=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,r5=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,s5=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,i5=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,TR="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",o5=new RegExp(`^${TR}$`);function OR(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function a5(t){return new RegExp(`^${OR(t)}$`)}function l5(t){let e=`${TR}T${OR(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function c5(t,e){return!!((e==="v4"||!e)&&e5.test(t)||(e==="v6"||!e)&&n5.test(t))}function u5(t,e){if(!JV.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function d5(t,e){return!!((e==="v4"||!e)&&t5.test(t)||(e==="v6"||!e)&&r5.test(t))}class Hs extends Ae{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==oe.string){const i=this._getOrReturnCtx(e);return X(i,{code:B.invalid_type,expected:oe.string,received:i.parsedType}),be}const r=new nr;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),X(s,{code:B.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),X(s,{code:B.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?X(s,{code:B.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&X(s,{code:B.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")ZV.test(e.data)||(s=this._getOrReturnCtx(e,s),X(s,{validation:"email",code:B.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")gy||(gy=new RegExp(XV,"u")),gy.test(e.data)||(s=this._getOrReturnCtx(e,s),X(s,{validation:"emoji",code:B.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")GV.test(e.data)||(s=this._getOrReturnCtx(e,s),X(s,{validation:"uuid",code:B.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")QV.test(e.data)||(s=this._getOrReturnCtx(e,s),X(s,{validation:"nanoid",code:B.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")qV.test(e.data)||(s=this._getOrReturnCtx(e,s),X(s,{validation:"cuid",code:B.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")WV.test(e.data)||(s=this._getOrReturnCtx(e,s),X(s,{validation:"cuid2",code:B.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")KV.test(e.data)||(s=this._getOrReturnCtx(e,s),X(s,{validation:"ulid",code:B.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),X(s,{validation:"url",code:B.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),X(s,{validation:"regex",code:B.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),X(s,{code:B.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),X(s,{code:B.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),X(s,{code:B.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?l5(i).test(e.data)||(s=this._getOrReturnCtx(e,s),X(s,{code:B.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?o5.test(e.data)||(s=this._getOrReturnCtx(e,s),X(s,{code:B.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?a5(i).test(e.data)||(s=this._getOrReturnCtx(e,s),X(s,{code:B.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?YV.test(e.data)||(s=this._getOrReturnCtx(e,s),X(s,{validation:"duration",code:B.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?c5(e.data,i.version)||(s=this._getOrReturnCtx(e,s),X(s,{validation:"ip",code:B.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?u5(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),X(s,{validation:"jwt",code:B.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?d5(e.data,i.version)||(s=this._getOrReturnCtx(e,s),X(s,{validation:"cidr",code:B.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?s5.test(e.data)||(s=this._getOrReturnCtx(e,s),X(s,{validation:"base64",code:B.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?i5.test(e.data)||(s=this._getOrReturnCtx(e,s),X(s,{validation:"base64url",code:B.invalid_string,message:i.message}),r.dirty()):je.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:B.invalid_string,...ae.errToObj(r)})}_addCheck(e){return new Hs({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ae.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ae.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ae.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ae.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ae.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ae.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ae.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ae.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ae.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...ae.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...ae.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ae.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...ae.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...ae.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...ae.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...ae.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...ae.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...ae.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...ae.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...ae.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...ae.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...ae.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...ae.errToObj(n)})}nonempty(e){return this.min(1,ae.errToObj(e))}trim(){return new Hs({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Hs({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Hs({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Hs.create=t=>new Hs({checks:[],typeName:we.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...Ee(t)});function f5(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=Number.parseInt(t.toFixed(s).replace(".","")),o=Number.parseInt(e.toFixed(s).replace(".",""));return i%o/10**s}class ka extends Ae{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==oe.number){const i=this._getOrReturnCtx(e);return X(i,{code:B.invalid_type,expected:oe.number,received:i.parsedType}),be}let r;const s=new nr;for(const i of this._def.checks)i.kind==="int"?je.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),X(r,{code:B.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),X(r,{code:B.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),X(r,{code:B.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?f5(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),X(r,{code:B.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),X(r,{code:B.not_finite,message:i.message}),s.dirty()):je.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,ae.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ae.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ae.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ae.toString(n))}setLimit(e,n,r,s){return new ka({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ae.toString(s)}]})}_addCheck(e){return new ka({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ae.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ae.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ae.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ae.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ae.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ae.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:ae.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ae.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ae.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&je.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}ka.create=t=>new ka({checks:[],typeName:we.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Ee(t)});class _a extends Ae{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==oe.bigint)return this._getInvalidInput(e);let r;const s=new nr;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),X(r,{code:B.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),X(r,{code:B.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),X(r,{code:B.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):je.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return X(n,{code:B.invalid_type,expected:oe.bigint,received:n.parsedType}),be}gte(e,n){return this.setLimit("min",e,!0,ae.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ae.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ae.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ae.toString(n))}setLimit(e,n,r,s){return new _a({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ae.toString(s)}]})}_addCheck(e){return new _a({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ae.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ae.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ae.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ae.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ae.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}_a.create=t=>new _a({checks:[],typeName:we.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...Ee(t)});class up extends Ae{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==oe.boolean){const r=this._getOrReturnCtx(e);return X(r,{code:B.invalid_type,expected:oe.boolean,received:r.parsedType}),be}return Nr(e.data)}}up.create=t=>new up({typeName:we.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Ee(t)});class cc extends Ae{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==oe.date){const i=this._getOrReturnCtx(e);return X(i,{code:B.invalid_type,expected:oe.date,received:i.parsedType}),be}if(Number.isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return X(i,{code:B.invalid_date}),be}const r=new nr;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),X(s,{code:B.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),X(s,{code:B.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):je.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new cc({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:ae.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:ae.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}cc.create=t=>new cc({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:we.ZodDate,...Ee(t)});class T1 extends Ae{_parse(e){if(this._getType(e)!==oe.symbol){const r=this._getOrReturnCtx(e);return X(r,{code:B.invalid_type,expected:oe.symbol,received:r.parsedType}),be}return Nr(e.data)}}T1.create=t=>new T1({typeName:we.ZodSymbol,...Ee(t)});class O1 extends Ae{_parse(e){if(this._getType(e)!==oe.undefined){const r=this._getOrReturnCtx(e);return X(r,{code:B.invalid_type,expected:oe.undefined,received:r.parsedType}),be}return Nr(e.data)}}O1.create=t=>new O1({typeName:we.ZodUndefined,...Ee(t)});class A1 extends Ae{_parse(e){if(this._getType(e)!==oe.null){const r=this._getOrReturnCtx(e);return X(r,{code:B.invalid_type,expected:oe.null,received:r.parsedType}),be}return Nr(e.data)}}A1.create=t=>new A1({typeName:we.ZodNull,...Ee(t)});class B0 extends Ae{constructor(){super(...arguments),this._any=!0}_parse(e){return Nr(e.data)}}B0.create=t=>new B0({typeName:we.ZodAny,...Ee(t)});class R1 extends Ae{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Nr(e.data)}}R1.create=t=>new R1({typeName:we.ZodUnknown,...Ee(t)});class mo extends Ae{_parse(e){const n=this._getOrReturnCtx(e);return X(n,{code:B.invalid_type,expected:oe.never,received:n.parsedType}),be}}mo.create=t=>new mo({typeName:we.ZodNever,...Ee(t)});class j1 extends Ae{_parse(e){if(this._getType(e)!==oe.undefined){const r=this._getOrReturnCtx(e);return X(r,{code:B.invalid_type,expected:oe.void,received:r.parsedType}),be}return Nr(e.data)}}j1.create=t=>new j1({typeName:we.ZodVoid,...Ee(t)});class hs extends Ae{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==oe.array)return X(n,{code:B.invalid_type,expected:oe.array,received:n.parsedType}),be;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(X(n,{code:o?B.too_big:B.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(X(n,{code:B.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(X(n,{code:B.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new po(n,o,n.path,a)))).then(o=>nr.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new po(n,o,n.path,a)));return nr.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new hs({...this._def,minLength:{value:e,message:ae.toString(n)}})}max(e,n){return new hs({...this._def,maxLength:{value:e,message:ae.toString(n)}})}length(e,n){return new hs({...this._def,exactLength:{value:e,message:ae.toString(n)}})}nonempty(e){return this.min(1,e)}}hs.create=(t,e)=>new hs({type:t,minLength:null,maxLength:null,exactLength:null,typeName:we.ZodArray,...Ee(e)});function rl(t){if(t instanceof _t){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=ro.create(rl(r))}return new _t({...t._def,shape:()=>e})}else return t instanceof hs?new hs({...t._def,type:rl(t.element)}):t instanceof ro?ro.create(rl(t.unwrap())):t instanceof fc?fc.create(rl(t.unwrap())):t instanceof Ea?Ea.create(t.items.map(e=>rl(e))):t}class _t extends Ae{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=je.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==oe.object){const c=this._getOrReturnCtx(e);return X(c,{code:B.invalid_type,expected:oe.object,received:c.parsedType}),be}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof mo&&this._def.unknownKeys==="strip"))for(const c in s.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const u=i[c],d=s.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new po(s,d,s.path,c)),alwaysSet:c in s.data})}if(this._def.catchall instanceof mo){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(c==="strict")a.length>0&&(X(s,{code:B.unrecognized_keys,keys:a}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of a){const d=s.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new po(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const d=await u.key,f=await u.value;c.push({key:d,value:f,alwaysSet:u.alwaysSet})}return c}).then(c=>nr.mergeObjectSync(r,c)):nr.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return ae.errToObj,new _t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,o;const s=((o=(i=this._def).errorMap)==null?void 0:o.call(i,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:ae.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new _t({...this._def,unknownKeys:"strip"})}passthrough(){return new _t({...this._def,unknownKeys:"passthrough"})}extend(e){return new _t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new _t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:we.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new _t({...this._def,catchall:e})}pick(e){const n={};for(const r of je.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new _t({...this._def,shape:()=>n})}omit(e){const n={};for(const r of je.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new _t({...this._def,shape:()=>n})}deepPartial(){return rl(this)}partial(e){const n={};for(const r of je.objectKeys(this.shape)){const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}return new _t({...this._def,shape:()=>n})}required(e){const n={};for(const r of je.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof ro;)i=i._def.innerType;n[r]=i}return new _t({...this._def,shape:()=>n})}keyof(){return AR(je.objectKeys(this.shape))}}_t.create=(t,e)=>new _t({shape:()=>t,unknownKeys:"strip",catchall:mo.create(),typeName:we.ZodObject,...Ee(e)});_t.strictCreate=(t,e)=>new _t({shape:()=>t,unknownKeys:"strict",catchall:mo.create(),typeName:we.ZodObject,...Ee(e)});_t.lazycreate=(t,e)=>new _t({shape:t,unknownKeys:"strip",catchall:mo.create(),typeName:we.ZodObject,...Ee(e)});class dp extends Ae{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new ri(a.ctx.common.issues));return X(n,{code:B.invalid_union,unionErrors:o}),be}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const l of r){const c={...n,common:{...n.common,issues:[]},parent:null},u=l._parseSync({data:n.data,path:n.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(l=>new ri(l));return X(n,{code:B.invalid_union,unionErrors:a}),be}}get options(){return this._def.options}}dp.create=(t,e)=>new dp({options:t,typeName:we.ZodUnion,...Ee(e)});function U0(t,e){const n=wi(t),r=wi(e);if(t===e)return{valid:!0,data:t};if(n===oe.object&&r===oe.object){const s=je.objectKeys(e),i=je.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const l=U0(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===oe.array&&r===oe.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],l=U0(o,a);if(!l.valid)return{valid:!1};s.push(l.data)}return{valid:!0,data:s}}else return n===oe.date&&r===oe.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class fp extends Ae{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(E1(i)||E1(o))return be;const a=U0(i.value,o.value);return a.valid?((C1(i)||C1(o))&&n.dirty(),{status:n.value,value:a.data}):(X(r,{code:B.invalid_intersection_types}),be)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}fp.create=(t,e,n)=>new fp({left:t,right:e,typeName:we.ZodIntersection,...Ee(n)});class Ea extends Ae{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==oe.array)return X(r,{code:B.invalid_type,expected:oe.array,received:r.parsedType}),be;if(r.data.length<this._def.items.length)return X(r,{code:B.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),be;!this._def.rest&&r.data.length>this._def.items.length&&(X(r,{code:B.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new po(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>nr.mergeArray(n,o)):nr.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new Ea({...this._def,rest:e})}}Ea.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ea({items:t,typeName:we.ZodTuple,rest:null,...Ee(e)})};class I1 extends Ae{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==oe.map)return X(r,{code:B.invalid_type,expected:oe.map,received:r.parsedType}),be;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,l],c)=>({key:s._parse(new po(r,a,r.path,[c,"key"])),value:i._parse(new po(r,l,r.path,[c,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return be;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return be;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}}}}I1.create=(t,e,n)=>new I1({valueType:e,keyType:t,typeName:we.ZodMap,...Ee(n)});class gd extends Ae{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==oe.set)return X(r,{code:B.invalid_type,expected:oe.set,received:r.parsedType}),be;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(X(r,{code:B.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(X(r,{code:B.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(l){const c=new Set;for(const u of l){if(u.status==="aborted")return be;u.status==="dirty"&&n.dirty(),c.add(u.value)}return{status:n.value,value:c}}const a=[...r.data.values()].map((l,c)=>i._parse(new po(r,l,r.path,c)));return r.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new gd({...this._def,minSize:{value:e,message:ae.toString(n)}})}max(e,n){return new gd({...this._def,maxSize:{value:e,message:ae.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}gd.create=(t,e)=>new gd({valueType:t,minSize:null,maxSize:null,typeName:we.ZodSet,...Ee(e)});class P1 extends Ae{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}P1.create=(t,e)=>new P1({getter:t,typeName:we.ZodLazy,...Ee(e)});class M1 extends Ae{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return X(n,{received:n.data,code:B.invalid_literal,expected:this._def.value}),be}return{status:"valid",value:e.data}}get value(){return this._def.value}}M1.create=(t,e)=>new M1({value:t,typeName:we.ZodLiteral,...Ee(e)});function AR(t,e){return new uc({values:t,typeName:we.ZodEnum,...Ee(e)})}class uc extends Ae{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return X(n,{expected:je.joinValues(r),received:n.parsedType,code:B.invalid_type}),be}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return X(n,{received:n.data,code:B.invalid_enum_value,options:r}),be}return Nr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return uc.create(e,{...this._def,...n})}exclude(e,n=this._def){return uc.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}uc.create=AR;class D1 extends Ae{_parse(e){const n=je.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==oe.string&&r.parsedType!==oe.number){const s=je.objectValues(n);return X(r,{expected:je.joinValues(s),received:r.parsedType,code:B.invalid_type}),be}if(this._cache||(this._cache=new Set(je.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=je.objectValues(n);return X(r,{received:r.data,code:B.invalid_enum_value,options:s}),be}return Nr(e.data)}get enum(){return this._def.values}}D1.create=(t,e)=>new D1({values:t,typeName:we.ZodNativeEnum,...Ee(e)});class hp extends Ae{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==oe.promise&&n.common.async===!1)return X(n,{code:B.invalid_type,expected:oe.promise,received:n.parsedType}),be;const r=n.parsedType===oe.promise?n.data:Promise.resolve(n.data);return Nr(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}hp.create=(t,e)=>new hp({type:t,typeName:we.ZodPromise,...Ee(e)});class dc extends Ae{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===we.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{X(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return be;const l=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return l.status==="aborted"?be:l.status==="dirty"||n.value==="dirty"?du(l.value):l});{if(n.value==="aborted")return be;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?be:a.status==="dirty"||n.value==="dirty"?du(a.value):a}}if(s.type==="refinement"){const o=a=>{const l=s.refinement(a,i);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?be:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?be:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!lc(o))return be;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>lc(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):be);je.assertNever(s)}}dc.create=(t,e,n)=>new dc({schema:t,typeName:we.ZodEffects,effect:e,...Ee(n)});dc.createWithPreprocess=(t,e,n)=>new dc({schema:e,effect:{type:"preprocess",transform:t},typeName:we.ZodEffects,...Ee(n)});class ro extends Ae{_parse(e){return this._getType(e)===oe.undefined?Nr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ro.create=(t,e)=>new ro({innerType:t,typeName:we.ZodOptional,...Ee(e)});class fc extends Ae{_parse(e){return this._getType(e)===oe.null?Nr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}fc.create=(t,e)=>new fc({innerType:t,typeName:we.ZodNullable,...Ee(e)});class z0 extends Ae{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===oe.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}z0.create=(t,e)=>new z0({innerType:t,typeName:we.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ee(e)});class V0 extends Ae{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return cp(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ri(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ri(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}V0.create=(t,e)=>new V0({innerType:t,typeName:we.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ee(e)});class L1 extends Ae{_parse(e){if(this._getType(e)!==oe.nan){const r=this._getOrReturnCtx(e);return X(r,{code:B.invalid_type,expected:oe.nan,received:r.parsedType}),be}return{status:"valid",value:e.data}}}L1.create=t=>new L1({typeName:we.ZodNaN,...Ee(t)});class h5 extends Ae{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Tw extends Ae{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?be:i.status==="dirty"?(n.dirty(),du(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?be:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new Tw({in:e,out:n,typeName:we.ZodPipeline})}}class H0 extends Ae{_parse(e){const n=this._def.innerType._parse(e),r=s=>(lc(s)&&(s.value=Object.freeze(s.value)),s);return cp(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}H0.create=(t,e)=>new H0({innerType:t,typeName:we.ZodReadonly,...Ee(e)});var we;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(we||(we={}));const hn=Hs.create,p5=ka.create;_a.create;const Ow=up.create;cc.create;const $1=B0.create;mo.create;hs.create;const Jd=_t.create;dp.create;fp.create;Ea.create;const m5=uc.create;hp.create;ro.create;fc.create;const q0={string:t=>Hs.create({...t,coerce:!0}),number:t=>ka.create({...t,coerce:!0}),boolean:t=>up.create({...t,coerce:!0}),bigint:t=>_a.create({...t,coerce:!0}),date:t=>cc.create({...t,coerce:!0})};var cs=function(){return cs=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},cs.apply(this,arguments)};function Pc(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function g5(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function y5(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}const v5=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class Aw extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class x5 extends Aw{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class F1 extends Aw{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class B1 extends Aw{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var W0;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(W0||(W0={}));class b5{constructor(e,{headers:n={},customFetch:r,region:s=W0.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=v5(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return g5(this,arguments,void 0,function*(n,r={}){var s;let i,o;try{const{headers:a,method:l,body:c,signal:u,timeout:d}=r;let f={},{region:p}=r;p||(p=this.region);const m=new URL(`${this.url}/${n}`);p&&p!=="any"&&(f["x-region"]=p,m.searchParams.set("forceFunctionRegion",p));let g;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",g=c):typeof c=="string"?(f["Content-Type"]="text/plain",g=c):typeof FormData<"u"&&c instanceof FormData?g=c:(f["Content-Type"]="application/json",g=JSON.stringify(c)):c&&typeof c!="string"&&!(typeof Blob<"u"&&c instanceof Blob)&&!(c instanceof ArrayBuffer)&&!(typeof FormData<"u"&&c instanceof FormData)?g=JSON.stringify(c):g=c;let y=u;d&&(o=new AbortController,i=setTimeout(()=>o.abort(),d),u?(y=o.signal,u.addEventListener("abort",()=>o.abort())):y=o.signal);const v=yield this.fetch(m.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),a),body:g,signal:y}).catch(k=>{throw new x5(k)}),x=v.headers.get("x-relay-error");if(x&&x==="true")throw new F1(v);if(!v.ok)throw new B1(v);let b=((s=v.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),S;return b==="application/json"?S=yield v.json():b==="application/octet-stream"||b==="application/pdf"?S=yield v.blob():b==="text/event-stream"?S=v:b==="multipart/form-data"?S=yield v.formData():S=yield v.text(),{data:S,error:null,response:v}}catch(a){return{data:null,error:a,response:a instanceof B1||a instanceof F1?a.context:void 0}}finally{i&&clearTimeout(i)}})}}var w5=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},S5=class{constructor(t){var e,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,a=null,l=null,c=i.status,u=i.statusText;if(i.ok){var d,f;if(n.method!=="HEAD"){var p;const v=await i.text();v===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((p=n.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?a=v:a=JSON.parse(v))}const g=(d=n.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),y=(f=i.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");g&&y&&y.length>1&&(l=parseInt(y[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(a)&&(a.length>1?(o={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,l=null,c=406,u="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var m;const g=await i.text();try{o=JSON.parse(g),Array.isArray(o)&&i.status===404&&(a=[],o=null,c=200,u="OK")}catch{i.status===404&&g===""?(c=204,u="No Content"):o={message:g}}if(o&&n.isMaybeSingle&&(!(o==null||(m=o.details)===null||m===void 0)&&m.includes("0 rows"))&&(o=null,c=200,u="OK"),o&&n.shouldThrowOnError)throw new w5(o)}return{error:o,data:a,count:l,status:c,statusText:u}});return this.shouldThrowOnError||(s=s.catch(i=>{var o;let a="";const l=i==null?void 0:i.cause;if(l){var c,u,d,f;const m=(c=l==null?void 0:l.message)!==null&&c!==void 0?c:"",g=(u=l==null?void 0:l.code)!==null&&u!==void 0?u:"";a=`${(d=i==null?void 0:i.name)!==null&&d!==void 0?d:"FetchError"}: ${i==null?void 0:i.message}`,a+=`

Caused by: ${(f=l==null?void 0:l.name)!==null&&f!==void 0?f:"Error"}: ${m}`,g&&(a+=` (${g})`),l!=null&&l.stack&&(a+=`
${l.stack}`)}else{var p;a=(p=i==null?void 0:i.stack)!==null&&p!==void 0?p:""}return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:a,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(t,e)}returns(){return this}overrideTypes(){return this}},k5=class extends S5{select(t){let e=!1;const n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:s=r}={}){const i=s?`${s}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"offset":`${r}.offset`,i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(i,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:s=!1,format:i="text"}={}){var o;const a=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${l}"; options=${a};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const U1=new RegExp("[,()]");var sl=class extends k5{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&U1.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&U1.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");const i=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${s}fts${i}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},_5=class{constructor(t,{headers:e={},schema:n,fetch:r}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=r}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:n=!1,count:r}=e??{},s=n?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(c=>/\s/.test(c)&&!i?"":(c==='"'&&(i=!i),c)).join(""),{url:a,headers:l}=this.cloneRequestState();return a.searchParams.set("select",o),r&&l.append("Prefer",`count=${r}`),new sl({method:s,url:a,headers:l,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:n=!0}={}){var r;const s="POST",{url:i,headers:o}=this.cloneRequestState();if(e&&o.append("Prefer",`count=${e}`),n||o.append("Prefer","missing=default"),Array.isArray(t)){const a=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);i.searchParams.set("columns",l.join(","))}}return new sl({method:s,url:i,headers:o,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:s=!0}={}){var i;const o="POST",{url:a,headers:l}=this.cloneRequestState();if(l.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&a.searchParams.set("on_conflict",e),r&&l.append("Prefer",`count=${r}`),s||l.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);a.searchParams.set("columns",u.join(","))}}return new sl({method:o,url:a,headers:l,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(t,{count:e}={}){var n;const r="PATCH",{url:s,headers:i}=this.cloneRequestState();return e&&i.append("Prefer",`count=${e}`),new sl({method:r,url:s,headers:i,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var e;const n="DELETE",{url:r,headers:s}=this.cloneRequestState();return t&&s.append("Prefer",`count=${t}`),new sl({method:n,url:r,headers:s,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},E5=class RR{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new _5(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new RR(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){var o;let a;const l=new URL(`${this.url}/rpc/${e}`);let c;const u=p=>p!==null&&typeof p=="object"&&(!Array.isArray(p)||p.some(u)),d=r&&Object.values(n).some(u);d?(a="POST",c=n):r||s?(a=r?"HEAD":"GET",Object.entries(n).filter(([p,m])=>m!==void 0).map(([p,m])=>[p,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([p,m])=>{l.searchParams.append(p,m)})):(a="POST",c=n);const f=new Headers(this.headers);return d?f.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&f.set("Prefer",`count=${i}`),new sl({method:a,url:l,headers:f,schema:this.schemaName,body:c,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class C5{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const r=n.versions;if(r&&r.node){const s=r.node,i=parseInt(s.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const N5="2.93.1",T5=`realtime-js/${N5}`,O5="1.0.0",jR="2.0.0",z1=jR,K0=1e4,A5=1e3,R5=100;var Si;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Si||(Si={}));var Pt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Pt||(Pt={}));var Dr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Dr||(Dr={}));var G0;(function(t){t.websocket="websocket"})(G0||(G0={}));var $o;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})($o||($o={}));class j5{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const s=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(e){var n,r;const s=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},o=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,n,r){var s,i;const o=e.topic,a=(s=e.ref)!==null&&s!==void 0?s:"",l=(i=e.join_ref)!==null&&i!==void 0?i:"",c=e.payload.event,u=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},d=Object.keys(u).length===0?"":JSON.stringify(u);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+c.length+d.length,p=new ArrayBuffer(this.HEADER_LENGTH+f);let m=new DataView(p),g=0;m.setUint8(g++,this.KINDS.userBroadcastPush),m.setUint8(g++,l.length),m.setUint8(g++,a.length),m.setUint8(g++,o.length),m.setUint8(g++,c.length),m.setUint8(g++,d.length),m.setUint8(g++,n),Array.from(l,v=>m.setUint8(g++,v.charCodeAt(0))),Array.from(a,v=>m.setUint8(g++,v.charCodeAt(0))),Array.from(o,v=>m.setUint8(g++,v.charCodeAt(0))),Array.from(c,v=>m.setUint8(g++,v.charCodeAt(0))),Array.from(d,v=>m.setUint8(g++,v.charCodeAt(0)));var y=new Uint8Array(p.byteLength+r.byteLength);return y.set(new Uint8Array(p),0),y.set(new Uint8Array(r),p.byteLength),y.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[s,i,o,a,l]=r;return n({join_ref:s,ref:i,topic:o,event:a,payload:l})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),s=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,s)}}_decodeUserBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2),o=n.getUint8(3),a=n.getUint8(4);let l=this.HEADER_LENGTH+4;const c=r.decode(e.slice(l,l+s));l=l+s;const u=r.decode(e.slice(l,l+i));l=l+i;const d=r.decode(e.slice(l,l+o));l=l+o;const f=e.slice(l,e.byteLength),p=a===this.JSON_ENCODING?JSON.parse(r.decode(f)):f,m={type:this.BROADCAST_EVENT,event:u,payload:p};return o>0&&(m.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:m}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class IR{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ge;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ge||(Ge={}));const V1=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((i,o)=>(i[o]=I5(o,t,e,s),i),{}):{}},I5=(t,e,n,r)=>{const s=e.find(a=>a.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?PR(i,o):Q0(o)},PR=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return L5(e,n)}switch(t){case Ge.bool:return P5(e);case Ge.float4:case Ge.float8:case Ge.int2:case Ge.int4:case Ge.int8:case Ge.numeric:case Ge.oid:return M5(e);case Ge.json:case Ge.jsonb:return D5(e);case Ge.timestamp:return $5(e);case Ge.abstime:case Ge.date:case Ge.daterange:case Ge.int4range:case Ge.int8range:case Ge.money:case Ge.reltime:case Ge.text:case Ge.time:case Ge.timestamptz:case Ge.timetz:case Ge.tsrange:case Ge.tstzrange:return Q0(e);default:return Q0(e)}},Q0=t=>t,P5=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},M5=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},D5=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},L5=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>PR(e,a))}return t},$5=t=>typeof t=="string"?t.replace(" ","T"):t,MR=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class yy{constructor(e,n,r={},s=K0){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var H1;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(H1||(H1={}));class ju{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ju.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=ju.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=ju.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(i,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const d=i[c];if(d){const f=u.map(y=>y.presence_ref),p=d.map(y=>y.presence_ref),m=u.filter(y=>p.indexOf(y.presence_ref)<0),g=d.filter(y=>f.indexOf(y.presence_ref)<0);m.length>0&&(a[c]=m),g.length>0&&(l[c]=g)}else a[c]=u}),this.syncDiff(i,{joins:a,leaves:l},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const d=e[a].map(p=>p.presence_ref),f=u.filter(p=>d.indexOf(p.presence_ref)<0);e[a].unshift(...f)}r(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=c,s(a,c,l),c.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var q1;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(q1||(q1={}));var Iu;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Iu||(Iu={}));var Is;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Is||(Is={}));class Sl{constructor(e,n={config:{}},r){var s,i;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Pt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new yy(this,Dr.join,this.params,this.timeout),this.rejoinTimer=new IR(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Pt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Pt.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Pt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Dr.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new ju(this),this.broadcastEndpointURL=MR(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Pt.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,c=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&s!==void 0?s:[],u=!!this.bindings[Iu.PRESENCE]&&this.bindings[Iu.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,d={},f={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(p=>e==null?void 0:e(Is.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(Is.CLOSED)),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:p})=>{var m;if(this.socket._isManualToken()||this.socket.setAuth(),p===void 0){e==null||e(Is.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,y=(m=g==null?void 0:g.length)!==null&&m!==void 0?m:0,v=[];for(let x=0;x<y;x++){const b=g[x],{filter:{event:S,schema:k,table:E,filter:_}}=b,T=p&&p[x];if(T&&T.event===S&&Sl.isFilterValueEqual(T.schema,k)&&Sl.isFilterValueEqual(T.table,E)&&Sl.isFilterValueEqual(T.filter,_))v.push(Object.assign(Object.assign({},b),{id:T.id}));else{this.unsubscribe(),this.state=Pt.errored,e==null||e(Is.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(Is.SUBSCRIBED);return}}).receive("error",p=>{this.state=Pt.errored,e==null||e(Is.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Is.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===Pt.joined&&e===Iu.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var s;if(n==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const c=await a.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=e,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Pt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Dr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new yy(this,Dr.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Pt.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new yy(this,e,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>R5){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=Dr;if(r&&[a,l,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var m,g,y;return((m=p.filter)===null||m===void 0?void 0:m.event)==="*"||((y=(g=p.filter)===null||g===void 0?void 0:g.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(p=>p.callback(f,r)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var m,g,y,v,x,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const S=p.id,k=(m=p.filter)===null||m===void 0?void 0:m.event;return S&&((g=n.ids)===null||g===void 0?void 0:g.includes(S))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((y=n.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const S=(x=(v=p==null?void 0:p.filter)===null||v===void 0?void 0:v.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return S==="*"||S===((b=n==null?void 0:n.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const m=f.data,{schema:g,table:y,commit_timestamp:v,type:x,errors:b}=m;f=Object.assign(Object.assign({},{schema:g,table:y,commit_timestamp:v,eventType:x,new:{},old:{},errors:b}),this._getPayloadRecords(m))}p.callback(f,r)})}_isClosed(){return this.state===Pt.closed}_isJoined(){return this.state===Pt.joined}_isJoining(){return this.state===Pt.joining}_isLeaving(){return this.state===Pt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Sl.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Dr.close,{},e)}_onError(e){this._on(Dr.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Pt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=V1(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=V1(e.columns,e.old_record)),n}}const vy=()=>{},Rf={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},F5=[1e3,2e3,5e3,1e4],B5=1e4,U5=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class z5{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=K0,this.transport=null,this.heartbeatIntervalMs=Rf.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=vy,this.ref=0,this.reconnectTimer=null,this.vsn=z1,this.logger=vy,this.conn=null,this.sendBuffer=[],this.serializer=new j5,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${G0.websocket}`,this.httpEndpoint=MR(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=C5.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Si.connecting:return $o.Connecting;case Si.open:return $o.Open;case Si.closing:return $o.Closing;default:return $o.Closed}}isConnected(){return this.connectionState()===$o.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new Sl(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(A5,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Rf.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const c=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",c)}catch(u){this.log("error","error in heartbeat callback",u)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:s,payload:i,ref:o}=n,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${r} ${s} ${a}`.trim(),i),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(s,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Si.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Si.open||this.conn.readyState===Si.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(n){this.log("error","error in heartbeat callback",n)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(Dr.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([U5],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const i={access_token:n,version:T5};n&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(Dr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new IR(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Rf.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,s,i,o,a,l,c,u,d,f,p;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:K0,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Rf.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:vy,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:z1,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:m=>F5[m-1]||B5,this.vsn){case O5:this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(m,g)=>g(JSON.stringify(m)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:(m,g)=>g(JSON.parse(m));break;case jR:this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(p=e==null?void 0:e.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var yd=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function V5(t,e,n){const r=new URL(e,t);if(n)for(const[s,i]of Object.entries(n))i!==void 0&&r.searchParams.set(s,i);return r.toString()}async function H5(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function q5(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:s,body:i,headers:o}){const a=V5(t.baseUrl,r,s),l=await H5(t.auth),c=await e(a,{method:n,headers:{...i?{"Content-Type":"application/json"}:{},...l,...o},body:i?JSON.stringify(i):void 0}),u=await c.text(),d=(c.headers.get("content-type")||"").includes("application/json"),f=d&&u?JSON.parse(u):u;if(!c.ok){const p=d?f:void 0,m=p==null?void 0:p.error;throw new yd((m==null?void 0:m.message)??`Request failed with status ${c.status}`,{status:c.status,icebergType:m==null?void 0:m.type,icebergCode:m==null?void 0:m.code,details:p})}return{status:c.status,headers:c.headers,data:f}}}}function jf(t){return t.join("")}var W5=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:jf(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${jf(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${jf(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${jf(t.namespace)}`}),!0}catch(e){if(e instanceof yd&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof yd&&n.status===409)return;throw n}}};function Ha(t){return t.join("")}var K5=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ha(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ha(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ha(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ha(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ha(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ha(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof yd&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof yd&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},G5=class{constructor(t){var r;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=q5({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(r=t.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new W5(this.client,e),this.tableOps=new K5(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},ng=class extends Error{constructor(t,e="storage",n,r){super(t),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=r}};function rg(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var If=class extends ng{constructor(t,e,n,r="storage"){super(t,r,e,n),this.name=r==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},DR=class extends ng{constructor(t,e,n="storage"){super(t,n),this.name=n==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const Q5=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),J5=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},J0=t=>{if(Array.isArray(t))return t.map(n=>J0(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=J0(r)}),e},Y5=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function vd(t){"@babel/helpers - typeof";return vd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vd(t)}function Z5(t,e){if(vd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(vd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function X5(t){var e=Z5(t,"string");return vd(e)=="symbol"?e:e+""}function e6(t,e,n){return(e=X5(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function W1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ye(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?W1(Object(n),!0).forEach(function(r){e6(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const K1=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},t6=async(t,e,n,r)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const s=t,i=s.status||500;if(typeof s.json=="function")s.json().then(o=>{const a=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||i+"";e(new If(K1(o),i,a,r))}).catch(()=>{if(r==="vectors"){const o=i+"";e(new If(s.statusText||`HTTP ${i} error`,i,o,r))}else{const o=i+"";e(new If(s.statusText||`HTTP ${i} error`,i,o,r))}});else{const o=i+"";e(new If(s.statusText||`HTTP ${i} error`,i,o,r))}}else e(new DR(K1(t),t,r))},n6=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||t==="HEAD"||!r?ye(ye({},s),n):(J5(r)?(s.headers=ye({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),ye(ye({},s),n))};async function Zc(t,e,n,r,s,i,o){return new Promise((a,l)=>{t(n,n6(e,r,s,i)).then(c=>{if(!c.ok)throw c;if(r!=null&&r.noResolveJson)return c;if(o==="vectors"){const u=c.headers.get("content-type");if(!u||!u.includes("application/json"))return{}}return c.json()}).then(c=>a(c)).catch(c=>t6(c,l,r,o))})}function r6(t="storage"){return{get:async(e,n,r,s)=>Zc(e,"GET",n,r,s,void 0,t),post:async(e,n,r,s,i)=>Zc(e,"POST",n,s,i,r,t),put:async(e,n,r,s,i)=>Zc(e,"PUT",n,s,i,r,t),head:async(e,n,r,s)=>Zc(e,"HEAD",n,ye(ye({},r),{},{noResolveJson:!0}),s,void 0,t),remove:async(e,n,r,s,i)=>Zc(e,"DELETE",n,s,i,r,t)}}const s6=r6("storage"),{get:xd,post:st,put:Y0,head:i6,remove:Rw}=s6;var Mc=class{constructor(t,e={},n,r="storage"){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.fetch=Q5(n),this.namespace=r}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(t){var e=this;try{return{data:await t(),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(rg(n))return{data:null,error:n};throw n}}},o6=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(rg(e))return{data:null,error:e};throw e}}};let LR;LR=Symbol.toStringTag;var a6=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[LR]="BlobDownloadBuilder",this.promise=null}asStream(){return new o6(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(rg(e))return{data:null,error:e};throw e}}};const l6={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},G1={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var c6=class extends Mc{constructor(t,e={},n,r){super(t,e,r,"storage"),this.bucketId=n}async uploadOrUpdate(t,e,n,r){var s=this;return s.handleOperation(async()=>{let i;const o=ye(ye({},G1),r);let a=ye(ye({},s.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",s.encodeMetadata(l)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),l&&!i.has("metadata")&&i.append("metadata",s.encodeMetadata(l))):(i=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=s.toBase64(s.encodeMetadata(l))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),r!=null&&r.headers&&(a=ye(ye({},a),r.headers));const c=s._removeEmptyFolders(e),u=s._getFinalPath(c),d=await(t=="PUT"?Y0:st)(s.fetch,`${s.url}/object/${u}`,i,ye({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{path:c,id:d.Id,fullPath:d.Key}})}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,r){var s=this;const i=s._removeEmptyFolders(t),o=s._getFinalPath(i),a=new URL(s.url+`/object/upload/sign/${o}`);return a.searchParams.set("token",e),s.handleOperation(async()=>{let l;const c=ye({upsert:G1.upsert},r),u=ye(ye({},s.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType),{path:i,fullPath:(await Y0(s.fetch,a.toString(),l,{headers:u})).Key}})}async createSignedUploadUrl(t,e){var n=this;return n.handleOperation(async()=>{let r=n._getFinalPath(t);const s=ye({},n.headers);e!=null&&e.upsert&&(s["x-upsert"]="true");const i=await st(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(n.url+i.url),a=o.searchParams.get("token");if(!a)throw new ng("No token returned by API");return{signedUrl:o.toString(),path:t,token:a}})}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var r=this;return r.handleOperation(async()=>await st(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}))}async copy(t,e,n){var r=this;return r.handleOperation(async()=>({path:(await st(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key}))}async createSignedUrl(t,e,n){var r=this;return r.handleOperation(async()=>{let s=r._getFinalPath(t),i=await st(r.fetch,`${r.url}/object/sign/${s}`,ye({expiresIn:e},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{signedUrl:encodeURI(`${r.url}${i.signedURL}${o}`)}})}async createSignedUrls(t,e,n){var r=this;return r.handleOperation(async()=>{const s=await st(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return s.map(o=>ye(ye({},o),{},{signedUrl:o.signedURL?encodeURI(`${r.url}${o.signedURL}${i}`):null}))})}download(t,e){const n=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),s=r?`?${r}`:"",i=this._getFinalPath(t),o=()=>xd(this.fetch,`${this.url}/${n}/${i}${s}`,{headers:this.headers,noResolveJson:!0});return new a6(o,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);return e.handleOperation(async()=>J0(await xd(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})))}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await i6(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(rg(r)&&r instanceof DR){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){const n=this._getFinalPath(t),r=[],s=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";s!==""&&r.push(s);const i=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});o!==""&&r.push(o);let a=r.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${n}${a}`)}}}async remove(t){var e=this;return e.handleOperation(async()=>await Rw(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}))}async list(t,e,n){var r=this;return r.handleOperation(async()=>{const s=ye(ye(ye({},l6),e),{},{prefix:t||""});return await st(r.fetch,`${r.url}/object/list/${r.bucketId}`,s,{headers:r.headers},n)})}async listV2(t,e){var n=this;return n.handleOperation(async()=>{const r=ye({},t);return await st(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},e)})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const u6="2.93.1",Yd={"X-Client-Info":`storage-js/${u6}`};var d6=class extends Mc{constructor(t,e={},n,r){const s=new URL(t);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase."));const i=s.href.replace(/\/$/,""),o=ye(ye({},Yd),e);super(i,o,n,"storage")}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const n=e.listBucketOptionsToQueryString(t);return await xd(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers})})}async getBucket(t){var e=this;return e.handleOperation(async()=>await xd(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}))}async createBucket(t,e={public:!1}){var n=this;return n.handleOperation(async()=>await st(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async updateBucket(t,e){var n=this;return n.handleOperation(async()=>await Y0(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(t){var e=this;return e.handleOperation(async()=>await st(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await Rw(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},f6=class extends Mc{constructor(t,e={},n){const r=t.replace(/\/$/,""),s=ye(ye({},Yd),e);super(r,s,n,"storage")}async createBucket(t){var e=this;return e.handleOperation(async()=>await st(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}))}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const r=n.toString(),s=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return await xd(e.fetch,s,{headers:e.headers})})}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await Rw(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}from(t){var e=this;if(!Y5(t))throw new ng("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new G5({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(s,i){const o=s[i];return typeof o!="function"?o:async(...a)=>{try{return{data:await o.apply(s,a),error:null}}catch(l){if(r)throw l;return{data:null,error:l}}}}})}},h6=class extends Mc{constructor(t,e={},n){const r=t.replace(/\/$/,""),s=ye(ye({},Yd),{},{"Content-Type":"application/json"},e);super(r,s,n,"vectors")}async createIndex(t){var e=this;return e.handleOperation(async()=>await st(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{})}async getIndex(t,e){var n=this;return n.handleOperation(async()=>await st(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}))}async listIndexes(t){var e=this;return e.handleOperation(async()=>await st(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}))}async deleteIndex(t,e){var n=this;return n.handleOperation(async()=>await st(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{})}},p6=class extends Mc{constructor(t,e={},n){const r=t.replace(/\/$/,""),s=ye(ye({},Yd),{},{"Content-Type":"application/json"},e);super(r,s,n,"vectors")}async putVectors(t){var e=this;if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await st(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{})}async getVectors(t){var e=this;return e.handleOperation(async()=>await st(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}))}async listVectors(t){var e=this;if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return e.handleOperation(async()=>await st(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}))}async queryVectors(t){var e=this;return e.handleOperation(async()=>await st(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}))}async deleteVectors(t){var e=this;if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await st(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{})}},m6=class extends Mc{constructor(t,e={},n){const r=t.replace(/\/$/,""),s=ye(ye({},Yd),{},{"Content-Type":"application/json"},e);super(r,s,n,"vectors")}async createBucket(t){var e=this;return e.handleOperation(async()=>await st(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}async getBucket(t){var e=this;return e.handleOperation(async()=>await st(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}))}async listBuckets(t={}){var e=this;return e.handleOperation(async()=>await st(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await st(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}},g6=class extends m6{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new y6(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},y6=class extends h6{constructor(t,e,n,r){super(t,e,r),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,ye(ye({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,ye(ye({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new v6(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},v6=class extends p6{constructor(t,e,n,r,s){super(t,e,s),this.vectorBucketName=n,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,ye(ye({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,ye(ye({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,ye(ye({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,ye(ye({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,ye(ye({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},x6=class extends d6{constructor(t,e={},n,r){super(t,e,n,r)}from(t){return new c6(this.url,this.headers,t,this.fetch)}get vectors(){return new g6(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new f6(this.url+"/iceberg",this.headers,this.fetch)}};const $R="2.93.1",il=30*1e3,Z0=3,xy=Z0*il,b6="http://localhost:9999",w6="supabase.auth.token",S6={"X-Client-Info":`gotrue-js/${$R}`},X0="X-Supabase-Api-Version",FR={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},k6=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,_6=10*60*1e3;class bd extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function le(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class E6 extends bd{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function C6(t){return le(t)&&t.name==="AuthApiError"}class Fo extends bd{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class ii extends bd{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class Hn extends ii{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function by(t){return le(t)&&t.name==="AuthSessionMissingError"}class qa extends ii{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Pf extends ii{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Mf extends ii{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function N6(t){return le(t)&&t.name==="AuthImplicitGrantRedirectError"}class Q1 extends ii{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class T6 extends ii{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class ex extends ii{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function wy(t){return le(t)&&t.name==="AuthRetryableFetchError"}class J1 extends ii{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class tx extends ii{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const pp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Y1=` 	
\r=`.split(""),O6=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Y1.length;e+=1)t[Y1[e].charCodeAt(0)]=-2;for(let e=0;e<pp.length;e+=1)t[pp[e].charCodeAt(0)]=e;return t})();function Z1(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(pp[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(pp[r]),e.queuedBits-=6}}function BR(t,e,n){const r=O6[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function X1(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{j6(o,r,n)};for(let o=0;o<t.length;o+=1)BR(t.charCodeAt(o),s,i);return e.join("")}function A6(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function R6(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}A6(r,e)}}function j6(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Rl(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)BR(t.charCodeAt(s),n,r);return new Uint8Array(e)}function I6(t){const e=[];return R6(t,n=>e.push(n)),new Uint8Array(e)}function Wo(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>Z1(s,n,r)),Z1(null,n,r),e.join("")}function P6(t){return Math.round(Date.now()/1e3)+t}function M6(){return Symbol("auth-callback")}const Qt=()=>typeof window<"u"&&typeof document<"u",jo={tested:!1,writable:!1},UR=()=>{if(!Qt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(jo.tested)return jo.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),jo.tested=!0,jo.writable=!0}catch{jo.tested=!0,jo.writable=!1}return jo.writable};function D6(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const zR=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),L6=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",ol=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Io=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Gt=async(t,e)=>{await t.removeItem(e)};class sg{constructor(){this.promise=new sg.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}sg.promiseConstructor=Promise;function Df(t){const e=t.split(".");if(e.length!==3)throw new tx("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!k6.test(e[r]))throw new tx("JWT not in base64url format");return{header:JSON.parse(X1(e[0])),payload:JSON.parse(X1(e[1])),signature:Rl(e[2]),raw:{header:e[0],payload:e[1]}}}async function $6(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function F6(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function B6(t){return("0"+t.toString(16)).substr(-2)}function U6(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,B6).join("")}async function z6(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function V6(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await z6(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Wa(t,e,n=!1){const r=U6();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await ol(t,`${e}-code-verifier`,s);const i=await V6(r);return[i,r===i?"plain":"s256"]}const H6=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function q6(t){const e=t.headers.get(X0);if(!e||!e.match(H6))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function W6(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function K6(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const G6=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ka(t){if(!G6.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Sy(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Q6(t,e){return new Proxy(t,{get:(n,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,s)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,s)}})}function eE(t){return JSON.parse(JSON.stringify(t))}const Lo=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),J6=[502,503,504];async function tE(t){var e;if(!L6(t))throw new ex(Lo(t),0);if(J6.includes(t.status))throw new ex(Lo(t),t.status);let n;try{n=await t.json()}catch(i){throw new Fo(Lo(i),i)}let r;const s=q6(t);if(s&&s.getTime()>=FR["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new J1(Lo(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Hn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new J1(Lo(n),t.status,n.weak_password.reasons);throw new E6(Lo(n),t.status||500,r)}const Y6=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function ge(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[X0]||(i[X0]=FR["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Z6(t,e,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function Z6(t,e,n,r,s,i){const o=Y6(e,r,s,i);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new ex(Lo(l),0)}if(a.ok||await tE(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await tE(l)}}function Ar(t){var e;let n=null;tH(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=P6(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function nE(t){const e=Ar(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Oi(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function X6(t){return{data:t,error:null}}function eH(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=Pc(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function rE(t){return t}function tH(t){return t.access_token&&t.refresh_token&&t.expires_in}const ky=["global","local","others"];class nH{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=zR(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=ky[0]){if(ky.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ky.join(", ")}`);try{return await ge(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(le(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await ge(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Oi})}catch(r){if(le(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Pc(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await ge(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:eH,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(le(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await ge(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Oi})}catch(n){if(le(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await ge(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:rE});if(u.error)throw u.error;const d=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(m=>{const g=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(m.split(";")[1].split("=")[1]);c[`${y}Page`]=g}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(le(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Ka(e);try{return await ge(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Oi})}catch(n){if(le(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Ka(e);try{return await ge(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Oi})}catch(r){if(le(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Ka(e);try{return await ge(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Oi})}catch(r){if(le(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Ka(e.userId);try{const{data:n,error:r}=await ge(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(le(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Ka(e.userId),Ka(e.id);try{return{data:await ge(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(le(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,s,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await ge(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:rE});if(u.error)throw u.error;const d=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(m=>{const g=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(m.split(";")[1].split("=")[1]);c[`${y}Page`]=g}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(le(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await ge(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(le(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await ge(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(le(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await ge(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(le(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await ge(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(le(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await ge(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(le(n))return{data:null,error:n};throw n}}}function sE(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Ga={debug:!!(globalThis&&UR()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class VR extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class rH extends VR{}async function sH(t,e,n){Ga.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Ga.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Ga.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{Ga.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Ga.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new rH(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ga.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function iH(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function HR(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function oH(t){return parseInt(t,16)}function aH(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function lH(t){var e;const{chainId:n,domain:r,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:l,resources:c,scheme:u,uri:d,version:f}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const p=HR(t.address),m=u?`${u}://${r}`:r,g=t.statement?`${t.statement}
`:"",y=`${m} wants you to sign in with your Ethereum account:
${p}

${g}`;let v=`URI: ${d}
Version: ${f}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(v+=`
Expiration Time: ${s.toISOString()}`),a&&(v+=`
Not Before: ${a.toISOString()}`),l&&(v+=`
Request ID: ${l}`),c){let x=`
Resources:`;for(const b of c){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);x+=`
- ${b}`}v+=x}return`${y}
${v}`}class kt extends Error{constructor({message:e,code:n,cause:r,name:s}){var i;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=s??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=n}}class mp extends kt{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function cH({error:t,options:e}){var n,r,s;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new kt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new kt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new kt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new kt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new kt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new kt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new kt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new kt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(qR(o)){if(i.rp.id!==o)return new kt({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new kt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new kt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new kt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new kt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function uH({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new kt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new kt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(qR(r)){if(n.rpId!==r)return new kt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new kt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new kt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new kt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class dH{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const fH=new dH;function hH(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,s=Pc(t,["challenge","user","excludeCredentials"]),i=Rl(e).buffer,o=Object.assign(Object.assign({},n),{id:Rl(n.id).buffer}),a=Object.assign(Object.assign({},s),{challenge:i,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:Rl(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function pH(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=Pc(t,["challenge","allowCredentials"]),s=Rl(e).buffer,i=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const a=n[o];i.allowCredentials[o]=Object.assign(Object.assign({},a),{id:Rl(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function mH(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Wo(new Uint8Array(t.response.attestationObject)),clientDataJSON:Wo(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function gH(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Wo(new Uint8Array(s.authenticatorData)),clientDataJSON:Wo(new Uint8Array(s.clientDataJSON)),signature:Wo(new Uint8Array(s.signature)),userHandle:s.userHandle?Wo(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function qR(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function iE(){var t,e;return!!(Qt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function yH(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new mp("Browser returned unexpected credential type",e)}:{data:null,error:new mp("Empty credential response",e)}}catch(e){return{data:null,error:cH({error:e,options:t})}}}async function vH(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new mp("Browser returned unexpected credential type",e)}:{data:null,error:new mp("Empty credential response",e)}}catch(e){return{data:null,error:uH({error:e,options:t})}}}const xH={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},bH={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function gp(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of t)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))r[i]=o;else if(n(o))r[i]=o;else if(e(o)){const a=r[i];e(a)?r[i]=gp(a,o):r[i]=gp(o)}else r[i]=o}return r}function wH(t,e){return gp(xH,t,e||{})}function SH(t,e){return gp(bH,t,e||{})}class kH{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:s},i){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!o)return{data:null,error:a};const l=s??fH.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:c}=o.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${r}`),c.displayName||(c.displayName=c.name)}switch(o.webauthn.type){case"create":{const c=wH(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:u,error:d}=await yH({publicKey:c,signal:l});return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:d}}case"request":{const c=SH(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:u,error:d}=await vH(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:c,signal:l}));return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:d}}}}catch(o){return le(o)?{data:null,error:o}:{data:null,error:new Fo("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!n)return{data:null,error:new bd("rpId is required for WebAuthn authentication")};try{if(!iE())return{data:null,error:new Fo("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:i});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return le(o)?{data:null,error:o}:{data:null,error:new Fo("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!n)return{data:null,error:new bd("rpId is required for WebAuthn registration")};try{if(!iE())return{data:null,error:new Fo("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(u=>{var d;return(d=u.data)===null||d===void 0?void 0:d.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===e&&f.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u==null?void 0:u.id}):void 0),{data:null,error:a};const{data:l,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:i});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(o){return le(o)?{data:null,error:o}:{data:null,error:new Fo("Unexpected error in register",o)}}}}iH();const _H={url:b6,storageKey:w6,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:S6,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function oE(t,e,n){return await n()}const Qa={};class wd{get jwks(){var e,n;return(n=(e=Qa[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Qa[this.storageKey]=Object.assign(Object.assign({},Qa[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Qa[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Qa[this.storageKey]=Object.assign(Object.assign({},Qa[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},_H),e);if(this.storageKey=i.storageKey,this.instanceID=(n=wd.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,wd.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Qt()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new nH({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=zR(i.fetch),this.lock=i.lock||oE,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&Qt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=sH:this.lock=oE,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new kH(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:UR()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=sE(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=sE(this.memoryStorage)),Qt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o);try{await this._notifyAllSubscribers(o.data.event,o.data.session,!1)}catch(a){this._debug("#broadcastChannel","error",a)}})}this.initialize().catch(o=>{this._debug("#initialize()","error",o)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${$R}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(Qt()&&(n=D6(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Qt()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),N6(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return le(n)?this._returnResult({error:n}):this._returnResult({error:new Fo("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Ar}),{data:o,error:a}=i;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(le(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:u,password:d,options:f}=e;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await Wa(this.storage,this.storageKey)),i=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:d,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:m},xform:Ar})}else if("phone"in e){const{phone:u,password:d,options:f}=e;i=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Ar})}else throw new Pf("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return await Gt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(await Gt(this.storage,`${this.storageKey}-code-verifier`),le(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:a}=e;n=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:nE})}else if("phone"in e){const{phone:i,password:o,options:a}=e;n=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:nE})}else throw new Pf("You must provide either an email or phone number and a password");const{data:r,error:s}=n;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){const i=new qa;return this._returnResult({data:{user:null,session:null},error:i})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(le(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,s,i,o,a,l,c,u,d,f;let p,m;if("message"in e)p=e.message,m=e.signature;else{const{chain:g,wallet:y,statement:v,options:x}=e;let b;if(Qt())if(typeof y=="object")b=y;else{const A=window;if("ethereum"in A&&typeof A.ethereum=="object"&&"request"in A.ethereum&&typeof A.ethereum.request=="function")b=A.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=y}const S=new URL((n=x==null?void 0:x.url)!==null&&n!==void 0?n:window.location.href),k=await b.request({method:"eth_requestAccounts"}).then(A=>A).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!k||k.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const E=HR(k[0]);let _=(r=x==null?void 0:x.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!_){const A=await b.request({method:"eth_chainId"});_=oH(A)}const T={domain:S.host,address:E,statement:v,uri:S.href,version:"1",chainId:_,nonce:(s=x==null?void 0:x.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=x==null?void 0:x.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=x==null?void 0:x.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=x==null?void 0:x.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=x==null?void 0:x.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(u=x==null?void 0:x.signInWithEthereum)===null||u===void 0?void 0:u.resources};p=lH(T),m=await b.request({method:"personal_sign",params:[aH(p),E]})}try{const{data:g,error:y}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:m},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Ar});if(y)throw y;if(!g||!g.session||!g.user){const v=new qa;return this._returnResult({data:{user:null,session:null},error:v})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:y})}catch(g){if(le(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithSolana(e){var n,r,s,i,o,a,l,c,u,d,f,p;let m,g;if("message"in e)m=e.message,g=e.signature;else{const{chain:y,wallet:v,statement:x,options:b}=e;let S;if(Qt())if(typeof v=="object")S=v;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))S=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=v}const k=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in S&&S.signIn){const E=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),x?{statement:x}:null));let _;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")_=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)_=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in _&&"signature"in _&&(typeof _.signedMessage=="string"||_.signedMessage instanceof Uint8Array)&&_.signature instanceof Uint8Array)m=typeof _.signedMessage=="string"?_.signedMessage:new TextDecoder().decode(_.signedMessage),g=_.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${k.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(s=(r=b==null?void 0:b.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((d=(u=b==null?void 0:b.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",...b.signInWithSolana.resources.map(_=>`- ${_}`)]:[]].join(`
`);const E=await S.signMessage(new TextEncoder().encode(m),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=E}}try{const{data:y,error:v}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:Wo(g)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Ar});if(v)throw v;if(!y||!y.session||!y.user){const x=new qa;return this._returnResult({data:{user:null,session:null},error:x})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:v})}catch(y){if(le(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async _exchangeCodeForSession(e){const n=await Io(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new T6;const{data:i,error:o}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Ar});if(await Gt(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const a=new qa;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(await Gt(this.storage,`${this.storageKey}-code-verifier`),le(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,a=await ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Ar}),{data:l,error:c}=a;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const u=new qa;return this._returnResult({data:{user:null,session:null},error:u})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(n){if(le(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Wa(this.storage,this.storageKey));const{error:d}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u})}throw new Pf("You must provide either an email or phone number.")}catch(a){if(await Gt(this.storage,`${this.storageKey}-code-verifier`),le(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await ge(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Ar});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(le(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var n,r,s,i,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await Wa(this.storage,this.storageKey));const c=await ge(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:X6});return!((i=c.data)===null||i===void 0)&&i.url&&Qt()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(a){if(await Gt(this.storage,`${this.storageKey}-code-verifier`),le(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Hn;const{error:s}=await ge(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(le(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await ge(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:a}=await ge(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new Pf("You must provide either an email or phone number and a type")}catch(n){if(le(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Io(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<xy:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await Io(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Sy()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=Q6(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Oi}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Hn}:await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Oi})})}catch(n){if(le(n))return by(n)&&(await this._removeSession(),await Gt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Hn;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Wa(this.storage,this.storageKey));const{data:c,error:u}=await ge(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Oi});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(await Gt(this.storage,`${this.storageKey}-code-verifier`),le(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Hn;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=Df(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(n){if(le(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Hn;const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(le(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!Qt())throw new Mf("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Mf(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Q1("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Mf("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Q1("No code detected.");const{data:x,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!i||!a||!o||!c)throw new Mf("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let f=u+d;l&&(f=parseInt(l));const p=f-u;p*1e3<=il&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${d}s`);const m=f-d;u-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,f,u):u-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,f,u);const{data:g,error:y}=await this._getUser(i);if(y)throw y;const v={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:d,expires_at:f,refresh_token:o,token_type:c,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:v,redirectType:e.type},error:null})}catch(r){if(le(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Io(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i&&!by(i))return this._returnResult({error:i});const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(C6(a)&&(a.status===404||a.status===401||a.status===403)||by(a)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await Gt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=M6(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Wa(this.storage,this.storageKey,!0));try{return await ge(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(await Gt(this.storage,`${this.storageKey}-code-verifier`),le(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,l,c,u;const{data:d,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await ge(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return Qt()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(le(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:i}}=n;if(s)throw s;const{options:o,provider:a,token:l,access_token:c,nonce:u}=e,d=await ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:l,access_token:c,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Ar}),{data:f,error:p}=d;return p?this._returnResult({data:{user:null,session:null},error:p}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new qa}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:p}))}catch(s){if(await Gt(this.storage,`${this.storageKey}-code-verifier`),le(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await ge(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await F6(async s=>(s>0&&await $6(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await ge(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ar})),(s,i)=>{const o=200*Math.pow(2,s);return i&&wy(i)&&Date.now()+o-r<il})}catch(r){if(this._debug(n,"error",r),le(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Qt()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Io(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Io(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await ol(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Sy()}else if(s&&!s.user&&!s.user){const o=await Io(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Gt(this.storage,this.storageKey+"-user"),await ol(this.storage,this.storageKey,s)):s.user=Sy()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<xy;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${xy}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),wy(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Hn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new sg;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Hn;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={data:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),le(i)){const o={data:null,error:i};return wy(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Gt(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await ol(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=eE(s);await ol(this.storage,this.storageKey,i)}else{const s=eE(n);await ol(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Gt(this.storage,this.storageKey),await Gt(this.storage,this.storageKey+"-code-verifier"),await Gt(this.storage,this.storageKey+"-user"),this.userStorage&&await Gt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Qt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),il);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/il);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${il}ms, refresh threshold is ${Z0} ticks`),s<=Z0&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof VR)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Qt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Wa(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?this._returnResult({data:null,error:i}):await ge(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:c}=await ge(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(e.factorType==="totp"&&l.type==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?mH(e.webauthn.credential_response):gH(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await ge(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({data:null,error:i});const o=await ge(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:hH(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:pH(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(e){var n,r,s,i;if(e)try{const{payload:p}=Df(e);let m=null;p.aal&&(m=p.aal);let g=m;const{data:{user:y},error:v}=await this.getUser(e);if(v)return this._returnResult({data:null,error:v});((r=(n=y==null?void 0:y.factors)===null||n===void 0?void 0:n.filter(S=>S.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(g="aal2");const b=p.amr||[];return{data:{currentLevel:m,nextLevel:g,currentAuthenticationMethods:b},error:null}}catch(p){if(le(p))return this._returnResult({data:null,error:p});throw p}const{data:{session:o},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Df(o.access_token);let c=null;l.aal&&(c=l.aal);let u=c;((i=(s=o.user.factors)===null||s===void 0?void 0:s.filter(p=>p.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(u="aal2");const f=l.amr||[];return{data:{currentLevel:c,nextLevel:u,currentAuthenticationMethods:f},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?await ge(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Hn})})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Hn});const o=await ge(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Qt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(le(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Hn});const o=await ge(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Qt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(le(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await ge(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Hn})})}catch(e){if(le(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?(await ge(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Hn})})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(a=>a.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+_6>s)return r;const{data:i,error:o}=await ge(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(a=>a.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:p,error:m}=await this.getSession();if(m||!p.session)return this._returnResult({data:null,error:m});r=p.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=Df(r);n!=null&&n.allowExpired||W6(i.exp);const c=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:i,header:s,signature:o},error:null}}const u=K6(s.alg),d=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,d,o,I6(`${a}.${l}`)))throw new tx("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(le(r))return this._returnResult({data:null,error:r});throw r}}}wd.nextInstanceID={};const EH=wd,CH="2.93.1";let fu="";typeof Deno<"u"?fu="deno":typeof document<"u"?fu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?fu="react-native":fu="node";function NH(){const t=globalThis.process;if(t&&t.platform){const e=t.platform;if(e==="darwin")return"macOS";if(e==="win32")return"Windows";if(e==="linux")return"Linux";if(e==="android")return"Android"}if(typeof navigator<"u"&&navigator.userAgentData&&navigator.userAgentData.platform){const e=navigator.userAgentData.platform;if(e==="macOS")return"macOS";if(e==="Windows")return"Windows";if(e==="Linux")return"Linux";if(e==="Android")return"Android";if(e==="iOS")return"iOS"}return null}function TH(){const t=globalThis.process;if(t){const e=t.versions;if(e&&e.node&&typeof window>"u")try{const n=globalThis.require;if(n)return n("os").release()}catch{return null}}if(typeof Deno<"u"&&Deno.osRelease)try{return Deno.osRelease()}catch{return null}return typeof navigator<"u"&&navigator.userAgentData&&navigator.userAgentData.platformVersion?navigator.userAgentData.platformVersion:null}function OH(){if(typeof Deno<"u")return"deno";if(typeof Bun<"u")return"bun";const t=globalThis.process;if(t){const e=t.versions;if(e&&e.node)return"node"}return null}function AH(){if(typeof Deno<"u"&&Deno.version)return Deno.version.deno;if(typeof Bun<"u"&&Bun.version)return Bun.version;const t=globalThis.process;if(t){const e=t.versions;if(e&&e.node)return e.node}return null}function RH(){const t={"X-Client-Info":`supabase-js-${fu}/${CH}`},e=NH();e&&(t["X-Supabase-Client-Platform"]=e);const n=TH();n&&(t["X-Supabase-Client-Platform-Version"]=n);const r=OH();r&&(t["X-Supabase-Client-Runtime"]=r);const s=AH();return s&&(t["X-Supabase-Client-Runtime-Version"]=s),t}const jH=RH(),IH={headers:jH},PH={schema:"public"},MH={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},DH={};function Sd(t){"@babel/helpers - typeof";return Sd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sd(t)}function LH(t,e){if(Sd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Sd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $H(t){var e=LH(t,"string");return Sd(e)=="symbol"?e:e+""}function FH(t,e,n){return(e=$H(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function mt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aE(Object(n),!0).forEach(function(r){FH(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const BH=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),UH=()=>Headers,zH=(t,e,n)=>{const r=BH(n),s=UH();return async(i,o)=>{var a;const l=(a=await e())!==null&&a!==void 0?a:t;let c=new s(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(i,mt(mt({},o),{},{headers:c}))}};function VH(t){return t.endsWith("/")?t:t+"/"}function HH(t,e){var n,r;const{db:s,auth:i,realtime:o,global:a}=t,{db:l,auth:c,realtime:u,global:d}=e,f={db:mt(mt({},l),s),auth:mt(mt({},c),i),realtime:mt(mt({},u),o),storage:{},global:mt(mt(mt({},d),a),{},{headers:mt(mt({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function qH(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(VH(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var WH=class extends EH{constructor(t){super(t)}},KH=class{constructor(t,e,n){var r,s;this.supabaseUrl=t,this.supabaseKey=e;const i=qH(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,a={db:PH,realtime:DH,auth:mt(mt({},MH),{},{storageKey:o}),global:IH},l=HH(n??{},a);if(this.storageKey=(r=l.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=l.global.headers)!==null&&s!==void 0?s:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(u,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}});else{var c;this.auth=this._initSupabaseAuthClient((c=l.auth)!==null&&c!==void 0?c:{},this.headers,l.global.fetch)}this.fetch=zH(e,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(mt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(u=>this.realtime.setAuth(u)).catch(u=>console.warn("Failed to set initial Realtime auth token:",u)),this.rest=new E5(new URL("rest/v1",i).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new x6(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new b5(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:r}=await t.auth.getSession();return(e=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:s,storageKey:i,flowType:o,lock:a,debug:l,throwOnError:c},u,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new WH({url:this.authUrl.href,headers:mt(mt({},f),u),storageKey:i,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:s,flowType:o,lock:a,debug:l,throwOnError:c,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new z5(this.realtimeUrl.href,mt(mt({},t),{},{params:mt(mt({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const GH=(t,e,n)=>new KH(t,e,n);function QH(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const n=e.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}QH()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const JH="https://qvslbiceoonrgjxzkotb.supabase.co",YH="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InF2c2xiaWNlb29ucmdqeHprb3RiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk1MTE5NjksImV4cCI6MjA4NTA4Nzk2OX0.tksExuWD4OZyb4MoYRliQ71WQ8rywcaYMxbH2UXWe8s",Y=GH(JH,YH,{auth:{persistSession:!0,autoRefreshToken:!0}});function WR(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=WR(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function KR(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=WR(t))&&(r&&(r+=" "),r+=e);return r}const jw="-",ZH=t=>{const e=eq(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(jw);return a[0]===""&&a.length!==1&&a.shift(),GR(a,e)||XH(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},GR=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?GR(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(jw);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},lE=/^\[(.+)\]$/,XH=t=>{if(lE.test(t)){const e=lE.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},eq=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return nq(Object.entries(t.classGroups),n).forEach(([i,o])=>{nx(o,r,i,e)}),r},nx=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:cE(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(tq(s)){nx(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{nx(o,cE(e,i),n,r)})})},cE=(t,e)=>{let n=t;return e.split(jw).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},tq=t=>t.isThemeGetter,nq=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,rq=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},QR="!",sq=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let c=0,u=0,d;for(let y=0;y<a.length;y++){let v=a[y];if(c===0){if(v===s&&(r||a.slice(y,y+i)===e)){l.push(a.slice(u,y)),u=y+i;continue}if(v==="/"){d=y;continue}}v==="["?c++:v==="]"&&c--}const f=l.length===0?a:a.substring(u),p=f.startsWith(QR),m=p?f.substring(1):f,g=d&&d>u?d-u:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:m,maybePostfixModifierPosition:g}};return n?a=>n({className:a,parseClassName:o}):o},iq=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},oq=t=>({cache:rq(t.cacheSize),parseClassName:sq(t),...ZH(t)}),aq=/\s+/,lq=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(aq);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:u,hasImportantModifier:d,baseClassName:f,maybePostfixModifierPosition:p}=n(c);let m=!!p,g=r(m?f.substring(0,p):f);if(!g){if(!m){a=c+(a.length>0?" "+a:a);continue}if(g=r(f),!g){a=c+(a.length>0?" "+a:a);continue}m=!1}const y=iq(u).join(":"),v=d?y+QR:y,x=v+g;if(i.includes(x))continue;i.push(x);const b=s(g,m);for(let S=0;S<b.length;++S){const k=b[S];i.push(v+k)}a=c+(a.length>0?" "+a:a)}return a};function cq(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=JR(e))&&(r&&(r+=" "),r+=n);return r}const JR=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=JR(t[r]))&&(n&&(n+=" "),n+=e);return n};function uq(t,...e){let n,r,s,i=o;function o(l){const c=e.reduce((u,d)=>d(u),t());return n=oq(c),r=n.cache.get,s=n.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=lq(l,n);return s(l,u),u}return function(){return i(cq.apply(null,arguments))}}const Ye=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},YR=/^\[(?:([a-z-]+):)?(.+)\]$/i,dq=/^\d+\/\d+$/,fq=new Set(["px","full","screen"]),hq=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,pq=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,mq=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,gq=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,yq=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,_s=t=>jl(t)||fq.has(t)||dq.test(t),di=t=>Dc(t,"length",Eq),jl=t=>!!t&&!Number.isNaN(Number(t)),_y=t=>Dc(t,"number",jl),Xc=t=>!!t&&Number.isInteger(Number(t)),vq=t=>t.endsWith("%")&&jl(t.slice(0,-1)),Se=t=>YR.test(t),fi=t=>hq.test(t),xq=new Set(["length","size","percentage"]),bq=t=>Dc(t,xq,ZR),wq=t=>Dc(t,"position",ZR),Sq=new Set(["image","url"]),kq=t=>Dc(t,Sq,Nq),_q=t=>Dc(t,"",Cq),eu=()=>!0,Dc=(t,e,n)=>{const r=YR.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},Eq=t=>pq.test(t)&&!mq.test(t),ZR=()=>!1,Cq=t=>gq.test(t),Nq=t=>yq.test(t),Tq=()=>{const t=Ye("colors"),e=Ye("spacing"),n=Ye("blur"),r=Ye("brightness"),s=Ye("borderColor"),i=Ye("borderRadius"),o=Ye("borderSpacing"),a=Ye("borderWidth"),l=Ye("contrast"),c=Ye("grayscale"),u=Ye("hueRotate"),d=Ye("invert"),f=Ye("gap"),p=Ye("gradientColorStops"),m=Ye("gradientColorStopPositions"),g=Ye("inset"),y=Ye("margin"),v=Ye("opacity"),x=Ye("padding"),b=Ye("saturate"),S=Ye("scale"),k=Ye("sepia"),E=Ye("skew"),_=Ye("space"),T=Ye("translate"),A=()=>["auto","contain","none"],O=()=>["auto","hidden","clip","visible","scroll"],U=()=>["auto",Se,e],P=()=>[Se,e],L=()=>["",_s,di],z=()=>["auto",jl,Se],K=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],W=()=>["solid","dashed","dotted","double","none"],re=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],j=()=>["start","end","center","between","around","evenly","stretch"],V=()=>["","0",Se],ee=()=>["auto","avoid","all","avoid-page","page","left","right","column"],me=()=>[jl,Se];return{cacheSize:500,separator:":",theme:{colors:[eu],spacing:[_s,di],blur:["none","",fi,Se],brightness:me(),borderColor:[t],borderRadius:["none","","full",fi,Se],borderSpacing:P(),borderWidth:L(),contrast:me(),grayscale:V(),hueRotate:me(),invert:V(),gap:P(),gradientColorStops:[t],gradientColorStopPositions:[vq,di],inset:U(),margin:U(),opacity:me(),padding:P(),saturate:me(),scale:me(),sepia:V(),skew:me(),space:P(),translate:P()},classGroups:{aspect:[{aspect:["auto","square","video",Se]}],container:["container"],columns:[{columns:[fi]}],"break-after":[{"break-after":ee()}],"break-before":[{"break-before":ee()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...K(),Se]}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Xc,Se]}],basis:[{basis:U()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Se]}],grow:[{grow:V()}],shrink:[{shrink:V()}],order:[{order:["first","last","none",Xc,Se]}],"grid-cols":[{"grid-cols":[eu]}],"col-start-end":[{col:["auto",{span:["full",Xc,Se]},Se]}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":[eu]}],"row-start-end":[{row:["auto",{span:[Xc,Se]},Se]}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Se]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Se]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...j()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...j(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...j(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[_]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[_]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Se,e]}],"min-w":[{"min-w":[Se,e,"min","max","fit"]}],"max-w":[{"max-w":[Se,e,"none","full","min","max","fit","prose",{screen:[fi]},fi]}],h:[{h:[Se,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Se,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Se,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Se,e,"auto","min","max","fit"]}],"font-size":[{text:["base",fi,di]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",_y]}],"font-family":[{font:[eu]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Se]}],"line-clamp":[{"line-clamp":["none",jl,_y]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",_s,Se]}],"list-image":[{"list-image":["none",Se]}],"list-style-type":[{list:["none","disc","decimal",Se]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...W(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",_s,di]}],"underline-offset":[{"underline-offset":["auto",_s,Se]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Se]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Se]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...K(),wq]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",bq]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},kq]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[m]}],"gradient-via-pos":[{via:[m]}],"gradient-to-pos":[{to:[m]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...W(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:W()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...W()]}],"outline-offset":[{"outline-offset":[_s,Se]}],"outline-w":[{outline:[_s,di]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:L()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[_s,di]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",fi,_q]}],"shadow-color":[{shadow:[eu]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...re(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":re()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",fi,Se]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[b]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Se]}],duration:[{duration:me()}],ease:[{ease:["linear","in","out","in-out",Se]}],delay:[{delay:me()}],animate:[{animate:["none","spin","ping","pulse","bounce",Se]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[Xc,Se]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[E]}],"skew-y":[{"skew-y":[E]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Se]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Se]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Se]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[_s,di,_y]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Oq=uq(Tq);function tt(...t){return Oq(KR(t))}const uE=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,dE=KR,XR=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return dE(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const u=n==null?void 0:n[c],d=i==null?void 0:i[c];if(u===null)return null;const f=uE(u)||uE(d);return s[c][f]}),a=n&&Object.entries(n).reduce((c,u)=>{let[d,f]=u;return f===void 0||(c[d]=f),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:d,className:f,...p}=u;return Object.entries(p).every(m=>{let[g,y]=m;return Array.isArray(y)?y.includes({...i,...a}[g]):{...i,...a}[g]===y})?[...c,d,f]:c},[]);return dE(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)},Aq=XR("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Et=w.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?"span":"button";return h.jsx(o,{className:tt(Aq({variant:e,size:n,className:t})),ref:i,...s})});Et.displayName="Button";const dn=w.forwardRef(({className:t,type:e,...n},r)=>h.jsx("input",{type:e,className:tt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));dn.displayName="Input";const Rq=Jd({email:hn().email("Please enter a valid email"),password:hn().min(6,"Password must be at least 6 characters")}),jq=Jd({fullName:hn().min(2,"Name must be at least 2 characters"),email:hn().email("Please enter a valid email"),password:hn().min(6,"Password must be at least 6 characters"),inviteCode:hn().min(1,"Invitation code is required")});function Iq(){const t=ws(),[e,n]=w.useState(null),[r,s]=w.useState(!1),i=pd({resolver:md(Rq)}),o=pd({resolver:md(jq)}),a=async c=>{n(null);const{error:u}=await Y.auth.signInWithPassword({email:c.email,password:c.password});u?n(u.message):t("/")},l=async c=>{n(null);const{data:u,error:d}=await Y.rpc("validate_invitation_code",{p_code:c.inviteCode});if(d||!u){n("Invalid or expired invitation code");return}const{error:f}=await Y.auth.signUp({email:c.email,password:c.password,options:{emailRedirectTo:void 0,data:{full_name:c.fullName,role:"admin"}}});if(f){n(f.message);return}await Y.rpc("use_invitation_code",{p_code:c.inviteCode}),t("/")};return h.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:h.jsx("div",{className:"w-full max-w-md px-6",children:h.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8",children:[h.jsxs("div",{className:"text-center mb-8",children:[h.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-r from-purple-600 to-blue-600 mb-4",children:h.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),h.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Math7 Admin"}),h.jsx("p",{className:"text-gray-500 mt-2",children:r?"Create your account":"Sign in to your dashboard"})]}),r?h.jsxs("form",{onSubmit:o.handleSubmit(l),className:"space-y-5",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Full Name"}),h.jsx(dn,{type:"text",placeholder:"Enter your full name",...o.register("fullName"),className:`h-12 px-4 rounded-lg border-gray-200 focus:border-purple-500 focus:ring-purple-500 ${o.formState.errors.fullName?"border-red-500":""}`}),o.formState.errors.fullName&&h.jsx("p",{className:"text-sm text-red-500",children:o.formState.errors.fullName.message})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Email"}),h.jsx(dn,{type:"email",placeholder:"Enter your email",...o.register("email"),className:`h-12 px-4 rounded-lg border-gray-200 focus:border-purple-500 focus:ring-purple-500 ${o.formState.errors.email?"border-red-500":""}`}),o.formState.errors.email&&h.jsx("p",{className:"text-sm text-red-500",children:o.formState.errors.email.message})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Password"}),h.jsx(dn,{type:"password",placeholder:"Enter your password",...o.register("password"),className:`h-12 px-4 rounded-lg border-gray-200 focus:border-purple-500 focus:ring-purple-500 ${o.formState.errors.password?"border-red-500":""}`}),o.formState.errors.password&&h.jsx("p",{className:"text-sm text-red-500",children:o.formState.errors.password.message})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Invitation Code"}),h.jsx(dn,{type:"text",placeholder:"Enter your invitation code",...o.register("inviteCode"),className:`h-12 px-4 rounded-lg border-gray-200 focus:border-purple-500 focus:ring-purple-500 ${o.formState.errors.inviteCode?"border-red-500":""}`}),o.formState.errors.inviteCode&&h.jsx("p",{className:"text-sm text-red-500",children:o.formState.errors.inviteCode.message})]}),e&&h.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:h.jsx("p",{className:"text-sm text-red-600 text-center",children:e})}),h.jsx(Et,{type:"submit",className:"w-full h-12 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-medium rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl",disabled:o.formState.isSubmitting,children:o.formState.isSubmitting?"Creating account...":"Create Account"})]}):h.jsxs("form",{onSubmit:i.handleSubmit(a),className:"space-y-5",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Email"}),h.jsx(dn,{type:"email",placeholder:"Enter your email",...i.register("email"),className:`h-12 px-4 rounded-lg border-gray-200 focus:border-purple-500 focus:ring-purple-500 ${i.formState.errors.email?"border-red-500":""}`}),i.formState.errors.email&&h.jsx("p",{className:"text-sm text-red-500",children:i.formState.errors.email.message})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Password"}),h.jsx(dn,{type:"password",placeholder:"Enter your password",...i.register("password"),className:`h-12 px-4 rounded-lg border-gray-200 focus:border-purple-500 focus:ring-purple-500 ${i.formState.errors.password?"border-red-500":""}`}),i.formState.errors.password&&h.jsx("p",{className:"text-sm text-red-500",children:i.formState.errors.password.message})]}),e&&h.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:h.jsx("p",{className:"text-sm text-red-600 text-center",children:e})}),h.jsx(Et,{type:"submit",className:"w-full h-12 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-medium rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl",disabled:i.formState.isSubmitting,children:i.formState.isSubmitting?"Signing in...":"Sign In"})]}),h.jsx("div",{className:"mt-6 text-center",children:h.jsx("button",{type:"button",onClick:()=>{s(!r),n(null)},className:"text-purple-600 hover:text-purple-700 font-medium text-sm",children:r?"Already have an account? Sign in":"Don't have an account? Register"})}),h.jsx("p",{className:"text-center text-gray-400 text-sm mt-6",children:"Curriculum Management System"})]})})})}function Pq({children:t}){const e=ws(),[n,r]=w.useState(!0);return w.useEffect(()=>{(async()=>{const{data:{session:o}}=await Y.auth.getSession();if(!o){e("/login");return}try{const{data:a,error:l}=await Y.from("profiles").select("deleted_at").eq("id",o.user.id).single();if(l){console.warn("Could not fetch profile, allowing access:",l),r(!1);return}if(a&&a.deleted_at){await Y.auth.signOut(),e("/login");return}}catch(a){console.warn("Profile check failed, allowing access:",a)}r(!1)})();const{data:{subscription:i}}=Y.auth.onAuthStateChange((o,a)=>{o==="SIGNED_OUT"||!a?e("/login"):o==="SIGNED_IN"&&r(!1)});return()=>i.unsubscribe()},[e]),n?h.jsx("div",{className:"flex h-screen items-center justify-center bg-gray-50",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-purple-600 border-r-transparent"}),h.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):h.jsx(h.Fragment,{children:t})}const Mq=[{name:"Dashboard",href:"/",icon:tV},{name:"Domains",href:"/domains",icon:Ou},{name:"Skills",href:"/skills",icon:ip},{name:"Questions",href:"/questions",icon:fR},{name:"Publish",href:"/publish",icon:hd},{name:"Version History",href:"/versions",icon:hR}],Dq=[{name:"Invitation Codes",href:"/invitation-codes",icon:eV},{name:"User Management",href:"/users",icon:M0}],Lq=[{name:"Settings",href:"/settings",icon:aV}];function $q(){const t=Ic(),e=ws(),[n,r]=w.useState(!1),[s,i]=w.useState(null);w.useEffect(()=>{(async()=>{const{data:{user:c}}=await Y.auth.getUser();if(console.log("Sidebar: Current user:",c==null?void 0:c.email),c){const{data:u,error:d}=await Y.from("profiles").select("role, full_name, email").eq("id",c.id).single();if(console.log("Sidebar: Profile data:",u,"Error:",d),u){const f=u;i({email:f.email||c.email||"",fullName:f.full_name,role:f.role}),f.role==="super_admin"&&(console.log("Sidebar: User is super_admin, showing invitation codes"),r(!0))}}})()},[]);const o=[...Mq,...n?Dq:[],...Lq],a=async()=>{await Y.auth.signOut(),e("/login")};return h.jsxs("div",{className:"flex w-72 flex-col bg-gradient-to-b from-slate-900 via-purple-900 to-slate-900 h-screen",children:[h.jsx("div",{className:"flex h-20 items-center px-6 border-b border-white/10",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-xl bg-gradient-to-r from-purple-500 to-blue-500",children:h.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),h.jsxs("div",{children:[h.jsx("h1",{className:"text-lg font-bold text-white",children:"Math7"}),h.jsx("p",{className:"text-xs text-purple-300",children:"Admin Panel"})]})]})}),h.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2",children:o.map(l=>{const c=t.pathname===l.href||l.href!=="/"&&t.pathname.startsWith(l.href);return h.jsxs(Sn,{to:l.href,className:tt("flex items-center gap-3 rounded-xl px-4 py-3 text-sm font-medium transition-all duration-200",c?"bg-white/15 text-white shadow-lg":"text-purple-200 hover:bg-white/10 hover:text-white"),children:[h.jsx(l.icon,{className:tt("h-5 w-5",c?"text-purple-300":"")}),l.name]},l.name)})}),h.jsxs("div",{className:"px-4 py-4 border-t border-white/10",children:[s&&h.jsxs("div",{className:"mb-4 px-4 py-3 bg-white/5 rounded-xl",children:[h.jsx("p",{className:"text-sm font-medium text-white truncate",children:s.fullName||s.email.split("@")[0]}),h.jsx("span",{className:tt("inline-block mt-1 px-2 py-0.5 text-xs font-medium rounded-full",s.role==="super_admin"?"bg-purple-500/30 text-purple-200":"bg-blue-500/30 text-blue-200"),children:s.role==="super_admin"?"Super Admin":"Admin"}),h.jsx("p",{className:"text-xs text-purple-300 truncate mt-1",children:s.email})]}),h.jsxs("button",{onClick:a,className:"flex items-center gap-3 w-full rounded-xl px-4 py-3 text-sm font-medium text-purple-200 hover:bg-white/10 hover:text-white transition-all duration-200",children:[h.jsx(sV,{className:"h-5 w-5"}),"Sign Out"]})]})]})}function Fq(){return h.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[h.jsx($q,{}),h.jsx("main",{className:"flex-1 overflow-y-auto",children:h.jsx("div",{className:"p-8",children:h.jsx(_z,{})})})]})}function Bq(){return Cr({queryKey:["dashboard-stats"],queryFn:async()=>{var a,l;const[t,e,n,r,s,i,o]=await Promise.all([Y.from("domains").select("*",{count:"exact",head:!0}).is("deleted_at",null),Y.from("domains").select("*",{count:"exact",head:!0}).is("deleted_at",null).eq("is_published",!0),Y.from("skills").select("*",{count:"exact",head:!0}).is("deleted_at",null),Y.from("skills").select("*",{count:"exact",head:!0}).is("deleted_at",null).eq("is_published",!0),Y.from("questions").select("*",{count:"exact",head:!0}).is("deleted_at",null),Y.from("questions").select("*",{count:"exact",head:!0}).is("deleted_at",null).eq("is_published",!0),Y.from("curriculum_meta").select("version, last_published_at").eq("id","singleton").single()]);if(t.error)throw t.error;if(n.error)throw n.error;if(s.error)throw s.error;if(e.error)throw e.error;if(r.error)throw r.error;if(i.error)throw i.error;return{totalDomains:t.count??0,totalSkills:n.count??0,totalQuestions:s.count??0,publishedDomains:e.count??0,publishedSkills:r.count??0,publishedQuestions:i.count??0,currentVersion:((a=o.data)==null?void 0:a.version)??0,lastPublishedAt:((l=o.data)==null?void 0:l.last_published_at)??null}},refetchInterval:6e4})}function Uq(){return Cr({queryKey:["recent-activity"],queryFn:async()=>{var s,i,o;const[t,e,n]=await Promise.all([Y.from("domains").select("id, title, created_at, updated_at").is("deleted_at",null).order("updated_at",{ascending:!1}).limit(5),Y.from("skills").select("id, title, created_at, updated_at").is("deleted_at",null).order("updated_at",{ascending:!1}).limit(5),Y.from("questions").select("id, content, created_at, updated_at").is("deleted_at",null).order("updated_at",{ascending:!1}).limit(5)]);if(t.error)throw t.error;if(e.error)throw e.error;if(n.error)throw n.error;const r=[];return(s=t.data)==null||s.forEach(a=>{const l=a.created_at===a.updated_at;r.push({id:a.id,type:"domain",title:a.title,action:l?"created":"updated",timestamp:a.updated_at})}),(i=e.data)==null||i.forEach(a=>{const l=a.created_at===a.updated_at;r.push({id:a.id,type:"skill",title:a.title,action:l?"created":"updated",timestamp:a.updated_at})}),(o=n.data)==null||o.forEach(a=>{const l=a.created_at===a.updated_at;r.push({id:a.id,type:"question",title:a.content.substring(0,50)+(a.content.length>50?"...":""),action:l?"created":"updated",timestamp:a.updated_at})}),r.sort((a,l)=>new Date(l.timestamp).getTime()-new Date(a.timestamp).getTime()).slice(0,10)},refetchInterval:3e4})}function fE(t){const e=new Date,n=new Date(t),r=Math.floor((e.getTime()-n.getTime())/1e3);return r<60?"just now":r<3600?`${Math.floor(r/60)}m ago`:r<86400?`${Math.floor(r/3600)}h ago`:r<604800?`${Math.floor(r/86400)}d ago`:n.toLocaleDateString()}function Lf({icon:t,iconBgColor:e,iconColor:n,value:r,label:s,subValue:i}){return h.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:`flex items-center justify-center w-12 h-12 rounded-xl ${e}`,children:h.jsx(t,{className:`w-6 h-6 ${n}`})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r}),h.jsx("p",{className:"text-sm text-gray-500",children:s}),i&&h.jsx("p",{className:"text-xs text-gray-400",children:i})]})]})})}function zq(){const{data:t,isLoading:e}=Bq(),{data:n,isLoading:r}=Uq(),s=o=>{switch(o){case"domain":return Ou;case"skill":return d1;case"question":return P0;default:return Ou}},i=o=>{switch(o){case"domain":return{bg:"bg-purple-100",text:"text-purple-600"};case"skill":return{bg:"bg-blue-100",text:"text-blue-600"};case"question":return{bg:"bg-green-100",text:"text-green-600"};default:return{bg:"bg-gray-100",text:"text-gray-600"}}};return h.jsxs("div",{className:"space-y-8",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),h.jsx("p",{className:"mt-2 text-gray-500",children:"Welcome to Math7 Curriculum Management System"})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[h.jsx(Lf,{icon:Ou,iconBgColor:"bg-purple-100",iconColor:"text-purple-600",value:e?"...":(t==null?void 0:t.totalDomains)??0,label:"Domains",subValue:e?void 0:`${(t==null?void 0:t.publishedDomains)??0} published`}),h.jsx(Lf,{icon:d1,iconBgColor:"bg-blue-100",iconColor:"text-blue-600",value:e?"...":(t==null?void 0:t.totalSkills)??0,label:"Skills",subValue:e?void 0:`${(t==null?void 0:t.publishedSkills)??0} published`}),h.jsx(Lf,{icon:P0,iconBgColor:"bg-green-100",iconColor:"text-green-600",value:e?"...":(t==null?void 0:t.totalQuestions)??0,label:"Questions",subValue:e?void 0:`${(t==null?void 0:t.publishedQuestions)??0} published`}),h.jsx(Lf,{icon:hd,iconBgColor:"bg-orange-100",iconColor:"text-orange-600",value:e?"...":`v${(t==null?void 0:t.currentVersion)??0}`,label:"Current Version",subValue:e?void 0:t!=null&&t.lastPublishedAt?`Published ${fE(t.lastPublishedAt)}`:"Never published"})]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[h.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),h.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[h.jsxs(Sn,{to:"/domains/new",className:"flex items-center gap-3 p-4 rounded-xl bg-purple-50 hover:bg-purple-100 transition-colors",children:[h.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-lg bg-purple-600 text-white",children:h.jsx(fs,{className:"w-5 h-5"})}),h.jsx("span",{className:"font-medium text-purple-900",children:"Add Domain"})]}),h.jsxs(Sn,{to:"/skills/new",className:"flex items-center gap-3 p-4 rounded-xl bg-blue-50 hover:bg-blue-100 transition-colors",children:[h.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-lg bg-blue-600 text-white",children:h.jsx(fs,{className:"w-5 h-5"})}),h.jsx("span",{className:"font-medium text-blue-900",children:"Add Skill"})]}),h.jsxs(Sn,{to:"/questions/new",className:"flex items-center gap-3 p-4 rounded-xl bg-green-50 hover:bg-green-100 transition-colors",children:[h.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-lg bg-green-600 text-white",children:h.jsx(fs,{className:"w-5 h-5"})}),h.jsx("span",{className:"font-medium text-green-900",children:"Add Question"})]}),h.jsxs(Sn,{to:"/publish",className:"flex items-center gap-3 p-4 rounded-xl bg-orange-50 hover:bg-orange-100 transition-colors",children:[h.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-lg bg-orange-600 text-white",children:h.jsx(hd,{className:"w-5 h-5"})}),h.jsx("span",{className:"font-medium text-orange-900",children:"Publish Curriculum"})]})]})]}),h.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Activity"}),h.jsx(Yz,{className:"w-5 h-5 text-gray-400"})]}),r?h.jsx("div",{className:"flex items-center justify-center h-48",children:h.jsx("div",{className:"inline-block h-6 w-6 animate-spin rounded-full border-2 border-purple-600 border-r-transparent"})}):(n==null?void 0:n.length)===0?h.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-gray-400",children:[h.jsx(fV,{className:"w-12 h-12 mb-2"}),h.jsx("p",{children:"No recent activity"})]}):h.jsx("div",{className:"space-y-3 max-h-[300px] overflow-y-auto",children:n==null?void 0:n.map(o=>{const a=s(o.type),l=i(o.type);return h.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[h.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-lg ${l.bg}`,children:h.jsx(a,{className:`w-4 h-4 ${l.text}`})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:o.title}),h.jsxs("p",{className:"text-xs text-gray-500 capitalize",children:[o.type," ",o.action]})]}),h.jsx("span",{className:"text-xs text-gray-400 whitespace-nowrap",children:fE(o.timestamp)})]},`${o.type}-${o.id}`)})})]})]}),h.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 rounded-2xl p-6 shadow-lg",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold text-white mb-1",children:"Content Overview"}),h.jsx("p",{className:"text-purple-100 text-sm",children:e?"Loading...":`${(t==null?void 0:t.publishedDomains)??0} of ${(t==null?void 0:t.totalDomains)??0} domains, ${(t==null?void 0:t.publishedSkills)??0} of ${(t==null?void 0:t.totalSkills)??0} skills, and ${(t==null?void 0:t.publishedQuestions)??0} of ${(t==null?void 0:t.totalQuestions)??0} questions are published`})]}),h.jsx(Sn,{to:"/publish",className:"px-4 py-2 bg-white text-purple-600 font-medium rounded-lg hover:bg-purple-50 transition-colors",children:"Review & Publish"})]})})]})}function Iw(){return Cr({queryKey:["domains"],queryFn:async()=>{const{data:t,error:e}=await Y.from("domains").select("*").is("deleted_at",null).order("sort_order");if(e)throw e;return t}})}function Vq(t){return Cr({queryKey:["domains-paginated",t],queryFn:async()=>{const{page:e,pageSize:n,search:r,status:s,sortBy:i="sort_order",sortOrder:o="asc"}=t,a=(e-1)*n,l=a+n-1;let c=Y.from("domains").select("*",{count:"exact"}).is("deleted_at",null);r&&(c=c.or(`title.ilike.%${r}%,slug.ilike.%${r}%`)),s==="published"?c=c.eq("is_published",!0):s==="draft"&&(c=c.eq("is_published",!1)),c=c.order(i,{ascending:o==="asc"}),c=c.range(a,l);const{data:u,error:d,count:f}=await c;if(d)throw d;const p=f??0,m=Math.ceil(p/n);return{data:u,totalCount:p,page:e,pageSize:n,totalPages:m}}})}function Hq(){const t=Rt();return Kt({mutationFn:async e=>{const{data:n,error:r}=await Y.from("domains").insert(e).select().single();if(r)throw r;return n},onSuccess:()=>{t.invalidateQueries({queryKey:["domains"]}),t.invalidateQueries({queryKey:["domains-paginated"]})}})}function qq(){const t=Rt();return Kt({mutationFn:async({id:e,...n})=>{const{data:r,error:s}=await Y.from("domains").update(n).eq("id",e).select().single();if(s)throw s;return r},onSuccess:e=>{t.invalidateQueries({queryKey:["domains"]}),t.invalidateQueries({queryKey:["domains-paginated"]}),t.invalidateQueries({queryKey:["domain",e.id]})}})}function Wq(){const t=Rt();return Kt({mutationFn:async e=>{const{error:n}=await Y.from("domains").update({deleted_at:new Date().toISOString()}).eq("id",e);if(n)throw n},onSuccess:()=>{t.invalidateQueries({queryKey:["domains"]}),t.invalidateQueries({queryKey:["domains-paginated"]})}})}function Kq(){const t=Rt();return Kt({mutationFn:async e=>{const{error:n}=await Y.from("domains").update({deleted_at:new Date().toISOString()}).in("id",e);if(n)throw n},onSuccess:()=>{t.invalidateQueries({queryKey:["domains"]}),t.invalidateQueries({queryKey:["domains-paginated"]}),t.invalidateQueries({queryKey:["dashboard-stats"]})}})}function Gq(){const t=Rt();return Kt({mutationFn:async({ids:e,is_published:n})=>{const{error:r}=await Y.from("domains").update({is_published:n}).in("id",e);if(r)throw r},onSuccess:()=>{t.invalidateQueries({queryKey:["domains"]}),t.invalidateQueries({queryKey:["domains-paginated"]}),t.invalidateQueries({queryKey:["dashboard-stats"]})}})}function Pw({currentPage:t,totalPages:e,totalCount:n,pageSize:r,onPageChange:s,onPageSizeChange:i,pageSizeOptions:o=[10,25,50,100]}){const a=(t-1)*r+1,l=Math.min(t*r,n),c=()=>{const u=[];if(e<=7)for(let f=1;f<=e;f++)u.push(f);else{u.push(1),t>3&&u.push("...");const f=Math.max(2,t-1),p=Math.min(e-1,t+1);for(let m=f;m<=p;m++)u.push(m);t<e-2&&u.push("..."),u.push(e)}return u};return n===0?null:h.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 mt-4 px-2",children:[h.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[h.jsxs("span",{children:["Showing ",a," to ",l," of ",n," results"]}),i&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{children:"per page:"}),h.jsx("select",{value:r,onChange:u=>i(Number(u.target.value)),className:"px-2 py-1 rounded border border-gray-200 bg-white text-gray-700 focus:border-purple-500 focus:ring-1 focus:ring-purple-200 text-sm",children:o.map(u=>h.jsx("option",{value:u,children:u},u))})]})]}),h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx("button",{onClick:()=>s(1),disabled:t===1,className:"p-2 rounded-lg text-gray-600 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"First page",children:h.jsx(Gz,{className:"h-4 w-4"})}),h.jsx("button",{onClick:()=>s(t-1),disabled:t===1,className:"p-2 rounded-lg text-gray-600 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Previous page",children:h.jsx(qz,{className:"h-4 w-4"})}),h.jsx("div",{className:"flex items-center gap-1 mx-2",children:c().map((u,d)=>typeof u=="number"?h.jsx("button",{onClick:()=>s(u),className:`min-w-[36px] h-9 px-3 rounded-lg text-sm font-medium transition-colors ${u===t?"bg-purple-600 text-white":"text-gray-600 hover:bg-gray-100"}`,children:u},d):h.jsx("span",{className:"px-2 text-gray-400",children:u},d))}),h.jsx("button",{onClick:()=>s(t+1),disabled:t===e,className:"p-2 rounded-lg text-gray-600 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Next page",children:h.jsx(Wz,{className:"h-4 w-4"})}),h.jsx("button",{onClick:()=>s(e),disabled:t===e,className:"p-2 rounded-lg text-gray-600 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Last page",children:h.jsx(Qz,{className:"h-4 w-4"})})]})]})}function Ur({label:t,column:e,currentSortBy:n,currentSortOrder:r,onSort:s,className:i=""}){const o=n===e;return h.jsxs("button",{onClick:()=>s(e),className:`inline-flex items-center gap-1 text-sm font-semibold text-gray-600 hover:text-gray-900 transition-colors ${i}`,children:[t,o?r==="asc"?h.jsx(Uz,{className:"h-4 w-4 text-purple-600"}):h.jsx(Fz,{className:"h-4 w-4 text-purple-600"}):h.jsx(Bz,{className:"h-4 w-4 text-gray-400"})]})}const Qq=10;function Jq(){const[t,e]=w.useState(new Set),[n,r]=w.useState("all"),[s,i]=w.useState(""),[o,a]=w.useState(""),[l,c]=w.useState(1),[u,d]=w.useState(Qq),[f,p]=w.useState("sort_order"),[m,g]=w.useState("asc"),{data:y,isLoading:v,error:x}=Vq({page:l,pageSize:u,search:o,status:n,sortBy:f,sortOrder:m}),b=Wq(),S=Kq(),k=Gq(),{showToast:E}=vw();w.useEffect(()=>{const ie=setTimeout(()=>{a(s),c(1)},300);return()=>clearTimeout(ie)},[s]),w.useEffect(()=>{e(new Set),c(1)},[n]);const _=(y==null?void 0:y.data)??[],T=(y==null?void 0:y.totalCount)??0,A=(y==null?void 0:y.totalPages)??1,O=ie=>{f===ie?g(m==="asc"?"desc":"asc"):(p(ie),g("asc")),c(1)},U=()=>{t.size===_.length?e(new Set):e(new Set(_.map(ie=>ie.id)))},P=ie=>{const vt=new Set(t);vt.has(ie)?vt.delete(ie):vt.add(ie),e(vt)},L=async()=>{if(t.size!==0&&confirm(`Are you sure you want to delete ${t.size} domain(s)?`))try{await S.mutateAsync(Array.from(t)),E(`${t.size} domain(s) deleted`,"success"),e(new Set)}catch{E("Failed to delete domains","error")}},z=async()=>{if(t.size!==0)try{await k.mutateAsync({ids:Array.from(t),is_published:!0}),E(`${t.size} domain(s) published`,"success"),e(new Set)}catch{E("Failed to publish domains","error")}},K=async()=>{if(t.size!==0)try{await k.mutateAsync({ids:Array.from(t),is_published:!1}),E(`${t.size} domain(s) unpublished`,"success"),e(new Set)}catch{E("Failed to unpublish domains","error")}},W=async ie=>{if(confirm("Are you sure you want to delete this domain?"))try{await b.mutateAsync(ie),E("Domain deleted","success")}catch{E("Failed to delete domain","error")}},re=ie=>{c(ie),e(new Set)},j=ie=>{d(ie),c(1),e(new Set)},V=s||n!=="all",ee=()=>{i(""),r("all"),c(1)};if(v)return h.jsx("div",{className:"flex items-center justify-center h-64",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-purple-600 border-r-transparent"}),h.jsx("p",{className:"mt-4 text-gray-500",children:"Loading domains..."})]})});if(x)return h.jsx("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-6 text-center",children:h.jsx("p",{className:"text-red-600",children:"Error loading domains. Please try again."})});const me=_.length?t.size===_.length:!1;return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Domains"}),h.jsx("p",{className:"mt-1 text-gray-500",children:"Manage curriculum domains"})]}),h.jsxs(Sn,{to:"/domains/new",className:"inline-flex items-center gap-2 px-5 py-3 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-medium rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl",children:[h.jsx(fs,{className:"h-5 w-5"}),"New Domain"]})]}),h.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-4",children:[h.jsxs("div",{className:"space-y-4 mb-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("div",{className:"relative flex-1 max-w-md",children:[h.jsx(Xm,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),h.jsx("input",{type:"text",placeholder:"Search domains...",value:s,onChange:ie=>i(ie.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg border border-gray-200 bg-white text-gray-700 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-colors"})]}),V&&h.jsxs("button",{onClick:ee,className:"inline-flex items-center gap-1 px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[h.jsx(Sa,{className:"h-4 w-4"}),"Clear filters"]})]}),h.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Status:"}),h.jsxs("select",{value:n,onChange:ie=>r(ie.target.value),className:"px-3 py-2 rounded-lg border border-gray-200 bg-white text-gray-700 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-colors text-sm",children:[h.jsx("option",{value:"all",children:"All Status"}),h.jsx("option",{value:"published",children:"Published"}),h.jsx("option",{value:"draft",children:"Draft"})]})]}),t.size>0&&h.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[h.jsxs("span",{className:"text-sm text-gray-600",children:[t.size," selected"]}),h.jsxs("button",{onClick:z,disabled:k.isPending,className:"inline-flex items-center gap-1 px-3 py-2 text-sm font-medium text-green-600 hover:text-green-700 hover:bg-green-50 rounded-lg transition-colors",children:[h.jsx(yw,{className:"h-4 w-4"}),"Publish"]}),h.jsxs("button",{onClick:K,disabled:k.isPending,className:"inline-flex items-center gap-1 px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[h.jsx(gw,{className:"h-4 w-4"}),"Unpublish"]}),h.jsxs("button",{onClick:L,disabled:S.isPending,className:"inline-flex items-center gap-1 px-3 py-2 text-sm font-medium text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors",children:[h.jsx(eg,{className:"h-4 w-4"}),"Delete"]})]})]})]}),h.jsx("div",{className:"overflow-hidden rounded-xl border border-gray-100",children:h.jsxs("table",{className:"w-full",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"bg-gray-50 border-b border-gray-100",children:[h.jsx("th",{className:"text-left px-4 py-4 w-10",children:h.jsx("button",{onClick:U,className:"text-gray-400 hover:text-gray-600",children:me&&_.length>0?h.jsx(ic,{className:"h-5 w-5 text-purple-600"}):h.jsx(ac,{className:"h-5 w-5"})})}),h.jsx("th",{className:"text-left px-6 py-4",children:h.jsx(Ur,{label:"Order",column:"sort_order",currentSortBy:f,currentSortOrder:m,onSort:O})}),h.jsx("th",{className:"text-left px-6 py-4",children:h.jsx(Ur,{label:"Title",column:"title",currentSortBy:f,currentSortOrder:m,onSort:O})}),h.jsx("th",{className:"text-left px-6 py-4",children:h.jsx(Ur,{label:"Slug",column:"slug",currentSortBy:f,currentSortOrder:m,onSort:O})}),h.jsx("th",{className:"text-left px-6 py-4",children:h.jsx(Ur,{label:"Status",column:"is_published",currentSortBy:f,currentSortOrder:m,onSort:O})}),h.jsx("th",{className:"text-right px-6 py-4 text-sm font-semibold text-gray-600",children:"Actions"})]})}),h.jsx("tbody",{className:"divide-y divide-gray-100",children:_.length?_.map(ie=>h.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[h.jsx("td",{className:"px-4 py-4",children:h.jsx("button",{onClick:()=>P(ie.id),className:"text-gray-400 hover:text-gray-600",children:t.has(ie.id)?h.jsx(ic,{className:"h-5 w-5 text-purple-600"}):h.jsx(ac,{className:"h-5 w-5"})})}),h.jsx("td",{className:"px-6 py-4",children:h.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 rounded-lg bg-purple-100 text-purple-700 font-semibold text-sm",children:ie.sort_order})}),h.jsx("td",{className:"px-6 py-4",children:h.jsx("span",{className:"font-medium text-gray-900",children:ie.title})}),h.jsx("td",{className:"px-6 py-4",children:h.jsx("code",{className:"px-2 py-1 bg-gray-100 rounded text-sm text-gray-600",children:ie.slug})}),h.jsx("td",{className:"px-6 py-4",children:ie.is_published?h.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Published"}):h.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-600",children:"Draft"})}),h.jsx("td",{className:"px-6 py-4 text-right",children:h.jsxs("div",{className:"flex items-center justify-end gap-2",children:[h.jsx(Sn,{to:`/domains/${ie.id}/edit`,className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium hover:bg-blue-200 transition-colors",children:"Edit"}),h.jsx("button",{onClick:()=>W(ie.id),className:"px-3 py-1 bg-red-100 text-red-700 rounded-full text-sm font-medium hover:bg-red-200 transition-colors",children:"Delete"})]})})]},ie.id)):h.jsx("tr",{children:h.jsx("td",{colSpan:6,className:"px-6 py-12 text-center",children:h.jsxs("div",{className:"flex flex-col items-center",children:[h.jsx("div",{className:"flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 mb-4",children:h.jsx(Ou,{className:"w-8 h-8 text-gray-400"})}),h.jsx("p",{className:"text-gray-500 mb-4",children:V?"No domains match your filters.":"No domains found. Create one to get started."}),V?h.jsxs("button",{onClick:ee,className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium rounded-lg transition-colors",children:[h.jsx(Sa,{className:"h-4 w-4"}),"Clear filters"]}):h.jsxs(Sn,{to:"/domains/new",className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white font-medium rounded-lg transition-colors",children:[h.jsx(fs,{className:"h-4 w-4"}),"Create Domain"]})]})})})})]})}),h.jsx(Pw,{currentPage:l,totalPages:A,totalCount:T,pageSize:u,onPageChange:re,onPageSizeChange:j})]})]})}function Yq(){return h.jsx(Jq,{})}const Zq=Jd({title:hn().min(1,"Title is required").max(200),slug:hn().min(1,"Slug is required").max(100).regex(/^[a-z0-9_]+$/,"Slug must contain only lowercase letters, numbers, and underscores"),description:hn().optional(),sort_order:p5().int().default(0),is_published:Ow().default(!1)});function ej(){const{id:t}=mw(),e=ws(),n=Hq(),r=qq(),{data:s}=Iw(),i=!!t,o=s==null?void 0:s.find(y=>y.id===t),{register:a,handleSubmit:l,reset:c,watch:u,setValue:d,formState:{errors:f,isSubmitting:p}}=pd({resolver:md(Zq),defaultValues:{title:"",slug:"",description:"",sort_order:0,is_published:!1}}),m=u("is_published");w.useEffect(()=>{o&&c({title:o.title,slug:o.slug,description:o.description||"",sort_order:o.sort_order,is_published:o.is_published||!1})},[o,c]);const g=async y=>{try{i&&t?await r.mutateAsync({id:t,...y}):await n.mutateAsync(y),e("/domains")}catch(v){console.error("Failed to save domain",v)}};return h.jsxs("div",{className:"max-w-2xl space-y-6",children:[h.jsx("div",{className:"flex items-center justify-between",children:h.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:i?"Edit Domain":"New Domain"})}),h.jsxs("form",{onSubmit:l(g),className:"space-y-4 rounded-md border p-6",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{htmlFor:"title",className:"text-sm font-medium",children:"Title"}),h.jsx("input",{id:"title",...a("title"),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background",placeholder:"e.g. Mathematics"}),f.title&&h.jsx("p",{className:"text-sm text-red-500",children:f.title.message})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{htmlFor:"slug",className:"text-sm font-medium",children:"Slug"}),h.jsx("input",{id:"slug",...a("slug"),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background",placeholder:"e.g. basic_math",disabled:i}),f.slug&&h.jsx("p",{className:"text-sm text-red-500",children:f.slug.message})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{htmlFor:"sort_order",className:"text-sm font-medium",children:"Sort Order"}),h.jsx("input",{id:"sort_order",type:"number",...a("sort_order",{valueAsNumber:!0}),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background"}),f.sort_order&&h.jsx("p",{className:"text-sm text-red-500",children:f.sort_order.message})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{htmlFor:"description",className:"text-sm font-medium",children:"Description"}),h.jsx("textarea",{id:"description",...a("description"),className:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background"})]}),h.jsxs("div",{className:"flex items-center space-x-3 rounded-md border p-4",children:[h.jsx("input",{type:"checkbox",id:"is_published",checked:m,onChange:y=>d("is_published",y.target.checked),className:"h-4 w-4 rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"is_published",className:"text-sm font-medium cursor-pointer",children:"Published"}),h.jsx("p",{className:"text-sm text-gray-500",children:"When published, this domain and its content will be visible to students"})]})]}),h.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[h.jsx(Et,{type:"button",variant:"outline",onClick:()=>e("/domains"),children:"Cancel"}),h.jsx(Et,{type:"submit",disabled:p,children:i?"Update Domain":"Create Domain"})]})]})]})}function Xq(){return h.jsx(ej,{})}function eW(){return h.jsx(ej,{})}function tj(t){return Cr({queryKey:["skills",t],queryFn:async()=>{let e=Y.from("skills").select(`
          *,
          domains (
            title
          )
        `).is("deleted_at",null).order("sort_order",{ascending:!0});const{data:n,error:r}=await e;if(r)throw r;return n}})}function tW(t){return Cr({queryKey:["skills-paginated",t],queryFn:async()=>{const{page:e,pageSize:n,search:r,status:s,domainId:i,sortBy:o="sort_order",sortOrder:a="asc"}=t,l=(e-1)*n,c=l+n-1;let u=Y.from("skills").select(`
          *,
          domains (
            title
          )
        `,{count:"exact"}).is("deleted_at",null);r&&(u=u.or(`title.ilike.%${r}%,slug.ilike.%${r}%`)),s==="published"?u=u.eq("is_published",!0):s==="draft"&&(u=u.eq("is_published",!1)),i&&i!=="all"&&(u=u.eq("domain_id",i)),u=u.order(o,{ascending:a==="asc"}),u=u.range(l,c);const{data:d,error:f,count:p}=await u;if(f)throw f;const m=p??0,g=Math.ceil(m/n);return{data:d,totalCount:m,page:e,pageSize:n,totalPages:g}}})}function nW(t){return Cr({queryKey:["skill",t],queryFn:async()=>{const{data:e,error:n}=await Y.from("skills").select("*").eq("id",t).single();if(n)throw n;return e},enabled:!!t})}function rW(){const t=Rt();return Kt({mutationFn:async e=>{const{data:n,error:r}=await Y.from("skills").insert(e).select().single();if(r)throw r;return n},onSuccess:()=>{t.invalidateQueries({queryKey:["skills"]}),t.invalidateQueries({queryKey:["skills-paginated"]})}})}function sW(){const t=Rt();return Kt({mutationFn:async({id:e,...n})=>{const{data:r,error:s}=await Y.from("skills").update(n).eq("id",e).select().single();if(s)throw s;return r},onSuccess:e=>{t.invalidateQueries({queryKey:["skills"]}),t.invalidateQueries({queryKey:["skills-paginated"]}),t.invalidateQueries({queryKey:["skill",e.id]})}})}function iW(){const t=Rt();return Kt({mutationFn:async e=>{const{error:n}=await Y.from("skills").update({deleted_at:new Date().toISOString()}).eq("id",e);if(n)throw n},onSuccess:()=>{t.invalidateQueries({queryKey:["skills"]}),t.invalidateQueries({queryKey:["skills-paginated"]})}})}function oW(){const t=Rt();return Kt({mutationFn:async e=>{const{error:n}=await Y.from("skills").update({deleted_at:new Date().toISOString()}).in("id",e);if(n)throw n},onSuccess:()=>{t.invalidateQueries({queryKey:["skills"]}),t.invalidateQueries({queryKey:["skills-paginated"]}),t.invalidateQueries({queryKey:["dashboard-stats"]})}})}function aW(){const t=Rt();return Kt({mutationFn:async({ids:e,is_published:n})=>{const{error:r}=await Y.from("skills").update({is_published:n}).in("id",e);if(r)throw r},onSuccess:()=>{t.invalidateQueries({queryKey:["skills"]}),t.invalidateQueries({queryKey:["skills-paginated"]}),t.invalidateQueries({queryKey:["dashboard-stats"]})}})}function lW(){const t=Rt();return Kt({mutationFn:async e=>{const{data:n,error:r}=await Y.from("skills").select("*").eq("id",e).single();if(r)throw r;if(!n)throw new Error("Skill not found");const{id:s,created_at:i,updated_at:o,...a}=n,l={...a,title:`${a.title} (Copy)`,slug:`${a.slug}_copy_${Date.now()}`,is_published:!1},{data:c,error:u}=await Y.from("skills").insert(l).select().single();if(u)throw u;return c},onSuccess:()=>{t.invalidateQueries({queryKey:["skills"]}),t.invalidateQueries({queryKey:["skills-paginated"]}),t.invalidateQueries({queryKey:["dashboard-stats"]})}})}const cW=10;function uW(){const[t,e]=w.useState("all"),[n,r]=w.useState("all"),[s,i]=w.useState(""),[o,a]=w.useState(""),[l,c]=w.useState(new Set),[u,d]=w.useState(1),[f,p]=w.useState(cW),[m,g]=w.useState("sort_order"),[y,v]=w.useState("asc"),{data:x,isLoading:b}=tW({page:u,pageSize:f,search:o,status:n,domainId:t,sortBy:m,sortOrder:y}),{data:S}=Iw(),k=iW(),E=oW(),_=aW(),T=lW(),{showToast:A}=vw();w.useEffect(()=>{const D=setTimeout(()=>{a(s),d(1)},300);return()=>clearTimeout(D)},[s]),w.useEffect(()=>{c(new Set),d(1)},[t,n]);const O=(x==null?void 0:x.data)??[],U=(x==null?void 0:x.totalCount)??0,P=(x==null?void 0:x.totalPages)??1,L=D=>{m===D?v(y==="asc"?"desc":"asc"):(g(D),v("asc")),d(1)},z=()=>{l.size===O.length?c(new Set):c(new Set(O.map(D=>D.id)))},K=D=>{const te=new Set(l);te.has(D)?te.delete(D):te.add(D),c(te)},W=async()=>{if(l.size!==0&&confirm(`Are you sure you want to delete ${l.size} skill(s)?`))try{await E.mutateAsync(Array.from(l)),A(`${l.size} skill(s) deleted`,"success"),c(new Set)}catch{A("Failed to delete skills","error")}},re=async()=>{if(l.size!==0)try{await _.mutateAsync({ids:Array.from(l),is_published:!0}),A(`${l.size} skill(s) published`,"success"),c(new Set)}catch{A("Failed to publish skills","error")}},j=async()=>{if(l.size!==0)try{await _.mutateAsync({ids:Array.from(l),is_published:!1}),A(`${l.size} skill(s) unpublished`,"success"),c(new Set)}catch{A("Failed to unpublish skills","error")}},V=async D=>{if(confirm("Are you sure you want to delete this skill?"))try{await k.mutateAsync(D),A("Skill deleted","success")}catch{A("Failed to delete skill","error")}},ee=async D=>{try{await T.mutateAsync(D),A("Skill duplicated","success")}catch{A("Failed to duplicate skill","error")}},me=D=>{d(D),c(new Set)},ie=D=>{p(D),d(1),c(new Set)},vt=O.length?l.size===O.length:!1,We=s||n!=="all"||t!=="all",$t=()=>{i(""),r("all"),e("all"),d(1)};return b?h.jsx("div",{className:"flex items-center justify-center h-64",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-purple-600 border-r-transparent"}),h.jsx("p",{className:"mt-4 text-gray-500",children:"Loading skills..."})]})}):h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Skills"}),h.jsx("p",{className:"mt-1 text-gray-500",children:"Manage learning skills"})]}),h.jsxs(Sn,{to:"/skills/new",className:"inline-flex items-center gap-2 px-5 py-3 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-medium rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl",children:[h.jsx(fs,{className:"h-5 w-5"}),"New Skill"]})]}),h.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-4",children:[h.jsxs("div",{className:"space-y-4 mb-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("div",{className:"relative flex-1 max-w-md",children:[h.jsx(Xm,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),h.jsx("input",{type:"text",placeholder:"Search skills...",value:s,onChange:D=>i(D.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg border border-gray-200 bg-white text-gray-700 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-colors"})]}),We&&h.jsxs("button",{onClick:$t,className:"inline-flex items-center gap-1 px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[h.jsx(Sa,{className:"h-4 w-4"}),"Clear filters"]})]}),h.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Domain:"}),h.jsxs("select",{value:t,onChange:D=>e(D.target.value),className:"px-3 py-2 rounded-lg border border-gray-200 bg-white text-gray-700 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-colors text-sm",children:[h.jsx("option",{value:"all",children:"All Domains"}),S==null?void 0:S.map(D=>h.jsx("option",{value:D.id,children:D.title},D.id))]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Status:"}),h.jsxs("select",{value:n,onChange:D=>r(D.target.value),className:"px-3 py-2 rounded-lg border border-gray-200 bg-white text-gray-700 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-colors text-sm",children:[h.jsx("option",{value:"all",children:"All Status"}),h.jsx("option",{value:"published",children:"Published"}),h.jsx("option",{value:"draft",children:"Draft"})]})]}),l.size>0&&h.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[h.jsxs("span",{className:"text-sm text-gray-600",children:[l.size," selected"]}),h.jsxs("button",{onClick:re,disabled:_.isPending,className:"inline-flex items-center gap-1 px-3 py-2 text-sm font-medium text-green-600 hover:text-green-700 hover:bg-green-50 rounded-lg transition-colors",children:[h.jsx(yw,{className:"h-4 w-4"}),"Publish"]}),h.jsxs("button",{onClick:j,disabled:_.isPending,className:"inline-flex items-center gap-1 px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",children:[h.jsx(gw,{className:"h-4 w-4"}),"Unpublish"]}),h.jsxs("button",{onClick:W,disabled:E.isPending,className:"inline-flex items-center gap-1 px-3 py-2 text-sm font-medium text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors",children:[h.jsx(eg,{className:"h-4 w-4"}),"Delete"]})]})]})]}),h.jsx("div",{className:"overflow-hidden rounded-xl border border-gray-100",children:h.jsxs("table",{className:"w-full",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"bg-gray-50 border-b border-gray-100",children:[h.jsx("th",{className:"text-left px-4 py-4 w-10",children:h.jsx("button",{onClick:z,className:"text-gray-400 hover:text-gray-600",children:vt&&O.length>0?h.jsx(ic,{className:"h-5 w-5 text-purple-600"}):h.jsx(ac,{className:"h-5 w-5"})})}),h.jsx("th",{className:"text-left px-6 py-4",children:h.jsx(Ur,{label:"Title",column:"title",currentSortBy:m,currentSortOrder:y,onSort:L})}),h.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-600",children:"Domain"}),h.jsx("th",{className:"text-left px-6 py-4",children:h.jsx(Ur,{label:"Difficulty",column:"difficulty_level",currentSortBy:m,currentSortOrder:y,onSort:L})}),h.jsx("th",{className:"text-left px-6 py-4",children:h.jsx(Ur,{label:"Status",column:"is_published",currentSortBy:m,currentSortOrder:y,onSort:L})}),h.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-600",children:"Orphan"}),h.jsx("th",{className:"text-right px-6 py-4 text-sm font-semibold text-gray-600",children:"Actions"})]})}),h.jsx("tbody",{className:"divide-y divide-gray-100",children:O.length?O.map(D=>{var te;return h.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[h.jsx("td",{className:"px-4 py-4",children:h.jsx("button",{onClick:()=>K(D.id),className:"text-gray-400 hover:text-gray-600",children:l.has(D.id)?h.jsx(ic,{className:"h-5 w-5 text-purple-600"}):h.jsx(ac,{className:"h-5 w-5"})})}),h.jsx("td",{className:"px-6 py-4",children:h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-gray-900",children:D.title}),h.jsx("p",{className:"text-sm text-gray-500",children:D.slug})]})}),h.jsx("td",{className:"px-6 py-4",children:h.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm font-medium",children:(te=D.domains)==null?void 0:te.title})}),h.jsx("td",{className:"px-6 py-4",children:h.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 rounded-lg bg-gray-100 text-gray-700 font-semibold text-sm",children:D.difficulty_level})}),h.jsx("td",{className:"px-6 py-4",children:D.is_published?h.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm font-medium",children:"Published"}):h.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-sm font-medium",children:"Draft"})}),h.jsx("td",{className:"px-6 py-4",children:D.domain_id?h.jsx("span",{className:"px-3 py-1 bg-gray-50 text-gray-400 rounded-full text-sm font-medium",children:"-"}):h.jsx("span",{className:"px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-sm font-medium",children:"Orphan"})}),h.jsx("td",{className:"px-6 py-4 text-right",children:h.jsxs("div",{className:"flex items-center justify-end gap-2",children:[h.jsx(Sn,{to:`/skills/${D.id}/edit`,className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium hover:bg-blue-200 transition-colors",children:"Edit"}),h.jsx("button",{onClick:()=>ee(D.id),disabled:T.isPending,className:"px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full text-sm font-medium hover:bg-indigo-200 transition-colors disabled:opacity-50",children:"Duplicate"}),h.jsx("button",{onClick:()=>V(D.id),className:"px-3 py-1 bg-red-100 text-red-700 rounded-full text-sm font-medium hover:bg-red-200 transition-colors",children:"Delete"})]})})]},D.id)}):h.jsx("tr",{children:h.jsx("td",{colSpan:7,className:"px-6 py-12 text-center",children:h.jsxs("div",{className:"flex flex-col items-center",children:[h.jsx("div",{className:"flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 mb-4",children:h.jsx(ip,{className:"w-8 h-8 text-gray-400"})}),h.jsx("p",{className:"text-gray-500 mb-4",children:We?"No skills match your filters.":"No skills found. Create one to get started."}),We?h.jsxs("button",{onClick:$t,className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium rounded-lg transition-colors",children:[h.jsx(Sa,{className:"h-4 w-4"}),"Clear filters"]}):h.jsxs(Sn,{to:"/skills/new",className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white font-medium rounded-lg transition-colors",children:[h.jsx(fs,{className:"h-4 w-4"}),"Create Skill"]})]})})})})]})}),h.jsx(Pw,{currentPage:u,totalPages:P,totalCount:U,pageSize:f,onPageChange:me,onPageSizeChange:ie})]})]})}function dW(){return h.jsx(uW,{})}function hE(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Zd(...t){return e=>{let n=!1;const r=t.map(s=>{const i=hE(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():hE(t[s],null)}}}}function ot(...t){return w.useCallback(Zd(...t),t)}var fW=Symbol.for("react.lazy"),yp=vm[" use ".trim().toString()];function hW(t){return typeof t=="object"&&t!==null&&"then"in t}function nj(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===fW&&"_payload"in t&&hW(t._payload)}function rj(t){const e=mW(t),n=w.forwardRef((r,s)=>{let{children:i,...o}=r;nj(i)&&typeof yp=="function"&&(i=yp(i._payload));const a=w.Children.toArray(i),l=a.find(yW);if(l){const c=l.props.children,u=a.map(d=>d===l?w.Children.count(c)>1?w.Children.only(null):w.isValidElement(c)?c.props.children:null:d);return h.jsx(e,{...o,ref:s,children:w.isValidElement(c)?w.cloneElement(c,void 0,u):null})}return h.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var pW=rj("Slot");function mW(t){const e=w.forwardRef((n,r)=>{let{children:s,...i}=n;if(nj(s)&&typeof yp=="function"&&(s=yp(s._payload)),w.isValidElement(s)){const o=xW(s),a=vW(i,s.props);return s.type!==w.Fragment&&(a.ref=r?Zd(r,o):o),w.cloneElement(s,a)}return w.Children.count(s)>1?w.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var gW=Symbol("radix.slottable");function yW(t){return w.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===gW}function vW(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function xW(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var bW=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],wW=bW.reduce((t,e)=>{const n=rj(`Primitive.${e}`),r=w.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),SW="Label",sj=w.forwardRef((t,e)=>h.jsx(wW.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));sj.displayName=SW;var ij=sj;const kW=XR("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),oj=w.forwardRef(({className:t,...e},n)=>h.jsx(ij,{ref:n,className:tt(kW(),t),...e}));oj.displayName=ij.displayName;const aj=_V,lj=w.createContext({}),Kn=({...t})=>h.jsx(lj.Provider,{value:{name:t.name},children:h.jsx(SV,{...t})}),ig=()=>{const t=w.useContext(lj),e=w.useContext(cj),{getFieldState:n,formState:r}=kV(),s=n(t.name,r);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:i}=e;return{id:i,name:t.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...s}},cj=w.createContext({}),Pn=w.forwardRef(({className:t,...e},n)=>{const r=w.useId();return h.jsx(cj.Provider,{value:{id:r},children:h.jsx("div",{ref:n,className:tt("space-y-2",t),...e})})});Pn.displayName="FormItem";const Mn=w.forwardRef(({className:t,...e},n)=>{const{error:r,formItemId:s}=ig();return h.jsx(oj,{ref:n,className:tt(r&&"text-destructive",t),htmlFor:s,...e})});Mn.displayName="FormLabel";const Dn=w.forwardRef(({...t},e)=>{const{error:n,formItemId:r,formDescriptionId:s,formMessageId:i}=ig();return h.jsx(pW,{ref:e,id:r,"aria-describedby":n?`${s} ${i}`:`${s}`,"aria-invalid":!!n,...t})});Dn.displayName="FormControl";const hu=w.forwardRef(({className:t,...e},n)=>{const{formDescriptionId:r}=ig();return h.jsx("p",{ref:n,id:r,className:tt("text-sm text-muted-foreground",t),...e})});hu.displayName="FormDescription";const gr=w.forwardRef(({className:t,children:e,...n},r)=>{const{error:s,formMessageId:i}=ig(),o=s?String(s==null?void 0:s.message):e;return o?h.jsx("p",{ref:r,id:i,className:tt("text-sm font-medium text-destructive",t),...n,children:o}):null});gr.displayName="FormMessage";const uj=w.forwardRef(({className:t,...e},n)=>h.jsx("textarea",{className:tt("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));uj.displayName="Textarea";function $a(t,e=[]){let n=[];function r(i,o){const a=w.createContext(o),l=n.length;n=[...n,o];const c=d=>{var v;const{scope:f,children:p,...m}=d,g=((v=f==null?void 0:f[t])==null?void 0:v[l])||a,y=w.useMemo(()=>m,Object.values(m));return h.jsx(g.Provider,{value:y,children:p})};c.displayName=i+"Provider";function u(d,f){var g;const p=((g=f==null?void 0:f[t])==null?void 0:g[l])||a,m=w.useContext(p);if(m)return m;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${i}\``)}return[c,u]}const s=()=>{const i=n.map(o=>w.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return w.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,_W(s,...e)]}function _W(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(i)[`__scope${c}`];return{...a,...d}},{});return w.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Ie(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}var mn=globalThis!=null&&globalThis.document?w.useLayoutEffect:()=>{},EW=vm[" useInsertionEffect ".trim().toString()]||mn;function kd({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=CW({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:s;{const u=w.useRef(t!==void 0);w.useEffect(()=>{const d=u.current;d!==a&&console.warn(`${r} is changing from ${d?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,r])}const c=w.useCallback(u=>{var d;if(a){const f=NW(u)?u(t):u;f!==t&&((d=o.current)==null||d.call(o,f))}else i(u)},[a,t,i,o]);return[l,c]}function CW({defaultProp:t,onChange:e}){const[n,r]=w.useState(t),s=w.useRef(n),i=w.useRef(e);return EW(()=>{i.current=e},[e]),w.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function NW(t){return typeof t=="function"}function Mw(t){const e=w.useRef({value:t,previous:t});return w.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}function Dw(t){const[e,n]=w.useState(void 0);return mn(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}function TW(t,e){return w.useReducer((n,r)=>e[n][r]??n,t)}var Lw=t=>{const{present:e,children:n}=t,r=OW(e),s=typeof n=="function"?n({present:r.isPresent}):w.Children.only(n),i=ot(r.ref,AW(s));return typeof n=="function"||r.isPresent?w.cloneElement(s,{ref:i}):null};Lw.displayName="Presence";function OW(t){const[e,n]=w.useState(),r=w.useRef(null),s=w.useRef(t),i=w.useRef("none"),o=t?"mounted":"unmounted",[a,l]=TW(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return w.useEffect(()=>{const c=$f(r.current);i.current=a==="mounted"?c:"none"},[a]),mn(()=>{const c=r.current,u=s.current;if(u!==t){const f=i.current,p=$f(c);t?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),mn(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=p=>{const g=$f(r.current).includes(CSS.escape(p.animationName));if(p.target===e&&g&&(l("ANIMATION_END"),!s.current)){const y=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=y)})}},f=p=>{p.target===e&&(i.current=$f(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:w.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function $f(t){return(t==null?void 0:t.animationName)||"none"}function AW(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function RW(t){const e=jW(t),n=w.forwardRef((r,s)=>{const{children:i,...o}=r,a=w.Children.toArray(i),l=a.find(PW);if(l){const c=l.props.children,u=a.map(d=>d===l?w.Children.count(c)>1?w.Children.only(null):w.isValidElement(c)?c.props.children:null:d);return h.jsx(e,{...o,ref:s,children:w.isValidElement(c)?w.cloneElement(c,void 0,u):null})}return h.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}function jW(t){const e=w.forwardRef((n,r)=>{const{children:s,...i}=n;if(w.isValidElement(s)){const o=DW(s),a=MW(i,s.props);return s.type!==w.Fragment&&(a.ref=r?Zd(r,o):o),w.cloneElement(s,a)}return w.Children.count(s)>1?w.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var IW=Symbol("radix.slottable");function PW(t){return w.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===IW}function MW(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function DW(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var LW=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],$e=LW.reduce((t,e)=>{const n=RW(`Primitive.${e}`),r=w.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function $W(t,e){t&&ko.flushSync(()=>t.dispatchEvent(e))}var og="Checkbox",[FW]=$a(og),[BW,$w]=FW(og);function UW(t){const{__scopeCheckbox:e,checked:n,children:r,defaultChecked:s,disabled:i,form:o,name:a,onCheckedChange:l,required:c,value:u="on",internal_do_not_use_render:d}=t,[f,p]=kd({prop:n,defaultProp:s??!1,onChange:l,caller:og}),[m,g]=w.useState(null),[y,v]=w.useState(null),x=w.useRef(!1),b=m?!!o||!!m.closest("form"):!0,S={checked:f,disabled:i,setChecked:p,control:m,setControl:g,name:a,form:o,value:u,hasConsumerStoppedPropagationRef:x,required:c,defaultChecked:so(s)?!1:s,isFormControl:b,bubbleInput:y,setBubbleInput:v};return h.jsx(BW,{scope:e,...S,children:zW(d)?d(S):r})}var dj="CheckboxTrigger",fj=w.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...r},s)=>{const{control:i,value:o,disabled:a,checked:l,required:c,setControl:u,setChecked:d,hasConsumerStoppedPropagationRef:f,isFormControl:p,bubbleInput:m}=$w(dj,t),g=ot(s,u),y=w.useRef(l);return w.useEffect(()=>{const v=i==null?void 0:i.form;if(v){const x=()=>d(y.current);return v.addEventListener("reset",x),()=>v.removeEventListener("reset",x)}},[i,d]),h.jsx($e.button,{type:"button",role:"checkbox","aria-checked":so(l)?"mixed":l,"aria-required":c,"data-state":yj(l),"data-disabled":a?"":void 0,disabled:a,value:o,...r,ref:g,onKeyDown:Ie(e,v=>{v.key==="Enter"&&v.preventDefault()}),onClick:Ie(n,v=>{d(x=>so(x)?!0:!x),m&&p&&(f.current=v.isPropagationStopped(),f.current||v.stopPropagation())})})});fj.displayName=dj;var Fw=w.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:i,required:o,disabled:a,value:l,onCheckedChange:c,form:u,...d}=t;return h.jsx(UW,{__scopeCheckbox:n,checked:s,defaultChecked:i,disabled:a,required:o,onCheckedChange:c,name:r,form:u,value:l,internal_do_not_use_render:({isFormControl:f})=>h.jsxs(h.Fragment,{children:[h.jsx(fj,{...d,ref:e,__scopeCheckbox:n}),f&&h.jsx(gj,{__scopeCheckbox:n})]})})});Fw.displayName=og;var hj="CheckboxIndicator",pj=w.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...s}=t,i=$w(hj,n);return h.jsx(Lw,{present:r||so(i.checked)||i.checked===!0,children:h.jsx($e.span,{"data-state":yj(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});pj.displayName=hj;var mj="CheckboxBubbleInput",gj=w.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:i,defaultChecked:o,required:a,disabled:l,name:c,value:u,form:d,bubbleInput:f,setBubbleInput:p}=$w(mj,t),m=ot(n,p),g=Mw(i),y=Dw(r);w.useEffect(()=>{const x=f;if(!x)return;const b=window.HTMLInputElement.prototype,k=Object.getOwnPropertyDescriptor(b,"checked").set,E=!s.current;if(g!==i&&k){const _=new Event("click",{bubbles:E});x.indeterminate=so(i),k.call(x,so(i)?!1:i),x.dispatchEvent(_)}},[f,g,i,s]);const v=w.useRef(so(i)?!1:i);return h.jsx($e.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??v.current,required:a,disabled:l,name:c,value:u,form:d,...e,tabIndex:-1,ref:m,style:{...e.style,...y,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});gj.displayName=mj;function zW(t){return typeof t=="function"}function so(t){return t==="indeterminate"}function yj(t){return so(t)?"indeterminate":t?"checked":"unchecked"}const Bw=w.forwardRef(({className:t,...e},n)=>h.jsx(Fw,{ref:n,className:tt("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:h.jsx(pj,{className:tt("flex items-center justify-center text-current"),children:h.jsx(uR,{className:"h-4 w-4"})})}));Bw.displayName=Fw.displayName;function pE(t,[e,n]){return Math.min(n,Math.max(e,t))}function mE(t){const e=VW(t),n=w.forwardRef((r,s)=>{const{children:i,...o}=r,a=w.Children.toArray(i),l=a.find(qW);if(l){const c=l.props.children,u=a.map(d=>d===l?w.Children.count(c)>1?w.Children.only(null):w.isValidElement(c)?c.props.children:null:d);return h.jsx(e,{...o,ref:s,children:w.isValidElement(c)?w.cloneElement(c,void 0,u):null})}return h.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}function VW(t){const e=w.forwardRef((n,r)=>{const{children:s,...i}=n;if(w.isValidElement(s)){const o=KW(s),a=WW(i,s.props);return s.type!==w.Fragment&&(a.ref=r?Zd(r,o):o),w.cloneElement(s,a)}return w.Children.count(s)>1?w.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var HW=Symbol("radix.slottable");function qW(t){return w.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===HW}function WW(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function KW(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function vj(t){const e=t+"CollectionProvider",[n,r]=$a(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:y,children:v}=g,x=se.useRef(null),b=se.useRef(new Map).current;return h.jsx(s,{scope:y,itemMap:b,collectionRef:x,children:v})};o.displayName=e;const a=t+"CollectionSlot",l=mE(a),c=se.forwardRef((g,y)=>{const{scope:v,children:x}=g,b=i(a,v),S=ot(y,b.collectionRef);return h.jsx(l,{ref:S,children:x})});c.displayName=a;const u=t+"CollectionItemSlot",d="data-radix-collection-item",f=mE(u),p=se.forwardRef((g,y)=>{const{scope:v,children:x,...b}=g,S=se.useRef(null),k=ot(y,S),E=i(u,v);return se.useEffect(()=>(E.itemMap.set(S,{ref:S,...b}),()=>void E.itemMap.delete(S))),h.jsx(f,{[d]:"",ref:k,children:x})});p.displayName=u;function m(g){const y=i(t+"CollectionConsumer",g);return se.useCallback(()=>{const x=y.collectionRef.current;if(!x)return[];const b=Array.from(x.querySelectorAll(`[${d}]`));return Array.from(y.itemMap.values()).sort((E,_)=>b.indexOf(E.ref.current)-b.indexOf(_.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:o,Slot:c,ItemSlot:p},m,r]}var GW=w.createContext(void 0);function Uw(t){const e=w.useContext(GW);return t||e||"ltr"}function go(t){const e=w.useRef(t);return w.useEffect(()=>{e.current=t}),w.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function QW(t,e=globalThis==null?void 0:globalThis.document){const n=go(t);w.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var JW="DismissableLayer",rx="dismissableLayer.update",YW="dismissableLayer.pointerDownOutside",ZW="dismissableLayer.focusOutside",gE,xj=w.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),bj=w.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=w.useContext(xj),[u,d]=w.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=w.useState({}),m=ot(e,_=>d(_)),g=Array.from(c.layers),[y]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),v=g.indexOf(y),x=u?g.indexOf(u):-1,b=c.layersWithOutsidePointerEventsDisabled.size>0,S=x>=v,k=t8(_=>{const T=_.target,A=[...c.branches].some(O=>O.contains(T));!S||A||(s==null||s(_),o==null||o(_),_.defaultPrevented||a==null||a())},f),E=n8(_=>{const T=_.target;[...c.branches].some(O=>O.contains(T))||(i==null||i(_),o==null||o(_),_.defaultPrevented||a==null||a())},f);return QW(_=>{x===c.layers.size-1&&(r==null||r(_),!_.defaultPrevented&&a&&(_.preventDefault(),a()))},f),w.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(gE=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),yE(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=gE)}},[u,f,n,c]),w.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),yE())},[u,c]),w.useEffect(()=>{const _=()=>p({});return document.addEventListener(rx,_),()=>document.removeEventListener(rx,_)},[]),h.jsx($e.div,{...l,ref:m,style:{pointerEvents:b?S?"auto":"none":void 0,...t.style},onFocusCapture:Ie(t.onFocusCapture,E.onFocusCapture),onBlurCapture:Ie(t.onBlurCapture,E.onBlurCapture),onPointerDownCapture:Ie(t.onPointerDownCapture,k.onPointerDownCapture)})});bj.displayName=JW;var XW="DismissableLayerBranch",e8=w.forwardRef((t,e)=>{const n=w.useContext(xj),r=w.useRef(null),s=ot(e,r);return w.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),h.jsx($e.div,{...t,ref:s})});e8.displayName=XW;function t8(t,e=globalThis==null?void 0:globalThis.document){const n=go(t),r=w.useRef(!1),s=w.useRef(()=>{});return w.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){wj(YW,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function n8(t,e=globalThis==null?void 0:globalThis.document){const n=go(t),r=w.useRef(!1);return w.useEffect(()=>{const s=i=>{i.target&&!r.current&&wj(ZW,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function yE(){const t=new CustomEvent(rx);document.dispatchEvent(t)}function wj(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?$W(s,i):s.dispatchEvent(i)}var Ey=0;function r8(){w.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??vE()),document.body.insertAdjacentElement("beforeend",t[1]??vE()),Ey++,()=>{Ey===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Ey--}},[])}function vE(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Cy="focusScope.autoFocusOnMount",Ny="focusScope.autoFocusOnUnmount",xE={bubbles:!1,cancelable:!0},s8="FocusScope",Sj=w.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=w.useState(null),c=go(s),u=go(i),d=w.useRef(null),f=ot(e,g=>l(g)),p=w.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;w.useEffect(()=>{if(r){let g=function(b){if(p.paused||!a)return;const S=b.target;a.contains(S)?d.current=S:gi(d.current,{select:!0})},y=function(b){if(p.paused||!a)return;const S=b.relatedTarget;S!==null&&(a.contains(S)||gi(d.current,{select:!0}))},v=function(b){if(document.activeElement===document.body)for(const k of b)k.removedNodes.length>0&&gi(a)};document.addEventListener("focusin",g),document.addEventListener("focusout",y);const x=new MutationObserver(v);return a&&x.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",y),x.disconnect()}}},[r,a,p.paused]),w.useEffect(()=>{if(a){wE.add(p);const g=document.activeElement;if(!a.contains(g)){const v=new CustomEvent(Cy,xE);a.addEventListener(Cy,c),a.dispatchEvent(v),v.defaultPrevented||(i8(u8(kj(a)),{select:!0}),document.activeElement===g&&gi(a))}return()=>{a.removeEventListener(Cy,c),setTimeout(()=>{const v=new CustomEvent(Ny,xE);a.addEventListener(Ny,u),a.dispatchEvent(v),v.defaultPrevented||gi(g??document.body,{select:!0}),a.removeEventListener(Ny,u),wE.remove(p)},0)}}},[a,c,u,p]);const m=w.useCallback(g=>{if(!n&&!r||p.paused)return;const y=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,v=document.activeElement;if(y&&v){const x=g.currentTarget,[b,S]=o8(x);b&&S?!g.shiftKey&&v===S?(g.preventDefault(),n&&gi(b,{select:!0})):g.shiftKey&&v===b&&(g.preventDefault(),n&&gi(S,{select:!0})):v===x&&g.preventDefault()}},[n,r,p.paused]);return h.jsx($e.div,{tabIndex:-1,...o,ref:f,onKeyDown:m})});Sj.displayName=s8;function i8(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(gi(r,{select:e}),document.activeElement!==n)return}function o8(t){const e=kj(t),n=bE(e,t),r=bE(e.reverse(),t);return[n,r]}function kj(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function bE(t,e){for(const n of t)if(!a8(n,{upTo:e}))return n}function a8(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function l8(t){return t instanceof HTMLInputElement&&"select"in t}function gi(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&l8(t)&&e&&t.select()}}var wE=c8();function c8(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=SE(t,e),t.unshift(e)},remove(e){var n;t=SE(t,e),(n=t[0])==null||n.resume()}}}function SE(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function u8(t){return t.filter(e=>e.tagName!=="A")}var d8=vm[" useId ".trim().toString()]||(()=>{}),f8=0;function ag(t){const[e,n]=w.useState(d8());return mn(()=>{n(r=>r??String(f8++))},[t]),e?`radix-${e}`:""}const _j=["top","right","bottom","left"],kE=["start","end"],_E=_j.reduce((t,e)=>t.concat(e,e+"-"+kE[0],e+"-"+kE[1]),[]),Qr=Math.min,fn=Math.max,vp=Math.round,Ff=Math.floor,ps=t=>({x:t,y:t}),h8={left:"right",right:"left",bottom:"top",top:"bottom"},p8={start:"end",end:"start"};function sx(t,e,n){return fn(t,Qr(e,n))}function Jr(t,e){return typeof t=="function"?t(e):t}function rr(t){return t.split("-")[0]}function Kr(t){return t.split("-")[1]}function zw(t){return t==="x"?"y":"x"}function Vw(t){return t==="y"?"height":"width"}const m8=new Set(["top","bottom"]);function zr(t){return m8.has(rr(t))?"y":"x"}function Hw(t){return zw(zr(t))}function Ej(t,e,n){n===void 0&&(n=!1);const r=Kr(t),s=Hw(t),i=Vw(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=bp(o)),[o,bp(o)]}function g8(t){const e=bp(t);return[xp(t),e,xp(e)]}function xp(t){return t.replace(/start|end/g,e=>p8[e])}const EE=["left","right"],CE=["right","left"],y8=["top","bottom"],v8=["bottom","top"];function x8(t,e,n){switch(t){case"top":case"bottom":return n?e?CE:EE:e?EE:CE;case"left":case"right":return e?y8:v8;default:return[]}}function b8(t,e,n,r){const s=Kr(t);let i=x8(rr(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(xp)))),i}function bp(t){return t.replace(/left|right|bottom|top/g,e=>h8[e])}function w8(t){return{top:0,right:0,bottom:0,left:0,...t}}function qw(t){return typeof t!="number"?w8(t):{top:t,right:t,bottom:t,left:t}}function hc(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function NE(t,e,n){let{reference:r,floating:s}=t;const i=zr(e),o=Hw(e),a=Vw(o),l=rr(e),c=i==="y",u=r.x+r.width/2-s.width/2,d=r.y+r.height/2-s.height/2,f=r[a]/2-s[a]/2;let p;switch(l){case"top":p={x:u,y:r.y-s.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:d};break;case"left":p={x:r.x-s.width,y:d};break;default:p={x:r.x,y:r.y}}switch(Kr(e)){case"start":p[o]-=f*(n&&c?-1:1);break;case"end":p[o]+=f*(n&&c?-1:1);break}return p}const S8=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:u,y:d}=NE(c,r,l),f=r,p={},m=0;for(let g=0;g<a.length;g++){const{name:y,fn:v}=a[g],{x,y:b,data:S,reset:k}=await v({x:u,y:d,initialPlacement:r,placement:f,strategy:s,middlewareData:p,rects:c,platform:o,elements:{reference:t,floating:e}});u=x??u,d=b??d,p={...p,[y]:{...p[y],...S}},k&&m<=50&&(m++,typeof k=="object"&&(k.placement&&(f=k.placement),k.rects&&(c=k.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):k.rects),{x:u,y:d}=NE(c,f,l)),g=-1)}return{x:u,y:d,placement:f,strategy:s,middlewareData:p}};async function pc(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:p=0}=Jr(e,t),m=qw(p),y=a[f?d==="floating"?"reference":"floating":d],v=hc(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(y)))==null||n?y:y.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),x=d==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,b=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),S=await(i.isElement==null?void 0:i.isElement(b))?await(i.getScale==null?void 0:i.getScale(b))||{x:1,y:1}:{x:1,y:1},k=hc(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:x,offsetParent:b,strategy:l}):x);return{top:(v.top-k.top+m.top)/S.y,bottom:(k.bottom-v.bottom+m.bottom)/S.y,left:(v.left-k.left+m.left)/S.x,right:(k.right-v.right+m.right)/S.x}}const k8=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=Jr(t,e)||{};if(c==null)return{};const d=qw(u),f={x:n,y:r},p=Hw(s),m=Vw(p),g=await o.getDimensions(c),y=p==="y",v=y?"top":"left",x=y?"bottom":"right",b=y?"clientHeight":"clientWidth",S=i.reference[m]+i.reference[p]-f[p]-i.floating[m],k=f[p]-i.reference[p],E=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let _=E?E[b]:0;(!_||!await(o.isElement==null?void 0:o.isElement(E)))&&(_=a.floating[b]||i.floating[m]);const T=S/2-k/2,A=_/2-g[m]/2-1,O=Qr(d[v],A),U=Qr(d[x],A),P=O,L=_-g[m]-U,z=_/2-g[m]/2+T,K=sx(P,z,L),W=!l.arrow&&Kr(s)!=null&&z!==K&&i.reference[m]/2-(z<P?O:U)-g[m]/2<0,re=W?z<P?z-P:z-L:0;return{[p]:f[p]+re,data:{[p]:K,centerOffset:z-K-re,...W&&{alignmentOffset:re}},reset:W}}});function _8(t,e,n){return(t?[...n.filter(s=>Kr(s)===t),...n.filter(s=>Kr(s)!==t)]:n.filter(s=>rr(s)===s)).filter(s=>t?Kr(s)===t||(e?xp(s)!==s:!1):!0)}const E8=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var n,r,s;const{rects:i,middlewareData:o,placement:a,platform:l,elements:c}=e,{crossAxis:u=!1,alignment:d,allowedPlacements:f=_E,autoAlignment:p=!0,...m}=Jr(t,e),g=d!==void 0||f===_E?_8(d||null,p,f):f,y=await pc(e,m),v=((n=o.autoPlacement)==null?void 0:n.index)||0,x=g[v];if(x==null)return{};const b=Ej(x,i,await(l.isRTL==null?void 0:l.isRTL(c.floating)));if(a!==x)return{reset:{placement:g[0]}};const S=[y[rr(x)],y[b[0]],y[b[1]]],k=[...((r=o.autoPlacement)==null?void 0:r.overflows)||[],{placement:x,overflows:S}],E=g[v+1];if(E)return{data:{index:v+1,overflows:k},reset:{placement:E}};const _=k.map(O=>{const U=Kr(O.placement);return[O.placement,U&&u?O.overflows.slice(0,2).reduce((P,L)=>P+L,0):O.overflows[0],O.overflows]}).sort((O,U)=>O[1]-U[1]),A=((s=_.filter(O=>O[2].slice(0,Kr(O[0])?2:3).every(U=>U<=0))[0])==null?void 0:s[0])||_[0][0];return A!==a?{data:{index:v+1,overflows:k},reset:{placement:A}}:{}}}},C8=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:g=!0,...y}=Jr(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const v=rr(s),x=zr(a),b=rr(a)===a,S=await(l.isRTL==null?void 0:l.isRTL(c.floating)),k=f||(b||!g?[bp(a)]:g8(a)),E=m!=="none";!f&&E&&k.push(...b8(a,g,m,S));const _=[a,...k],T=await pc(e,y),A=[];let O=((r=i.flip)==null?void 0:r.overflows)||[];if(u&&A.push(T[v]),d){const z=Ej(s,o,S);A.push(T[z[0]],T[z[1]])}if(O=[...O,{placement:s,overflows:A}],!A.every(z=>z<=0)){var U,P;const z=(((U=i.flip)==null?void 0:U.index)||0)+1,K=_[z];if(K&&(!(d==="alignment"?x!==zr(K):!1)||O.every(j=>zr(j.placement)===x?j.overflows[0]>0:!0)))return{data:{index:z,overflows:O},reset:{placement:K}};let W=(P=O.filter(re=>re.overflows[0]<=0).sort((re,j)=>re.overflows[1]-j.overflows[1])[0])==null?void 0:P.placement;if(!W)switch(p){case"bestFit":{var L;const re=(L=O.filter(j=>{if(E){const V=zr(j.placement);return V===x||V==="y"}return!0}).map(j=>[j.placement,j.overflows.filter(V=>V>0).reduce((V,ee)=>V+ee,0)]).sort((j,V)=>j[1]-V[1])[0])==null?void 0:L[0];re&&(W=re);break}case"initialPlacement":W=a;break}if(s!==W)return{reset:{placement:W}}}return{}}}};function TE(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function OE(t){return _j.some(e=>t[e]>=0)}const N8=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Jr(t,e);switch(r){case"referenceHidden":{const i=await pc(e,{...s,elementContext:"reference"}),o=TE(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:OE(o)}}}case"escaped":{const i=await pc(e,{...s,altBoundary:!0}),o=TE(i,n.floating);return{data:{escapedOffsets:o,escaped:OE(o)}}}default:return{}}}}};function Cj(t){const e=Qr(...t.map(i=>i.left)),n=Qr(...t.map(i=>i.top)),r=fn(...t.map(i=>i.right)),s=fn(...t.map(i=>i.bottom));return{x:e,y:n,width:r-e,height:s-n}}function T8(t){const e=t.slice().sort((s,i)=>s.y-i.y),n=[];let r=null;for(let s=0;s<e.length;s++){const i=e[s];!r||i.y-r.y>r.height/2?n.push([i]):n[n.length-1].push(i),r=i}return n.map(s=>hc(Cj(s)))}const O8=function(t){return t===void 0&&(t={}),{name:"inline",options:t,async fn(e){const{placement:n,elements:r,rects:s,platform:i,strategy:o}=e,{padding:a=2,x:l,y:c}=Jr(t,e),u=Array.from(await(i.getClientRects==null?void 0:i.getClientRects(r.reference))||[]),d=T8(u),f=hc(Cj(u)),p=qw(a);function m(){if(d.length===2&&d[0].left>d[1].right&&l!=null&&c!=null)return d.find(y=>l>y.left-p.left&&l<y.right+p.right&&c>y.top-p.top&&c<y.bottom+p.bottom)||f;if(d.length>=2){if(zr(n)==="y"){const O=d[0],U=d[d.length-1],P=rr(n)==="top",L=O.top,z=U.bottom,K=P?O.left:U.left,W=P?O.right:U.right,re=W-K,j=z-L;return{top:L,bottom:z,left:K,right:W,width:re,height:j,x:K,y:L}}const y=rr(n)==="left",v=fn(...d.map(O=>O.right)),x=Qr(...d.map(O=>O.left)),b=d.filter(O=>y?O.left===x:O.right===v),S=b[0].top,k=b[b.length-1].bottom,E=x,_=v,T=_-E,A=k-S;return{top:S,bottom:k,left:E,right:_,width:T,height:A,x:E,y:S}}return f}const g=await i.getElementRects({reference:{getBoundingClientRect:m},floating:r.floating,strategy:o});return s.reference.x!==g.reference.x||s.reference.y!==g.reference.y||s.reference.width!==g.reference.width||s.reference.height!==g.reference.height?{reset:{rects:g}}:{}}}},Nj=new Set(["left","top"]);async function A8(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=rr(n),a=Kr(n),l=zr(n)==="y",c=Nj.has(o)?-1:1,u=i&&l?-1:1,d=Jr(e,t);let{mainAxis:f,crossAxis:p,alignmentAxis:m}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof m=="number"&&(p=a==="end"?m*-1:m),l?{x:p*u,y:f*c}:{x:f*c,y:p*u}}const R8=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await A8(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},j8=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:y=>{let{x:v,y:x}=y;return{x:v,y:x}}},...l}=Jr(t,e),c={x:n,y:r},u=await pc(e,l),d=zr(rr(s)),f=zw(d);let p=c[f],m=c[d];if(i){const y=f==="y"?"top":"left",v=f==="y"?"bottom":"right",x=p+u[y],b=p-u[v];p=sx(x,p,b)}if(o){const y=d==="y"?"top":"left",v=d==="y"?"bottom":"right",x=m+u[y],b=m-u[v];m=sx(x,m,b)}const g=a.fn({...e,[f]:p,[d]:m});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[f]:i,[d]:o}}}}}},I8=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Jr(t,e),u={x:n,y:r},d=zr(s),f=zw(d);let p=u[f],m=u[d];const g=Jr(a,e),y=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const b=f==="y"?"height":"width",S=i.reference[f]-i.floating[b]+y.mainAxis,k=i.reference[f]+i.reference[b]-y.mainAxis;p<S?p=S:p>k&&(p=k)}if(c){var v,x;const b=f==="y"?"width":"height",S=Nj.has(rr(s)),k=i.reference[d]-i.floating[b]+(S&&((v=o.offset)==null?void 0:v[d])||0)+(S?0:y.crossAxis),E=i.reference[d]+i.reference[b]+(S?0:((x=o.offset)==null?void 0:x[d])||0)-(S?y.crossAxis:0);m<k?m=k:m>E&&(m=E)}return{[f]:p,[d]:m}}}},P8=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Jr(t,e),u=await pc(e,c),d=rr(s),f=Kr(s),p=zr(s)==="y",{width:m,height:g}=i.floating;let y,v;d==="top"||d==="bottom"?(y=d,v=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(v=d,y=f==="end"?"top":"bottom");const x=g-u.top-u.bottom,b=m-u.left-u.right,S=Qr(g-u[y],x),k=Qr(m-u[v],b),E=!e.middlewareData.shift;let _=S,T=k;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(T=b),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(_=x),E&&!f){const O=fn(u.left,0),U=fn(u.right,0),P=fn(u.top,0),L=fn(u.bottom,0);p?T=m-2*(O!==0||U!==0?O+U:fn(u.left,u.right)):_=g-2*(P!==0||L!==0?P+L:fn(u.top,u.bottom))}await l({...e,availableWidth:T,availableHeight:_});const A=await o.getDimensions(a.floating);return m!==A.width||g!==A.height?{reset:{rects:!0}}:{}}}};function lg(){return typeof window<"u"}function Lc(t){return Tj(t)?(t.nodeName||"").toLowerCase():"#document"}function Xn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ss(t){var e;return(e=(Tj(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Tj(t){return lg()?t instanceof Node||t instanceof Xn(t).Node:!1}function Yr(t){return lg()?t instanceof Element||t instanceof Xn(t).Element:!1}function gs(t){return lg()?t instanceof HTMLElement||t instanceof Xn(t).HTMLElement:!1}function AE(t){return!lg()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Xn(t).ShadowRoot}const M8=new Set(["inline","contents"]);function Xd(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Zr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!M8.has(s)}const D8=new Set(["table","td","th"]);function L8(t){return D8.has(Lc(t))}const $8=[":popover-open",":modal"];function cg(t){return $8.some(e=>{try{return t.matches(e)}catch{return!1}})}const F8=["transform","translate","scale","rotate","perspective"],B8=["transform","translate","scale","rotate","perspective","filter"],U8=["paint","layout","strict","content"];function Ww(t){const e=Kw(),n=Yr(t)?Zr(t):t;return F8.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||B8.some(r=>(n.willChange||"").includes(r))||U8.some(r=>(n.contain||"").includes(r))}function z8(t){let e=yo(t);for(;gs(e)&&!mc(e);){if(Ww(e))return e;if(cg(e))return null;e=yo(e)}return null}function Kw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const V8=new Set(["html","body","#document"]);function mc(t){return V8.has(Lc(t))}function Zr(t){return Xn(t).getComputedStyle(t)}function ug(t){return Yr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function yo(t){if(Lc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||AE(t)&&t.host||Ss(t);return AE(e)?e.host:e}function Oj(t){const e=yo(t);return mc(e)?t.ownerDocument?t.ownerDocument.body:t.body:gs(e)&&Xd(e)?e:Oj(e)}function _d(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=Oj(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=Xn(s);if(i){const a=ix(o);return e.concat(o,o.visualViewport||[],Xd(s)?s:[],a&&n?_d(a):[])}return e.concat(s,_d(s,[],n))}function ix(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Aj(t){const e=Zr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=gs(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=vp(n)!==i||vp(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function Gw(t){return Yr(t)?t:t.contextElement}function Il(t){const e=Gw(t);if(!gs(e))return ps(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=Aj(e);let o=(i?vp(n.width):n.width)/r,a=(i?vp(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const H8=ps(0);function Rj(t){const e=Xn(t);return!Kw()||!e.visualViewport?H8:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function q8(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Xn(t)?!1:e}function Ca(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=Gw(t);let o=ps(1);e&&(r?Yr(r)&&(o=Il(r)):o=Il(t));const a=q8(i,n,r)?Rj(i):ps(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,u=s.width/o.x,d=s.height/o.y;if(i){const f=Xn(i),p=r&&Yr(r)?Xn(r):r;let m=f,g=ix(m);for(;g&&r&&p!==m;){const y=Il(g),v=g.getBoundingClientRect(),x=Zr(g),b=v.left+(g.clientLeft+parseFloat(x.paddingLeft))*y.x,S=v.top+(g.clientTop+parseFloat(x.paddingTop))*y.y;l*=y.x,c*=y.y,u*=y.x,d*=y.y,l+=b,c+=S,m=Xn(g),g=ix(m)}}return hc({width:u,height:d,x:l,y:c})}function dg(t,e){const n=ug(t).scrollLeft;return e?e.left+n:Ca(Ss(t)).left+n}function jj(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-dg(t,n),s=n.top+e.scrollTop;return{x:r,y:s}}function W8(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=Ss(r),a=e?cg(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=ps(1);const u=ps(0),d=gs(r);if((d||!d&&!i)&&((Lc(r)!=="body"||Xd(o))&&(l=ug(r)),gs(r))){const p=Ca(r);c=Il(r),u.x=p.x+r.clientLeft,u.y=p.y+r.clientTop}const f=o&&!d&&!i?jj(o,l):ps(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-l.scrollTop*c.y+u.y+f.y}}function K8(t){return Array.from(t.getClientRects())}function G8(t){const e=Ss(t),n=ug(t),r=t.ownerDocument.body,s=fn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=fn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+dg(t);const a=-n.scrollTop;return Zr(r).direction==="rtl"&&(o+=fn(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}const RE=25;function Q8(t,e){const n=Xn(t),r=Ss(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const u=Kw();(!u||u&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}const c=dg(r);if(c<=0){const u=r.ownerDocument,d=u.body,f=getComputedStyle(d),p=u.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,m=Math.abs(r.clientWidth-d.clientWidth-p);m<=RE&&(i-=m)}else c<=RE&&(i+=c);return{width:i,height:o,x:a,y:l}}const J8=new Set(["absolute","fixed"]);function Y8(t,e){const n=Ca(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=gs(t)?Il(t):ps(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function jE(t,e,n){let r;if(e==="viewport")r=Q8(t,n);else if(e==="document")r=G8(Ss(t));else if(Yr(e))r=Y8(e,n);else{const s=Rj(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return hc(r)}function Ij(t,e){const n=yo(t);return n===e||!Yr(n)||mc(n)?!1:Zr(n).position==="fixed"||Ij(n,e)}function Z8(t,e){const n=e.get(t);if(n)return n;let r=_d(t,[],!1).filter(a=>Yr(a)&&Lc(a)!=="body"),s=null;const i=Zr(t).position==="fixed";let o=i?yo(t):t;for(;Yr(o)&&!mc(o);){const a=Zr(o),l=Ww(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&J8.has(s.position)||Xd(o)&&!l&&Ij(t,o))?r=r.filter(u=>u!==o):s=a,o=yo(o)}return e.set(t,r),r}function X8(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?cg(e)?[]:Z8(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,u)=>{const d=jE(e,u,s);return c.top=fn(d.top,c.top),c.right=Qr(d.right,c.right),c.bottom=Qr(d.bottom,c.bottom),c.left=fn(d.left,c.left),c},jE(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function eK(t){const{width:e,height:n}=Aj(t);return{width:e,height:n}}function tK(t,e,n){const r=gs(e),s=Ss(e),i=n==="fixed",o=Ca(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=ps(0);function c(){l.x=dg(s)}if(r||!r&&!i)if((Lc(e)!=="body"||Xd(s))&&(a=ug(e)),r){const p=Ca(e,!0,i,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else s&&c();i&&!r&&s&&c();const u=s&&!r&&!i?jj(s,a):ps(0),d=o.left+a.scrollLeft-l.x-u.x,f=o.top+a.scrollTop-l.y-u.y;return{x:d,y:f,width:o.width,height:o.height}}function Ty(t){return Zr(t).position==="static"}function IE(t,e){if(!gs(t)||Zr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Ss(t)===n&&(n=n.ownerDocument.body),n}function Pj(t,e){const n=Xn(t);if(cg(t))return n;if(!gs(t)){let s=yo(t);for(;s&&!mc(s);){if(Yr(s)&&!Ty(s))return s;s=yo(s)}return n}let r=IE(t,e);for(;r&&L8(r)&&Ty(r);)r=IE(r,e);return r&&mc(r)&&Ty(r)&&!Ww(r)?n:r||z8(t)||n}const nK=async function(t){const e=this.getOffsetParent||Pj,n=this.getDimensions,r=await n(t.floating);return{reference:tK(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function rK(t){return Zr(t).direction==="rtl"}const sK={convertOffsetParentRelativeRectToViewportRelativeRect:W8,getDocumentElement:Ss,getClippingRect:X8,getOffsetParent:Pj,getElementRects:nK,getClientRects:K8,getDimensions:eK,getScale:Il,isElement:Yr,isRTL:rK};function Mj(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function iK(t,e){let n=null,r;const s=Ss(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:u,top:d,width:f,height:p}=c;if(a||e(),!f||!p)return;const m=Ff(d),g=Ff(s.clientWidth-(u+f)),y=Ff(s.clientHeight-(d+p)),v=Ff(u),b={rootMargin:-m+"px "+-g+"px "+-y+"px "+-v+"px",threshold:fn(0,Qr(1,l))||1};let S=!0;function k(E){const _=E[0].intersectionRatio;if(_!==l){if(!S)return o();_?o(!1,_):r=setTimeout(()=>{o(!1,1e-7)},1e3)}_===1&&!Mj(c,t.getBoundingClientRect())&&o(),S=!1}try{n=new IntersectionObserver(k,{...b,root:s.ownerDocument})}catch{n=new IntersectionObserver(k,b)}n.observe(t)}return o(!0),i}function oK(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=Gw(t),u=s||i?[...c?_d(c):[],..._d(e)]:[];u.forEach(v=>{s&&v.addEventListener("scroll",n,{passive:!0}),i&&v.addEventListener("resize",n)});const d=c&&a?iK(c,n):null;let f=-1,p=null;o&&(p=new ResizeObserver(v=>{let[x]=v;x&&x.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var b;(b=p)==null||b.observe(e)})),n()}),c&&!l&&p.observe(c),p.observe(e));let m,g=l?Ca(t):null;l&&y();function y(){const v=Ca(t);g&&!Mj(g,v)&&n(),g=v,m=requestAnimationFrame(y)}return n(),()=>{var v;u.forEach(x=>{s&&x.removeEventListener("scroll",n),i&&x.removeEventListener("resize",n)}),d==null||d(),(v=p)==null||v.disconnect(),p=null,l&&cancelAnimationFrame(m)}}const Qw=R8,Dj=E8,Jw=j8,Yw=C8,Zw=P8,Xw=N8,wp=k8,Lj=O8,aK=I8,eS=(t,e,n)=>{const r=new Map,s={platform:sK,...n},i={...s.platform,_c:r};return S8(t,e,{...s,platform:i})};var lK=typeof document<"u",cK=function(){},bh=lK?w.useLayoutEffect:cK;function Sp(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Sp(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Sp(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function $j(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function PE(t,e){const n=$j(t);return Math.round(e*n)/n}function Oy(t){const e=w.useRef(t);return bh(()=>{e.current=t}),e}function uK(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,d]=w.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,p]=w.useState(r);Sp(f,r)||p(r);const[m,g]=w.useState(null),[y,v]=w.useState(null),x=w.useCallback(j=>{j!==E.current&&(E.current=j,g(j))},[]),b=w.useCallback(j=>{j!==_.current&&(_.current=j,v(j))},[]),S=i||m,k=o||y,E=w.useRef(null),_=w.useRef(null),T=w.useRef(u),A=l!=null,O=Oy(l),U=Oy(s),P=Oy(c),L=w.useCallback(()=>{if(!E.current||!_.current)return;const j={placement:e,strategy:n,middleware:f};U.current&&(j.platform=U.current),eS(E.current,_.current,j).then(V=>{const ee={...V,isPositioned:P.current!==!1};z.current&&!Sp(T.current,ee)&&(T.current=ee,ko.flushSync(()=>{d(ee)}))})},[f,e,n,U,P]);bh(()=>{c===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,d(j=>({...j,isPositioned:!1})))},[c]);const z=w.useRef(!1);bh(()=>(z.current=!0,()=>{z.current=!1}),[]),bh(()=>{if(S&&(E.current=S),k&&(_.current=k),S&&k){if(O.current)return O.current(S,k,L);L()}},[S,k,L,O,A]);const K=w.useMemo(()=>({reference:E,floating:_,setReference:x,setFloating:b}),[x,b]),W=w.useMemo(()=>({reference:S,floating:k}),[S,k]),re=w.useMemo(()=>{const j={position:n,left:0,top:0};if(!W.floating)return j;const V=PE(W.floating,u.x),ee=PE(W.floating,u.y);return a?{...j,transform:"translate("+V+"px, "+ee+"px)",...$j(W.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:V,top:ee}},[n,a,W.floating,u.x,u.y]);return w.useMemo(()=>({...u,update:L,refs:K,elements:W,floatingStyles:re}),[u,L,K,W,re])}const dK=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?wp({element:r.current,padding:s}).fn(n):{}:r?wp({element:r,padding:s}).fn(n):{}}}},fK=(t,e)=>({...Qw(t),options:[t,e]}),hK=(t,e)=>({...Jw(t),options:[t,e]}),pK=(t,e)=>({...aK(t),options:[t,e]}),mK=(t,e)=>({...Yw(t),options:[t,e]}),gK=(t,e)=>({...Zw(t),options:[t,e]}),yK=(t,e)=>({...Xw(t),options:[t,e]}),vK=(t,e)=>({...dK(t),options:[t,e]});var xK="Arrow",Fj=w.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return h.jsx($e.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:h.jsx("polygon",{points:"0,0 30,0 15,10"})})});Fj.displayName=xK;var bK=Fj,tS="Popper",[Bj,Uj]=$a(tS),[wK,zj]=Bj(tS),Vj=t=>{const{__scopePopper:e,children:n}=t,[r,s]=w.useState(null);return h.jsx(wK,{scope:e,anchor:r,onAnchorChange:s,children:n})};Vj.displayName=tS;var Hj="PopperAnchor",qj=w.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=zj(Hj,n),o=w.useRef(null),a=ot(e,o),l=w.useRef(null);return w.useEffect(()=>{const c=l.current;l.current=(r==null?void 0:r.current)||o.current,c!==l.current&&i.onAnchorChange(l.current)}),r?null:h.jsx($e.div,{...s,ref:a})});qj.displayName=Hj;var nS="PopperContent",[SK,kK]=Bj(nS),Wj=w.forwardRef((t,e)=>{var te,Fe,jt,Pe,Re,Me;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:m,...g}=t,y=zj(nS,n),[v,x]=w.useState(null),b=ot(e,sn=>x(sn)),[S,k]=w.useState(null),E=Dw(S),_=(E==null?void 0:E.width)??0,T=(E==null?void 0:E.height)??0,A=r+(i!=="center"?"-"+i:""),O=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},U=Array.isArray(c)?c:[c],P=U.length>0,L={padding:O,boundary:U.filter(EK),altBoundary:P},{refs:z,floatingStyles:K,placement:W,isPositioned:re,middlewareData:j}=uK({strategy:"fixed",placement:A,whileElementsMounted:(...sn)=>oK(...sn,{animationFrame:p==="always"}),elements:{reference:y.anchor},middleware:[fK({mainAxis:s+T,alignmentAxis:o}),l&&hK({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?pK():void 0,...L}),l&&mK({...L}),gK({...L,apply:({elements:sn,rects:lr,availableWidth:ai,availableHeight:li})=>{const{width:Ao,height:Pg}=lr.reference,Bc=sn.floating.style;Bc.setProperty("--radix-popper-available-width",`${ai}px`),Bc.setProperty("--radix-popper-available-height",`${li}px`),Bc.setProperty("--radix-popper-anchor-width",`${Ao}px`),Bc.setProperty("--radix-popper-anchor-height",`${Pg}px`)}}),S&&vK({element:S,padding:a}),CK({arrowWidth:_,arrowHeight:T}),f&&yK({strategy:"referenceHidden",...L})]}),[V,ee]=Qj(W),me=go(m);mn(()=>{re&&(me==null||me())},[re,me]);const ie=(te=j.arrow)==null?void 0:te.x,vt=(Fe=j.arrow)==null?void 0:Fe.y,We=((jt=j.arrow)==null?void 0:jt.centerOffset)!==0,[$t,D]=w.useState();return mn(()=>{v&&D(window.getComputedStyle(v).zIndex)},[v]),h.jsx("div",{ref:z.setFloating,"data-radix-popper-content-wrapper":"",style:{...K,transform:re?K.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:$t,"--radix-popper-transform-origin":[(Pe=j.transformOrigin)==null?void 0:Pe.x,(Re=j.transformOrigin)==null?void 0:Re.y].join(" "),...((Me=j.hide)==null?void 0:Me.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:h.jsx(SK,{scope:n,placedSide:V,onArrowChange:k,arrowX:ie,arrowY:vt,shouldHideArrow:We,children:h.jsx($e.div,{"data-side":V,"data-align":ee,...g,ref:b,style:{...g.style,animation:re?void 0:"none"}})})})});Wj.displayName=nS;var Kj="PopperArrow",_K={top:"bottom",right:"left",bottom:"top",left:"right"},Gj=w.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=kK(Kj,r),o=_K[i.placedSide];return h.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:h.jsx(bK,{...s,ref:n,style:{...s.style,display:"block"}})})});Gj.displayName=Kj;function EK(t){return t!==null}var CK=t=>({name:"transformOrigin",options:t,fn(e){var y,v,x;const{placement:n,rects:r,middlewareData:s}=e,o=((y=s.arrow)==null?void 0:y.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,u]=Qj(n),d={start:"0%",center:"50%",end:"100%"}[u],f=(((v=s.arrow)==null?void 0:v.x)??0)+a/2,p=(((x=s.arrow)==null?void 0:x.y)??0)+l/2;let m="",g="";return c==="bottom"?(m=o?d:`${f}px`,g=`${-l}px`):c==="top"?(m=o?d:`${f}px`,g=`${r.floating.height+l}px`):c==="right"?(m=`${-l}px`,g=o?d:`${p}px`):c==="left"&&(m=`${r.floating.width+l}px`,g=o?d:`${p}px`),{data:{x:m,y:g}}}});function Qj(t){const[e,n="center"]=t.split("-");return[e,n]}var NK=Vj,TK=qj,OK=Wj,AK=Gj,RK="Portal",Jj=w.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=w.useState(!1);mn(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?KO.createPortal(h.jsx($e.div,{...r,ref:e}),o):null});Jj.displayName=RK;function jK(t){const e=IK(t),n=w.forwardRef((r,s)=>{const{children:i,...o}=r,a=w.Children.toArray(i),l=a.find(MK);if(l){const c=l.props.children,u=a.map(d=>d===l?w.Children.count(c)>1?w.Children.only(null):w.isValidElement(c)?c.props.children:null:d);return h.jsx(e,{...o,ref:s,children:w.isValidElement(c)?w.cloneElement(c,void 0,u):null})}return h.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}function IK(t){const e=w.forwardRef((n,r)=>{const{children:s,...i}=n;if(w.isValidElement(s)){const o=LK(s),a=DK(i,s.props);return s.type!==w.Fragment&&(a.ref=r?Zd(r,o):o),w.cloneElement(s,a)}return w.Children.count(s)>1?w.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var PK=Symbol("radix.slottable");function MK(t){return w.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===PK}function DK(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const l=i(...a);return s(...a),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function LK(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Yj=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),$K="VisuallyHidden",FK=w.forwardRef((t,e)=>h.jsx($e.span,{...t,ref:e,style:{...Yj,...t.style}}));FK.displayName=$K;var BK=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Ja=new WeakMap,Bf=new WeakMap,Uf={},Ay=0,Zj=function(t){return t&&(t.host||Zj(t.parentNode))},UK=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=Zj(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},zK=function(t,e,n,r){var s=UK(e,Array.isArray(t)?t:[t]);Uf[n]||(Uf[n]=new WeakMap);var i=Uf[n],o=[],a=new Set,l=new Set(s),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};s.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var p=f.getAttribute(r),m=p!==null&&p!=="false",g=(Ja.get(f)||0)+1,y=(i.get(f)||0)+1;Ja.set(f,g),i.set(f,y),o.push(f),g===1&&m&&Bf.set(f,!0),y===1&&f.setAttribute(n,"true"),m||f.setAttribute(r,"true")}catch(v){console.error("aria-hidden: cannot operate on ",f,v)}})};return u(e),a.clear(),Ay++,function(){o.forEach(function(d){var f=Ja.get(d)-1,p=i.get(d)-1;Ja.set(d,f),i.set(d,p),f||(Bf.has(d)||d.removeAttribute(r),Bf.delete(d)),p||d.removeAttribute(n)}),Ay--,Ay||(Ja=new WeakMap,Ja=new WeakMap,Bf=new WeakMap,Uf={})}},VK=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=BK(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),zK(r,s,n,"aria-hidden")):function(){return null}},wh="right-scroll-bar-position",Sh="width-before-scroll-bar",HK="with-scroll-bars-hidden",qK="--removed-body-scroll-bar-size";function Ry(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function WK(t,e){var n=w.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var KK=typeof window<"u"?w.useLayoutEffect:w.useEffect,ME=new WeakMap;function GK(t,e){var n=WK(null,function(r){return t.forEach(function(s){return Ry(s,r)})});return KK(function(){var r=ME.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(a){i.has(a)||Ry(a,null)}),i.forEach(function(a){s.has(a)||Ry(a,o)})}ME.set(n,t)},[t]),n}function QK(t){return t}function JK(t,e){e===void 0&&(e=QK);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var l=function(){var u=o;o=[],u.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return s}function YK(t){t===void 0&&(t={});var e=JK(null);return e.options=cs({async:!0,ssr:!1},t),e}var Xj=function(t){var e=t.sideCar,n=Pc(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return w.createElement(r,cs({},n))};Xj.isSideCarExport=!0;function ZK(t,e){return t.useMedium(e),Xj}var eI=YK(),jy=function(){},fg=w.forwardRef(function(t,e){var n=w.useRef(null),r=w.useState({onScrollCapture:jy,onWheelCapture:jy,onTouchMoveCapture:jy}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,f=t.sideCar,p=t.noRelative,m=t.noIsolation,g=t.inert,y=t.allowPinchZoom,v=t.as,x=v===void 0?"div":v,b=t.gapMode,S=Pc(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=f,E=GK([n,e]),_=cs(cs({},S),s);return w.createElement(w.Fragment,null,u&&w.createElement(k,{sideCar:eI,removeScrollBar:c,shards:d,noRelative:p,noIsolation:m,inert:g,setCallbacks:i,allowPinchZoom:!!y,lockRef:n,gapMode:b}),o?w.cloneElement(w.Children.only(a),cs(cs({},_),{ref:E})):w.createElement(x,cs({},_,{className:l,ref:E}),a))});fg.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};fg.classNames={fullWidth:Sh,zeroRight:wh};var XK=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function e9(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=XK();return e&&t.setAttribute("nonce",e),t}function t9(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function n9(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var r9=function(){var t=0,e=null;return{add:function(n){t==0&&(e=e9())&&(t9(e,n),n9(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},s9=function(){var t=r9();return function(e,n){w.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},tI=function(){var t=s9(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},i9={left:0,top:0,right:0,gap:0},Iy=function(t){return parseInt(t||"",10)||0},o9=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Iy(n),Iy(r),Iy(s)]},a9=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return i9;var e=o9(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},l9=tI(),Pl="data-scroll-locked",c9=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(HK,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Pl,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(wh,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Sh,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(wh," .").concat(wh,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Sh," .").concat(Sh,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Pl,`] {
    `).concat(qK,": ").concat(a,`px;
  }
`)},DE=function(){var t=parseInt(document.body.getAttribute(Pl)||"0",10);return isFinite(t)?t:0},u9=function(){w.useEffect(function(){return document.body.setAttribute(Pl,(DE()+1).toString()),function(){var t=DE()-1;t<=0?document.body.removeAttribute(Pl):document.body.setAttribute(Pl,t.toString())}},[])},d9=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;u9();var i=w.useMemo(function(){return a9(s)},[s]);return w.createElement(l9,{styles:c9(i,!e,s,n?"":"!important")})},ox=!1;if(typeof window<"u")try{var zf=Object.defineProperty({},"passive",{get:function(){return ox=!0,!0}});window.addEventListener("test",zf,zf),window.removeEventListener("test",zf,zf)}catch{ox=!1}var Ya=ox?{passive:!1}:!1,f9=function(t){return t.tagName==="TEXTAREA"},nI=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!f9(t)&&n[e]==="visible")},h9=function(t){return nI(t,"overflowY")},p9=function(t){return nI(t,"overflowX")},LE=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=rI(t,r);if(s){var i=sI(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},m9=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},g9=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},rI=function(t,e){return t==="v"?h9(e):p9(e)},sI=function(t,e){return t==="v"?m9(e):g9(e)},y9=function(t,e){return t==="h"&&e==="rtl"?-1:1},v9=function(t,e,n,r,s){var i=y9(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,l=e.contains(a),c=!1,u=o>0,d=0,f=0;do{if(!a)break;var p=sI(t,a),m=p[0],g=p[1],y=p[2],v=g-y-i*m;(m||v)&&rI(t,a)&&(d+=v,f+=m);var x=a.parentNode;a=x&&x.nodeType===Node.DOCUMENT_FRAGMENT_NODE?x.host:x}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&Math.abs(d)<1||!u&&Math.abs(f)<1)&&(c=!0),c},Vf=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},$E=function(t){return[t.deltaX,t.deltaY]},FE=function(t){return t&&"current"in t?t.current:t},x9=function(t,e){return t[0]===e[0]&&t[1]===e[1]},b9=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},w9=0,Za=[];function S9(t){var e=w.useRef([]),n=w.useRef([0,0]),r=w.useRef(),s=w.useState(w9++)[0],i=w.useState(tI)[0],o=w.useRef(t);w.useEffect(function(){o.current=t},[t]),w.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var g=y5([t.lockRef.current],(t.shards||[]).map(FE),!0).filter(Boolean);return g.forEach(function(y){return y.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=w.useCallback(function(g,y){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var v=Vf(g),x=n.current,b="deltaX"in g?g.deltaX:x[0]-v[0],S="deltaY"in g?g.deltaY:x[1]-v[1],k,E=g.target,_=Math.abs(b)>Math.abs(S)?"h":"v";if("touches"in g&&_==="h"&&E.type==="range")return!1;var T=window.getSelection(),A=T&&T.anchorNode,O=A?A===E||A.contains(E):!1;if(O)return!1;var U=LE(_,E);if(!U)return!0;if(U?k=_:(k=_==="v"?"h":"v",U=LE(_,E)),!U)return!1;if(!r.current&&"changedTouches"in g&&(b||S)&&(r.current=k),!k)return!0;var P=r.current||k;return v9(P,y,g,P==="h"?b:S)},[]),l=w.useCallback(function(g){var y=g;if(!(!Za.length||Za[Za.length-1]!==i)){var v="deltaY"in y?$E(y):Vf(y),x=e.current.filter(function(k){return k.name===y.type&&(k.target===y.target||y.target===k.shadowParent)&&x9(k.delta,v)})[0];if(x&&x.should){y.cancelable&&y.preventDefault();return}if(!x){var b=(o.current.shards||[]).map(FE).filter(Boolean).filter(function(k){return k.contains(y.target)}),S=b.length>0?a(y,b[0]):!o.current.noIsolation;S&&y.cancelable&&y.preventDefault()}}},[]),c=w.useCallback(function(g,y,v,x){var b={name:g,delta:y,target:v,should:x,shadowParent:k9(v)};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(S){return S!==b})},1)},[]),u=w.useCallback(function(g){n.current=Vf(g),r.current=void 0},[]),d=w.useCallback(function(g){c(g.type,$E(g),g.target,a(g,t.lockRef.current))},[]),f=w.useCallback(function(g){c(g.type,Vf(g),g.target,a(g,t.lockRef.current))},[]);w.useEffect(function(){return Za.push(i),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Ya),document.addEventListener("touchmove",l,Ya),document.addEventListener("touchstart",u,Ya),function(){Za=Za.filter(function(g){return g!==i}),document.removeEventListener("wheel",l,Ya),document.removeEventListener("touchmove",l,Ya),document.removeEventListener("touchstart",u,Ya)}},[]);var p=t.removeScrollBar,m=t.inert;return w.createElement(w.Fragment,null,m?w.createElement(i,{styles:b9(s)}):null,p?w.createElement(d9,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function k9(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const _9=ZK(eI,S9);var iI=w.forwardRef(function(t,e){return w.createElement(fg,cs({},t,{ref:e,sideCar:_9}))});iI.classNames=fg.classNames;var E9=[" ","Enter","ArrowUp","ArrowDown"],C9=[" ","Enter"],Na="Select",[hg,pg,N9]=vj(Na),[$c]=$a(Na,[N9,Uj]),mg=Uj(),[T9,Eo]=$c(Na),[O9,A9]=$c(Na),oI=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:f,required:p,form:m}=t,g=mg(e),[y,v]=w.useState(null),[x,b]=w.useState(null),[S,k]=w.useState(!1),E=Uw(c),[_,T]=kd({prop:r,defaultProp:s??!1,onChange:i,caller:Na}),[A,O]=kd({prop:o,defaultProp:a,onChange:l,caller:Na}),U=w.useRef(null),P=y?m||!!y.closest("form"):!0,[L,z]=w.useState(new Set),K=Array.from(L).map(W=>W.props.value).join(";");return h.jsx(NK,{...g,children:h.jsxs(T9,{required:p,scope:e,trigger:y,onTriggerChange:v,valueNode:x,onValueNodeChange:b,valueNodeHasChildren:S,onValueNodeHasChildrenChange:k,contentId:ag(),value:A,onValueChange:O,open:_,onOpenChange:T,dir:E,triggerPointerDownPosRef:U,disabled:f,children:[h.jsx(hg.Provider,{scope:e,children:h.jsx(O9,{scope:t.__scopeSelect,onNativeOptionAdd:w.useCallback(W=>{z(re=>new Set(re).add(W))},[]),onNativeOptionRemove:w.useCallback(W=>{z(re=>{const j=new Set(re);return j.delete(W),j})},[]),children:n})}),P?h.jsxs(AI,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:d,value:A,onChange:W=>O(W.target.value),disabled:f,form:m,children:[A===void 0?h.jsx("option",{value:""}):null,Array.from(L)]},K):null]})})};oI.displayName=Na;var aI="SelectTrigger",lI=w.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=mg(n),o=Eo(aI,n),a=o.disabled||r,l=ot(e,o.onTriggerChange),c=pg(n),u=w.useRef("touch"),[d,f,p]=jI(g=>{const y=c().filter(b=>!b.disabled),v=y.find(b=>b.value===o.value),x=II(y,g,v);x!==void 0&&o.onValueChange(x.value)}),m=g=>{a||(o.onOpenChange(!0),p()),g&&(o.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return h.jsx(TK,{asChild:!0,...i,children:h.jsx($e.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":RI(o.value)?"":void 0,...s,ref:l,onClick:Ie(s.onClick,g=>{g.currentTarget.focus(),u.current!=="mouse"&&m(g)}),onPointerDown:Ie(s.onPointerDown,g=>{u.current=g.pointerType;const y=g.target;y.hasPointerCapture(g.pointerId)&&y.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(m(g),g.preventDefault())}),onKeyDown:Ie(s.onKeyDown,g=>{const y=d.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&f(g.key),!(y&&g.key===" ")&&E9.includes(g.key)&&(m(),g.preventDefault())})})})});lI.displayName=aI;var cI="SelectValue",uI=w.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:o="",...a}=t,l=Eo(cI,n),{onValueNodeHasChildrenChange:c}=l,u=i!==void 0,d=ot(e,l.onValueNodeChange);return mn(()=>{c(u)},[c,u]),h.jsx($e.span,{...a,ref:d,style:{pointerEvents:"none"},children:RI(l.value)?h.jsx(h.Fragment,{children:o}):i})});uI.displayName=cI;var R9="SelectIcon",dI=w.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return h.jsx($e.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});dI.displayName=R9;var j9="SelectPortal",fI=t=>h.jsx(Jj,{asChild:!0,...t});fI.displayName=j9;var Ta="SelectContent",hI=w.forwardRef((t,e)=>{const n=Eo(Ta,t.__scopeSelect),[r,s]=w.useState();if(mn(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?ko.createPortal(h.jsx(pI,{scope:t.__scopeSelect,children:h.jsx(hg.Slot,{scope:t.__scopeSelect,children:h.jsx("div",{children:t.children})})}),i):null}return h.jsx(mI,{...t,ref:e})});hI.displayName=Ta;var Rr=10,[pI,Co]=$c(Ta),I9="SelectContentImpl",P9=jK("SelectContent.RemoveScroll"),mI=w.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:p,sticky:m,hideWhenDetached:g,avoidCollisions:y,...v}=t,x=Eo(Ta,n),[b,S]=w.useState(null),[k,E]=w.useState(null),_=ot(e,te=>S(te)),[T,A]=w.useState(null),[O,U]=w.useState(null),P=pg(n),[L,z]=w.useState(!1),K=w.useRef(!1);w.useEffect(()=>{if(b)return VK(b)},[b]),r8();const W=w.useCallback(te=>{const[Fe,...jt]=P().map(Me=>Me.ref.current),[Pe]=jt.slice(-1),Re=document.activeElement;for(const Me of te)if(Me===Re||(Me==null||Me.scrollIntoView({block:"nearest"}),Me===Fe&&k&&(k.scrollTop=0),Me===Pe&&k&&(k.scrollTop=k.scrollHeight),Me==null||Me.focus(),document.activeElement!==Re))return},[P,k]),re=w.useCallback(()=>W([T,b]),[W,T,b]);w.useEffect(()=>{L&&re()},[L,re]);const{onOpenChange:j,triggerPointerDownPosRef:V}=x;w.useEffect(()=>{if(b){let te={x:0,y:0};const Fe=Pe=>{var Re,Me;te={x:Math.abs(Math.round(Pe.pageX)-(((Re=V.current)==null?void 0:Re.x)??0)),y:Math.abs(Math.round(Pe.pageY)-(((Me=V.current)==null?void 0:Me.y)??0))}},jt=Pe=>{te.x<=10&&te.y<=10?Pe.preventDefault():b.contains(Pe.target)||j(!1),document.removeEventListener("pointermove",Fe),V.current=null};return V.current!==null&&(document.addEventListener("pointermove",Fe),document.addEventListener("pointerup",jt,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Fe),document.removeEventListener("pointerup",jt,{capture:!0})}}},[b,j,V]),w.useEffect(()=>{const te=()=>j(!1);return window.addEventListener("blur",te),window.addEventListener("resize",te),()=>{window.removeEventListener("blur",te),window.removeEventListener("resize",te)}},[j]);const[ee,me]=jI(te=>{const Fe=P().filter(Re=>!Re.disabled),jt=Fe.find(Re=>Re.ref.current===document.activeElement),Pe=II(Fe,te,jt);Pe&&setTimeout(()=>Pe.ref.current.focus())}),ie=w.useCallback((te,Fe,jt)=>{const Pe=!K.current&&!jt;(x.value!==void 0&&x.value===Fe||Pe)&&(A(te),Pe&&(K.current=!0))},[x.value]),vt=w.useCallback(()=>b==null?void 0:b.focus(),[b]),We=w.useCallback((te,Fe,jt)=>{const Pe=!K.current&&!jt;(x.value!==void 0&&x.value===Fe||Pe)&&U(te)},[x.value]),$t=r==="popper"?ax:gI,D=$t===ax?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:p,sticky:m,hideWhenDetached:g,avoidCollisions:y}:{};return h.jsx(pI,{scope:n,content:b,viewport:k,onViewportChange:E,itemRefCallback:ie,selectedItem:T,onItemLeave:vt,itemTextRefCallback:We,focusSelectedItem:re,selectedItemText:O,position:r,isPositioned:L,searchRef:ee,children:h.jsx(iI,{as:P9,allowPinchZoom:!0,children:h.jsx(Sj,{asChild:!0,trapped:x.open,onMountAutoFocus:te=>{te.preventDefault()},onUnmountAutoFocus:Ie(s,te=>{var Fe;(Fe=x.trigger)==null||Fe.focus({preventScroll:!0}),te.preventDefault()}),children:h.jsx(bj,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:te=>te.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:h.jsx($t,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:te=>te.preventDefault(),...v,...D,onPlaced:()=>z(!0),ref:_,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:Ie(v.onKeyDown,te=>{const Fe=te.ctrlKey||te.altKey||te.metaKey;if(te.key==="Tab"&&te.preventDefault(),!Fe&&te.key.length===1&&me(te.key),["ArrowUp","ArrowDown","Home","End"].includes(te.key)){let Pe=P().filter(Re=>!Re.disabled).map(Re=>Re.ref.current);if(["ArrowUp","End"].includes(te.key)&&(Pe=Pe.slice().reverse()),["ArrowUp","ArrowDown"].includes(te.key)){const Re=te.target,Me=Pe.indexOf(Re);Pe=Pe.slice(Me+1)}setTimeout(()=>W(Pe)),te.preventDefault()}})})})})})})});mI.displayName=I9;var M9="SelectItemAlignedPosition",gI=w.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=Eo(Ta,n),o=Co(Ta,n),[a,l]=w.useState(null),[c,u]=w.useState(null),d=ot(e,_=>u(_)),f=pg(n),p=w.useRef(!1),m=w.useRef(!0),{viewport:g,selectedItem:y,selectedItemText:v,focusSelectedItem:x}=o,b=w.useCallback(()=>{if(i.trigger&&i.valueNode&&a&&c&&g&&y&&v){const _=i.trigger.getBoundingClientRect(),T=c.getBoundingClientRect(),A=i.valueNode.getBoundingClientRect(),O=v.getBoundingClientRect();if(i.dir!=="rtl"){const Re=O.left-T.left,Me=A.left-Re,sn=_.left-Me,lr=_.width+sn,ai=Math.max(lr,T.width),li=window.innerWidth-Rr,Ao=pE(Me,[Rr,Math.max(Rr,li-ai)]);a.style.minWidth=lr+"px",a.style.left=Ao+"px"}else{const Re=T.right-O.right,Me=window.innerWidth-A.right-Re,sn=window.innerWidth-_.right-Me,lr=_.width+sn,ai=Math.max(lr,T.width),li=window.innerWidth-Rr,Ao=pE(Me,[Rr,Math.max(Rr,li-ai)]);a.style.minWidth=lr+"px",a.style.right=Ao+"px"}const U=f(),P=window.innerHeight-Rr*2,L=g.scrollHeight,z=window.getComputedStyle(c),K=parseInt(z.borderTopWidth,10),W=parseInt(z.paddingTop,10),re=parseInt(z.borderBottomWidth,10),j=parseInt(z.paddingBottom,10),V=K+W+L+j+re,ee=Math.min(y.offsetHeight*5,V),me=window.getComputedStyle(g),ie=parseInt(me.paddingTop,10),vt=parseInt(me.paddingBottom,10),We=_.top+_.height/2-Rr,$t=P-We,D=y.offsetHeight/2,te=y.offsetTop+D,Fe=K+W+te,jt=V-Fe;if(Fe<=We){const Re=U.length>0&&y===U[U.length-1].ref.current;a.style.bottom="0px";const Me=c.clientHeight-g.offsetTop-g.offsetHeight,sn=Math.max($t,D+(Re?vt:0)+Me+re),lr=Fe+sn;a.style.height=lr+"px"}else{const Re=U.length>0&&y===U[0].ref.current;a.style.top="0px";const sn=Math.max(We,K+g.offsetTop+(Re?ie:0)+D)+jt;a.style.height=sn+"px",g.scrollTop=Fe-We+g.offsetTop}a.style.margin=`${Rr}px 0`,a.style.minHeight=ee+"px",a.style.maxHeight=P+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[f,i.trigger,i.valueNode,a,c,g,y,v,i.dir,r]);mn(()=>b(),[b]);const[S,k]=w.useState();mn(()=>{c&&k(window.getComputedStyle(c).zIndex)},[c]);const E=w.useCallback(_=>{_&&m.current===!0&&(b(),x==null||x(),m.current=!1)},[b,x]);return h.jsx(L9,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:p,onScrollButtonChange:E,children:h.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:h.jsx($e.div,{...s,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});gI.displayName=M9;var D9="SelectPopperPosition",ax=w.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Rr,...i}=t,o=mg(n);return h.jsx(OK,{...o,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});ax.displayName=D9;var[L9,rS]=$c(Ta,{}),lx="SelectViewport",yI=w.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=Co(lx,n),o=rS(lx,n),a=ot(e,i.onViewportChange),l=w.useRef(0);return h.jsxs(h.Fragment,{children:[h.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),h.jsx(hg.Slot,{scope:n,children:h.jsx($e.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Ie(s.onScroll,c=>{const u=c.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&d){const p=Math.abs(l.current-u.scrollTop);if(p>0){const m=window.innerHeight-Rr*2,g=parseFloat(d.style.minHeight),y=parseFloat(d.style.height),v=Math.max(g,y);if(v<m){const x=v+p,b=Math.min(m,x),S=x-b;d.style.height=b+"px",d.style.bottom==="0px"&&(u.scrollTop=S>0?S:0,d.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});yI.displayName=lx;var vI="SelectGroup",[$9,F9]=$c(vI),B9=w.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=ag();return h.jsx($9,{scope:n,id:s,children:h.jsx($e.div,{role:"group","aria-labelledby":s,...r,ref:e})})});B9.displayName=vI;var xI="SelectLabel",bI=w.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=F9(xI,n);return h.jsx($e.div,{id:s.id,...r,ref:e})});bI.displayName=xI;var kp="SelectItem",[U9,wI]=$c(kp),SI=w.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...o}=t,a=Eo(kp,n),l=Co(kp,n),c=a.value===r,[u,d]=w.useState(i??""),[f,p]=w.useState(!1),m=ot(e,x=>{var b;return(b=l.itemRefCallback)==null?void 0:b.call(l,x,r,s)}),g=ag(),y=w.useRef("touch"),v=()=>{s||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return h.jsx(U9,{scope:n,value:r,disabled:s,textId:g,isSelected:c,onItemTextChange:w.useCallback(x=>{d(b=>b||((x==null?void 0:x.textContent)??"").trim())},[]),children:h.jsx(hg.ItemSlot,{scope:n,value:r,disabled:s,textValue:u,children:h.jsx($e.div,{role:"option","aria-labelledby":g,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:m,onFocus:Ie(o.onFocus,()=>p(!0)),onBlur:Ie(o.onBlur,()=>p(!1)),onClick:Ie(o.onClick,()=>{y.current!=="mouse"&&v()}),onPointerUp:Ie(o.onPointerUp,()=>{y.current==="mouse"&&v()}),onPointerDown:Ie(o.onPointerDown,x=>{y.current=x.pointerType}),onPointerMove:Ie(o.onPointerMove,x=>{var b;y.current=x.pointerType,s?(b=l.onItemLeave)==null||b.call(l):y.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ie(o.onPointerLeave,x=>{var b;x.currentTarget===document.activeElement&&((b=l.onItemLeave)==null||b.call(l))}),onKeyDown:Ie(o.onKeyDown,x=>{var S;((S=l.searchRef)==null?void 0:S.current)!==""&&x.key===" "||(C9.includes(x.key)&&v(),x.key===" "&&x.preventDefault())})})})})});SI.displayName=kp;var pu="SelectItemText",kI=w.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,o=Eo(pu,n),a=Co(pu,n),l=wI(pu,n),c=A9(pu,n),[u,d]=w.useState(null),f=ot(e,v=>d(v),l.onItemTextChange,v=>{var x;return(x=a.itemTextRefCallback)==null?void 0:x.call(a,v,l.value,l.disabled)}),p=u==null?void 0:u.textContent,m=w.useMemo(()=>h.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:g,onNativeOptionRemove:y}=c;return mn(()=>(g(m),()=>y(m)),[g,y,m]),h.jsxs(h.Fragment,{children:[h.jsx($e.span,{id:l.textId,...i,ref:f}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?ko.createPortal(i.children,o.valueNode):null]})});kI.displayName=pu;var _I="SelectItemIndicator",EI=w.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return wI(_I,n).isSelected?h.jsx($e.span,{"aria-hidden":!0,...r,ref:e}):null});EI.displayName=_I;var cx="SelectScrollUpButton",CI=w.forwardRef((t,e)=>{const n=Co(cx,t.__scopeSelect),r=rS(cx,t.__scopeSelect),[s,i]=w.useState(!1),o=ot(e,r.onScrollButtonChange);return mn(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;i(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?h.jsx(TI,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});CI.displayName=cx;var ux="SelectScrollDownButton",NI=w.forwardRef((t,e)=>{const n=Co(ux,t.__scopeSelect),r=rS(ux,t.__scopeSelect),[s,i]=w.useState(!1),o=ot(e,r.onScrollButtonChange);return mn(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;i(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?h.jsx(TI,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});NI.displayName=ux;var TI=w.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=Co("SelectScrollButton",n),o=w.useRef(null),a=pg(n),l=w.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return w.useEffect(()=>()=>l(),[l]),mn(()=>{var u;const c=a().find(d=>d.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[a]),h.jsx($e.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:Ie(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Ie(s.onPointerMove,()=>{var c;(c=i.onItemLeave)==null||c.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Ie(s.onPointerLeave,()=>{l()})})}),z9="SelectSeparator",OI=w.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return h.jsx($e.div,{"aria-hidden":!0,...r,ref:e})});OI.displayName=z9;var dx="SelectArrow",V9=w.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=mg(n),i=Eo(dx,n),o=Co(dx,n);return i.open&&o.position==="popper"?h.jsx(AK,{...s,...r,ref:e}):null});V9.displayName=dx;var H9="SelectBubbleInput",AI=w.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const s=w.useRef(null),i=ot(r,s),o=Mw(e);return w.useEffect(()=>{const a=s.current;if(!a)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const d=new Event("change",{bubbles:!0});u.call(a,e),a.dispatchEvent(d)}},[o,e]),h.jsx($e.select,{...n,style:{...Yj,...n.style},ref:i,defaultValue:e})});AI.displayName=H9;function RI(t){return t===""||t===void 0}function jI(t){const e=go(t),n=w.useRef(""),r=w.useRef(0),s=w.useCallback(o=>{const a=n.current+o;e(a),function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),i=w.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return w.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function II(t,e,n){const s=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=q9(t,Math.max(i,0));s.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.textValue.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function q9(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var W9=oI,PI=lI,K9=uI,G9=dI,Q9=fI,MI=hI,J9=yI,DI=bI,LI=SI,Y9=kI,Z9=EI,$I=CI,FI=NI,BI=OI;const fx=W9,hx=K9,_p=w.forwardRef(({className:t,children:e,...n},r)=>h.jsxs(PI,{ref:r,className:tt("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,h.jsx(G9,{asChild:!0,children:h.jsx(dR,{className:"h-4 w-4 opacity-50"})})]}));_p.displayName=PI.displayName;const UI=w.forwardRef(({className:t,...e},n)=>h.jsx($I,{ref:n,className:tt("flex cursor-default items-center justify-center py-1",t),...e,children:h.jsx(Kz,{className:"h-4 w-4"})}));UI.displayName=$I.displayName;const zI=w.forwardRef(({className:t,...e},n)=>h.jsx(FI,{ref:n,className:tt("flex cursor-default items-center justify-center py-1",t),...e,children:h.jsx(dR,{className:"h-4 w-4"})}));zI.displayName=FI.displayName;const Ep=w.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>h.jsx(Q9,{children:h.jsxs(MI,{ref:s,className:tt("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[h.jsx(UI,{}),h.jsx(J9,{className:tt("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),h.jsx(zI,{})]})}));Ep.displayName=MI.displayName;const X9=w.forwardRef(({className:t,...e},n)=>h.jsx(DI,{ref:n,className:tt("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));X9.displayName=DI.displayName;const Cp=w.forwardRef(({className:t,children:e,...n},r)=>h.jsxs(LI,{ref:r,className:tt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(Z9,{children:h.jsx(uR,{className:"h-4 w-4"})})}),h.jsx(Y9,{children:e})]}));Cp.displayName=LI.displayName;const e7=w.forwardRef(({className:t,...e},n)=>h.jsx(BI,{ref:n,className:tt("-mx-1 my-1 h-px bg-muted",t),...e}));e7.displayName=BI.displayName;const t7=Jd({domain_id:hn().uuid(),slug:hn().regex(/^[a-z0-9_]+$/,"Slug must contain only lowercase letters, numbers, and underscores").min(1,"Slug is required").max(100,"Slug is too long"),title:hn().min(1,"Title is required").max(200),description:hn().optional(),difficulty_level:q0.number().min(1).max(5),sort_order:q0.number().default(0),is_published:Ow().default(!1)});function VI({initialData:t}){const e=ws(),n=rW(),r=sW(),{data:s,isLoading:i}=Iw(),o=pd({resolver:md(t7),defaultValues:{domain_id:(t==null?void 0:t.domain_id)||"",slug:(t==null?void 0:t.slug)||"",title:(t==null?void 0:t.title)||"",description:(t==null?void 0:t.description)||"",difficulty_level:(t==null?void 0:t.difficulty_level)||1,sort_order:(t==null?void 0:t.sort_order)||0,is_published:(t==null?void 0:t.is_published)||!1}}),a=async c=>{try{t?await r.mutateAsync({id:t.id,...c}):await n.mutateAsync(c),e("/skills")}catch(u){console.error("Failed to save skill:",u)}},l=n.isPending||r.isPending;return i?h.jsx(oc,{className:"animate-spin"}):h.jsx(aj,{...o,children:h.jsxs("form",{onSubmit:o.handleSubmit(a),className:"space-y-6 max-w-2xl",children:[h.jsx(Kn,{control:o.control,name:"domain_id",render:({field:c})=>h.jsxs(Pn,{children:[h.jsx(Mn,{children:"Domain"}),h.jsxs(fx,{onValueChange:c.onChange,defaultValue:c.value,children:[h.jsx(Dn,{children:h.jsx(_p,{children:h.jsx(hx,{placeholder:"Select a domain"})})}),h.jsx(Ep,{children:s==null?void 0:s.map(u=>h.jsx(Cp,{value:u.id,children:u.title},u.id))})]}),h.jsx(hu,{children:"The domain this skill belongs to."}),h.jsx(gr,{})]})}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsx(Kn,{control:o.control,name:"title",render:({field:c})=>h.jsxs(Pn,{children:[h.jsx(Mn,{children:"Title"}),h.jsx(Dn,{children:h.jsx(dn,{placeholder:"e.g. Addition",...c})}),h.jsx(gr,{})]})}),h.jsx(Kn,{control:o.control,name:"slug",render:({field:c})=>h.jsxs(Pn,{children:[h.jsx(Mn,{children:"Slug"}),h.jsx(Dn,{children:h.jsx(dn,{placeholder:"e.g. addition",...c})}),h.jsx(hu,{children:"Unique identifier (URL-safe)."}),h.jsx(gr,{})]})})]}),h.jsx(Kn,{control:o.control,name:"description",render:({field:c})=>h.jsxs(Pn,{children:[h.jsx(Mn,{children:"Description"}),h.jsx(Dn,{children:h.jsx(uj,{placeholder:"Describe this skill...",className:"resize-none",...c})}),h.jsx(gr,{})]})}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsx(Kn,{control:o.control,name:"difficulty_level",render:({field:c})=>h.jsxs(Pn,{children:[h.jsx(Mn,{children:"Difficulty Level (1-5)"}),h.jsx(Dn,{children:h.jsx(dn,{type:"number",min:1,max:5,...c})}),h.jsx(gr,{})]})}),h.jsx(Kn,{control:o.control,name:"sort_order",render:({field:c})=>h.jsxs(Pn,{children:[h.jsx(Mn,{children:"Sort Order"}),h.jsx(Dn,{children:h.jsx(dn,{type:"number",...c})}),h.jsx(hu,{children:"Order in which this appears in lists."}),h.jsx(gr,{})]})})]}),h.jsx(Kn,{control:o.control,name:"is_published",render:({field:c})=>h.jsxs(Pn,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[h.jsx(Dn,{children:h.jsx(Bw,{checked:c.value,onCheckedChange:c.onChange})}),h.jsxs("div",{className:"space-y-1 leading-none",children:[h.jsx(Mn,{children:"Published"}),h.jsx(hu,{children:"This skill will be visible to students when checked."})]})]})}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx(Et,{type:"button",variant:"outline",onClick:()=>e("/skills"),children:"Cancel"}),h.jsxs(Et,{type:"submit",disabled:l,children:[l&&h.jsx(oc,{className:"mr-2 h-4 w-4 animate-spin"}),t?"Update Skill":"Create Skill"]})]})]})})}function n7(){return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Create Skill"}),h.jsx("p",{className:"text-muted-foreground",children:"Add a new skill to a domain."})]}),h.jsx(VI,{})]})}function r7(){const{id:t}=mw(),{data:e,isLoading:n,error:r}=nW(t);return n?h.jsx("div",{className:"flex h-[50vh] justify-center items-center",children:h.jsx(oc,{className:"h-8 w-8 animate-spin"})}):r||!e?h.jsx("div",{children:"Skill not found"}):h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Edit Skill"}),h.jsx("p",{className:"text-muted-foreground",children:"Update skill details."})]}),h.jsx(VI,{initialData:e})]})}function s7(t){return Cr({queryKey:["questions-paginated",t],queryFn:async()=>{const{page:e,pageSize:n,search:r,status:s,skillId:i,sortBy:o="created_at",sortOrder:a="desc"}=t,l=(e-1)*n,c=l+n-1;let u=Y.from("questions").select(`
          *,
          skills (
            title,
            domains ( title )
          )
        `,{count:"exact"}).is("deleted_at",null);r&&(u=u.ilike("content",`%${r}%`)),s==="published"?u=u.eq("is_published",!0):s==="draft"&&(u=u.eq("is_published",!1)),i&&i!=="all"&&(u=u.eq("skill_id",i)),u=u.order(o,{ascending:a==="asc"}),u=u.range(l,c);const{data:d,error:f,count:p}=await u;if(f)throw f;const m=p??0,g=Math.ceil(m/n);return{data:d,totalCount:m,page:e,pageSize:n,totalPages:g}}})}function i7(t){return Cr({queryKey:["question",t],queryFn:async()=>{const{data:e,error:n}=await Y.from("questions").select("*").eq("id",t).single();if(n)throw n;return e},enabled:!!t})}function o7(){const t=Rt();return Kt({mutationFn:async e=>{const{data:n,error:r}=await Y.from("questions").insert(e).select().single();if(r)throw r;return n},onSuccess:()=>{t.invalidateQueries({queryKey:["questions"]}),t.invalidateQueries({queryKey:["questions-paginated"]})}})}function a7(){const t=Rt();return Kt({mutationFn:async({id:e,...n})=>{const{data:r,error:s}=await Y.from("questions").update(n).eq("id",e).select().single();if(s)throw s;return r},onSuccess:e=>{t.invalidateQueries({queryKey:["questions"]}),t.invalidateQueries({queryKey:["questions-paginated"]}),t.invalidateQueries({queryKey:["question",e.id]})}})}function l7(){const t=Rt();return Kt({mutationFn:async e=>{const{error:n}=await Y.from("questions").update({deleted_at:new Date().toISOString()}).eq("id",e);if(n)throw n},onSuccess:()=>{t.invalidateQueries({queryKey:["questions"]}),t.invalidateQueries({queryKey:["questions-paginated"]})}})}function c7(){const t=Rt();return Kt({mutationFn:async e=>{const{error:n}=await Y.from("questions").update({deleted_at:new Date().toISOString()}).in("id",e);if(n)throw n},onSuccess:()=>{t.invalidateQueries({queryKey:["questions"]}),t.invalidateQueries({queryKey:["questions-paginated"]}),t.invalidateQueries({queryKey:["dashboard-stats"]})}})}function u7(){const t=Rt();return Kt({mutationFn:async({ids:e,is_published:n})=>{const{error:r}=await Y.from("questions").update({is_published:n}).in("id",e);if(r)throw r},onSuccess:()=>{t.invalidateQueries({queryKey:["questions"]}),t.invalidateQueries({queryKey:["questions-paginated"]}),t.invalidateQueries({queryKey:["dashboard-stats"]})}})}function d7(){const t=Rt();return Kt({mutationFn:async e=>{const{data:n,error:r}=await Y.from("questions").select("*").eq("id",e).single();if(r)throw r;if(!n)throw new Error("Question not found");const{id:s,created_at:i,updated_at:o,...a}=n,l={...a,content:`${a.content} (Copy)`,is_published:!1},{data:c,error:u}=await Y.from("questions").insert(l).select().single();if(u)throw u;return c},onSuccess:()=>{t.invalidateQueries({queryKey:["questions"]}),t.invalidateQueries({queryKey:["questions-paginated"]}),t.invalidateQueries({queryKey:["dashboard-stats"]})}})}const f7=10;function h7(){const[t,e]=w.useState("all"),[n,r]=w.useState("all"),[s,i]=w.useState(""),[o,a]=w.useState(""),[l,c]=w.useState(new Set),[u,d]=w.useState(1),[f,p]=w.useState(f7),[m,g]=w.useState("created_at"),[y,v]=w.useState("desc"),{data:x,isLoading:b}=s7({page:u,pageSize:f,search:o,status:n,skillId:t,sortBy:m,sortOrder:y}),{data:S}=tj(),k=l7(),E=c7(),_=u7(),T=d7(),{showToast:A}=vw();w.useEffect(()=>{const D=setTimeout(()=>{a(s),d(1)},300);return()=>clearTimeout(D)},[s]),w.useEffect(()=>{c(new Set),d(1)},[t,n]);const O=(x==null?void 0:x.data)??[],U=(x==null?void 0:x.totalCount)??0,P=(x==null?void 0:x.totalPages)??1,L=D=>{m===D?v(y==="asc"?"desc":"asc"):(g(D),v("asc")),d(1)},z=()=>{l.size===O.length?c(new Set):c(new Set(O.map(D=>D.id)))},K=D=>{const te=new Set(l);te.has(D)?te.delete(D):te.add(D),c(te)},W=async()=>{if(l.size!==0&&confirm(`Are you sure you want to delete ${l.size} question(s)?`))try{await E.mutateAsync(Array.from(l)),A(`${l.size} question(s) deleted`,"success"),c(new Set)}catch{A("Failed to delete questions","error")}},re=async()=>{if(l.size!==0)try{await _.mutateAsync({ids:Array.from(l),is_published:!0}),A(`${l.size} question(s) published`,"success"),c(new Set)}catch{A("Failed to publish questions","error")}},j=async()=>{if(l.size!==0)try{await _.mutateAsync({ids:Array.from(l),is_published:!1}),A(`${l.size} question(s) unpublished`,"success"),c(new Set)}catch{A("Failed to unpublish questions","error")}},V=async D=>{if(confirm("Are you sure you want to delete this question?"))try{await k.mutateAsync(D),A("Question deleted","success")}catch{A("Failed to delete question","error")}},ee=async D=>{try{await T.mutateAsync(D),A("Question duplicated","success")}catch{A("Failed to duplicate question","error")}},me=D=>{d(D),c(new Set)},ie=D=>{p(D),d(1),c(new Set)},vt=O.length?l.size===O.length:!1,We=s||n!=="all"||t!=="all",$t=()=>{i(""),r("all"),e("all"),d(1)};return b?h.jsx("div",{className:"flex items-center justify-center h-64",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-purple-600 border-r-transparent"}),h.jsx("p",{className:"mt-4 text-gray-500",children:"Loading questions..."})]})}):h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Questions"}),h.jsx("p",{className:"mt-1 text-gray-500",children:"Manage curriculum questions"})]}),h.jsxs(Sn,{to:"/questions/new",className:"inline-flex items-center gap-2 px-5 py-3 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-medium rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl",children:[h.jsx(fs,{className:"h-5 w-5"}),"New Question"]})]}),h.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-4",children:[h.jsxs("div",{className:"space-y-4 mb-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("div",{className:"relative flex-1 max-w-md",children:[h.jsx(Xm,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),h.jsx("input",{type:"text",placeholder:"Search questions...",value:s,onChange:D=>i(D.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg border border-gray-200 bg-white text-gray-700 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-colors"})]}),We&&h.jsxs("button",{onClick:$t,className:"inline-flex items-center gap-1 px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[h.jsx(Sa,{className:"h-4 w-4"}),"Clear filters"]})]}),h.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Skill:"}),h.jsxs("select",{value:t,onChange:D=>e(D.target.value),className:"px-3 py-2 rounded-lg border border-gray-200 bg-white text-gray-700 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-colors text-sm min-w-[200px]",children:[h.jsx("option",{value:"all",children:"All Skills"}),S==null?void 0:S.map(D=>h.jsx("option",{value:D.id,children:D.title},D.id))]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Status:"}),h.jsxs("select",{value:n,onChange:D=>r(D.target.value),className:"px-3 py-2 rounded-lg border border-gray-200 bg-white text-gray-700 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-colors text-sm",children:[h.jsx("option",{value:"all",children:"All Status"}),h.jsx("option",{value:"published",children:"Published"}),h.jsx("option",{value:"draft",children:"Draft"})]})]}),l.size>0&&h.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[h.jsxs("span",{className:"text-sm text-gray-600",children:[l.size," selected"]}),h.jsxs("button",{onClick:re,disabled:_.isPending,className:"inline-flex items-center gap-1 px-3 py-2 text-sm font-medium text-green-600 hover:text-green-700 hover:bg-green-50 rounded-lg transition-colors",children:[h.jsx(yw,{className:"h-4 w-4"}),"Publish"]}),h.jsxs("button",{onClick:j,disabled:_.isPending,className:"inline-flex items-center gap-1 px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",children:[h.jsx(gw,{className:"h-4 w-4"}),"Unpublish"]}),h.jsxs("button",{onClick:W,disabled:E.isPending,className:"inline-flex items-center gap-1 px-3 py-2 text-sm font-medium text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors",children:[h.jsx(eg,{className:"h-4 w-4"}),"Delete"]})]})]})]}),h.jsx("div",{className:"overflow-hidden rounded-xl border border-gray-100",children:h.jsxs("table",{className:"w-full",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"bg-gray-50 border-b border-gray-100",children:[h.jsx("th",{className:"text-left px-4 py-4 w-10",children:h.jsx("button",{onClick:z,className:"text-gray-400 hover:text-gray-600",children:vt&&O.length>0?h.jsx(ic,{className:"h-5 w-5 text-purple-600"}):h.jsx(ac,{className:"h-5 w-5"})})}),h.jsx("th",{className:"text-left px-6 py-4",children:h.jsx(Ur,{label:"Content",column:"content",currentSortBy:m,currentSortOrder:y,onSort:L})}),h.jsx("th",{className:"text-left px-6 py-4",children:h.jsx(Ur,{label:"Type",column:"type",currentSortBy:m,currentSortOrder:y,onSort:L})}),h.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-600",children:"Skill"}),h.jsx("th",{className:"text-left px-6 py-4",children:h.jsx(Ur,{label:"Points",column:"points",currentSortBy:m,currentSortOrder:y,onSort:L})}),h.jsx("th",{className:"text-left px-6 py-4",children:h.jsx(Ur,{label:"Status",column:"is_published",currentSortBy:m,currentSortOrder:y,onSort:L})}),h.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-600",children:"Orphan"}),h.jsx("th",{className:"text-right px-6 py-4 text-sm font-semibold text-gray-600",children:"Actions"})]})}),h.jsx("tbody",{className:"divide-y divide-gray-100",children:O.length?O.map(D=>{var te;return h.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[h.jsx("td",{className:"px-4 py-4",children:h.jsx("button",{onClick:()=>K(D.id),className:"text-gray-400 hover:text-gray-600",children:l.has(D.id)?h.jsx(ic,{className:"h-5 w-5 text-purple-600"}):h.jsx(ac,{className:"h-5 w-5"})})}),h.jsx("td",{className:"px-6 py-4 max-w-[300px]",children:h.jsx("span",{className:"font-medium text-gray-900 truncate block",children:D.content})}),h.jsx("td",{className:"px-6 py-4",children:h.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium capitalize",children:D.type})}),h.jsx("td",{className:"px-6 py-4",children:h.jsx("span",{className:"text-gray-700",children:(te=D.skills)==null?void 0:te.title})}),h.jsx("td",{className:"px-6 py-4",children:h.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 rounded-lg bg-orange-100 text-orange-700 font-semibold text-sm",children:D.points})}),h.jsx("td",{className:"px-6 py-4",children:D.is_published?h.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm font-medium",children:"Published"}):h.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-sm font-medium",children:"Draft"})}),h.jsx("td",{className:"px-6 py-4",children:D.skill_id?h.jsx("span",{className:"px-3 py-1 bg-gray-50 text-gray-400 rounded-full text-sm font-medium",children:"-"}):h.jsx("span",{className:"px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-sm font-medium",children:"Orphan"})}),h.jsx("td",{className:"px-6 py-4 text-right",children:h.jsxs("div",{className:"flex items-center justify-end gap-2",children:[h.jsx(Sn,{to:`/questions/${D.id}/edit`,className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium hover:bg-blue-200 transition-colors",children:"Edit"}),h.jsx("button",{onClick:()=>ee(D.id),disabled:T.isPending,className:"px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full text-sm font-medium hover:bg-indigo-200 transition-colors disabled:opacity-50",children:"Duplicate"}),h.jsx("button",{onClick:()=>V(D.id),className:"px-3 py-1 bg-red-100 text-red-700 rounded-full text-sm font-medium hover:bg-red-200 transition-colors",children:"Delete"})]})})]},D.id)}):h.jsx("tr",{children:h.jsx("td",{colSpan:8,className:"px-6 py-12 text-center",children:h.jsxs("div",{className:"flex flex-col items-center",children:[h.jsx("div",{className:"flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 mb-4",children:h.jsx(fR,{className:"w-8 h-8 text-gray-400"})}),h.jsx("p",{className:"text-gray-500 mb-4",children:We?"No questions match your filters.":"No questions found. Create one to get started."}),We?h.jsxs("button",{onClick:$t,className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium rounded-lg transition-colors",children:[h.jsx(Sa,{className:"h-4 w-4"}),"Clear filters"]}):h.jsxs(Sn,{to:"/questions/new",className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white font-medium rounded-lg transition-colors",children:[h.jsx(fs,{className:"h-4 w-4"}),"Create Question"]})]})})})})]})}),h.jsx(Pw,{currentPage:u,totalPages:P,totalCount:U,pageSize:f,onPageChange:me,onPageSizeChange:ie})]})]})}function p7(){return h.jsx(h7,{})}var HI={exports:{}},qI={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gc=w;function m7(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var g7=typeof Object.is=="function"?Object.is:m7,y7=gc.useState,v7=gc.useEffect,x7=gc.useLayoutEffect,b7=gc.useDebugValue;function w7(t,e){var n=e(),r=y7({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return x7(function(){s.value=n,s.getSnapshot=e,Py(s)&&i({inst:s})},[t,n,e]),v7(function(){return Py(s)&&i({inst:s}),t(function(){Py(s)&&i({inst:s})})},[t]),b7(n),n}function Py(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!g7(t,n)}catch{return!0}}function S7(t,e){return e()}var k7=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?S7:w7;qI.useSyncExternalStore=gc.useSyncExternalStore!==void 0?gc.useSyncExternalStore:k7;HI.exports=qI;var sS=HI.exports;function Yt(t){this.content=t}Yt.prototype={constructor:Yt,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,s=r.find(t),i=r.content.slice();return s==-1?i.push(n||t,e):(i[s+1]=e,n&&(i[s]=n)),new Yt(i)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Yt(n)},addToStart:function(t,e){return new Yt([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Yt(n)},addBefore:function(t,e,n){var r=this.remove(e),s=r.content.slice(),i=r.find(t);return s.splice(i==-1?s.length:i,0,e,n),new Yt(s)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Yt.from(t),t.size?new Yt(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Yt.from(t),t.size?new Yt(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Yt.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Yt.from=function(t){if(t instanceof Yt)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Yt(e)};function WI(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let s=t.child(r),i=e.child(r);if(s==i){n+=s.nodeSize;continue}if(!s.sameMarkup(i))return n;if(s.isText&&s.text!=i.text){for(let o=0;s.text[o]==i.text[o];o++)n++;return n}if(s.content.size||i.content.size){let o=WI(s.content,i.content,n+1);if(o!=null)return o}n+=s.nodeSize}}function KI(t,e,n,r){for(let s=t.childCount,i=e.childCount;;){if(s==0||i==0)return s==i?null:{a:n,b:r};let o=t.child(--s),a=e.child(--i),l=o.nodeSize;if(o==a){n-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:n,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(o.content.size||a.content.size){let c=KI(o.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class M{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,s=0,i){for(let o=0,a=0;a<n;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,s+a,i||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,n-u),r,s+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,s){let i="",o=!0;return this.nodesBetween(e,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?s?typeof s=="function"?s(a):s:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(o?o=!1:i+=r),i+=c},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,s=this.content.slice(),i=0;for(n.isText&&n.sameMarkup(r)&&(s[s.length-1]=n.withText(n.text+r.text),i=1);i<e.content.length;i++)s.push(e.content[i]);return new M(s,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],s=0;if(n>e)for(let i=0,o=0;o<n;i++){let a=this.content[i],l=o+a.nodeSize;l>e&&((o<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,n-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,n-o-1))),r.push(a),s+=a.nodeSize),o=l}return new M(r,s)}cutByIndex(e,n){return e==n?M.empty:e==0&&n==this.content.length?this:new M(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let s=this.content.slice(),i=this.size+n.nodeSize-r.nodeSize;return s[e]=n,new M(s,i)}addToStart(e){return new M([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new M(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let s=this.content[n];e(s,r,n),r+=s.nodeSize}}findDiffStart(e,n=0){return WI(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return KI(this,e,n,r)}findIndex(e){if(e==0)return Hf(0,e);if(e==this.size)return Hf(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let s=this.child(n),i=r+s.nodeSize;if(i>=e)return i==e?Hf(n+1,i):Hf(n,r);r=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return M.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new M(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return M.empty;let n,r=0;for(let s=0;s<e.length;s++){let i=e[s];r+=i.nodeSize,s&&i.isText&&e[s-1].sameMarkup(i)?(n||(n=e.slice(0,s)),n[n.length-1]=i.withText(n[n.length-1].text+i.text)):n&&n.push(i)}return new M(n||e,r)}static from(e){if(!e)return M.empty;if(e instanceof M)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new M([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}M.empty=new M([],0);const My={index:0,offset:0};function Hf(t,e){return My.index=t,My.offset=e,My}function Np(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Np(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Np(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let Ke=class px{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let s=0;s<e.length;s++){let i=e[s];if(this.eq(i))return e;if(this.type.excludes(i.type))n||(n=e.slice(0,s));else{if(i.type.excludes(this.type))return e;!r&&i.type.rank>this.type.rank&&(n||(n=e.slice(0,s)),n.push(this),r=!0),n&&n.push(i)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Np(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let s=r.create(n.attrs);return r.checkAttrs(s.attrs),s}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return px.none;if(e instanceof px)return[e];let n=e.slice();return n.sort((r,s)=>r.type.rank-s.type.rank),n}};Ke.none=[];class Tp extends Error{}class Q{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=QI(this.content,e+this.openStart,n);return r&&new Q(r,this.openStart,this.openEnd)}removeBetween(e,n){return new Q(GI(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return Q.empty;let r=n.openStart||0,s=n.openEnd||0;if(typeof r!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Q(M.fromJSON(e,n.content),r,s)}static maxOpen(e,n=!0){let r=0,s=0;for(let i=e.firstChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.firstChild)r++;for(let i=e.lastChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.lastChild)s++;return new Q(e,r,s)}}Q.empty=new Q(M.empty,0,0);function GI(t,e,n){let{index:r,offset:s}=t.findIndex(e),i=t.maybeChild(r),{index:o,offset:a}=t.findIndex(n);if(s==e||i.isText){if(a!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,i.copy(GI(i.content,e-s-1,n-s-1)))}function QI(t,e,n,r){let{index:s,offset:i}=t.findIndex(e),o=t.maybeChild(s);if(i==e||o.isText)return r&&!r.canReplace(s,s,n)?null:t.cut(0,e).append(n).append(t.cut(e));let a=QI(o.content,e-i-1,n,o);return a&&t.replaceChild(s,o.copy(a))}function _7(t,e,n){if(n.openStart>t.depth)throw new Tp("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Tp("Inconsistent open depths");return JI(t,e,n,0)}function JI(t,e,n,r){let s=t.index(r),i=t.node(r);if(s==e.index(r)&&r<t.depth-n.openStart){let o=JI(t,e,n,r+1);return i.copy(i.content.replaceChild(s,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let o=t.parent,a=o.content;return la(o,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=E7(n,t);return la(i,ZI(t,o,a,e,r))}else return la(i,Op(t,e,r))}function YI(t,e){if(!e.type.compatibleContent(t.type))throw new Tp("Cannot join "+e.type.name+" onto "+t.type.name)}function mx(t,e,n){let r=t.node(n);return YI(r,e.node(n)),r}function aa(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Pu(t,e,n,r){let s=(e||t).node(n),i=0,o=e?e.index(n):s.childCount;t&&(i=t.index(n),t.depth>n?i++:t.textOffset&&(aa(t.nodeAfter,r),i++));for(let a=i;a<o;a++)aa(s.child(a),r);e&&e.depth==n&&e.textOffset&&aa(e.nodeBefore,r)}function la(t,e){return t.type.checkContent(e),t.copy(e)}function ZI(t,e,n,r,s){let i=t.depth>s&&mx(t,e,s+1),o=r.depth>s&&mx(n,r,s+1),a=[];return Pu(null,t,s,a),i&&o&&e.index(s)==n.index(s)?(YI(i,o),aa(la(i,ZI(t,e,n,r,s+1)),a)):(i&&aa(la(i,Op(t,e,s+1)),a),Pu(e,n,s,a),o&&aa(la(o,Op(n,r,s+1)),a)),Pu(r,null,s,a),new M(a)}function Op(t,e,n){let r=[];if(Pu(null,t,n,r),t.depth>n){let s=mx(t,e,n+1);aa(la(s,Op(t,e,n+1)),r)}return Pu(e,null,n,r),new M(r)}function E7(t,e){let n=e.depth-t.openStart,s=e.node(n).copy(t.content);for(let i=n-1;i>=0;i--)s=e.node(i).copy(M.from(s));return{start:s.resolveNoCache(t.openStart+n),end:s.resolveNoCache(s.content.size-t.openEnd-n)}}class Ed{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],s=e.child(n);return r?e.child(n).cut(r):s}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],s=n==0?0:this.path[n*3-1]+1;for(let i=0;i<e;i++)s+=r.child(i).nodeSize;return s}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return Ke.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),s=e.maybeChild(n);if(!r){let a=r;r=s,s=a}let i=r.marks;for(var o=0;o<i.length;o++)i[o].type.spec.inclusive===!1&&(!s||!i[o].isInSet(s.marks))&&(i=i[o--].removeFromSet(i));return i}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,s=e.parent.maybeChild(e.index());for(var i=0;i<r.length;i++)r[i].type.spec.inclusive===!1&&(!s||!r[i].isInSet(s.marks))&&(r=r[i--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Ap(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],s=0,i=n;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(i),c=i-l;if(r.push(o,a,s+l),!c||(o=o.child(a),o.isText))break;i=c-1,s+=l+1}return new Ed(n,r,i)}static resolveCached(e,n){let r=BE.get(e);if(r)for(let i=0;i<r.elts.length;i++){let o=r.elts[i];if(o.pos==n)return o}else BE.set(e,r=new C7);let s=r.elts[r.i]=Ed.resolve(e,n);return r.i=(r.i+1)%N7,s}}class C7{constructor(){this.elts=[],this.i=0}}const N7=12,BE=new WeakMap;class Ap{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const T7=Object.create(null);let io=class gx{constructor(e,n,r,s=Ke.none){this.type=e,this.attrs=n,this.marks=s,this.content=r||M.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,s=0){this.content.nodesBetween(e,n,r,s,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,s){return this.content.textBetween(e,n,r,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Np(this.attrs,n||e.defaultAttrs||T7)&&Ke.sameSet(this.marks,r||Ke.none)}copy(e=null){return e==this.content?this:new gx(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new gx(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return Q.empty;let s=this.resolve(e),i=this.resolve(n),o=r?0:s.sharedDepth(n),a=s.start(o),c=s.node(o).content.cut(s.pos-a,i.pos-a);return new Q(c,s.depth-o,i.depth-o)}replace(e,n,r){return _7(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:s}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(s==e||n.isText)return n;e-=s+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let s=this.content.child(n-1);return{node:s,index:n-1,offset:r-s.nodeSize}}resolve(e){return Ed.resolveCached(this,e)}resolveNoCache(e){return Ed.resolve(this,e)}rangeHasMark(e,n,r){let s=!1;return n>e&&this.nodesBetween(e,n,i=>(r.isInSet(i.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),XI(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=M.empty,s=0,i=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,s,i),a=o&&o.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=s;l<i;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,s){if(s&&!this.type.allowsMarks(s))return!1;let i=this.contentMatchAt(e).matchType(r),o=i&&i.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Ke.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Ke.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let s=M.fromJSON(e,n.content),i=e.nodeType(n.type).create(n.attrs,s,r);return i.type.checkAttrs(i.attrs),i}};io.prototype.text=void 0;class Rp extends io{constructor(e,n,r,s){if(super(e,n,null,s),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):XI(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Rp(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Rp(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function XI(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Oa{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new O7(e,n);if(r.next==null)return Oa.empty;let s=eP(r);r.next&&r.err("Unexpected trailing text");let i=D7(M7(s));return L7(i,r),i}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let s=this;for(let i=n;s&&i<r;i++)s=s.matchType(e.child(i).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let s=[this];function i(o,a){let l=o.matchFragment(e,r);if(l&&(!n||l.validEnd))return M.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:d}=o.next[c];if(!(u.isText||u.hasRequiredAttrs())&&s.indexOf(d)==-1){s.push(d);let f=i(d,a.concat(u));if(f)return f}}return null}return i(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let s=r.shift(),i=s.match;if(i.matchType(e)){let o=[];for(let a=s;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<i.next.length;o++){let{type:a,next:l}=i.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!s.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:s}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let s=0;s<r.next.length;s++)e.indexOf(r.next[s].next)==-1&&n(r.next[s].next)}return n(this),e.map((r,s)=>{let i=s+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)i+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return i}).join(`
`)}}Oa.empty=new Oa(!0);class O7{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function eP(t){let e=[];do e.push(A7(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function A7(t){let e=[];do e.push(R7(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function R7(t){let e=P7(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=j7(t,e);else break;return e}function UE(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function j7(t,e){let n=UE(t),r=n;return t.eat(",")&&(t.next!="}"?r=UE(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function I7(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let s=[];for(let i in n){let o=n[i];o.isInGroup(e)&&s.push(o)}return s.length==0&&t.err("No node type or group '"+e+"' found"),s}function P7(t){if(t.eat("(")){let e=eP(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=I7(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function M7(t){let e=[[]];return s(i(t,0),n()),e;function n(){return e.push([])-1}function r(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function s(o,a){o.forEach(l=>l.to=a)}function i(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(i(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=i(o.exprs[l],a);if(l==o.exprs.length-1)return c;s(c,a=n())}else if(o.type=="star"){let l=n();return r(a,l),s(i(o.expr,l),l),[r(l)]}else if(o.type=="plus"){let l=n();return s(i(o.expr,a),l),s(i(o.expr,l),l),[r(l)]}else{if(o.type=="opt")return[r(a)].concat(i(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let u=n();s(i(o.expr,l),u),l=u}if(o.max==-1)s(i(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let u=n();r(l,u),s(i(o.expr,l),u),l=u}return[r(l)]}else{if(o.type=="name")return[r(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function tP(t,e){return e-t}function zE(t,e){let n=[];return r(e),n.sort(tP);function r(s){let i=t[s];if(i.length==1&&!i[0].term)return r(i[0].to);n.push(s);for(let o=0;o<i.length;o++){let{term:a,to:l}=i[o];!a&&n.indexOf(l)==-1&&r(l)}}}function D7(t){let e=Object.create(null);return n(zE(t,0));function n(r){let s=[];r.forEach(o=>{t[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<s.length;u++)s[u][0]==a&&(c=s[u][1]);zE(t,l).forEach(u=>{c||s.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let i=e[r.join(",")]=new Oa(r.indexOf(t.length-1)>-1);for(let o=0;o<s.length;o++){let a=s[o][1].sort(tP);i.next.push({type:s[o][0],next:e[a.join(",")]||n(a)})}return i}}function L7(t,e){for(let n=0,r=[t];n<r.length;n++){let s=r[n],i=!s.validEnd,o=[];for(let a=0;a<s.next.length;a++){let{type:l,next:c}=s.next[a];o.push(l.name),i&&!(l.isText||l.hasRequiredAttrs())&&(i=!1),r.indexOf(c)==-1&&r.push(c)}i&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function nP(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function rP(t,e){let n=Object.create(null);for(let r in t){let s=e&&e[r];if(s===void 0){let i=t[r];if(i.hasDefault)s=i.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=s}return n}function sP(t,e,n,r){for(let s in e)if(!(s in t))throw new RangeError(`Unsupported attribute ${s} for ${n} of type ${s}`);for(let s in t){let i=t[s];i.validate&&i.validate(e[s])}}function iP(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new F7(t,r,e[r]);return n}let VE=class oP{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=iP(e,r.attrs),this.defaultAttrs=nP(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Oa.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:rP(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new io(this,this.computeAttrs(e),M.from(n),Ke.setFrom(r))}createChecked(e=null,n,r){return n=M.from(n),this.checkContent(n),new io(this,this.computeAttrs(e),n,Ke.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=M.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let s=this.contentMatch.matchFragment(n),i=s&&s.fillBefore(M.empty,!0);return i?new io(this,e,n.append(i),Ke.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){sP(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:Ke.none:e}static compile(e,n){let r=Object.create(null);e.forEach((i,o)=>r[i]=new oP(i,n,o));let s=n.spec.topNode||"doc";if(!r[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let i in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function $7(t,e,n){let r=n.split("|");return s=>{let i=s===null?"null":typeof s;if(r.indexOf(i)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${i}`)}}class F7{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?$7(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class gg{constructor(e,n,r,s){this.name=e,this.rank=n,this.schema=r,this.spec=s,this.attrs=iP(e,s.attrs),this.excluded=null;let i=nP(this.attrs);this.instance=i?new Ke(this,i):null}create(e=null){return!e&&this.instance?this.instance:new Ke(this,rP(this.attrs,e))}static compile(e,n){let r=Object.create(null),s=0;return e.forEach((i,o)=>r[i]=new gg(i,s++,n,o)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){sP(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class aP{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let s in e)n[s]=e[s];n.nodes=Yt.from(e.nodes),n.marks=Yt.from(e.marks||{}),this.nodes=VE.compile(this.spec.nodes,this),this.marks=gg.compile(this.spec.marks,this);let r=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let i=this.nodes[s],o=i.spec.content||"",a=i.spec.marks;if(i.contentMatch=r[o]||(r[o]=Oa.parse(o,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!i.isInline||!i.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=i}i.markSet=a=="_"?null:a?HE(this,a.split(" ")):a==""||!i.inlineContent?[]:null}for(let s in this.marks){let i=this.marks[s],o=i.spec.excludes;i.excluded=o==null?[i]:o==""?[]:HE(this,o.split(" "))}this.nodeFromJSON=s=>io.fromJSON(this,s),this.markFromJSON=s=>Ke.fromJSON(this,s),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,s){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof VE){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,s)}text(e,n){let r=this.nodes.text;return new Rp(r,r.defaultAttrs,e,Ke.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function HE(t,e){let n=[];for(let r=0;r<e.length;r++){let s=e[r],i=t.marks[s],o=i;if(i)n.push(i);else for(let a in t.marks){let l=t.marks[a];(s=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(s)>-1)&&n.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function B7(t){return t.tag!=null}function U7(t){return t.style!=null}class oo{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(s=>{if(B7(s))this.tags.push(s);else if(U7(s)){let i=/[^=]*/.exec(s.style)[0];r.indexOf(i)<0&&r.push(i),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let i=e.nodes[s.node];return i.contentMatch.matchType(i)})}parse(e,n={}){let r=new WE(this,n,!1);return r.addAll(e,Ke.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new WE(this,n,!0);return r.addAll(e,Ke.none,n.from,n.to),Q.maxOpen(r.finish())}matchTag(e,n,r){for(let s=r?this.tags.indexOf(r)+1:0;s<this.tags.length;s++){let i=this.tags[s];if(H7(e,i.tag)&&(i.namespace===void 0||e.namespaceURI==i.namespace)&&(!i.context||n.matchesContext(i.context))){if(i.getAttrs){let o=i.getAttrs(e);if(o===!1)continue;i.attrs=o||void 0}return i}}}matchStyle(e,n,r,s){for(let i=s?this.styles.indexOf(s)+1:0;i<this.styles.length;i++){let o=this.styles[i],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(o.getAttrs){let l=o.getAttrs(n);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let n=[];function r(s){let i=s.priority==null?50:s.priority,o=0;for(;o<n.length;o++){let a=n[o];if((a.priority==null?50:a.priority)<i)break}n.splice(o,0,s)}for(let s in e.marks){let i=e.marks[s].spec.parseDOM;i&&i.forEach(o=>{r(o=KE(o)),o.mark||o.ignore||o.clearMark||(o.mark=s)})}for(let s in e.nodes){let i=e.nodes[s].spec.parseDOM;i&&i.forEach(o=>{r(o=KE(o)),o.node||o.ignore||o.mark||(o.node=s)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new oo(e,oo.schemaRules(e)))}}const lP={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},z7={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},cP={ol:!0,ul:!0},Cd=1,yx=2,Mu=4;function qE(t,e,n){return e!=null?(e?Cd:0)|(e==="full"?yx:0):t&&t.whitespace=="pre"?Cd|yx:n&~Mu}class qf{constructor(e,n,r,s,i,o){this.type=e,this.attrs=n,this.marks=r,this.solid=s,this.options=o,this.content=[],this.activeMarks=Ke.none,this.match=i||(o&Mu?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(M.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,s;return(s=r.findWrapping(e.type))?(this.match=r,s):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Cd)){let r=this.content[this.content.length-1],s;if(r&&r.isText&&(s=/[ \t\r\n\u000c]+$/.exec(r.text))){let i=r;r.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-s[0].length))}}let n=M.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(M.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!lP.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class WE{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let s=n.topNode,i,o=qE(null,n.preserveWhitespace,0)|(r?Mu:0);s?i=new qf(s.type,s.attrs,Ke.none,!0,n.topMatch||s.type.contentMatch,o):r?i=new qf(null,null,Ke.none,!0,null,o):i=new qf(e.schema.topNodeType,null,Ke.none,!0,null,o),this.nodes=[i],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,s=this.top,i=s.options&yx?"full":this.localPreserveWS||(s.options&Cd)>0,{schema:o}=this.parser;if(i==="full"||s.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(i)if(i==="full")r=r.replace(/\r\n?/g,`
`);else if(o.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(o.linebreakReplacement.create())){let a=r.split(/\r?\n|\r/);for(let l=0;l<a.length;l++)l&&this.insertNode(o.linebreakReplacement.create(),n,!0),a[l]&&this.insertNode(o.text(a[l]),n,!/\S/.test(a[l]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let a=s.content[s.content.length-1],l=e.previousSibling;(!a||l&&l.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(r=r.slice(1))}r&&this.insertNode(o.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let s=this.localPreserveWS,i=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),a;cP.hasOwnProperty(o)&&this.parser.normalizeLists&&V7(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(l?l.ignore:z7.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,u=this.needsBlock;if(lP.hasOwnProperty(o))i.content.length&&i.content[0].isInline&&this.open&&(this.open--,i=this.top),c=!0,i.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let d=l&&l.skip?n:this.readStyles(e,n);d&&this.addAll(e,d),c&&this.sync(i),this.needsBlock=u}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=s}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let s=0;s<this.parser.matchedStyles.length;s++){let i=this.parser.matchedStyles[s],o=r.getPropertyValue(i);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(i,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(c=>!l.clearMark(c)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(e,n,r,s){let i,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let l=this.enter(o,n.attrs||null,r,n.preserveWhitespace);l&&(i=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(s)this.addElement(e,r,s);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}i&&this.sync(a)&&this.open--}addAll(e,n,r,s){let i=r||0;for(let o=r?e.childNodes[r]:e.firstChild,a=s==null?null:e.childNodes[s];o!=a;o=o.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(o,n);this.findAtPoint(e,i)}findPlace(e,n,r){let s,i;for(let o=this.open,a=0;o>=0;o--){let l=this.nodes[o],c=l.findWrapping(e);if(c&&(!s||s.length>c.length+a)&&(s=c,i=l,!c.length))break;if(l.solid){if(r)break;a+=2}}if(!s)return null;this.sync(i);for(let o=0;o<s.length;o++)n=this.enterInner(s[o],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(n=this.enterInner(i,null,n))}let s=this.findPlace(e,n,r);if(s){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let o=Ke.none;for(let a of s.concat(e.marks))(i.type?i.type.allowsMarkType(a.type):GE(a.type,e.type))&&(o=a.addToSet(o));return i.content.push(e.mark(o)),!0}return!1}enter(e,n,r,s){let i=this.findPlace(e.create(n),r,!1);return i&&(i=this.enterInner(e,n,r,!0,s)),i}enterInner(e,n,r,s=!1,i){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let a=qE(e,i,o.options);o.options&Mu&&o.content.length==0&&(a|=Mu);let l=Ke.none;return r=r.filter(c=>(o.type?o.type.allowsMarkType(c.type):GE(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new qf(e,n,l,s,null,a)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Cd)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let s=r.length-1;s>=0;s--)e+=r[s].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&e.nodeType==1&&e.contains(this.find[s].node)&&n.compareDocumentPosition(this.find[s].node)&(r?2:4)&&(this.find[s].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,s=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(s?0:1),o=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=i;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&s?this.nodes[l].type:r&&l>=i?r.node(l-i).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;l--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function V7(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&cP.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function H7(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function KE(t){let e={};for(let n in t)e[n]=t[n];return e}function GE(t,e){let n=e.schema.nodes;for(let r in n){let s=n[r];if(!s.allowsMarkType(t))continue;let i=[],o=a=>{i.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||i.indexOf(u)<0&&o(u))return!0}};if(o(s.contentMatch))return!0}}class Fa{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=Dy(n).createDocumentFragment());let s=r,i=[];return e.forEach(o=>{if(i.length||o.marks.length){let a=0,l=0;for(;a<i.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(i[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<i.length;)s=i.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],u=this.serializeMark(c,o.isInline,n);u&&(i.push([c,s]),s.appendChild(u.dom),s=u.contentDOM||u.dom)}}s.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:s}=kh(Dy(n),this.nodes[e.type.name](e),null,e.attrs);if(s){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,s)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let s=e.marks.length-1;s>=0;s--){let i=this.serializeMark(e.marks[s],e.isInline,n);i&&((i.contentDOM||i.dom).appendChild(r),r=i.dom)}return r}serializeMark(e,n,r={}){let s=this.marks[e.type.name];return s&&kh(Dy(r),s(e,n),null,e.attrs)}static renderSpec(e,n,r=null,s){return kh(e,n,r,s)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Fa(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=QE(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return QE(e.marks)}}function QE(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Dy(t){return t.document||window.document}const JE=new WeakMap;function q7(t){let e=JE.get(t);return e===void 0&&JE.set(t,e=W7(t)),e}function W7(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let s=0;s<r.length;s++)n(r[s]);else for(let s in r)n(r[s])}return n(t),e}function kh(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let s=e[0],i;if(typeof s!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(i=q7(r))&&i.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=s.indexOf(" ");o>0&&(n=s.slice(0,o),s=s.slice(o+1));let a,l=n?t.createElementNS(n,s):t.createElement(s),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let d in c)if(c[d]!=null){let f=d.indexOf(" ");f>0?l.setAttributeNS(d.slice(0,f),d.slice(f+1),c[d]):d=="style"&&l.style?l.style.cssText=c[d]:l.setAttribute(d,c[d])}}for(let d=u;d<e.length;d++){let f=e[d];if(f===0){if(d<e.length-1||d>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:p,contentDOM:m}=kh(t,f,n,r);if(l.appendChild(p),m){if(a)throw new RangeError("Multiple content holes");a=m}}}return{dom:l,contentDOM:a}}const uP=65535,dP=Math.pow(2,16);function K7(t,e){return t+e*dP}function YE(t){return t&uP}function G7(t){return(t-(t&uP))/dP}const fP=1,hP=2,_h=4,pP=8;class vx{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&pP)>0}get deletedBefore(){return(this.delInfo&(fP|_h))>0}get deletedAfter(){return(this.delInfo&(hP|_h))>0}get deletedAcross(){return(this.delInfo&_h)>0}}class Jn{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&Jn.empty)return Jn.empty}recover(e){let n=0,r=YE(e);if(!this.inverted)for(let s=0;s<r;s++)n+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[r*3]+n+G7(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let s=0,i=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?s:0);if(l>e)break;let c=this.ranges[a+i],u=this.ranges[a+o],d=l+c;if(e<=d){let f=c?e==l?-1:e==d?1:n:n,p=l+s+(f<0?0:u);if(r)return p;let m=e==(n<0?l:d)?null:K7(a/3,e-l),g=e==l?hP:e==d?fP:_h;return(n<0?e!=l:e!=d)&&(g|=pP),new vx(p,g,m)}s+=u-c}return r?e+s:new vx(e+s,0,null)}touches(e,n){let r=0,s=YE(n),i=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+i],u=l+c;if(e<=u&&a==s*3)return!0;r+=this.ranges[a+o]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let s=0,i=0;s<this.ranges.length;s+=3){let o=this.ranges[s],a=o-(this.inverted?i:0),l=o+(this.inverted?0:i),c=this.ranges[s+n],u=this.ranges[s+r];e(a,a+c,l,l+u),i+=u-c}}invert(){return new Jn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Jn.empty:new Jn(e<0?[0,-e,0]:[0,0,e])}}Jn.empty=new Jn([]);class Nd{constructor(e,n,r=0,s=e?e.length:0){this.mirror=n,this.from=r,this.to=s,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new Nd(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let s=e.getMirror(n);this.appendMap(e._maps[n],s!=null&&s<n?r+s:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let s=e.getMirror(n);this.appendMap(e._maps[n].invert(),s!=null&&s>n?r-s-1:void 0)}}invert(){let e=new Nd;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let s=0;for(let i=this.from;i<this.to;i++){let o=this._maps[i],a=o.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(i);if(l!=null&&l>i&&l<this.to){i=l,e=this._maps[l].recover(a.recover);continue}}s|=a.delInfo,e=a.pos}return r?e:new vx(e,s,null)}}const Ly=Object.create(null);class gn{getMap(){return Jn.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Ly[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Ly)throw new RangeError("Duplicate use of step JSON ID "+e);return Ly[e]=n,n.prototype.jsonID=e,n}}class Nt{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Nt(e,null)}static fail(e){return new Nt(null,e)}static fromReplace(e,n,r,s){try{return Nt.ok(e.replace(n,r,s))}catch(i){if(i instanceof Tp)return Nt.fail(i.message);throw i}}}function iS(t,e,n){let r=[];for(let s=0;s<t.childCount;s++){let i=t.child(s);i.content.size&&(i=i.copy(iS(i.content,e,i))),i.isInline&&(i=e(i,n,s)),r.push(i)}return M.fromArray(r)}class Hi extends gn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),s=r.node(r.sharedDepth(this.to)),i=new Q(iS(n.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),s),n.openStart,n.openEnd);return Nt.fromReplace(e,this.from,this.to,i)}invert(){return new Vr(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Hi(n.pos,r.pos,this.mark)}merge(e){return e instanceof Hi&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Hi(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Hi(n.from,n.to,e.markFromJSON(n.mark))}}gn.jsonID("addMark",Hi);class Vr extends gn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new Q(iS(n.content,s=>s.mark(this.mark.removeFromSet(s.marks)),e),n.openStart,n.openEnd);return Nt.fromReplace(e,this.from,this.to,r)}invert(){return new Hi(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Vr(n.pos,r.pos,this.mark)}merge(e){return e instanceof Vr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Vr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Vr(n.from,n.to,e.markFromJSON(n.mark))}}gn.jsonID("removeMark",Vr);class qi extends gn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Nt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Nt.fromReplace(e,this.pos,this.pos+1,new Q(M.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let s=0;s<n.marks.length;s++)if(!n.marks[s].isInSet(r))return new qi(this.pos,n.marks[s]);return new qi(this.pos,this.mark)}}return new Aa(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new qi(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new qi(n.pos,e.markFromJSON(n.mark))}}gn.jsonID("addNodeMark",qi);class Aa extends gn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Nt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Nt.fromReplace(e,this.pos,this.pos+1,new Q(M.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new qi(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Aa(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Aa(n.pos,e.markFromJSON(n.mark))}}gn.jsonID("removeNodeMark",Aa);class Ut extends gn{constructor(e,n,r,s=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=s}apply(e){return this.structure&&xx(e,this.from,this.to)?Nt.fail("Structure replace would overwrite content"):Nt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Jn([this.from,this.to-this.from,this.slice.size])}invert(e){return new Ut(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Ut(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Ut)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?Q.empty:new Q(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Ut(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?Q.empty:new Q(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Ut(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Ut(n.from,n.to,Q.fromJSON(e,n.slice),!!n.structure)}}gn.jsonID("replace",Ut);class Ht extends gn{constructor(e,n,r,s,i,o,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=s,this.slice=i,this.insert=o,this.structure=a}apply(e){if(this.structure&&(xx(e,this.from,this.gapFrom)||xx(e,this.gapTo,this.to)))return Nt.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Nt.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Nt.fromReplace(e,this.from,this.to,r):Nt.fail("Content does not fit in gap")}getMap(){return new Jn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Ht(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),s=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||s<n.pos||i>r.pos?null:new Ht(n.pos,r.pos,s,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Ht(n.from,n.to,n.gapFrom,n.gapTo,Q.fromJSON(e,n.slice),n.insert,!!n.structure)}}gn.jsonID("replaceAround",Ht);function xx(t,e,n){let r=t.resolve(e),s=n-e,i=r.depth;for(;s>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,s--;if(s>0){let o=r.node(i).maybeChild(r.indexAfter(i));for(;s>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,s--}}return!1}function Q7(t,e,n,r){let s=[],i=[],o,a;t.doc.nodesBetween(e,n,(l,c,u)=>{if(!l.isInline)return;let d=l.marks;if(!r.isInSet(d)&&u.type.allowsMarkType(r.type)){let f=Math.max(c,e),p=Math.min(c+l.nodeSize,n),m=r.addToSet(d);for(let g=0;g<d.length;g++)d[g].isInSet(m)||(o&&o.to==f&&o.mark.eq(d[g])?o.to=p:s.push(o=new Vr(f,p,d[g])));a&&a.to==f?a.to=p:i.push(a=new Hi(f,p,r))}}),s.forEach(l=>t.step(l)),i.forEach(l=>t.step(l))}function J7(t,e,n,r){let s=[],i=0;t.doc.nodesBetween(e,n,(o,a)=>{if(!o.isInline)return;i++;let l=null;if(r instanceof gg){let c=o.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(o.marks)&&(l=[r]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,n);for(let u=0;u<l.length;u++){let d=l[u],f;for(let p=0;p<s.length;p++){let m=s[p];m.step==i-1&&d.eq(s[p].style)&&(f=m)}f?(f.to=c,f.step=i):s.push({style:d,from:Math.max(a,e),to:c,step:i})}}}),s.forEach(o=>t.step(new Vr(o.from,o.to,o.style)))}function oS(t,e,n,r=n.contentMatch,s=!0){let i=t.doc.nodeAt(e),o=[],a=e+1;for(let l=0;l<i.childCount;l++){let c=i.child(l),u=a+c.nodeSize,d=r.matchType(c.type);if(!d)o.push(new Ut(a,u,Q.empty));else{r=d;for(let f=0;f<c.marks.length;f++)n.allowsMarkType(c.marks[f].type)||t.step(new Vr(a,u,c.marks[f]));if(s&&c.isText&&n.whitespace!="pre"){let f,p=/\r?\n|\r/g,m;for(;f=p.exec(c.text);)m||(m=new Q(M.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),o.push(new Ut(a+f.index,a+f.index+f[0].length,m))}}a=u}if(!r.validEnd){let l=r.fillBefore(M.empty,!0);t.replace(a,a,new Q(l,0,0))}for(let l=o.length-1;l>=0;l--)t.step(o[l])}function Y7(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Fc(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth,s=0,i=0;;--r){let o=t.$from.node(r),a=t.$from.index(r)+s,l=t.$to.indexAfter(r)-i;if(r<t.depth&&o.canReplace(a,l,n))return r;if(r==0||o.type.spec.isolating||!Y7(o,a,l))break;a&&(s=1),l<o.childCount&&(i=1)}return null}function Z7(t,e,n){let{$from:r,$to:s,depth:i}=e,o=r.before(i+1),a=s.after(i+1),l=o,c=a,u=M.empty,d=0;for(let m=i,g=!1;m>n;m--)g||r.index(m)>0?(g=!0,u=M.from(r.node(m).copy(u)),d++):l--;let f=M.empty,p=0;for(let m=i,g=!1;m>n;m--)g||s.after(m+1)<s.end(m)?(g=!0,f=M.from(s.node(m).copy(f)),p++):c++;t.step(new Ht(l,c,o,a,new Q(u.append(f),d,p),u.size-d,!0))}function aS(t,e,n=null,r=t){let s=X7(t,e),i=s&&eG(r,e);return i?s.map(ZE).concat({type:e,attrs:n}).concat(i.map(ZE)):null}function ZE(t){return{type:t,attrs:null}}function X7(t,e){let{parent:n,startIndex:r,endIndex:s}=t,i=n.contentMatchAt(r).findWrapping(e);if(!i)return null;let o=i.length?i[0]:e;return n.canReplaceWith(r,s,o)?i:null}function eG(t,e){let{parent:n,startIndex:r,endIndex:s}=t,i=n.child(r),o=e.contentMatch.findWrapping(i.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let c=r;l&&c<s;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:o}function tG(t,e,n){let r=M.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let a=n[o].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=M.from(n[o].type.create(n[o].attrs,r))}let s=e.start,i=e.end;t.step(new Ht(s,i,s,i,new Q(r,0,0),n.length,!0))}function nG(t,e,n,r,s){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=t.steps.length;t.doc.nodesBetween(e,n,(o,a)=>{let l=typeof s=="function"?s(o):s;if(o.isTextblock&&!o.hasMarkup(r,l)&&rG(t.doc,t.mapping.slice(i).map(a),r)){let c=null;if(r.schema.linebreakReplacement){let p=r.whitespace=="pre",m=!!r.contentMatch.matchType(r.schema.linebreakReplacement);p&&!m?c=!1:!p&&m&&(c=!0)}c===!1&&gP(t,o,a,i),oS(t,t.mapping.slice(i).map(a,1),r,void 0,c===null);let u=t.mapping.slice(i),d=u.map(a,1),f=u.map(a+o.nodeSize,1);return t.step(new Ht(d,f,d+1,f-1,new Q(M.from(r.create(l,null,o.marks)),0,0),1,!0)),c===!0&&mP(t,o,a,i),!1}})}function mP(t,e,n,r){e.forEach((s,i)=>{if(s.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(s.text);){let l=t.mapping.slice(r).map(n+1+i+o.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function gP(t,e,n,r){e.forEach((s,i)=>{if(s.type==s.type.schema.linebreakReplacement){let o=t.mapping.slice(r).map(n+1+i);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function rG(t,e,n){let r=t.resolve(e),s=r.index();return r.parent.canReplaceWith(s,s+1,n)}function sG(t,e,n,r,s){let i=t.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");n||(n=i.type);let o=n.create(r,null,s||i.marks);if(i.isLeaf)return t.replaceWith(e,e+i.nodeSize,o);if(!n.validContent(i.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Ht(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new Q(M.from(o),0,0),1,!0))}function Js(t,e,n=1,r){let s=t.resolve(e),i=s.depth-n,o=r&&r[r.length-1]||s.parent;if(i<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!o.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let c=s.depth-1,u=n-2;c>i;c--,u--){let d=s.node(c),f=s.index(c);if(d.type.spec.isolating)return!1;let p=d.content.cutByIndex(f,d.childCount),m=r&&r[u+1];m&&(p=p.replaceChild(0,m.type.create(m.attrs)));let g=r&&r[u]||d;if(!d.canReplace(f+1,d.childCount)||!g.type.validContent(p))return!1}let a=s.indexAfter(i),l=r&&r[0];return s.node(i).canReplaceWith(a,a,l?l.type:s.node(i+1).type)}function iG(t,e,n=1,r){let s=t.doc.resolve(e),i=M.empty,o=M.empty;for(let a=s.depth,l=s.depth-n,c=n-1;a>l;a--,c--){i=M.from(s.node(a).copy(i));let u=r&&r[c];o=M.from(u?u.type.create(u.attrs,o):s.node(a).copy(o))}t.step(new Ut(e,e,new Q(i.append(o),n,n),!0))}function No(t,e){let n=t.resolve(e),r=n.index();return yP(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function oG(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let s=0;s<e.childCount;s++){let i=e.child(s),o=i.type==r?t.type.schema.nodes.text:i.type;if(n=n.matchType(o),!n||!t.type.allowsMarks(i.marks))return!1}return n.validEnd}function yP(t,e){return!!(t&&e&&!t.isLeaf&&oG(t,e))}function yg(t,e,n=-1){let r=t.resolve(e);for(let s=r.depth;;s--){let i,o,a=r.index(s);if(s==r.depth?(i=r.nodeBefore,o=r.nodeAfter):n>0?(i=r.node(s+1),a++,o=r.node(s).maybeChild(a)):(i=r.node(s).maybeChild(a-1),o=r.node(s+1)),i&&!i.isTextblock&&yP(i,o)&&r.node(s).canReplace(a,a+1))return e;if(s==0)break;e=n<0?r.before(s):r.after(s)}}function aG(t,e,n){let r=null,{linebreakReplacement:s}=t.doc.type.schema,i=t.doc.resolve(e-n),o=i.node().type;if(s&&o.inlineContent){let u=o.whitespace=="pre",d=!!o.contentMatch.matchType(s);u&&!d?r=!1:!u&&d&&(r=!0)}let a=t.steps.length;if(r===!1){let u=t.doc.resolve(e+n);gP(t,u.node(),u.before(),a)}o.inlineContent&&oS(t,e+n-1,o,i.node().contentMatchAt(i.index()),r==null);let l=t.mapping.slice(a),c=l.map(e-n);if(t.step(new Ut(c,l.map(e+n,-1),Q.empty,!0)),r===!0){let u=t.doc.resolve(c);mP(t,u.node(),u.before(),t.steps.length)}return t}function lG(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let s=r.depth-1;s>=0;s--){let i=r.index(s);if(r.node(s).canReplaceWith(i,i,n))return r.before(s+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(let s=r.depth-1;s>=0;s--){let i=r.indexAfter(s);if(r.node(s).canReplaceWith(i,i,n))return r.after(s+1);if(i<r.node(s).childCount)return null}return null}function vP(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let s=n.content;for(let i=0;i<n.openStart;i++)s=s.firstChild.content;for(let i=1;i<=(n.openStart==0&&n.size?2:1);i++)for(let o=r.depth;o>=0;o--){let a=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,l=r.index(o)+(a>0?1:0),c=r.node(o),u=!1;if(i==1)u=c.canReplace(l,l,s);else{let d=c.contentMatchAt(l).findWrapping(s.firstChild.type);u=d&&c.canReplaceWith(l,l,d[0])}if(u)return a==0?r.pos:a<0?r.before(o+1):r.after(o+1)}return null}function vg(t,e,n=e,r=Q.empty){if(e==n&&!r.size)return null;let s=t.resolve(e),i=t.resolve(n);return xP(s,i,r)?new Ut(e,n,r):new cG(s,i,r).fit()}function xP(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class cG{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=M.empty;for(let s=0;s<=e.depth;s++){let i=e.node(s);this.frontier.push({type:i.type,match:i.contentMatchAt(e.indexAfter(s))})}for(let s=e.depth;s>0;s--)this.placed=M.from(e.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,s=this.close(e<0?this.$to:r.doc.resolve(e));if(!s)return null;let i=this.placed,o=r.depth,a=s.depth;for(;o&&a&&i.childCount==1;)i=i.firstChild.content,o--,a--;let l=new Q(i,o,a);return e>-1?new Ht(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new Ut(r.pos,s.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,s=this.unplaced.openEnd;r<e;r++){let i=n.firstChild;if(n.childCount>1&&(s=0),i.type.spec.isolating&&s<=r){e=r;break}n=i.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let s,i=null;r?(i=$y(this.unplaced.content,r-1).firstChild,s=i.content):s=this.unplaced.content;let o=s.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,d=null;if(n==1&&(o?c.matchType(o.type)||(d=c.fillBefore(M.from(o),!1)):i&&l.compatibleContent(i.type)))return{sliceDepth:r,frontierDepth:a,parent:i,inject:d};if(n==2&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:a,parent:i,wrap:u};if(i&&c.matchType(i.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,s=$y(e,n);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new Q(e,n+1,Math.max(r,s.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,s=$y(e,n);if(s.childCount<=1&&n>0){let i=e.size-n<=n+s.size;this.unplaced=new Q(mu(e,n-1,1),n-1,i?n-1:r)}else this.unplaced=new Q(mu(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:s,wrap:i}){for(;this.depth>n;)this.closeFrontierNode();if(i)for(let g=0;g<i.length;g++)this.openFrontierNode(i[g]);let o=this.unplaced,a=r?r.content:o.content,l=o.openStart-e,c=0,u=[],{match:d,type:f}=this.frontier[n];if(s){for(let g=0;g<s.childCount;g++)u.push(s.child(g));d=d.matchFragment(s)}let p=a.size+e-(o.content.size-o.openEnd);for(;c<a.childCount;){let g=a.child(c),y=d.matchType(g.type);if(!y)break;c++,(c>1||l==0||g.content.size)&&(d=y,u.push(bP(g.mark(f.allowedMarks(g.marks)),c==1?l:0,c==a.childCount?p:-1)))}let m=c==a.childCount;m||(p=-1),this.placed=gu(this.placed,n,M.from(u)),this.frontier[n].match=d,m&&p<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,y=a;g<p;g++){let v=y.lastChild;this.frontier.push({type:v.type,match:v.contentMatchAt(v.childCount)}),y=v.content}this.unplaced=m?e==0?Q.empty:new Q(mu(o.content,e-1,1),e-1,p<0?o.openEnd:e-1):new Q(mu(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!Fy(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,s=this.$to.after(r);for(;r>1&&s==this.$to.end(--r);)++s;return s}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:s}=this.frontier[n],i=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=Fy(e,n,s,r,i);if(o){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=Fy(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:o,move:i?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=gu(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let s=e.node(r),i=s.type.contentMatch.fillBefore(s.content,!0,e.index(r));this.openFrontierNode(s.type,s.attrs,i)}return e}openFrontierNode(e,n=null,r){let s=this.frontier[this.depth];s.match=s.match.matchType(e),this.placed=gu(this.placed,this.depth,M.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(M.empty,!0);n.childCount&&(this.placed=gu(this.placed,this.frontier.length,n))}}function mu(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(mu(t.firstChild.content,e-1,n)))}function gu(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(gu(t.lastChild.content,e-1,n)))}function $y(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function bP(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,bP(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(M.empty,!0)))),t.copy(r)}function Fy(t,e,n,r,s){let i=t.node(e),o=s?t.indexAfter(e):t.index(e);if(o==i.childCount&&!n.compatibleContent(i.type))return null;let a=r.fillBefore(i.content,!0,o);return a&&!uG(n,i.content,o)?a:null}function uG(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function dG(t){return t.spec.defining||t.spec.definingForContent}function fG(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let s=t.doc.resolve(e),i=t.doc.resolve(n);if(xP(s,i,r))return t.step(new Ut(e,n,r));let o=SP(s,i);o[o.length-1]==0&&o.pop();let a=-(s.depth+1);o.unshift(a);for(let f=s.depth,p=s.pos-1;f>0;f--,p--){let m=s.node(f).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;o.indexOf(f)>-1?a=f:s.before(f)==p&&o.splice(1,0,-f)}let l=o.indexOf(a),c=[],u=r.openStart;for(let f=r.content,p=0;;p++){let m=f.firstChild;if(c.push(m),p==r.openStart)break;f=m.content}for(let f=u-1;f>=0;f--){let p=c[f],m=dG(p.type);if(m&&!p.sameMarkup(s.node(Math.abs(a)-1)))u=f;else if(m||!p.type.isTextblock)break}for(let f=r.openStart;f>=0;f--){let p=(f+u+1)%(r.openStart+1),m=c[p];if(m)for(let g=0;g<o.length;g++){let y=o[(g+l)%o.length],v=!0;y<0&&(v=!1,y=-y);let x=s.node(y-1),b=s.index(y-1);if(x.canReplaceWith(b,b,m.type,m.marks))return t.replace(s.before(y),v?i.after(y):n,new Q(wP(r.content,0,r.openStart,p),p,r.openEnd))}}let d=t.steps.length;for(let f=o.length-1;f>=0&&(t.replace(e,n,r),!(t.steps.length>d));f--){let p=o[f];p<0||(e=s.before(p),n=i.after(p))}}function wP(t,e,n,r,s){if(e<n){let i=t.firstChild;t=t.replaceChild(0,i.copy(wP(i.content,e+1,n,r,i)))}if(e>r){let i=s.contentMatchAt(0),o=i.fillBefore(t).append(t);t=o.append(i.matchFragment(o).fillBefore(M.empty,!0))}return t}function hG(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let s=lG(t.doc,e,r.type);s!=null&&(e=n=s)}t.replaceRange(e,n,new Q(M.from(r),0,0))}function pG(t,e,n){let r=t.doc.resolve(e),s=t.doc.resolve(n),i=SP(r,s);for(let o=0;o<i.length;o++){let a=i[o],l=o==i.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),s.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),s.indexAfter(a-1))))return t.delete(r.before(a),s.after(a))}for(let o=1;o<=r.depth&&o<=s.depth;o++)if(e-r.start(o)==r.depth-o&&n>r.end(o)&&s.end(o)-n!=s.depth-o&&r.start(o-1)==s.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),s.index(o-1)))return t.delete(r.before(o),n);t.delete(e,n)}function SP(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let s=r;s>=0;s--){let i=t.start(s);if(i<t.pos-(t.depth-s)||e.end(s)>e.pos+(e.depth-s)||t.node(s).type.spec.isolating||e.node(s).type.spec.isolating)break;(i==e.start(s)||s==t.depth&&s==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&s&&e.start(s-1)==i-1)&&n.push(s)}return n}class Ml extends gn{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Nt.fail("No node at attribute step's position");let r=Object.create(null);for(let i in n.attrs)r[i]=n.attrs[i];r[this.attr]=this.value;let s=n.type.create(r,null,n.marks);return Nt.fromReplace(e,this.pos,this.pos+1,new Q(M.from(s),0,n.isLeaf?0:1))}getMap(){return Jn.empty}invert(e){return new Ml(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Ml(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Ml(n.pos,n.attr,n.value)}}gn.jsonID("attr",Ml);class Td extends gn{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let s in e.attrs)n[s]=e.attrs[s];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Nt.ok(r)}getMap(){return Jn.empty}invert(e){return new Td(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Td(n.attr,n.value)}}gn.jsonID("docAttr",Td);let yc=class extends Error{};yc=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};yc.prototype=Object.create(Error.prototype);yc.prototype.constructor=yc;yc.prototype.name="TransformError";class kP{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Nd}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new yc(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}changedRange(){let e=1e9,n=-1e9;for(let r=0;r<this.mapping.maps.length;r++){let s=this.mapping.maps[r];r&&(e=s.map(e,1),n=s.map(n,-1)),s.forEach((i,o,a,l)=>{e=Math.min(e,a),n=Math.max(n,l)})}return e==1e9?null:{from:e,to:n}}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=Q.empty){let s=vg(this.doc,e,n,r);return s&&this.step(s),this}replaceWith(e,n,r){return this.replace(e,n,new Q(M.from(r),0,0))}delete(e,n){return this.replace(e,n,Q.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return fG(this,e,n,r),this}replaceRangeWith(e,n,r){return hG(this,e,n,r),this}deleteRange(e,n){return pG(this,e,n),this}lift(e,n){return Z7(this,e,n),this}join(e,n=1){return aG(this,e,n),this}wrap(e,n){return tG(this,e,n),this}setBlockType(e,n=e,r,s=null){return nG(this,e,n,r,s),this}setNodeMarkup(e,n,r=null,s){return sG(this,e,n,r,s),this}setNodeAttribute(e,n,r){return this.step(new Ml(e,n,r)),this}setDocAttribute(e,n){return this.step(new Td(e,n)),this}addNodeMark(e,n){return this.step(new qi(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof Ke)n.isInSet(r.marks)&&this.step(new Aa(e,n));else{let s=r.marks,i,o=[];for(;i=n.isInSet(s);)o.push(new Aa(e,i)),s=i.removeFromSet(s);for(let a=o.length-1;a>=0;a--)this.step(o[a])}return this}split(e,n=1,r){return iG(this,e,n,r),this}addMark(e,n,r){return Q7(this,e,n,r),this}removeMark(e,n,r){return J7(this,e,n,r),this}clearIncompatible(e,n,r){return oS(this,e,n,r),this}}const By=Object.create(null);class ve{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new _P(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=Q.empty){let r=n.content.lastChild,s=null;for(let a=0;a<n.openEnd;a++)s=r,r=r.lastChild;let i=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],u=e.mapping.slice(i);e.replaceRange(u.map(l.pos),u.map(c.pos),a?Q.empty:n),a==0&&tC(e,i,(r?r.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,s=this.ranges;for(let i=0;i<s.length;i++){let{$from:o,$to:a}=s[i],l=e.mapping.slice(r),c=l.map(o.pos),u=l.map(a.pos);i?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),tC(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let s=e.parent.inlineContent?new xe(e):al(e.node(0),e.parent,e.pos,e.index(),n,r);if(s)return s;for(let i=e.depth-1;i>=0;i--){let o=n<0?al(e.node(0),e.node(i),e.before(i+1),e.index(i),n,r):al(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,n,r);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new er(e.node(0))}static atStart(e){return al(e,e,0,0,1)||new er(e)}static atEnd(e){return al(e,e,e.content.size,e.childCount,-1)||new er(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=By[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in By)throw new RangeError("Duplicate use of selection JSON ID "+e);return By[e]=n,n.prototype.jsonID=e,n}getBookmark(){return xe.between(this.$anchor,this.$head).getBookmark()}}ve.prototype.visible=!0;class _P{constructor(e,n){this.$from=e,this.$to=n}}let XE=!1;function eC(t){!XE&&!t.parent.inlineContent&&(XE=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class xe extends ve{constructor(e,n=e){eC(e),eC(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return ve.near(r);let s=e.resolve(n.map(this.anchor));return new xe(s.parent.inlineContent?s:r,r)}replace(e,n=Q.empty){if(super.replace(e,n),n==Q.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof xe&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new xg(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new xe(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let s=e.resolve(n);return new this(s,r==n?s:e.resolve(r))}static between(e,n,r){let s=e.pos-n.pos;if((!r||s)&&(r=s>=0?1:-1),!n.parent.inlineContent){let i=ve.findFrom(n,r,!0)||ve.findFrom(n,-r,!0);if(i)n=i.$head;else return ve.near(n,r)}return e.parent.inlineContent||(s==0?e=n:(e=(ve.findFrom(e,-r,!0)||ve.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=s<0&&(e=n))),new xe(e,n)}}ve.jsonID("text",xe);class xg{constructor(e,n){this.anchor=e,this.head=n}map(e){return new xg(e.map(this.anchor),e.map(this.head))}resolve(e){return xe.between(e.resolve(this.anchor),e.resolve(this.head))}}class de extends ve{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:s}=n.mapResult(this.anchor),i=e.resolve(s);return r?ve.near(i):new de(i)}content(){return new Q(M.from(this.node),0,0)}eq(e){return e instanceof de&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new lS(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new de(e.resolve(n.anchor))}static create(e,n){return new de(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}de.prototype.visible=!1;ve.jsonID("node",de);class lS{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new xg(r,r):new lS(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&de.isSelectable(r)?new de(n):ve.near(n)}}class er extends ve{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=Q.empty){if(n==Q.empty){e.delete(0,e.doc.content.size);let r=ve.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new er(e)}map(e){return new er(e)}eq(e){return e instanceof er}getBookmark(){return mG}}ve.jsonID("all",er);const mG={map(){return this},resolve(t){return new er(t)}};function al(t,e,n,r,s,i=!1){if(e.inlineContent)return xe.create(t,n);for(let o=r-(s>0?0:1);s>0?o<e.childCount:o>=0;o+=s){let a=e.child(o);if(a.isAtom){if(!i&&de.isSelectable(a))return de.create(t,n-(s<0?a.nodeSize:0))}else{let l=al(t,a,n+s,s<0?a.childCount:0,s,i);if(l)return l}n+=a.nodeSize*s}return null}function tC(t,e,n){let r=t.steps.length-1;if(r<e)return;let s=t.steps[r];if(!(s instanceof Ut||s instanceof Ht))return;let i=t.mapping.maps[r],o;i.forEach((a,l,c,u)=>{o==null&&(o=u)}),t.setSelection(ve.near(t.doc.resolve(o),n))}const nC=1,Wf=2,rC=4;class gG extends kP{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|nC)&~Wf,this.storedMarks=null,this}get selectionSet(){return(this.updated&nC)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Wf,this}ensureMarks(e){return Ke.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Wf)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~Wf,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Ke.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let s=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(s.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),!e)return this.deleteRange(n,r);let i=this.storedMarks;if(!i){let o=this.doc.resolve(n);i=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,s.text(e,i)),!this.selection.empty&&this.selection.to==n+e.length&&this.setSelection(ve.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=rC,this}get scrolledIntoView(){return(this.updated&rC)>0}}function sC(t,e){return!e||!t?t:t.bind(e)}class yu{constructor(e,n,r){this.name=e,this.init=sC(n.init,r),this.apply=sC(n.apply,r)}}const yG=[new yu("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new yu("selection",{init(t,e){return t.selection||ve.atStart(e.doc)},apply(t){return t.selection}}),new yu("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new yu("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Uy{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=yG.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new yu(r.key,r.spec.state,r))})}}class kl{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let s=this.config.plugins[r];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),s=null;for(;;){let i=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=s?s[o].n:0,c=s?s[o].state:this,u=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(u&&r.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!s){s=[];for(let d=0;d<this.config.plugins.length;d++)s.push(d<o?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),i=!0}s&&(s[o]={state:r,n:n.length})}}if(!i)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new kl(this.config),r=this.config.fields;for(let s=0;s<r.length;s++){let i=r[s];n[i.name]=i.apply(e,this[i.name],this,n)}return n}get tr(){return new gG(this)}static create(e){let n=new Uy(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new kl(n);for(let s=0;s<n.fields.length;s++)r[n.fields[s].name]=n.fields[s].init(e,r);return r}reconfigure(e){let n=new Uy(this.schema,e.plugins),r=n.fields,s=new kl(n);for(let i=0;i<r.length;i++){let o=r[i].name;s[o]=this.hasOwnProperty(o)?this[o]:r[i].init(e,s)}return s}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=e[r],i=s.spec.state;i&&i.toJSON&&(n[r]=i.toJSON.call(s,this[s.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let s=new Uy(e.schema,e.plugins),i=new kl(s);return s.fields.forEach(o=>{if(o.name=="doc")i.doc=io.fromJSON(e.schema,n.doc);else if(o.name=="selection")i.selection=ve.fromJSON(i.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(i.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){i[o.name]=c.fromJSON.call(l,e,n[a],i);return}}i[o.name]=o.init(e,i)}}),i}}function EP(t,e,n){for(let r in t){let s=t[r];s instanceof Function?s=s.bind(e):r=="handleDOMEvents"&&(s=EP(s,e,{})),n[r]=s}return n}class nt{constructor(e){this.spec=e,this.props={},e.props&&EP(e.props,this,this.props),this.key=e.key?e.key.key:CP("plugin")}getState(e){return e[this.key]}}const zy=Object.create(null);function CP(t){return t in zy?t+"$"+ ++zy[t]:(zy[t]=0,t+"$")}class at{constructor(e="key"){this.key=CP(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const cS=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function NP(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const TP=(t,e,n)=>{let r=NP(t,n);if(!r)return!1;let s=uS(r);if(!s){let o=r.blockRange(),a=o&&Fc(o);return a==null?!1:(e&&e(t.tr.lift(o,a).scrollIntoView()),!0)}let i=s.nodeBefore;if(LP(t,s,e,-1))return!0;if(r.parent.content.size==0&&(vc(i,"end")||de.isSelectable(i)))for(let o=r.depth;;o--){let a=vg(t.doc,r.before(o),r.after(o),Q.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(vc(i,"end")?ve.findFrom(l.doc.resolve(l.mapping.map(s.pos,-1)),-1):de.create(l.doc,s.pos-i.nodeSize)),e(l.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return i.isAtom&&s.depth==r.depth-1?(e&&e(t.tr.delete(s.pos-i.nodeSize,s.pos).scrollIntoView()),!0):!1},vG=(t,e,n)=>{let r=NP(t,n);if(!r)return!1;let s=uS(r);return s?OP(t,s,e):!1},xG=(t,e,n)=>{let r=RP(t,n);if(!r)return!1;let s=dS(r);return s?OP(t,s,e):!1};function OP(t,e,n){let r=e.nodeBefore,s=r,i=e.pos-1;for(;!s.isTextblock;i--){if(s.type.spec.isolating)return!1;let u=s.lastChild;if(!u)return!1;s=u}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=vg(t.doc,i,l,Q.empty);if(!c||c.from!=i||c instanceof Ut&&c.slice.size>=l-i)return!1;if(n){let u=t.tr.step(c);u.setSelection(xe.create(u.doc,i)),n(u.scrollIntoView())}return!0}function vc(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const AP=(t,e,n)=>{let{$head:r,empty:s}=t.selection,i=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;i=uS(r)}let o=i&&i.nodeBefore;return!o||!de.isSelectable(o)?!1:(e&&e(t.tr.setSelection(de.create(t.doc,i.pos-o.nodeSize)).scrollIntoView()),!0)};function uS(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function RP(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const jP=(t,e,n)=>{let r=RP(t,n);if(!r)return!1;let s=dS(r);if(!s)return!1;let i=s.nodeAfter;if(LP(t,s,e,1))return!0;if(r.parent.content.size==0&&(vc(i,"start")||de.isSelectable(i))){let o=vg(t.doc,r.before(),r.after(),Q.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(vc(i,"start")?ve.findFrom(a.doc.resolve(a.mapping.map(s.pos)),1):de.create(a.doc,a.mapping.map(s.pos))),e(a.scrollIntoView())}return!0}}return i.isAtom&&s.depth==r.depth-1?(e&&e(t.tr.delete(s.pos,s.pos+i.nodeSize).scrollIntoView()),!0):!1},IP=(t,e,n)=>{let{$head:r,empty:s}=t.selection,i=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;i=dS(r)}let o=i&&i.nodeAfter;return!o||!de.isSelectable(o)?!1:(e&&e(t.tr.setSelection(de.create(t.doc,i.pos)).scrollIntoView()),!0)};function dS(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const bG=(t,e)=>{let n=t.selection,r=n instanceof de,s;if(r){if(n.node.isTextblock||!No(t.doc,n.from))return!1;s=n.from}else if(s=yg(t.doc,n.from,-1),s==null)return!1;if(e){let i=t.tr.join(s);r&&i.setSelection(de.create(i.doc,s-t.doc.resolve(s).nodeBefore.nodeSize)),e(i.scrollIntoView())}return!0},wG=(t,e)=>{let n=t.selection,r;if(n instanceof de){if(n.node.isTextblock||!No(t.doc,n.to))return!1;r=n.to}else if(r=yg(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},SG=(t,e)=>{let{$from:n,$to:r}=t.selection,s=n.blockRange(r),i=s&&Fc(s);return i==null?!1:(e&&e(t.tr.lift(s,i).scrollIntoView()),!0)},PP=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function fS(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const kG=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let s=n.node(-1),i=n.indexAfter(-1),o=fS(s.contentMatchAt(i));if(!o||!s.canReplaceWith(i,i,o))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,o.createAndFill());l.setSelection(ve.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},MP=(t,e)=>{let n=t.selection,{$from:r,$to:s}=n;if(n instanceof er||r.parent.inlineContent||s.parent.inlineContent)return!1;let i=fS(s.parent.contentMatchAt(s.indexAfter()));if(!i||!i.isTextblock)return!1;if(e){let o=(!r.parentOffset&&s.index()<s.parent.childCount?r:s).pos,a=t.tr.insert(o,i.createAndFill());a.setSelection(xe.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},DP=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let i=n.before();if(Js(t.doc,i))return e&&e(t.tr.split(i).scrollIntoView()),!0}let r=n.blockRange(),s=r&&Fc(r);return s==null?!1:(e&&e(t.tr.lift(r,s).scrollIntoView()),!0)};function _G(t){return(e,n)=>{let{$from:r,$to:s}=e.selection;if(e.selection instanceof de&&e.selection.node.isBlock)return!r.parentOffset||!Js(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let i=[],o,a,l=!1,c=!1;for(let p=r.depth;;p--)if(r.node(p).isBlock){l=r.end(p)==r.pos+(r.depth-p),c=r.start(p)==r.pos-(r.depth-p),a=fS(r.node(p-1).contentMatchAt(r.indexAfter(p-1))),i.unshift(l&&a?{type:a}:null),o=p;break}else{if(p==1)return!1;i.unshift(null)}let u=e.tr;(e.selection instanceof xe||e.selection instanceof er)&&u.deleteSelection();let d=u.mapping.map(r.pos),f=Js(u.doc,d,i.length,i);if(f||(i[0]=a?{type:a}:null,f=Js(u.doc,d,i.length,i)),!f)return!1;if(u.split(d,i.length,i),!l&&c&&r.node(o).type!=a){let p=u.mapping.map(r.before(o)),m=u.doc.resolve(p);a&&r.node(o-1).canReplaceWith(m.index(),m.index()+1,a)&&u.setNodeMarkup(u.mapping.map(r.before(o)),a)}return n&&n(u.scrollIntoView()),!0}}const EG=_G(),CG=(t,e)=>{let{$from:n,to:r}=t.selection,s,i=n.sharedDepth(r);return i==0?!1:(s=n.before(i),e&&e(t.tr.setSelection(de.create(t.doc,s))),!0)};function NG(t,e,n){let r=e.nodeBefore,s=e.nodeAfter,i=e.index();return!r||!s||!r.type.compatibleContent(s.type)?!1:!r.content.size&&e.parent.canReplace(i-1,i)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(i,i+1)||!(s.isTextblock||No(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function LP(t,e,n,r){let s=e.nodeBefore,i=e.nodeAfter,o,a,l=s.type.spec.isolating||i.type.spec.isolating;if(!l&&NG(t,e,n))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(o=(a=s.contentMatchAt(s.childCount)).findWrapping(i.type))&&a.matchType(o[0]||i.type).validEnd){if(n){let p=e.pos+i.nodeSize,m=M.empty;for(let v=o.length-1;v>=0;v--)m=M.from(o[v].create(null,m));m=M.from(s.copy(m));let g=t.tr.step(new Ht(e.pos-1,p,e.pos,p,new Q(m,1,0),o.length,!0)),y=g.doc.resolve(p+2*o.length);y.nodeAfter&&y.nodeAfter.type==s.type&&No(g.doc,y.pos)&&g.join(y.pos),n(g.scrollIntoView())}return!0}let u=i.type.spec.isolating||r>0&&l?null:ve.findFrom(e,1),d=u&&u.$from.blockRange(u.$to),f=d&&Fc(d);if(f!=null&&f>=e.depth)return n&&n(t.tr.lift(d,f).scrollIntoView()),!0;if(c&&vc(i,"start",!0)&&vc(s,"end")){let p=s,m=[];for(;m.push(p),!p.isTextblock;)p=p.lastChild;let g=i,y=1;for(;!g.isTextblock;g=g.firstChild)y++;if(p.canReplace(p.childCount,p.childCount,g.content)){if(n){let v=M.empty;for(let b=m.length-1;b>=0;b--)v=M.from(m[b].copy(v));let x=t.tr.step(new Ht(e.pos-m.length,e.pos+i.nodeSize,e.pos+y,e.pos+i.nodeSize-y,new Q(v,m.length,0),0,!0));n(x.scrollIntoView())}return!0}}return!1}function $P(t){return function(e,n){let r=e.selection,s=t<0?r.$from:r.$to,i=s.depth;for(;s.node(i).isInline;){if(!i)return!1;i--}return s.node(i).isTextblock?(n&&n(e.tr.setSelection(xe.create(e.doc,t<0?s.start(i):s.end(i)))),!0):!1}}const TG=$P(-1),OG=$P(1);function AG(t,e=null){return function(n,r){let{$from:s,$to:i}=n.selection,o=s.blockRange(i),a=o&&aS(o,t,e);return a?(r&&r(n.tr.wrap(o,a).scrollIntoView()),!0):!1}}function iC(t,e=null){return function(n,r){let s=!1;for(let i=0;i<n.selection.ranges.length&&!s;i++){let{$from:{pos:o},$to:{pos:a}}=n.selection.ranges[i];n.doc.nodesBetween(o,a,(l,c)=>{if(s)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)s=!0;else{let u=n.doc.resolve(c),d=u.index();s=u.parent.canReplaceWith(d,d+1,t)}})}if(!s)return!1;if(r){let i=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[o];i.setBlockType(a,l,t,e)}r(i.scrollIntoView())}return!0}}function hS(...t){return function(e,n,r){for(let s=0;s<t.length;s++)if(t[s](e,n,r))return!0;return!1}}hS(cS,TP,AP);hS(cS,jP,IP);hS(PP,MP,DP,EG);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function RG(t,e=null){return function(n,r){let{$from:s,$to:i}=n.selection,o=s.blockRange(i);if(!o)return!1;let a=r?n.tr:null;return jG(a,o,t,e)?(r&&r(a.scrollIntoView()),!0):!1}}function jG(t,e,n,r=null){let s=!1,i=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=o.resolve(e.start-2);i=new Ap(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new Ap(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),s=!0}let a=aS(i,n,r,e);return a?(t&&IG(t,e,a,s,n),!0):!1}function IG(t,e,n,r,s){let i=M.empty;for(let u=n.length-1;u>=0;u--)i=M.from(n[u].type.create(n[u].attrs,i));t.step(new Ht(e.start-(r?2:0),e.end,e.start,e.end,new Q(i,0,0),n.length,!0));let o=0;for(let u=0;u<n.length;u++)n[u].type==s&&(o=u+1);let a=n.length-o,l=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,f=!0;u<d;u++,f=!1)!f&&Js(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return t}function PG(t){return function(e,n){let{$from:r,$to:s}=e.selection,i=r.blockRange(s,o=>o.childCount>0&&o.firstChild.type==t);return i?n?r.node(i.depth-1).type==t?MG(e,n,t,i):DG(e,n,i):!0:!1}}function MG(t,e,n,r){let s=t.tr,i=r.end,o=r.$to.end(r.depth);i<o&&(s.step(new Ht(i-1,o,i,o,new Q(M.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Ap(s.doc.resolve(r.$from.pos),s.doc.resolve(o),r.depth));const a=Fc(r);if(a==null)return!1;s.lift(r,a);let l=s.doc.resolve(s.mapping.map(i,-1)-1);return No(s.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&s.join(l.pos),e(s.scrollIntoView()),!0}function DG(t,e,n){let r=t.tr,s=n.parent;for(let p=n.end,m=n.endIndex-1,g=n.startIndex;m>g;m--)p-=s.child(m).nodeSize,r.delete(p-1,p+1);let i=r.doc.resolve(n.start),o=i.nodeAfter;if(r.mapping.map(n.end)!=n.start+i.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==s.childCount,c=i.node(-1),u=i.index(-1);if(!c.canReplace(u+(a?0:1),u+1,o.content.append(l?M.empty:M.from(s))))return!1;let d=i.pos,f=d+o.nodeSize;return r.step(new Ht(d-(a?1:0),f+(l?1:0),d+1,f-1,new Q((a?M.empty:M.from(s.copy(M.empty))).append(l?M.empty:M.from(s.copy(M.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function LG(t){return function(e,n){let{$from:r,$to:s}=e.selection,i=r.blockRange(s,c=>c.childCount>0&&c.firstChild.type==t);if(!i)return!1;let o=i.startIndex;if(o==0)return!1;let a=i.parent,l=a.child(o-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=M.from(c?t.create():null),d=new Q(M.from(t.create(null,M.from(a.type.create(null,u)))),c?3:1,0),f=i.start,p=i.end;n(e.tr.step(new Ht(f-(c?3:1),p,f,p,d,1,!0)).scrollIntoView())}return!0}}const Zt=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},xc=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let bx=null;const Ps=function(t,e,n){let r=bx||(bx=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},$G=function(){bx=null},Ra=function(t,e,n,r){return n&&(oC(t,e,n,r,-1)||oC(t,e,n,r,1))},FG=/^(img|br|input|textarea|hr)$/i;function oC(t,e,n,r,s){for(var i;;){if(t==n&&e==r)return!0;if(e==(s<0?0:yr(t))){let o=t.parentNode;if(!o||o.nodeType!=1||ef(t)||FG.test(t.nodeName)||t.contentEditable=="false")return!1;e=Zt(t)+(s<0?0:1),t=o}else if(t.nodeType==1){let o=t.childNodes[e+(s<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((i=o.pmViewDesc)===null||i===void 0)&&i.ignoreForSelection)e+=s;else return!1;else t=o,e=s<0?yr(t):0}else return!1}}function yr(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function BG(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=yr(t)}else if(t.parentNode&&!ef(t))e=Zt(t),t=t.parentNode;else return null}}function UG(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!ef(t))e=Zt(t)+1,t=t.parentNode;else return null}}function zG(t,e,n){for(let r=e==0,s=e==yr(t);r||s;){if(t==n)return!0;let i=Zt(t);if(t=t.parentNode,!t)return!1;r=r&&i==0,s=s&&i==yr(t)}}function ef(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const bg=function(t){return t.focusNode&&Ra(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Bo(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function VG(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function HG(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(yr(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(yr(r.startContainer),r.startOffset)}}}const ys=typeof navigator<"u"?navigator:null,aC=typeof document<"u"?document:null,To=ys&&ys.userAgent||"",wx=/Edge\/(\d+)/.exec(To),FP=/MSIE \d/.exec(To),Sx=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(To),Vn=!!(FP||Sx||wx),ao=FP?document.documentMode:Sx?+Sx[1]:wx?+wx[1]:0,Sr=!Vn&&/gecko\/(\d+)/i.test(To);Sr&&+(/Firefox\/(\d+)/.exec(To)||[0,0])[1];const kx=!Vn&&/Chrome\/(\d+)/.exec(To),zt=!!kx,BP=kx?+kx[1]:0,rn=!Vn&&!!ys&&/Apple Computer/.test(ys.vendor),bc=rn&&(/Mobile\/\w+/.test(To)||!!ys&&ys.maxTouchPoints>2),hr=bc||(ys?/Mac/.test(ys.platform):!1),UP=ys?/Win/.test(ys.platform):!1,qs=/Android \d/.test(To),tf=!!aC&&"webkitFontSmoothing"in aC.documentElement.style,qG=tf?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function WG(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Es(t,e){return typeof t=="number"?t:t[e]}function KG(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function lC(t,e,n){let r=t.someProp("scrollThreshold")||0,s=t.someProp("scrollMargin")||5,i=t.dom.ownerDocument;for(let o=n||t.dom;o;){if(o.nodeType!=1){o=xc(o);continue}let a=o,l=a==i.body,c=l?WG(i):KG(a),u=0,d=0;if(e.top<c.top+Es(r,"top")?d=-(c.top-e.top+Es(s,"top")):e.bottom>c.bottom-Es(r,"bottom")&&(d=e.bottom-e.top>c.bottom-c.top?e.top+Es(s,"top")-c.top:e.bottom-c.bottom+Es(s,"bottom")),e.left<c.left+Es(r,"left")?u=-(c.left-e.left+Es(s,"left")):e.right>c.right-Es(r,"right")&&(u=e.right-c.right+Es(s,"right")),u||d)if(l)i.defaultView.scrollBy(u,d);else{let p=a.scrollLeft,m=a.scrollTop;d&&(a.scrollTop+=d),u&&(a.scrollLeft+=u);let g=a.scrollLeft-p,y=a.scrollTop-m;e={left:e.left-g,top:e.top-y,right:e.right-g,bottom:e.bottom-y}}let f=l?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(f))break;o=f=="absolute"?o.offsetParent:xc(o)}}function GG(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,s;for(let i=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=t.root.elementFromPoint(i,o);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,s=l.top;break}}return{refDOM:r,refTop:s,stack:zP(t.dom)}}function zP(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=xc(r));return e}function QG({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;VP(n,r==0?0:r-e)}function VP(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:s,left:i}=t[n];r.scrollTop!=s+e&&(r.scrollTop=s+e),r.scrollLeft!=i&&(r.scrollLeft=i)}}let Xa=null;function JG(t){if(t.setActive)return t.setActive();if(Xa)return t.focus(Xa);let e=zP(t);t.focus(Xa==null?{get preventScroll(){return Xa={preventScroll:!0},!0}}:void 0),Xa||(Xa=!1,VP(e,0))}function HP(t,e){let n,r=2e8,s,i=0,o=e.top,a=e.top,l,c;for(let u=t.firstChild,d=0;u;u=u.nextSibling,d++){let f;if(u.nodeType==1)f=u.getClientRects();else if(u.nodeType==3)f=Ps(u).getClientRects();else continue;for(let p=0;p<f.length;p++){let m=f[p];if(m.top<=o&&m.bottom>=a){o=Math.max(m.bottom,o),a=Math.min(m.top,a);let g=m.left>e.left?m.left-e.left:m.right<e.left?e.left-m.right:0;if(g<r){n=u,r=g,s=g&&n.nodeType==3?{left:m.right<e.left?m.right:m.left,top:e.top}:e,u.nodeType==1&&g&&(i=d+(e.left>=(m.left+m.right)/2?1:0));continue}}else m.top>e.top&&!l&&m.left<=e.left&&m.right>=e.left&&(l=u,c={left:Math.max(m.left,Math.min(m.right,e.left)),top:m.top});!n&&(e.left>=m.right&&e.top>=m.top||e.left>=m.left&&e.top>=m.bottom)&&(i=d+1)}}return!n&&l&&(n=l,s=c,r=0),n&&n.nodeType==3?YG(n,s):!n||r&&n.nodeType==1?{node:t,offset:i}:HP(n,s)}function YG(t,e){let n=t.nodeValue.length,r=document.createRange(),s;for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let o=yi(r,1);if(o.top!=o.bottom&&pS(e,o)){s={node:t,offset:i+(e.left>=(o.left+o.right)/2?1:0)};break}}return r.detach(),s||{node:t,offset:0}}function pS(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function ZG(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function XG(t,e,n){let{node:r,offset:s}=HP(e,n),i=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();i=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(r,s,i)}function eQ(t,e,n,r){let s=-1;for(let i=e,o=!1;i!=t.dom;){let a=t.docView.nearestDesc(i,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!o&&l.left>r.left||l.top>r.top?s=a.posBefore:(!o&&l.right<r.left||l.bottom<r.top)&&(s=a.posAfter),o=!0),!a.contentDOM&&s<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;i=a.dom.parentNode}return s>-1?s:t.docView.posFromDOM(e,n,-1)}function qP(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let s=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),i=s;;){let o=t.childNodes[i];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(pS(e,c))return qP(o,e,c)}}if((i=(i+1)%r)==s)break}return t}function tQ(t,e){let n=t.dom.ownerDocument,r,s=0,i=HG(n,e.left,e.top);i&&({node:r,offset:s}=i);let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=t.dom.getBoundingClientRect();if(!pS(e,c)||(o=qP(t.dom,e,c),!o))return null}if(rn)for(let c=o;r&&c;c=xc(c))c.draggable&&(r=void 0);if(o=ZG(o,e),r){if(Sr&&r.nodeType==1&&(s=Math.min(s,r.childNodes.length),s<r.childNodes.length)){let u=r.childNodes[s],d;u.nodeName=="IMG"&&(d=u.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&s++}let c;tf&&s&&r.nodeType==1&&(c=r.childNodes[s-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&s--,r==t.dom&&s==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(s==0||r.nodeType!=1||r.childNodes[s-1].nodeName!="BR")&&(a=eQ(t,r,s,e))}a==null&&(a=XG(t,o,e));let l=t.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function cC(t){return t.top<t.bottom||t.left<t.right}function yi(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(cC(r))return r}return Array.prototype.find.call(n,cC)||t.getBoundingClientRect()}const nQ=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function WP(t,e,n){let{node:r,offset:s,atom:i}=t.docView.domFromPos(e,n<0?-1:1),o=tf||Sr;if(r.nodeType==3)if(o&&(nQ.test(r.nodeValue)||(n<0?!s:s==r.nodeValue.length))){let l=yi(Ps(r,s,s),n);if(Sr&&s&&/\s/.test(r.nodeValue[s-1])&&s<r.nodeValue.length){let c=yi(Ps(r,s-1,s-1),-1);if(c.top==l.top){let u=yi(Ps(r,s,s+1),-1);if(u.top!=l.top)return tu(u,u.left<c.left)}}return l}else{let l=s,c=s,u=n<0?1:-1;return n<0&&!s?(c++,u=-1):n>=0&&s==r.nodeValue.length?(l--,u=1):n<0?l--:c++,tu(yi(Ps(r,l,c),u),u<0)}if(!t.state.doc.resolve(e-(i||0)).parent.inlineContent){if(i==null&&s&&(n<0||s==yr(r))){let l=r.childNodes[s-1];if(l.nodeType==1)return Vy(l.getBoundingClientRect(),!1)}if(i==null&&s<yr(r)){let l=r.childNodes[s];if(l.nodeType==1)return Vy(l.getBoundingClientRect(),!0)}return Vy(r.getBoundingClientRect(),n>=0)}if(i==null&&s&&(n<0||s==yr(r))){let l=r.childNodes[s-1],c=l.nodeType==3?Ps(l,yr(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return tu(yi(c,1),!1)}if(i==null&&s<yr(r)){let l=r.childNodes[s];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?Ps(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return tu(yi(c,-1),!0)}return tu(yi(r.nodeType==3?Ps(r):r,-n),n>=0)}function tu(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Vy(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function KP(t,e,n){let r=t.state,s=t.root.activeElement;r!=e&&t.updateState(e),s!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),s!=t.dom&&s&&s.focus()}}function rQ(t,e,n){let r=e.selection,s=n=="up"?r.$from:r.$to;return KP(t,e,()=>{let{node:i}=t.docView.domFromPos(s.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(i,!0);if(!a)break;if(a.node.isBlock){i=a.contentDOM||a.dom;break}i=a.dom.parentNode}let o=WP(t,s.pos,1);for(let a=i.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=Ps(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(n=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const sQ=/[\u0590-\u08ac]/;function iQ(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let s=r.parentOffset,i=!s,o=s==r.parent.content.size,a=t.domSelection();return a?!sQ.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?i:o:KP(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:d}=t.domSelectionRange(),f=a.caretBidiLevel;a.modify("move",n,"character");let p=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:m,focusOffset:g}=t.domSelectionRange(),y=m&&!p.contains(m.nodeType==1?m:m.parentNode)||l==m&&c==g;try{a.collapse(u,d),l&&(l!=u||c!=d)&&a.extend&&a.extend(l,c)}catch{}return f!=null&&(a.caretBidiLevel=f),y}):r.pos==r.start()||r.pos==r.end()}let uC=null,dC=null,fC=!1;function oQ(t,e,n){return uC==e&&dC==n?fC:(uC=e,dC=n,fC=n=="up"||n=="down"?rQ(t,e,n):iQ(t,e,n))}const kr=0,hC=1,Ko=2,vs=3;class nf{constructor(e,n,r,s){this.parent=e,this.children=n,this.dom=r,this.contentDOM=s,this.dirty=kr,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let s=this.children[n];if(s==e)return r;r+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let i,o;if(e==this.contentDOM)i=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.previousSibling}for(;i&&!((o=i.pmViewDesc)&&o.parent==this);)i=i.previousSibling;return i?this.posBeforeChild(o)+o.size:this.posAtStart}else{let i,o;if(e==this.contentDOM)i=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&!((o=i.pmViewDesc)&&o.parent==this);)i=i.nextSibling;return i?this.posBeforeChild(o):this.posAtEnd}let s;if(e==this.dom&&this.contentDOM)s=n>Zt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let i=e;;i=i.parentNode){if(i==this.dom){s=!1;break}if(i.previousSibling)break}if(s==null&&n==e.childNodes.length)for(let i=e;;i=i.parentNode){if(i==this.dom){s=!0;break}if(i.nextSibling)break}}return s??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,s=e;s;s=s.parentNode){let i=this.getDesc(s),o;if(i&&(!n||i.node))if(r&&(o=i.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return i}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let s=e;s;s=s.parentNode){let i=this.getDesc(s);if(i)return i.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let s=this.children[n],i=r+s.size;if(r==e&&i!=r){for(;!s.border&&s.children.length;)for(let o=0;o<s.children.length;o++){let a=s.children[o];if(a.size){s=a;break}}return s}if(e<i)return s.descAt(e-r-s.border);r=i}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,s=0;for(let i=0;r<this.children.length;r++){let o=this.children[r],a=i+o.size;if(a>e||o instanceof QP){s=e-i;break}i=a}if(s)return this.children[r].domFromPos(s-this.children[r].border,n);for(let i;r&&!(i=this.children[r-1]).size&&i instanceof GP&&i.side>=0;r--);if(n<=0){let i,o=!0;for(;i=r?this.children[r-1]:null,!(!i||i.dom.parentNode==this.contentDOM);r--,o=!1);return i&&n&&o&&!i.border&&!i.domAtom?i.domFromPos(i.size,n):{node:this.contentDOM,offset:i?Zt(i.dom)+1:0}}else{let i,o=!0;for(;i=r<this.children.length?this.children[r]:null,!(!i||i.dom.parentNode==this.contentDOM);r++,o=!1);return i&&o&&!i.border&&!i.domAtom?i.domFromPos(0,n):{node:this.contentDOM,offset:i?Zt(i.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,i=-1;for(let o=r,a=0;;a++){let l=this.children[a],c=o+l.size;if(s==-1&&e<=c){let u=o+l.border;if(e>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,u);e=o;for(let d=a;d>0;d--){let f=this.children[d-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){s=Zt(f.dom)+1;break}e-=f.size}s==-1&&(s=0)}if(s>-1&&(c>n||a==this.children.length-1)){n=c;for(let u=a+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){i=Zt(d.dom);break}n+=d.size}i==-1&&(i=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:n,fromOffset:s,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,s=!1){let i=Math.min(e,n),o=Math.max(e,n);for(let p=0,m=0;p<this.children.length;p++){let g=this.children[p],y=m+g.size;if(i>m&&o<y)return g.setSelection(e-m-g.border,n-m-g.border,r,s);m=y}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),d=!1;if((Sr||rn)&&e==n){let{node:p,offset:m}=a;if(p.nodeType==3){if(d=!!(m&&p.nodeValue[m-1]==`
`),d&&m==p.nodeValue.length)for(let g=p,y;g;g=g.parentNode){if(y=g.nextSibling){y.nodeName=="BR"&&(a=l={node:y.parentNode,offset:Zt(y)+1});break}let v=g.pmViewDesc;if(v&&v.node&&v.node.isBlock)break}}else{let g=p.childNodes[m-1];d=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(Sr&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let p=u.focusNode.childNodes[u.focusOffset];p&&p.contentEditable=="false"&&(s=!0)}if(!(s||d&&rn)&&Ra(a.node,a.offset,u.anchorNode,u.anchorOffset)&&Ra(l.node,l.offset,u.focusNode,u.focusOffset))return;let f=!1;if((c.extend||e==n)&&!(d&&Sr)){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),f=!0}catch{}}if(!f){if(e>n){let m=a;a=l,l=m}let p=document.createRange();p.setEnd(l.node,l.offset),p.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(p)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,s=0;s<this.children.length;s++){let i=this.children[s],o=r+i.size;if(r==o?e<=o&&n>=r:e<o&&n>r){let a=r+i.border,l=o-i.border;if(e>=a&&n<=l){this.dirty=e==r||n==o?Ko:hC,e==a&&n==l&&(i.contentLost||i.dom.parentNode!=this.contentDOM)?i.dirty=vs:i.markDirty(e-a,n-a);return}else i.dirty=i.dom==i.contentDOM&&i.dom.parentNode==this.contentDOM&&!i.children.length?Ko:vs}r=o}this.dirty=Ko}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Ko:hC;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class GP extends nf{constructor(e,n,r,s){let i,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!i)return s;if(i.parent)return i.parent.posBeforeChild(i)})),!n.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,i=this}matchesWidget(e){return this.dirty==kr&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class aQ extends nf{constructor(e,n,r,s){super(e,[],n,null),this.textDOM=r,this.text=s}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class ja extends nf{constructor(e,n,r,s,i){super(e,[],r,s),this.mark=n,this.spec=i}static create(e,n,r,s){let i=s.nodeViews[n.type.name],o=i&&i(n,s,r);return(!o||!o.dom)&&(o=Fa.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new ja(e,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&vs||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=vs&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=kr){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=kr}}slice(e,n,r){let s=ja.create(this.parent,this.mark,!0,r),i=this.children,o=this.size;n<o&&(i=Ex(i,n,o,r)),e>0&&(i=Ex(i,0,e,r));for(let a=0;a<i.length;a++)i[a].parent=s;return s.children=i,s}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class lo extends nf{constructor(e,n,r,s,i,o,a,l,c){super(e,[],i,o),this.node=n,this.outerDeco=r,this.innerDeco=s,this.nodeDOM=a}static create(e,n,r,s,i,o){let a=i.nodeViews[n.type.name],l,c=a&&a(n,i,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},r,s),u=c&&c.dom,d=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=Fa.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let f=u;return u=ZP(u,r,n),c?l=new lQ(e,n,r,s,u,d||null,f,c,i,o+1):n.isText?new wg(e,n,r,s,u,f,i):new lo(e,n,r,s,u,d||null,f,i,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>M.empty)}return e}matchesNode(e,n,r){return this.dirty==kr&&e.eq(this.node)&&jp(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,s=n,i=e.composing?this.localCompositionInfo(e,n):null,o=i&&i.pos>-1?i:null,a=i&&i.pos<0,l=new uQ(this,o&&o.node,e);hQ(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e,u):c.type.side>=0&&!d&&l.syncToMarks(u==this.node.childCount?Ke.none:this.node.child(u).marks,r,e,u),l.placeWidget(c,e,s)},(c,u,d,f)=>{l.syncToMarks(c.marks,r,e,f);let p;l.findNodeMatch(c,u,d,f)||a&&e.state.selection.from>s&&e.state.selection.to<s+c.nodeSize&&(p=l.findIndexWithChild(i.node))>-1&&l.updateNodeAt(c,u,d,p,e)||l.updateNextNode(c,u,d,e,f,s)||l.addNode(c,u,d,e,s),s+=c.nodeSize}),l.syncToMarks([],r,e,0),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Ko)&&(o&&this.protectLocalComposition(e,o),JP(this.contentDOM,this.children,e),bc&&pQ(this.dom))}localCompositionInfo(e,n){let{from:r,to:s}=e.state.selection;if(!(e.state.selection instanceof xe)||r<n||s>n+this.node.content.size)return null;let i=e.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){let o=i.nodeValue,a=mQ(this.node.content,o,r-n,s-n);return a<0?null:{node:i,pos:a,text:o}}else return{node:i,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:s}){if(this.getDesc(n))return;let i=n;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let o=new aQ(this,i,n,s);e.input.compositionNodes.push(o),this.children=Ex(this.children,r,r+s.length,e,o)}update(e,n,r,s){return this.dirty==vs||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,s),!0)}updateInner(e,n,r,s){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=kr}updateOuterDeco(e){if(jp(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=YP(this.dom,this.nodeDOM,_x(this.outerDeco,this.node,n),_x(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function pC(t,e,n,r,s){ZP(r,e,t);let i=new lo(void 0,t,e,n,r,r,r,s,0);return i.contentDOM&&i.updateChildren(s,0),i}class wg extends lo{constructor(e,n,r,s,i,o,a){super(e,n,r,s,i,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,s){return this.dirty==vs||this.dirty!=kr&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=kr||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=e,this.dirty=kr,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let s=this.node.cut(e,n),i=document.createTextNode(s.text);return new wg(this.parent,s,this.outerDeco,this.innerDeco,i,i,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=vs)}get domAtom(){return!1}isText(e){return this.node.text==e}}class QP extends nf{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==kr&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class lQ extends lo{constructor(e,n,r,s,i,o,a,l,c,u){super(e,n,r,s,i,o,a,c,u),this.spec=l}update(e,n,r,s){if(this.dirty==vs)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let i=this.spec.update(e,n,r);return i&&this.updateInner(e,n,r,s),i}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,s){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function JP(t,e,n){let r=t.firstChild,s=!1;for(let i=0;i<e.length;i++){let o=e[i],a=o.dom;if(a.parentNode==t){for(;a!=r;)r=mC(r),s=!0;r=r.nextSibling}else s=!0,t.insertBefore(a,r);if(o instanceof ja){let l=r?r.previousSibling:t.lastChild;JP(o.contentDOM,o.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=mC(r),s=!0;s&&n.trackWrites==t&&(n.trackWrites=null)}const Du=function(t){t&&(this.nodeName=t)};Du.prototype=Object.create(null);const Go=[new Du];function _x(t,e,n){if(t.length==0)return Go;let r=n?Go[0]:new Du,s=[r];for(let i=0;i<t.length;i++){let o=t[i].type.attrs;if(o){o.nodeName&&s.push(r=new Du(o.nodeName));for(let a in o){let l=o[a];l!=null&&(n&&s.length==1&&s.push(r=new Du(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return s}function YP(t,e,n,r){if(n==Go&&r==Go)return e;let s=e;for(let i=0;i<r.length;i++){let o=r[i],a=n[i];if(i){let l;a&&a.nodeName==o.nodeName&&s!=t&&(l=s.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(s),a=Go[0]),s=l}cQ(s,a||Go[0],o)}return s}function cQ(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],s=n.class?n.class.split(" ").filter(Boolean):[];for(let i=0;i<r.length;i++)s.indexOf(r[i])==-1&&t.classList.remove(r[i]);for(let i=0;i<s.length;i++)r.indexOf(s[i])==-1&&t.classList.add(s[i]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,s;for(;s=r.exec(e.style);)t.style.removeProperty(s[1])}n.style&&(t.style.cssText+=n.style)}}function ZP(t,e,n){return YP(t,t,Go,_x(e,n,t.nodeType!=1))}function jp(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function mC(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class uQ{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=dQ(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r,s){let i=0,o=this.stack.length>>1,a=Math.min(o,e.length);for(;i<a&&(i==o-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<o;)this.destroyRest(),this.top.dirty=kr,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let l=-1,c=this.top.children.length;s<this.preMatch.index&&(c=Math.min(this.index+3,c));for(let u=this.index;u<c;u++){let d=this.top.children[u];if(d.matchesMark(e[o])&&!this.isLocked(d.dom)){l=u;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let u=ja.create(this.top,e[o],n,r);this.top.children.splice(this.index,0,u),this.top=u,this.changed=!0}this.index=0,o++}}findNodeMatch(e,n,r,s){let i=-1,o;if(s>=this.preMatch.index&&(o=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,r))i=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){i=a;break}}return i<0?!1:(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,n,r,s,i){let o=this.top.children[s];return o.dirty==vs&&o.dom==o.contentDOM&&(o.dirty=Ko),o.update(e,n,r,i)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==r)return s}return-1}e=n}}updateNextNode(e,n,r,s,i,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof lo){let c=this.preMatch.matched.get(l);if(c!=null&&c!=i)return!1;let u=l.dom,d,f=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=vs&&jp(n,l.outerDeco));if(!f&&l.update(e,n,r,s))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!f&&(d=this.recreateWrapper(l,e,n,r,s,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=Ko,d.updateChildren(s,o+1),d.dirty=kr),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,s,i,o){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!jp(r,e.outerDeco)||!s.eq(e.innerDeco))return null;let a=lo.create(this.top,n,r,s,i,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,s,i){let o=lo.create(this.top,e,n,r,s,i);o.contentDOM&&o.updateChildren(s,i+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,n,r){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(s&&s.matchesWidget(e)&&(e==s.widget||!s.widget.type.toDOM.parentNode))this.index++;else{let i=new GP(this.top,e,n,r);this.top.children.splice(this.index++,0,i),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof ja;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof wg)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((rn||zt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let s=new QP(this.top,[],r,null);n!=this.top?n.children.push(s):n.children.splice(this.index++,0,s),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function dQ(t,e){let n=e,r=n.children.length,s=t.childCount,i=new Map,o=[];e:for(;s>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof ja)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(s-1))break;--s,i.set(a,s),o.push(a)}}return{index:s,matched:i,matches:o.reverse()}}function fQ(t,e){return t.type.side-e.type.side}function hQ(t,e,n,r){let s=e.locals(t),i=0;if(s.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,s,e.forChild(i,u),c),i+=u.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let u,d;for(;o<s.length&&s[o].to==i;){let y=s[o++];y.widget&&(u?(d||(d=[u])).push(y):u=y)}if(u)if(d){d.sort(fQ);for(let y=0;y<d.length;y++)n(d[y],c,!!l)}else n(u,c,!!l);let f,p;if(l)p=-1,f=l,l=null;else if(c<t.childCount)p=c,f=t.child(c++);else break;for(let y=0;y<a.length;y++)a[y].to<=i&&a.splice(y--,1);for(;o<s.length&&s[o].from<=i&&s[o].to>i;)a.push(s[o++]);let m=i+f.nodeSize;if(f.isText){let y=m;o<s.length&&s[o].from<y&&(y=s[o].from);for(let v=0;v<a.length;v++)a[v].to<y&&(y=a[v].to);y<m&&(l=f.cut(y-i),f=f.cut(0,y-i),m=y,p=-1)}else for(;o<s.length&&s[o].to<m;)o++;let g=f.isInline&&!f.isLeaf?a.filter(y=>!y.inline):a.slice();r(f,g,e.forChild(i,f),p),i=m}}function pQ(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function mQ(t,e,n,r){for(let s=0,i=0;s<t.childCount&&i<=r;){let o=t.child(s++),a=i;if(i+=o.nodeSize,!o.isText)continue;let l=o.text;for(;s<t.childCount;){let c=t.child(s++);if(i+=c.nodeSize,!c.isText)break;l+=c.text}if(i>=n){if(i>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function Ex(t,e,n,r,s){let i=[];for(let o=0,a=0;o<t.length;o++){let l=t[o],c=a,u=a+=l.size;c>=n||u<=e?i.push(l):(c<e&&i.push(l.slice(0,e-c,r)),s&&(i.push(s),s=void 0),u>n&&i.push(l.slice(n-c,l.size,r)))}return i}function mS(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let s=t.docView.nearestDesc(n.focusNode),i=s&&s.size==0,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let a=r.resolve(o),l,c;if(bg(n)){for(l=o;s&&!s.node;)s=s.parent;let d=s.node;if(s&&d.isAtom&&de.isSelectable(d)&&s.parent&&!(d.isInline&&zG(n.focusNode,n.focusOffset,s.dom))){let f=s.posBefore;c=new de(o==f?a:r.resolve(f))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=o,f=o;for(let p=0;p<n.rangeCount;p++){let m=n.getRangeAt(p);d=Math.min(d,t.docView.posFromDOM(m.startContainer,m.startOffset,1)),f=Math.max(f,t.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(d<0)return null;[l,o]=f==t.state.selection.anchor?[f,d]:[d,f],a=r.resolve(o)}else l=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let u=r.resolve(l);if(!c){let d=e=="pointer"||t.state.selection.head<a.pos&&!i?1:-1;c=gS(t,u,a,d)}return c}function XP(t){return t.editable?t.hasFocus():tM(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Ys(t,e=!1){let n=t.state.selection;if(eM(t,n),!!XP(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&zt){let r=t.domSelectionRange(),s=t.domObserver.currentSelection;if(r.anchorNode&&s.anchorNode&&Ra(r.anchorNode,r.anchorOffset,s.anchorNode,s.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)yQ(t);else{let{anchor:r,head:s}=n,i,o;gC&&!(n instanceof xe)&&(n.$from.parent.inlineContent||(i=yC(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=yC(t,n.to))),t.docView.setSelection(r,s,t,e),gC&&(i&&vC(i),o&&vC(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&gQ(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const gC=rn||zt&&BP<63;function yC(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),s=r<n.childNodes.length?n.childNodes[r]:null,i=r?n.childNodes[r-1]:null;if(rn&&s&&s.contentEditable=="false")return Hy(s);if((!s||s.contentEditable=="false")&&(!i||i.contentEditable=="false")){if(s)return Hy(s);if(i)return Hy(i)}}function Hy(t){return t.contentEditable="true",rn&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function vC(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function gQ(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,s=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=s)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!XP(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function yQ(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,Zt(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&Vn&&ao<=11&&(n.disabled=!0,n.disabled=!1)}function eM(t,e){if(e instanceof de){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(xC(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else xC(t)}function xC(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function gS(t,e,n,r){return t.someProp("createSelectionBetween",s=>s(t,e,n))||xe.between(e,n,r)}function bC(t){return t.editable&&!t.hasFocus()?!1:tM(t)}function tM(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function vQ(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return Ra(e.node,e.offset,n.anchorNode,n.anchorOffset)}function Cx(t,e){let{$anchor:n,$head:r}=t.selection,s=e>0?n.max(r):n.min(r),i=s.parent.inlineContent?s.depth?t.doc.resolve(e>0?s.after():s.before()):null:s;return i&&ve.findFrom(i,e)}function ki(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function wC(t,e,n){let r=t.state.selection;if(r instanceof xe)if(n.indexOf("s")>-1){let{$head:s}=r,i=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let o=t.state.doc.resolve(s.pos+i.nodeSize*(e<0?-1:1));return ki(t,new xe(r.$anchor,o))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let s=Cx(t.state,e);return s&&s instanceof de?ki(t,s):!1}else if(!(hr&&n.indexOf("m")>-1)){let s=r.$head,i=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter,o;if(!i||i.isText)return!1;let a=e<0?s.pos-i.nodeSize:s.pos;return i.isAtom||(o=t.docView.descAt(a))&&!o.contentDOM?de.isSelectable(i)?ki(t,new de(e<0?t.state.doc.resolve(s.pos-i.nodeSize):s)):tf?ki(t,new xe(t.state.doc.resolve(e<0?a:a+i.nodeSize))):!1:!1}}else return!1;else{if(r instanceof de&&r.node.isInline)return ki(t,new xe(e>0?r.$to:r.$from));{let s=Cx(t.state,e);return s?ki(t,s):!1}}}function Ip(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Lu(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function el(t,e){return e<0?xQ(t):bQ(t)}function xQ(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let s,i,o=!1;for(Sr&&n.nodeType==1&&r<Ip(n)&&Lu(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(Lu(a,-1))s=n,i=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(nM(n))break;{let a=n.previousSibling;for(;a&&Lu(a,-1);)s=n.parentNode,i=Zt(a),a=a.previousSibling;if(a)n=a,r=Ip(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}o?Nx(t,n,r):s&&Nx(t,s,i)}function bQ(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let s=Ip(n),i,o;for(;;)if(r<s){if(n.nodeType!=1)break;let a=n.childNodes[r];if(Lu(a,1))i=n,o=++r;else break}else{if(nM(n))break;{let a=n.nextSibling;for(;a&&Lu(a,1);)i=a.parentNode,o=Zt(a)+1,a=a.nextSibling;if(a)n=a,r=0,s=Ip(n);else{if(n=n.parentNode,n==t.dom)break;r=s=0}}}i&&Nx(t,i,o)}function nM(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function wQ(t,e){for(;t&&e==t.childNodes.length&&!ef(t);)e=Zt(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function SQ(t,e){for(;t&&!e&&!ef(t);)e=Zt(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function Nx(t,e,n){if(e.nodeType!=3){let i,o;(o=wQ(e,n))?(e=o,n=0):(i=SQ(e,n))&&(e=i,n=i.nodeValue.length)}let r=t.domSelection();if(!r)return;if(bg(r)){let i=document.createRange();i.setEnd(e,n),i.setStart(e,n),r.removeAllRanges(),r.addRange(i)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:s}=t;setTimeout(()=>{t.state==s&&Ys(t)},50)}function SC(t,e){let n=t.state.doc.resolve(e);if(!(zt||UP)&&n.parent.inlineContent){let s=t.coordsAtPos(e);if(e>n.start()){let i=t.coordsAtPos(e-1),o=(i.top+i.bottom)/2;if(o>s.top&&o<s.bottom&&Math.abs(i.left-s.left)>1)return i.left<s.left?"ltr":"rtl"}if(e<n.end()){let i=t.coordsAtPos(e+1),o=(i.top+i.bottom)/2;if(o>s.top&&o<s.bottom&&Math.abs(i.left-s.left)>1)return i.left>s.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function kC(t,e,n){let r=t.state.selection;if(r instanceof xe&&!r.empty||n.indexOf("s")>-1||hr&&n.indexOf("m")>-1)return!1;let{$from:s,$to:i}=r;if(!s.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=Cx(t.state,e);if(o&&o instanceof de)return ki(t,o)}if(!s.parent.inlineContent){let o=e<0?s:i,a=r instanceof er?ve.near(o,e):ve.findFrom(o,e);return a?ki(t,a):!1}return!1}function _C(t,e){if(!(t.state.selection instanceof xe))return!0;let{$head:n,$anchor:r,empty:s}=t.state.selection;if(!n.sameParent(r))return!0;if(!s)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let i=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(i&&!i.isText){let o=t.state.tr;return e<0?o.delete(n.pos-i.nodeSize,n.pos):o.delete(n.pos,n.pos+i.nodeSize),t.dispatch(o),!0}return!1}function EC(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function kQ(t){if(!rn||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;EC(t,r,"true"),setTimeout(()=>EC(t,r,"false"),20)}return!1}function _Q(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function EQ(t,e){let n=e.keyCode,r=_Q(e);if(n==8||hr&&n==72&&r=="c")return _C(t,-1)||el(t,-1);if(n==46&&!e.shiftKey||hr&&n==68&&r=="c")return _C(t,1)||el(t,1);if(n==13||n==27)return!0;if(n==37||hr&&n==66&&r=="c"){let s=n==37?SC(t,t.state.selection.from)=="ltr"?-1:1:-1;return wC(t,s,r)||el(t,s)}else if(n==39||hr&&n==70&&r=="c"){let s=n==39?SC(t,t.state.selection.from)=="ltr"?1:-1:1;return wC(t,s,r)||el(t,s)}else{if(n==38||hr&&n==80&&r=="c")return kC(t,-1,r)||el(t,-1);if(n==40||hr&&n==78&&r=="c")return kQ(t)||kC(t,1,r)||el(t,1);if(r==(hr?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function yS(t,e){t.someProp("transformCopied",p=>{e=p(e,t)});let n=[],{content:r,openStart:s,openEnd:i}=e;for(;s>1&&i>1&&r.childCount==1&&r.firstChild.childCount==1;){s--,i--;let p=r.firstChild;n.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),r=p.content}let o=t.someProp("clipboardSerializer")||Fa.fromSchema(t.state.schema),a=lM(),l=a.createElement("div");l.appendChild(o.serializeFragment(r,{document:a}));let c=l.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=aM[c.nodeName.toLowerCase()]);){for(let p=u.length-1;p>=0;p--){let m=a.createElement(u[p]);for(;l.firstChild;)m.appendChild(l.firstChild);l.appendChild(m),d++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${s} ${i}${d?` -${d}`:""} ${JSON.stringify(n)}`);let f=t.someProp("clipboardTextSerializer",p=>p(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:f,slice:e}}function rM(t,e,n,r,s){let i=s.parent.type.spec.code,o,a;if(!n&&!e)return null;let l=!!e&&(r||i||!n);if(l){if(t.someProp("transformPastedText",f=>{e=f(e,i||r,t)}),i)return a=new Q(M.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",f=>{a=f(a,t,!0)}),a;let d=t.someProp("clipboardTextParser",f=>f(e,s,r,t));if(d)a=d;else{let f=s.marks(),{schema:p}=t.state,m=Fa.fromSchema(p);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let y=o.appendChild(document.createElement("p"));g&&y.appendChild(m.serializeNode(p.text(g,f)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),o=OQ(n),tf&&AQ(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let f=o.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;o=f}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||oo.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||u),context:s,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!CQ.test(f.parentNode.nodeName)?{ignore:!0}:null}})),u)a=RQ(CC(a,+u[1],+u[2]),u[4]);else if(a=Q.maxOpen(NQ(a.content,s),!0),a.openStart||a.openEnd){let d=0,f=0;for(let p=a.content.firstChild;d<a.openStart&&!p.type.spec.isolating;d++,p=p.firstChild);for(let p=a.content.lastChild;f<a.openEnd&&!p.type.spec.isolating;f++,p=p.lastChild);a=CC(a,d,f)}return t.someProp("transformPasted",d=>{a=d(a,t,l)}),a}const CQ=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function NQ(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let s=e.node(n).contentMatchAt(e.index(n)),i,o=[];if(t.forEach(a=>{if(!o)return;let l=s.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&i.length&&iM(l,i,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=oM(o[o.length-1],i.length));let u=sM(a,l);o.push(u),s=s.matchType(u.type),i=l}}),o)return M.from(o)}return t}function sM(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,M.from(t));return t}function iM(t,e,n,r,s){if(s<t.length&&s<e.length&&t[s]==e[s]){let i=iM(t,e,n,r.lastChild,s+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(s==t.length-1?n.type:t[s+1]))return r.copy(r.content.append(M.from(sM(n,t,s+1))))}}function oM(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,oM(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(M.empty,!0);return t.copy(n.append(r))}function Tx(t,e,n,r,s,i){let o=e<0?t.firstChild:t.lastChild,a=o.content;return t.childCount>1&&(i=0),s<r-1&&(a=Tx(a,e,n,r,s+1,i)),s>=n&&(a=e<0?o.contentMatchAt(0).fillBefore(a,i<=s).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(M.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(a))}function CC(t,e,n){return e<t.openStart&&(t=new Q(Tx(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new Q(Tx(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const aM={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let NC=null;function lM(){return NC||(NC=document.implementation.createHTMLDocument("title"))}let qy=null;function TQ(t){let e=window.trustedTypes;return e?(qy||(qy=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),qy.createHTML(t)):t}function OQ(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=lM().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),s;if((s=r&&aM[r[1].toLowerCase()])&&(t=s.map(i=>"<"+i+">").join("")+t+s.map(i=>"</"+i+">").reverse().join("")),n.innerHTML=TQ(t),s)for(let i=0;i<s.length;i++)n=n.querySelector(s[i])||n;return n}function AQ(t){let e=t.querySelectorAll(zt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function RQ(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:s,openStart:i,openEnd:o}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;s=M.from(l.create(r[a+1],s)),i++,o++}return new Q(s,i,o)}const Cn={},Nn={},jQ={touchstart:!0,touchmove:!0};class IQ{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.badSafariComposition=!1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function PQ(t){for(let e in Cn){let n=Cn[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{DQ(t,r)&&!vS(t,r)&&(t.editable||!(r.type in Nn))&&n(t,r)},jQ[e]?{passive:!0}:void 0)}rn&&t.dom.addEventListener("input",()=>null),Ox(t)}function Wi(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function MQ(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function Ox(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>vS(t,r))})}function vS(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function DQ(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function LQ(t,e){!vS(t,e)&&Cn[e.type]&&(t.editable||!(e.type in Nn))&&Cn[e.type](t,e)}Nn.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!uM(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(qs&&zt&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),bc&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",s=>s(t,Bo(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||EQ(t,n)?n.preventDefault():Wi(t,"key")};Nn.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Nn.keypress=(t,e)=>{let n=e;if(uM(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||hr&&n.metaKey)return;if(t.someProp("handleKeyPress",s=>s(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof xe)||!r.$from.sameParent(r.$to)){let s=String.fromCharCode(n.charCode),i=()=>t.state.tr.insertText(s).scrollIntoView();!/[\r\n]/.test(s)&&!t.someProp("handleTextInput",o=>o(t,r.$from.pos,r.$to.pos,s,i))&&t.dispatch(i()),n.preventDefault()}};function Sg(t){return{left:t.clientX,top:t.clientY}}function $Q(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function xS(t,e,n,r,s){if(r==-1)return!1;let i=t.state.doc.resolve(r);for(let o=i.depth+1;o>0;o--)if(t.someProp(e,a=>o>i.depth?a(t,n,i.nodeAfter,i.before(o),s,!0):a(t,n,i.node(o),i.before(o),s,!1)))return!0;return!1}function Dl(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function FQ(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&de.isSelectable(r)?(Dl(t,new de(n)),!0):!1}function BQ(t,e){if(e==-1)return!1;let n=t.state.selection,r,s;n instanceof de&&(r=n.node);let i=t.state.doc.resolve(e);for(let o=i.depth+1;o>0;o--){let a=o>i.depth?i.nodeAfter:i.node(o);if(de.isSelectable(a)){r&&n.$from.depth>0&&o>=n.$from.depth&&i.before(n.$from.depth+1)==n.$from.pos?s=i.before(n.$from.depth):s=i.before(o);break}}return s!=null?(Dl(t,de.create(t.state.doc,s)),!0):!1}function UQ(t,e,n,r,s){return xS(t,"handleClickOn",e,n,r)||t.someProp("handleClick",i=>i(t,e,r))||(s?BQ(t,n):FQ(t,n))}function zQ(t,e,n,r){return xS(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",s=>s(t,e,r))}function VQ(t,e,n,r){return xS(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",s=>s(t,e,r))||HQ(t,n,r)}function HQ(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Dl(t,xe.create(r,0,r.content.size)),!0):!1;let s=r.resolve(e);for(let i=s.depth+1;i>0;i--){let o=i>s.depth?s.nodeAfter:s.node(i),a=s.before(i);if(o.inlineContent)Dl(t,xe.create(r,a+1,a+1+o.content.size));else if(de.isSelectable(o))Dl(t,de.create(r,a));else continue;return!0}}function bS(t){return Pp(t)}const cM=hr?"metaKey":"ctrlKey";Cn.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=bS(t),s=Date.now(),i="singleClick";s-t.input.lastClick.time<500&&$Q(n,t.input.lastClick)&&!n[cM]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?i="doubleClick":t.input.lastClick.type=="doubleClick"&&(i="tripleClick")),t.input.lastClick={time:s,x:n.clientX,y:n.clientY,type:i,button:n.button};let o=t.posAtCoords(Sg(n));o&&(i=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new qQ(t,o,n,!!r)):(i=="doubleClick"?zQ:VQ)(t,o.pos,o.inside,n)?n.preventDefault():Wi(t,"pointer"))};class qQ{constructor(e,n,r,s){this.view=e,this.pos=n,this.event=r,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[cM],this.allowDefault=r.shiftKey;let i,o;if(n.inside>-1)i=e.state.doc.nodeAt(n.inside),o=n.inside;else{let u=e.state.doc.resolve(n.pos);i=u.parent,o=u.depth?u.before():0}const a=s?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:c}=e.state;(r.button==0&&i.type.spec.draggable&&i.type.spec.selectable!==!1||c instanceof de&&c.from<=o&&c.to>o)&&(this.mightDrag={node:i,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Sr&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Wi(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Ys(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Sg(e))),this.updateAllowDefault(e),this.allowDefault||!n?Wi(this.view,"pointer"):UQ(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||rn&&this.mightDrag&&!this.mightDrag.node.isAtom||zt&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Dl(this.view,ve.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):Wi(this.view,"pointer")}move(e){this.updateAllowDefault(e),Wi(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Cn.touchstart=t=>{t.input.lastTouch=Date.now(),bS(t),Wi(t,"pointer")};Cn.touchmove=t=>{t.input.lastTouch=Date.now(),Wi(t,"pointer")};Cn.contextmenu=t=>bS(t);function uM(t,e){return t.composing?!0:rn&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const WQ=qs?5e3:-1;Nn.compositionstart=Nn.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof xe&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||zt&&UP&&KQ(t)))t.markCursor=t.state.storedMarks||n.marks(),Pp(t,!0),t.markCursor=null;else if(Pp(t,!e.selection.empty),Sr&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let s=r.focusNode,i=r.focusOffset;s&&s.nodeType==1&&i!=0;){let o=i<0?s.lastChild:s.childNodes[i-1];if(!o)break;if(o.nodeType==3){let a=t.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else s=o,i=-1}}t.input.composing=!0}dM(t,WQ)};function KQ(t){let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(!e||e.nodeType!=1||n>=e.childNodes.length)return!1;let r=e.childNodes[n];return r.nodeType==1&&r.contentEditable=="false"}Nn.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.badSafariComposition?t.domObserver.forceFlush():t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,dM(t,20))};function dM(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Pp(t),e))}function fM(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=QQ());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function GQ(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=BG(e.focusNode,e.focusOffset),r=UG(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let s=r.pmViewDesc,i=t.domObserver.lastChangedTextNode;if(n==i||r==i)return i;if(!s||!s.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function QQ(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Pp(t,e=!1){if(!(qs&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),fM(t),e||t.docView&&t.docView.dirty){let n=mS(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function JQ(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),s=document.createRange();s.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(s),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Od=Vn&&ao<15||bc&&qG<604;Cn.copy=Nn.cut=(t,e)=>{let n=e,r=t.state.selection,s=n.type=="cut";if(r.empty)return;let i=Od?null:n.clipboardData,o=r.content(),{dom:a,text:l}=yS(t,o);i?(n.preventDefault(),i.clearData(),i.setData("text/html",a.innerHTML),i.setData("text/plain",l)):JQ(t,a),s&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function YQ(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function ZQ(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let s=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Ad(t,r.value,null,s,e):Ad(t,r.textContent,r.innerHTML,s,e)},50)}function Ad(t,e,n,r,s){let i=rM(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,s,i||Q.empty)))return!0;if(!i)return!1;let o=YQ(i),a=o?t.state.tr.replaceSelectionWith(o,r):t.state.tr.replaceSelection(i);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function hM(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Nn.paste=(t,e)=>{let n=e;if(t.composing&&!qs)return;let r=Od?null:n.clipboardData,s=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Ad(t,hM(r),r.getData("text/html"),s,n)?n.preventDefault():ZQ(t,n)};class pM{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const XQ=hr?"altKey":"ctrlKey";function mM(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[XQ]}Cn.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let s=t.state.selection,i=s.empty?null:t.posAtCoords(Sg(n)),o;if(!(i&&i.pos>=s.from&&i.pos<=(s instanceof de?s.to-1:s.to))){if(r&&r.mightDrag)o=de.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=t.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=t.docView&&(o=de.create(t.state.doc,d.posBefore))}}let a=(o||t.state.selection).content(),{dom:l,text:c,slice:u}=yS(t,a);(!n.dataTransfer.files.length||!zt||BP>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Od?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",Od||n.dataTransfer.setData("text/plain",c),t.dragging=new pM(u,mM(t,n),o)};Cn.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Nn.dragover=Nn.dragenter=(t,e)=>e.preventDefault();Nn.drop=(t,e)=>{try{eJ(t,e,t.dragging)}finally{t.dragging=null}};function eJ(t,e,n){if(!e.dataTransfer)return;let r=t.posAtCoords(Sg(e));if(!r)return;let s=t.state.doc.resolve(r.pos),i=n&&n.slice;i?t.someProp("transformPasted",p=>{i=p(i,t,!1)}):i=rM(t,hM(e.dataTransfer),Od?null:e.dataTransfer.getData("text/html"),!1,s);let o=!!(n&&mM(t,e));if(t.someProp("handleDrop",p=>p(t,e,i||Q.empty,o))){e.preventDefault();return}if(!i)return;e.preventDefault();let a=i?vP(t.state.doc,s.pos,i):s.pos;a==null&&(a=s.pos);let l=t.state.tr;if(o){let{node:p}=n;p?p.replace(l):l.deleteSelection()}let c=l.mapping.map(a),u=i.openStart==0&&i.openEnd==0&&i.content.childCount==1,d=l.doc;if(u?l.replaceRangeWith(c,c,i.content.firstChild):l.replaceRange(c,c,i),l.doc.eq(d))return;let f=l.doc.resolve(c);if(u&&de.isSelectable(i.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(i.content.firstChild))l.setSelection(new de(f));else{let p=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((m,g,y,v)=>p=v),l.setSelection(gS(t,f,l.doc.resolve(p)))}t.focus(),t.dispatch(l.setMeta("uiEvent","drop"))}Cn.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Ys(t)},20))};Cn.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Cn.beforeinput=(t,e)=>{if(zt&&qs&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",i=>i(t,Bo(8,"Backspace")))))return;let{$cursor:s}=t.state.selection;s&&s.pos>0&&t.dispatch(t.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let t in Nn)Cn[t]=Nn[t];function Rd(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Mp{constructor(e,n){this.toDOM=e,this.spec=n||ca,this.side=this.spec.side||0}map(e,n,r,s){let{pos:i,deleted:o}=e.mapResult(n.from+s,this.side<0?-1:1);return o?null:new _n(i-r,i-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Mp&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Rd(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class co{constructor(e,n){this.attrs=e,this.spec=n||ca}map(e,n,r,s){let i=e.map(n.from+s,this.spec.inclusiveStart?-1:1)-r,o=e.map(n.to+s,this.spec.inclusiveEnd?1:-1)-r;return i>=o?null:new _n(i,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof co&&Rd(this.attrs,e.attrs)&&Rd(this.spec,e.spec)}static is(e){return e.type instanceof co}destroy(){}}class wS{constructor(e,n){this.attrs=e,this.spec=n||ca}map(e,n,r,s){let i=e.mapResult(n.from+s,1);if(i.deleted)return null;let o=e.mapResult(n.to+s,-1);return o.deleted||o.pos<=i.pos?null:new _n(i.pos-r,o.pos-r,this)}valid(e,n){let{index:r,offset:s}=e.content.findIndex(n.from),i;return s==n.from&&!(i=e.child(r)).isText&&s+i.nodeSize==n.to}eq(e){return this==e||e instanceof wS&&Rd(this.attrs,e.attrs)&&Rd(this.spec,e.spec)}destroy(){}}class _n{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new _n(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new _n(e,e,new Mp(n,r))}static inline(e,n,r,s){return new _n(e,n,new co(r,s))}static node(e,n,r,s){return new _n(e,n,new wS(r,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof co}get widget(){return this.type instanceof Mp}}const ll=[],ca={};class ct{constructor(e,n){this.local=e.length?e:ll,this.children=n.length?n:ll}static create(e,n){return n.length?Dp(n,e,0,ca):cn}find(e,n,r){let s=[];return this.findInner(e??0,n??1e9,s,0,r),s}findInner(e,n,r,s,i){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=n&&a.to>=e&&(!i||i(a.spec))&&r.push(a.copy(a.from+s,a.to+s))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,n-a,r,s+a,i)}}map(e,n,r){return this==cn||e.maps.length==0?this:this.mapInner(e,n,0,0,r||ca)}mapInner(e,n,r,s,i){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,s);l&&l.type.valid(n,l)?(o||(o=[])).push(l):i.onRemove&&i.onRemove(this.local[a].spec)}return this.children.length?tJ(this.children,o||[],e,n,r,s,i):o?new ct(o.sort(ua),ll):cn}add(e,n){return n.length?this==cn?ct.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let s,i=0;e.forEach((a,l)=>{let c=l+r,u;if(u=yM(n,a,c)){for(s||(s=this.children.slice());i<s.length&&s[i]<l;)i+=3;s[i]==l?s[i+2]=s[i+2].addInner(a,u,c+1):s.splice(i,0,l,l+a.nodeSize,Dp(u,a,c+1,ca)),i+=3}});let o=gM(i?vM(n):n,-r);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new ct(o.length?this.local.concat(o).sort(ua):this.local,s||this.children)}remove(e){return e.length==0||this==cn?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,s=this.local;for(let i=0;i<r.length;i+=3){let o,a=r[i]+n,l=r[i+1]+n;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>a&&d.to<l&&(e[u]=null,(o||(o=[])).push(d));if(!o)continue;r==this.children&&(r=this.children.slice());let c=r[i+2].removeInner(o,a+1);c!=cn?r[i+2]=c:(r.splice(i,3),i-=3)}if(s.length){for(let i=0,o;i<e.length;i++)if(o=e[i])for(let a=0;a<s.length;a++)s[a].eq(o,n)&&(s==this.local&&(s=this.local.slice()),s.splice(a--,1))}return r==this.children&&s==this.local?this:s.length||r.length?new ct(s,r):cn}forChild(e,n){if(this==cn)return this;if(n.isLeaf)return ct.empty;let r,s;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let i=e+1,o=i+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>i&&l.type instanceof co){let c=Math.max(i,l.from)-i,u=Math.min(o,l.to)-i;c<u&&(s||(s=[])).push(l.copy(c,u))}}if(s){let a=new ct(s.sort(ua),ll);return r?new Ai([a,r]):a}return r||cn}eq(e){if(this==e)return!0;if(!(e instanceof ct)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return SS(this.localsInner(e))}localsInner(e){if(this==cn)return ll;if(e.inlineContent||!this.local.some(co.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof co||n.push(this.local[r]);return n}forEachSet(e){e(this)}}ct.empty=new ct([],[]);ct.removeOverlap=SS;const cn=ct.empty;class Ai{constructor(e){this.members=e}map(e,n){const r=this.members.map(s=>s.map(e,n,ca));return Ai.from(r)}forChild(e,n){if(n.isLeaf)return ct.empty;let r=[];for(let s=0;s<this.members.length;s++){let i=this.members[s].forChild(e,n);i!=cn&&(i instanceof Ai?r=r.concat(i.members):r.push(i))}return Ai.from(r)}eq(e){if(!(e instanceof Ai)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let s=0;s<this.members.length;s++){let i=this.members[s].localsInner(e);if(i.length)if(!n)n=i;else{r&&(n=n.slice(),r=!1);for(let o=0;o<i.length;o++)n.push(i[o])}}return n?SS(r?n:n.sort(ua)):ll}static from(e){switch(e.length){case 0:return cn;case 1:return e[0];default:return new Ai(e.every(n=>n instanceof ct)?e:e.reduce((n,r)=>n.concat(r instanceof ct?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function tJ(t,e,n,r,s,i,o){let a=t.slice();for(let c=0,u=i;c<n.maps.length;c++){let d=0;n.maps[c].forEach((f,p,m,g)=>{let y=g-m-(p-f);for(let v=0;v<a.length;v+=3){let x=a[v+1];if(x<0||f>x+u-d)continue;let b=a[v]+u-d;p>=b?a[v+1]=f<=b?-2:-1:f>=u&&y&&(a[v]+=y,a[v+1]+=y)}d+=y}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(t[c]+i),d=u-s;if(d<0||d>=r.content.size){l=!0;continue}let f=n.map(t[c+1]+i,-1),p=f-s,{index:m,offset:g}=r.content.findIndex(d),y=r.maybeChild(m);if(y&&g==d&&g+y.nodeSize==p){let v=a[c+2].mapInner(n,y,u+1,t[c]+i+1,o);v!=cn?(a[c]=d,a[c+1]=p,a[c+2]=v):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=nJ(a,t,e,n,s,i,o),u=Dp(c,r,0,o);e=u.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,f=0;d<u.children.length;d+=3){let p=u.children[d];for(;f<a.length&&a[f]<p;)f+=3;a.splice(f,0,u.children[d],u.children[d+1],u.children[d+2])}}return new ct(e.sort(ua),a)}function gM(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let s=t[r];n.push(new _n(s.from+e,s.to+e,s.type))}return n}function nJ(t,e,n,r,s,i,o){function a(l,c){for(let u=0;u<l.local.length;u++){let d=l.local[u].map(r,s,c);d?n.push(d):o.onRemove&&o.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+i+1);return n}function yM(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,s=null;for(let i=0,o;i<t.length;i++)(o=t[i])&&o.from>n&&o.to<r&&((s||(s=[])).push(o),t[i]=null);return s}function vM(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Dp(t,e,n,r){let s=[],i=!1;e.forEach((a,l)=>{let c=yM(t,a,l+n);if(c){i=!0;let u=Dp(c,a,n+l+1,r);u!=cn&&s.push(l,l+a.nodeSize,u)}});let o=gM(i?vM(t):t,-n).sort(ua);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||s.length?new ct(o,s):cn}function ua(t,e){return t.from-e.from||t.to-e.to}function SS(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let s=n+1;s<e.length;s++){let i=e[s];if(i.from==r.from){i.to!=r.to&&(e==t&&(e=t.slice()),e[s]=i.copy(i.from,r.to),TC(e,s+1,i.copy(r.to,i.to)));continue}else{i.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,i.from),TC(e,s,r.copy(i.from,r.to)));break}}}return e}function TC(t,e,n){for(;e<t.length&&ua(n,t[e])>0;)e++;t.splice(e,0,n)}function Wy(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=cn&&e.push(r)}),t.cursorWrapper&&e.push(ct.create(t.state.doc,[t.cursorWrapper.deco])),Ai.from(e)}const rJ={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},sJ=Vn&&ao<=11;class iJ{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class oJ{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new iJ,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let s=0;s<r.length;s++)this.queue.push(r[s]);Vn&&ao<=11&&r.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():rn&&e.composing&&r.some(s=>s.type=="childList"&&s.target.nodeName=="TR")?(e.input.badSafariComposition=!0,this.flushSoon()):this.flush()}),sJ&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,rJ)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(bC(this.view)){if(this.suppressingSelectionUpdates)return Ys(this.view);if(Vn&&ao<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Ra(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let i=e.focusNode;i;i=xc(i))n.add(i);for(let i=e.anchorNode;i;i=xc(i))if(n.has(i)){r=i;break}let s=r&&this.view.docView.nearestDesc(r);if(s&&s.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),s=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&bC(e)&&!this.ignoreSelectionChange(r),i=-1,o=-1,a=!1,l=[];if(e.editable)for(let u=0;u<n.length;u++){let d=this.registerMutation(n[u],l);d&&(i=i<0?d.from:Math.min(d.from,i),o=o<0?d.to:Math.max(d.to,o),d.typeOver&&(a=!0))}if(Sr&&l.length){let u=l.filter(d=>d.nodeName=="BR");if(u.length==2){let[d,f]=u;d.parentNode&&d.parentNode.parentNode==f.parentNode?f.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let f of u){let p=f.parentNode;p&&p.nodeName=="LI"&&(!d||cJ(e,d)!=p)&&f.remove()}}}else if((zt||rn)&&l.some(u=>u.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let u of l)if(u.nodeName=="BR"&&u.parentNode){let d=u.nextSibling;d&&d.nodeType==1&&d.contentEditable=="false"&&u.parentNode.removeChild(u)}}let c=null;i<0&&s&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&bg(r)&&(c=mS(e))&&c.eq(ve.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Ys(e),this.currentSelection.set(r),e.scrollToSelection()):(i>-1||s)&&(i>-1&&(e.docView.markDirty(i,o),aJ(e)),e.input.badSafariComposition&&(e.input.badSafariComposition=!1,uJ(e,l)),this.handleDOMChange(i,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Ys(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let d=e.addedNodes[u];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let s=e.previousSibling,i=e.nextSibling;if(Vn&&ao<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:f}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(s=d),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(i=f)}let o=s&&s.parentNode==e.target?Zt(s)+1:0,a=r.localPosFromDOM(e.target,o,-1),l=i&&i.parentNode==e.target?Zt(i):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let OC=new WeakMap,AC=!1;function aJ(t){if(!OC.has(t)&&(OC.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Sr,AC)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),AC=!0}}function RC(t,e){let n=e.startContainer,r=e.startOffset,s=e.endContainer,i=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return Ra(o.node,o.offset,s,i)&&([n,r,s,i]=[s,i,n,r]),{anchorNode:n,anchorOffset:r,focusNode:s,focusOffset:i}}function lJ(t,e){if(e.getComposedRanges){let s=e.getComposedRanges(t.root)[0];if(s)return RC(t,s)}let n;function r(s){s.preventDefault(),s.stopImmediatePropagation(),n=s.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?RC(t,n):null}function cJ(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function uJ(t,e){var n;let{focusNode:r,focusOffset:s}=t.domSelectionRange();for(let i of e)if(((n=i.parentNode)===null||n===void 0?void 0:n.nodeName)=="TR"){let o=i.nextSibling;for(;o&&o.nodeName!="TD"&&o.nodeName!="TH";)o=o.nextSibling;if(o){let a=o;for(;;){let l=a.firstChild;if(!l||l.nodeType!=1||l.contentEditable=="false"||/^(BR|IMG)$/.test(l.nodeName))break;a=l}a.insertBefore(i,a.firstChild),r==i&&t.domSelection().collapse(i,s)}else i.parentNode.removeChild(i)}}function dJ(t,e,n){let{node:r,fromOffset:s,toOffset:i,from:o,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,u=l.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],bg(l)||c.push({node:l.focusNode,offset:l.focusOffset})),zt&&t.input.lastKeyCode===8)for(let y=i;y>s;y--){let v=r.childNodes[y-1],x=v.pmViewDesc;if(v.nodeName=="BR"&&!x){i=y;break}if(!x||x.size)break}let d=t.state.doc,f=t.someProp("domParser")||oo.fromSchema(t.state.schema),p=d.resolve(o),m=null,g=f.parse(r,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:s,to:i,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:fJ,context:p});if(c&&c[0].pos!=null){let y=c[0].pos,v=c[1]&&c[1].pos;v==null&&(v=y),m={anchor:y+o,head:v+o}}return{doc:g,sel:m,from:o,to:a}}function fJ(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(rn&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||rn&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const hJ=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function pJ(t,e,n,r,s){let i=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let _=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,T=mS(t,_);if(T&&!t.state.selection.eq(T)){if(zt&&qs&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",O=>O(t,Bo(13,"Enter"))))return;let A=t.state.tr.setSelection(T);_=="pointer"?A.setMeta("pointer",!0):_=="key"&&A.scrollIntoView(),i&&A.setMeta("composition",i),t.dispatch(A)}return}let o=t.state.doc.resolve(e),a=o.sharedDepth(n);e=o.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,c=dJ(t,e,n),u=t.state.doc,d=u.slice(c.from,c.to),f,p;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,p="end"):(f=t.state.selection.from,p="start"),t.input.lastKeyCode=null;let m=yJ(d.content,c.doc.content,c.from,f,p);if(m&&t.input.domChangeCount++,(bc&&t.input.lastIOSEnter>Date.now()-225||qs)&&s.some(_=>_.nodeType==1&&!hJ.test(_.nodeName))&&(!m||m.endA>=m.endB)&&t.someProp("handleKeyDown",_=>_(t,Bo(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!m)if(r&&l instanceof xe&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))m={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let _=jC(t,t.state.doc,c.sel);if(_&&!_.eq(t.state.selection)){let T=t.state.tr.setSelection(_);i&&T.setMeta("composition",i),t.dispatch(T)}}return}t.state.selection.from<t.state.selection.to&&m.start==m.endB&&t.state.selection instanceof xe&&(m.start>t.state.selection.from&&m.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?m.start=t.state.selection.from:m.endA<t.state.selection.to&&m.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(m.endB+=t.state.selection.to-m.endA,m.endA=t.state.selection.to)),Vn&&ao<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>c.from&&c.doc.textBetween(m.start-c.from-1,m.start-c.from+1)==" "&&(m.start--,m.endA--,m.endB--);let g=c.doc.resolveNoCache(m.start-c.from),y=c.doc.resolveNoCache(m.endB-c.from),v=u.resolve(m.start),x=g.sameParent(y)&&g.parent.inlineContent&&v.end()>=m.endA;if((bc&&t.input.lastIOSEnter>Date.now()-225&&(!x||s.some(_=>_.nodeName=="DIV"||_.nodeName=="P"))||!x&&g.pos<c.doc.content.size&&(!g.sameParent(y)||!g.parent.inlineContent)&&g.pos<y.pos&&!/\S/.test(c.doc.textBetween(g.pos,y.pos,"","")))&&t.someProp("handleKeyDown",_=>_(t,Bo(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>m.start&&gJ(u,m.start,m.endA,g,y)&&t.someProp("handleKeyDown",_=>_(t,Bo(8,"Backspace")))){qs&&zt&&t.domObserver.suppressSelectionUpdates();return}zt&&m.endB==m.start&&(t.input.lastChromeDelete=Date.now()),qs&&!x&&g.start()!=y.start()&&y.parentOffset==0&&g.depth==y.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==m.endA&&(m.endB-=2,y=c.doc.resolveNoCache(m.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(_){return _(t,Bo(13,"Enter"))})},20));let b=m.start,S=m.endA,k=_=>{let T=_||t.state.tr.replace(b,S,c.doc.slice(m.start-c.from,m.endB-c.from));if(c.sel){let A=jC(t,T.doc,c.sel);A&&!(zt&&t.composing&&A.empty&&(m.start!=m.endB||t.input.lastChromeDelete<Date.now()-100)&&(A.head==b||A.head==T.mapping.map(S)-1)||Vn&&A.empty&&A.head==b)&&T.setSelection(A)}return i&&T.setMeta("composition",i),T.scrollIntoView()},E;if(x)if(g.pos==y.pos){Vn&&ao<=11&&g.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Ys(t),20));let _=k(t.state.tr.delete(b,S)),T=u.resolve(m.start).marksAcross(u.resolve(m.endA));T&&_.ensureMarks(T),t.dispatch(_)}else if(m.endA==m.endB&&(E=mJ(g.parent.content.cut(g.parentOffset,y.parentOffset),v.parent.content.cut(v.parentOffset,m.endA-v.start())))){let _=k(t.state.tr);E.type=="add"?_.addMark(b,S,E.mark):_.removeMark(b,S,E.mark),t.dispatch(_)}else if(g.parent.child(g.index()).isText&&g.index()==y.index()-(y.textOffset?0:1)){let _=g.parent.textBetween(g.parentOffset,y.parentOffset),T=()=>k(t.state.tr.insertText(_,b,S));t.someProp("handleTextInput",A=>A(t,b,S,_,T))||t.dispatch(T())}else t.dispatch(k());else t.dispatch(k())}function jC(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:gS(t,e.resolve(n.anchor),e.resolve(n.head))}function mJ(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,s=n,i=r,o,a,l;for(let u=0;u<r.length;u++)s=r[u].removeFromSet(s);for(let u=0;u<n.length;u++)i=n[u].removeFromSet(i);if(s.length==1&&i.length==0)a=s[0],o="add",l=u=>u.mark(a.addToSet(u.marks));else if(s.length==0&&i.length==1)a=i[0],o="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(M.from(c).eq(t))return{mark:a,type:o}}function gJ(t,e,n,r,s){if(n-e<=s.pos-r.pos||Ky(r,!0,!1)<s.pos)return!1;let i=t.resolve(e);if(!r.parent.isTextblock){let a=i.nodeAfter;return a!=null&&n==e+a.nodeSize}if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let o=t.resolve(Ky(i,!0,!0));return!o.parent.isTextblock||o.pos>n||Ky(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function Ky(t,e,n){let r=t.depth,s=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,s++,e=!1;if(n){let i=t.node(r).maybeChild(t.indexAfter(r));for(;i&&!i.isLeaf;)i=i.firstChild,s++}return s}function yJ(t,e,n,r,s){let i=t.findDiffStart(e,n);if(i==null)return null;let{a:o,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(s=="end"){let l=Math.max(0,i-Math.min(o,a));r-=o+l-i}if(o<i&&t.size<e.size){let l=r<=i&&r>=o?i-r:0;i-=l,i&&i<e.size&&IC(e.textBetween(i-1,i+1))&&(i+=l?1:-1),a=i+(a-o),o=i}else if(a<i){let l=r<=i&&r>=a?i-r:0;i-=l,i&&i<t.size&&IC(t.textBetween(i-1,i+1))&&(i+=l?1:-1),o=i+(o-a),a=i}return{start:i,endA:o,endB:a}}function IC(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class xM{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new IQ,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach($C),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=DC(this),MC(this),this.nodeViews=LC(this),this.docView=pC(this.state.doc,PC(this),Wy(this),this.dom,this),this.domObserver=new oJ(this,(r,s,i,o)=>pJ(this,r,s,i,o)),this.domObserver.start(),PQ(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Ox(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach($C),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let s=this.state,i=!1,o=!1;e.storedMarks&&this.composing&&(fM(this),o=!0),this.state=e;let a=s.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let p=LC(this);xJ(p,this.nodeViews)&&(this.nodeViews=p,i=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&Ox(this),this.editable=DC(this),MC(this);let l=Wy(this),c=PC(this),u=s.plugins!=e.plugins&&!s.doc.eq(e.doc)?"reset":e.scrollToSelection>s.scrollToSelection?"to selection":"preserve",d=i||!this.docView.matchesNode(e.doc,c,l);(d||!e.selection.eq(s.selection))&&(o=!0);let f=u=="preserve"&&o&&this.dom.style.overflowAnchor==null&&GG(this);if(o){this.domObserver.stop();let p=d&&(Vn||zt)&&!this.composing&&!s.selection.empty&&!e.selection.empty&&vJ(s.selection,e.selection);if(d){let m=zt?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=GQ(this)),(i||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=pC(e.doc,c,l,this.dom,this)),m&&(!this.trackWrites||!this.dom.contains(this.trackWrites))&&(p=!0)}p||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&vQ(this))?Ys(this,p):(eM(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),!((r=this.dragging)===null||r===void 0)&&r.node&&!s.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,s),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():f&&QG(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof de){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&lC(this,n.getBoundingClientRect(),e)}else lC(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,s=-1;if(this.state.doc.nodeAt(r.from)==r.node)s=r.from;else{let i=r.from+(this.state.doc.content.size-n.doc.content.size);(i>0&&this.state.doc.nodeAt(i))==r.node&&(s=i)}this.dragging=new pM(e.slice,e.move,s<0?void 0:de.create(this.state.doc,s))}someProp(e,n){let r=this._props&&this._props[e],s;if(r!=null&&(s=n?n(r):r))return s;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(s=n?n(a):a))return s}let i=this.state.plugins;if(i)for(let o=0;o<i.length;o++){let a=i[o].props[e];if(a!=null&&(s=n?n(a):a))return s}}hasFocus(){if(Vn){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&JG(this.dom),Ys(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return tQ(this,e)}coordsAtPos(e,n=1){return WP(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let s=this.docView.posFromDOM(e,n,r);if(s==null)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(e,n){return oQ(this,n||this.state,e)}pasteHTML(e,n){return Ad(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Ad(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return yS(this,e)}destroy(){this.docView&&(MQ(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Wy(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,$G())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return LQ(this,e)}domSelectionRange(){let e=this.domSelection();return e?rn&&this.root.nodeType===11&&VG(this.dom.ownerDocument)==this.dom&&lJ(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}xM.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function PC(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[_n.node(0,t.state.doc.content.size,e)]}function MC(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:_n.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function DC(t){return!t.someProp("editable",e=>e(t.state)===!1)}function vJ(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function LC(t){let e=Object.create(null);function n(r){for(let s in r)Object.prototype.hasOwnProperty.call(e,s)||(e[s]=r[s])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function xJ(t,e){let n=0,r=0;for(let s in t){if(t[s]!=e[s])return!0;n++}for(let s in e)r++;return n!=r}function $C(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var vo={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Lp={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},bJ=typeof navigator<"u"&&/Mac/.test(navigator.platform),wJ=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Xt=0;Xt<10;Xt++)vo[48+Xt]=vo[96+Xt]=String(Xt);for(var Xt=1;Xt<=24;Xt++)vo[Xt+111]="F"+Xt;for(var Xt=65;Xt<=90;Xt++)vo[Xt]=String.fromCharCode(Xt+32),Lp[Xt]=String.fromCharCode(Xt);for(var Gy in vo)Lp.hasOwnProperty(Gy)||(Lp[Gy]=vo[Gy]);function SJ(t){var e=bJ&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||wJ&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Lp:vo)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const kJ=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),_J=typeof navigator<"u"&&/Win/.test(navigator.platform);function EJ(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,s,i,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))s=!0;else if(/^s(hift)?$/i.test(l))i=!0;else if(/^mod$/i.test(l))kJ?o=!0:s=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),s&&(n="Ctrl-"+n),o&&(n="Meta-"+n),i&&(n="Shift-"+n),n}function CJ(t){let e=Object.create(null);for(let n in t)e[EJ(n)]=t[n];return e}function Qy(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function NJ(t){return new nt({props:{handleKeyDown:kS(t)}})}function kS(t){let e=CJ(t);return function(n,r){let s=SJ(r),i,o=e[Qy(s,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(s.length==1&&s!=" "){if(r.shiftKey){let a=e[Qy(s,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(_J&&r.ctrlKey&&r.altKey)&&(i=vo[r.keyCode])&&i!=s){let a=e[Qy(i,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}var TJ=Object.defineProperty,_S=(t,e)=>{for(var n in e)TJ(t,n,{get:e[n],enumerable:!0})};function kg(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:s}=n,{storedMarks:i}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return i},get selection(){return r},get doc(){return s},get tr(){return r=n.selection,s=n.doc,i=n.storedMarks,n}}}var _g=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:r}=e,{tr:s}=n,i=this.buildProps(s);return Object.fromEntries(Object.entries(t).map(([o,a])=>[o,(...c)=>{const u=a(...c)(i);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(s),u}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:r,state:s}=this,{view:i}=r,o=[],a=!!t,l=t||s.tr,c=()=>(!a&&e&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(l),o.every(d=>d===!0)),u={...Object.fromEntries(Object.entries(n).map(([d,f])=>[d,(...m)=>{const g=this.buildProps(l,e),y=f(...m)(g);return o.push(y),u}])),run:c};return u}createCan(t){const{rawCommands:e,state:n}=this,r=!1,s=t||n.tr,i=this.buildProps(s,r);return{...Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...c)=>l(...c)({...i,dispatch:void 0})])),chain:()=>this.createChain(s,r)}}buildProps(t,e=!0){const{rawCommands:n,editor:r,state:s}=this,{view:i}=r,o={tr:t,editor:r,view:i,state:kg({state:s,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([a,l])=>[a,(...c)=>l(...c)(o)]))}};return o}},bM={};_S(bM,{blur:()=>OJ,clearContent:()=>AJ,clearNodes:()=>RJ,command:()=>jJ,createParagraphNear:()=>IJ,cut:()=>PJ,deleteCurrentNode:()=>MJ,deleteNode:()=>DJ,deleteRange:()=>LJ,deleteSelection:()=>$J,enter:()=>FJ,exitCode:()=>BJ,extendMarkRange:()=>UJ,first:()=>zJ,focus:()=>HJ,forEach:()=>qJ,insertContent:()=>WJ,insertContentAt:()=>QJ,joinBackward:()=>ZJ,joinDown:()=>YJ,joinForward:()=>XJ,joinItemBackward:()=>eY,joinItemForward:()=>tY,joinTextblockBackward:()=>nY,joinTextblockForward:()=>rY,joinUp:()=>JJ,keyboardShortcut:()=>iY,lift:()=>oY,liftEmptyBlock:()=>aY,liftListItem:()=>lY,newlineInCode:()=>cY,resetAttributes:()=>uY,scrollIntoView:()=>dY,selectAll:()=>fY,selectNodeBackward:()=>hY,selectNodeForward:()=>pY,selectParentNode:()=>mY,selectTextblockEnd:()=>gY,selectTextblockStart:()=>yY,setContent:()=>vY,setMark:()=>LY,setMeta:()=>$Y,setNode:()=>FY,setNodeSelection:()=>BY,setTextDirection:()=>UY,setTextSelection:()=>zY,sinkListItem:()=>VY,splitBlock:()=>HY,splitListItem:()=>qY,toggleList:()=>WY,toggleMark:()=>KY,toggleNode:()=>GY,toggleWrap:()=>QY,undoInputRule:()=>JY,unsetAllMarks:()=>YY,unsetMark:()=>ZY,unsetTextDirection:()=>XY,updateAttributes:()=>eZ,wrapIn:()=>tZ,wrapInList:()=>nZ});var OJ=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())==null||n.removeAllRanges())}),!0),AJ=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),RJ=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:s}=r;return n&&s.forEach(({$from:i,$to:o})=>{t.doc.nodesBetween(i.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),f=c.resolve(u.map(l+a.nodeSize)),p=d.blockRange(f);if(!p)return;const m=Fc(p);if(a.type.isTextblock){const{defaultType:g}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(p.start,g)}(m||m===0)&&e.lift(p,m)})}),!0},jJ=t=>e=>t(e),IJ=()=>({state:t,dispatch:e})=>MP(t,e),PJ=(t,e)=>({editor:n,tr:r})=>{const{state:s}=n,i=s.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const o=r.mapping.map(e);return r.insert(o,i.content),r.setSelection(new xe(r.doc.resolve(Math.max(o-1,0)))),!0},MJ=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const s=t.selection.$anchor;for(let i=s.depth;i>0;i-=1)if(s.node(i).type===r.type){if(e){const a=s.before(i),l=s.after(i);t.delete(a,l).scrollIntoView()}return!0}return!1};function Ot(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var DJ=t=>({tr:e,state:n,dispatch:r})=>{const s=Ot(t,n.schema),i=e.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===s){if(r){const l=i.before(o),c=i.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},LJ=t=>({tr:e,dispatch:n})=>{const{from:r,to:s}=t;return n&&e.delete(r,s),!0},$J=()=>({state:t,dispatch:e})=>cS(t,e),FJ=()=>({commands:t})=>t.keyboardShortcut("Enter"),BJ=()=>({state:t,dispatch:e})=>kG(t,e);function ES(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function $p(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(s=>n.strict?e[s]===t[s]:ES(e[s])?e[s].test(t[s]):e[s]===t[s]):!0}function wM(t,e,n={}){return t.find(r=>r.type===e&&$p(Object.fromEntries(Object.keys(n).map(s=>[s,r.attrs[s]])),n))}function FC(t,e,n={}){return!!wM(t,e,n)}function CS(t,e,n){var r;if(!t||!e)return;let s=t.parent.childAfter(t.parentOffset);if((!s.node||!s.node.marks.some(u=>u.type===e))&&(s=t.parent.childBefore(t.parentOffset)),!s.node||!s.node.marks.some(u=>u.type===e)||(n=n||((r=s.node.marks[0])==null?void 0:r.attrs),!wM([...s.node.marks],e,n)))return;let o=s.index,a=t.start()+s.offset,l=o+1,c=a+s.node.nodeSize;for(;o>0&&FC([...t.parent.child(o-1).marks],e,n);)o-=1,a-=t.parent.child(o).nodeSize;for(;l<t.parent.childCount&&FC([...t.parent.child(l).marks],e,n);)c+=t.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function oi(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var UJ=(t,e={})=>({tr:n,state:r,dispatch:s})=>{const i=oi(t,r.schema),{doc:o,selection:a}=n,{$from:l,from:c,to:u}=a;if(s){const d=CS(l,i,e);if(d&&d.from<=c&&d.to>=u){const f=xe.create(o,d.from,d.to);n.setSelection(f)}}return!0},zJ=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function NS(t){return t instanceof xe}function Ws(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function SM(t,e=null){if(!e)return null;const n=ve.atStart(t),r=ve.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const s=n.from,i=r.to;return e==="all"?xe.create(t,Ws(0,s,i),Ws(t.content.size,s,i)):xe.create(t,Ws(e,s,i),Ws(e,s,i))}function BC(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Fp(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function VJ(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var HJ=(t=null,e={})=>({editor:n,view:r,tr:s,dispatch:i})=>{e={scrollIntoView:!0,...e};const o=()=>{(Fp()||BC())&&r.dom.focus(),VJ()&&!Fp()&&!BC()&&r.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};try{if(r.hasFocus()&&t===null||t===!1)return!0}catch{return!1}if(i&&t===null&&!NS(n.state.selection))return o(),!0;const a=SM(s.doc,t)||n.state.selection,l=n.state.selection.eq(a);return i&&(l||s.setSelection(a),l&&s.storedMarks&&s.setStoredMarks(s.storedMarks),o()),!0},qJ=(t,e)=>n=>t.every((r,s)=>e(r,{...n,index:s})),WJ=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),kM=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&kM(r)}return t};function Kf(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return kM(n)}function jd(t,e,n){if(t instanceof io||t instanceof M)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,s=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return M.fromArray(t.map(a=>e.nodeFromJSON(a)));const o=e.nodeFromJSON(t);return n.errorOnInvalidContent&&o.check(),o}catch(i){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:i});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",i),jd("",e,n)}if(s){if(n.errorOnInvalidContent){let o=!1,a="";const l=new aP({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(o=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?oo.fromSchema(l).parseSlice(Kf(t),n.parseOptions):oo.fromSchema(l).parse(Kf(t),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const i=oo.fromSchema(e);return n.slice?i.parseSlice(Kf(t),n.parseOptions).content:i.parse(Kf(t),n.parseOptions)}return jd("",e,n)}function KJ(t,e,n){const r=t.steps.length-1;if(r<e)return;const s=t.steps[r];if(!(s instanceof Ut||s instanceof Ht))return;const i=t.mapping.maps[r];let o=0;i.forEach((a,l,c,u)=>{o===0&&(o=u)}),t.setSelection(ve.near(t.doc.resolve(o),n))}var GJ=t=>!("type"in t),QJ=(t,e,n)=>({tr:r,dispatch:s,editor:i})=>{var o;if(s){n={parseOptions:i.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;const l=y=>{i.emit("contentError",{editor:i,error:y,disableCollaboration:()=>{"collaboration"in i.storage&&typeof i.storage.collaboration=="object"&&i.storage.collaboration&&(i.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!i.options.enableContentCheck&&i.options.emitContentError)try{jd(e,i.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(y){l(y)}try{a=jd(e,i.schema,{parseOptions:c,errorOnInvalidContent:(o=n.errorOnInvalidContent)!=null?o:i.options.enableContentCheck})}catch(y){return l(y),!1}let{from:u,to:d}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},f=!0,p=!0;if((GJ(a)?a:[a]).forEach(y=>{y.check(),f=f?y.isText&&y.marks.length===0:!1,p=p?y.isBlock:!1}),u===d&&p){const{parent:y}=r.doc.resolve(u);y.isTextblock&&!y.type.spec.code&&!y.childCount&&(u-=1,d+=1)}let g;if(f){if(Array.isArray(e))g=e.map(y=>y.text||"").join("");else if(e instanceof M){let y="";e.forEach(v=>{v.text&&(y+=v.text)}),g=y}else typeof e=="object"&&e&&e.text?g=e.text:g=e;r.insertText(g,u,d)}else{g=a;const y=r.doc.resolve(u),v=y.node(),x=y.parentOffset===0,b=v.isText||v.isTextblock,S=v.content.size>0;x&&b&&S&&(u=Math.max(0,u-1)),r.replaceWith(u,d,g)}n.updateSelection&&KJ(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:u,text:g}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:u,text:g})}return!0},JJ=()=>({state:t,dispatch:e})=>bG(t,e),YJ=()=>({state:t,dispatch:e})=>wG(t,e),ZJ=()=>({state:t,dispatch:e})=>TP(t,e),XJ=()=>({state:t,dispatch:e})=>jP(t,e),eY=()=>({state:t,dispatch:e,tr:n})=>{try{const r=yg(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},tY=()=>({state:t,dispatch:e,tr:n})=>{try{const r=yg(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},nY=()=>({state:t,dispatch:e})=>vG(t,e),rY=()=>({state:t,dispatch:e})=>xG(t,e);function _M(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function sY(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,s,i,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))s=!0;else if(/^s(hift)?$/i.test(l))i=!0;else if(/^mod$/i.test(l))Fp()||_M()?o=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),s&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),i&&(n=`Shift-${n}`),n}var iY=t=>({editor:e,view:n,tr:r,dispatch:s})=>{const i=sY(t).split(/-(?!$)/),o=i.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&s&&r.maybeStep(u)}),!0};function xo(t,e,n={}){const{from:r,to:s,empty:i}=t.selection,o=e?Ot(e,t.schema):null,a=[];t.doc.nodesBetween(r,s,(d,f)=>{if(d.isText)return;const p=Math.max(r,f),m=Math.min(s,f+d.nodeSize);a.push({node:d,from:p,to:m})});const l=s-r,c=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>$p(d.node.attrs,n,{strict:!1}));return i?!!c.length:c.reduce((d,f)=>d+f.to-f.from,0)>=l}var oY=(t,e={})=>({state:n,dispatch:r})=>{const s=Ot(t,n.schema);return xo(n,s,e)?SG(n,r):!1},aY=()=>({state:t,dispatch:e})=>DP(t,e),lY=t=>({state:e,dispatch:n})=>{const r=Ot(t,e.schema);return PG(r)(e,n)},cY=()=>({state:t,dispatch:e})=>PP(t,e);function Eg(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function UC(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,s)=>(n.includes(s)||(r[s]=t[s]),r),{})}var uY=(t,e)=>({tr:n,state:r,dispatch:s})=>{let i=null,o=null;const a=Eg(typeof t=="string"?t:t.name,r.schema);if(!a)return!1;a==="node"&&(i=Ot(t,r.schema)),a==="mark"&&(o=oi(t,r.schema));let l=!1;return n.selection.ranges.forEach(c=>{r.doc.nodesBetween(c.$from.pos,c.$to.pos,(u,d)=>{i&&i===u.type&&(l=!0,s&&n.setNodeMarkup(d,void 0,UC(u.attrs,e))),o&&u.marks.length&&u.marks.forEach(f=>{o===f.type&&(l=!0,s&&n.addMark(d,d+u.nodeSize,o.create(UC(f.attrs,e))))})})}),l},dY=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),fY=()=>({tr:t,dispatch:e})=>{if(e){const n=new er(t.doc);t.setSelection(n)}return!0},hY=()=>({state:t,dispatch:e})=>AP(t,e),pY=()=>({state:t,dispatch:e})=>IP(t,e),mY=()=>({state:t,dispatch:e})=>CG(t,e),gY=()=>({state:t,dispatch:e})=>OG(t,e),yY=()=>({state:t,dispatch:e})=>TG(t,e);function Ax(t,e,n={},r={}){return jd(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}var vY=(t,{errorOnInvalidContent:e,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:s,tr:i,dispatch:o,commands:a})=>{const{doc:l}=i;if(r.preserveWhitespace!=="full"){const c=Ax(t,s.schema,r,{errorOnInvalidContent:e??s.options.enableContentCheck});return o&&i.replaceWith(0,l.content.size,c).setMeta("preventUpdate",!n),!0}return o&&i.setMeta("preventUpdate",!n),a.insertContentAt({from:0,to:l.content.size},t,{parseOptions:r,errorOnInvalidContent:e??s.options.enableContentCheck})};function EM(t,e){const n=oi(e,t.schema),{from:r,to:s,empty:i}=t.selection,o=[];i?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,s,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function CM(t,e){const n=new kP(t);return e.forEach(r=>{r.steps.forEach(s=>{n.step(s)})}),n}function xY(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function bY(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(s,i)=>{n(s)&&r.push({node:s,pos:i})}),r}function wY(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function Cg(t){return e=>wY(e.$from,t)}function ue(t,e,n){return t.config[e]===void 0&&t.parent?ue(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?ue(t.parent,e,n):null}):t.config[e]}function TS(t){return t.map(e=>{const n={name:e.name,options:e.options,storage:e.storage},r=ue(e,"addExtensions",n);return r?[e,...TS(r())]:e}).flat(10)}function OS(t,e){const n=Fa.fromSchema(e).serializeFragment(t),s=document.implementation.createHTMLDocument().createElement("div");return s.appendChild(n),s.innerHTML}function NM(t){return typeof t=="function"}function Ve(t,e=void 0,...n){return NM(t)?e?t.bind(e)(...n):t(...n):t}function SY(t={}){return Object.keys(t).length===0&&t.constructor===Object}function wc(t){const e=t.filter(s=>s.type==="extension"),n=t.filter(s=>s.type==="node"),r=t.filter(s=>s.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function TM(t){const e=[],{nodeExtensions:n,markExtensions:r}=wc(t),s=[...n,...r],i={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage,extensions:s},l=ue(o,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(d=>{Object.entries(u.attributes).forEach(([f,p])=>{e.push({type:d,name:f,attribute:{...i,...p}})})})})}),s.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=ue(o,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,d])=>{const f={...i,...d};typeof(f==null?void 0:f.default)=="function"&&(f.default=f.default()),f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete f.default,e.push({type:o.name,name:u,attribute:f})})}),e}function At(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([s,i])=>{if(!r[s]){r[s]=i;return}if(s==="class"){const a=i?String(i).split(" "):[],l=r[s]?r[s].split(" "):[],c=a.filter(u=>!l.includes(u));r[s]=[...l,...c].join(" ")}else if(s==="style"){const a=i?i.split(";").map(u=>u.trim()).filter(Boolean):[],l=r[s]?r[s].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;l.forEach(u=>{const[d,f]=u.split(":").map(p=>p.trim());c.set(d,f)}),a.forEach(u=>{const[d,f]=u.split(":").map(p=>p.trim());c.set(d,f)}),r[s]=Array.from(c.entries()).map(([u,d])=>`${u}: ${d}`).join("; ")}else r[s]=i}),r},{})}function Id(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>At(n,r),{})}function kY(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function zC(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const s=e.reduce((i,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(n):kY(n.getAttribute(o.name));return a==null?i:{...i,[o.name]:a}},{});return{...r,...s}}}}function VC(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&SY(n)?!1:n!=null))}function HC(t){var e,n;const r={};return!((e=t==null?void 0:t.attribute)!=null&&e.isRequired)&&"default"in((t==null?void 0:t.attribute)||{})&&(r.default=t.attribute.default),((n=t==null?void 0:t.attribute)==null?void 0:n.validate)!==void 0&&(r.validate=t.attribute.validate),[t.name,r]}function _Y(t,e){var n;const r=TM(t),{nodeExtensions:s,markExtensions:i}=wc(t),o=(n=s.find(c=>ue(c,"topNode")))==null?void 0:n.name,a=Object.fromEntries(s.map(c=>{const u=r.filter(v=>v.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((v,x)=>{const b=ue(x,"extendNodeSchema",d);return{...v,...b?b(c):{}}},{}),p=VC({...f,content:Ve(ue(c,"content",d)),marks:Ve(ue(c,"marks",d)),group:Ve(ue(c,"group",d)),inline:Ve(ue(c,"inline",d)),atom:Ve(ue(c,"atom",d)),selectable:Ve(ue(c,"selectable",d)),draggable:Ve(ue(c,"draggable",d)),code:Ve(ue(c,"code",d)),whitespace:Ve(ue(c,"whitespace",d)),linebreakReplacement:Ve(ue(c,"linebreakReplacement",d)),defining:Ve(ue(c,"defining",d)),isolating:Ve(ue(c,"isolating",d)),attrs:Object.fromEntries(u.map(HC))}),m=Ve(ue(c,"parseHTML",d));m&&(p.parseDOM=m.map(v=>zC(v,u)));const g=ue(c,"renderHTML",d);g&&(p.toDOM=v=>g({node:v,HTMLAttributes:Id(v,u)}));const y=ue(c,"renderText",d);return y&&(p.toText=y),[c.name,p]})),l=Object.fromEntries(i.map(c=>{const u=r.filter(y=>y.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((y,v)=>{const x=ue(v,"extendMarkSchema",d);return{...y,...x?x(c):{}}},{}),p=VC({...f,inclusive:Ve(ue(c,"inclusive",d)),excludes:Ve(ue(c,"excludes",d)),group:Ve(ue(c,"group",d)),spanning:Ve(ue(c,"spanning",d)),code:Ve(ue(c,"code",d)),attrs:Object.fromEntries(u.map(HC))}),m=Ve(ue(c,"parseHTML",d));m&&(p.parseDOM=m.map(y=>zC(y,u)));const g=ue(c,"renderHTML",d);return g&&(p.toDOM=y=>g({mark:y,HTMLAttributes:Id(y,u)})),[c.name,p]}));return new aP({topNode:o,nodes:a,marks:l})}function EY(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}function Bp(t){return t.sort((n,r)=>{const s=ue(n,"priority")||100,i=ue(r,"priority")||100;return s>i?-1:s<i?1:0})}function OM(t){const e=Bp(TS(t)),n=EY(e.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function AM(t,e,n){const{from:r,to:s}=e,{blockSeparator:i=`

`,textSerializers:o={}}=n||{};let a="";return t.nodesBetween(r,s,(l,c,u,d)=>{var f;l.isBlock&&c>r&&(a+=i);const p=o==null?void 0:o[l.type.name];if(p)return u&&(a+=p({node:l,pos:c,parent:u,index:d,range:e})),!1;l.isText&&(a+=(f=l==null?void 0:l.text)==null?void 0:f.slice(Math.max(r,c)-c,s-c))}),a}function RM(t,e){const n={from:0,to:t.content.size};return AM(t,n,e)}function AS(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}function CY(t,e){const n=Ot(e,t.schema),{from:r,to:s}=t.selection,i=[];t.doc.nodesBetween(r,s,a=>{i.push(a)});const o=i.reverse().find(a=>a.type.name===n.name);return o?{...o.attrs}:{}}function jM(t,e){const n=Eg(typeof e=="string"?e:e.name,t.schema);return n==="node"?CY(t,e):n==="mark"?EM(t,e):{}}function NY(t,e=JSON.stringify){const n={};return t.filter(r=>{const s=e(r);return Object.prototype.hasOwnProperty.call(n,s)?!1:n[s]=!0})}function TY(t){const e=NY(t);return e.length===1?e:e.filter((n,r)=>!e.filter((i,o)=>o!==r).some(i=>n.oldRange.from>=i.oldRange.from&&n.oldRange.to<=i.oldRange.to&&n.newRange.from>=i.newRange.from&&n.newRange.to<=i.newRange.to))}function IM(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((s,i)=>{const o=[];if(s.ranges.length)s.forEach((a,l)=>{o.push({from:a,to:l})});else{const{from:a,to:l}=n[i];if(a===void 0||l===void 0)return;o.push({from:a,to:l})}o.forEach(({from:a,to:l})=>{const c=e.slice(i).map(a,-1),u=e.slice(i).map(l),d=e.invert().map(c,-1),f=e.invert().map(u);r.push({oldRange:{from:d,to:f},newRange:{from:c,to:u}})})}),TY(r)}function RS(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(s=>{const i=n.resolve(t),o=CS(i,s.type);o&&r.push({mark:s,...o})}):n.nodesBetween(t,e,(s,i)=>{!s||(s==null?void 0:s.nodeSize)===void 0||r.push(...s.marks.map(o=>({from:i,to:i+s.nodeSize,mark:o})))}),r}var OY=(t,e,n,r=20)=>{const s=t.doc.resolve(n);let i=r,o=null;for(;i>0&&o===null;){const a=s.node(i);(a==null?void 0:a.type.name)===e?o=a:i-=1}return[o,i]};function Gf(t,e){return e.nodes[t]||e.marks[t]||null}function Eh(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const s=t.find(i=>i.type===e&&i.name===r);return s?s.attribute.keepOnSplit:!1}))}var AY=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(s,i,o,a)=>{var l,c;const u=((c=(l=s.type.spec).toText)==null?void 0:c.call(l,{node:s,pos:i,parent:o,index:a}))||s.textContent||"%leaf%";n+=s.isAtom&&!s.isText?u:u.slice(0,Math.max(0,r-i))}),n};function Rx(t,e,n={}){const{empty:r,ranges:s}=t.selection,i=e?oi(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>i?i.name===d.type.name:!0).find(d=>$p(d.attrs,n,{strict:!1}));let o=0;const a=[];if(s.forEach(({$from:d,$to:f})=>{const p=d.pos,m=f.pos;t.doc.nodesBetween(p,m,(g,y)=>{if(!g.isText&&!g.marks.length)return;const v=Math.max(p,y),x=Math.min(m,y+g.nodeSize),b=x-v;o+=b,a.push(...g.marks.map(S=>({mark:S,from:v,to:x})))})}),o===0)return!1;const l=a.filter(d=>i?i.name===d.mark.type.name:!0).filter(d=>$p(d.mark.attrs,n,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),c=a.filter(d=>i?d.mark.type!==i&&d.mark.type.excludes(i):!0).reduce((d,f)=>d+f.to-f.from,0);return(l>0?l+c:l)>=o}function RY(t,e,n={}){if(!e)return xo(t,null,n)||Rx(t,null,n);const r=Eg(e,t.schema);return r==="node"?xo(t,e,n):r==="mark"?Rx(t,e,n):!1}var jY=(t,e)=>{const{$from:n,$to:r,$anchor:s}=t.selection;if(e){const i=Cg(a=>a.type.name===e)(t.selection);if(!i)return!1;const o=t.doc.resolve(i.pos+1);return s.pos+1===o.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},IY=t=>{const{$from:e,$to:n}=t.selection;return!(e.parentOffset>0||e.pos!==n.pos)};function qC(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function WC(t,e){const{nodeExtensions:n}=wc(e),r=n.find(o=>o.name===t);if(!r)return!1;const s={name:r.name,options:r.options,storage:r.storage},i=Ve(ue(r,"group",s));return typeof i!="string"?!1:i.split(" ").includes("list")}function Ng(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!=null?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let s=!0;return t.content.forEach(i=>{s!==!1&&(Ng(i,{ignoreWhitespace:n,checkChildren:e})||(s=!1))}),s}return!1}function PM(t){return t instanceof de}var MM=class DM{constructor(e){this.position=e}static fromJSON(e){return new DM(e.position)}toJSON(){return{position:this.position}}};function PY(t,e){const n=e.mapping.mapResult(t.position);return{position:new MM(n.pos),mapResult:n}}function MY(t){return new MM(t)}function LM(t,e,n){const s=t.state.doc.content.size,i=Ws(e,0,s),o=Ws(n,0,s),a=t.coordsAtPos(i),l=t.coordsAtPos(o,-1),c=Math.min(a.top,l.top),u=Math.max(a.bottom,l.bottom),d=Math.min(a.left,l.left),f=Math.max(a.right,l.right),p=f-d,m=u-c,v={top:c,bottom:u,left:d,right:f,width:p,height:m,x:d,y:c};return{...v,toJSON:()=>v}}function DY(t,e,n){var r;const{selection:s}=e;let i=null;if(NS(s)&&(i=s.$cursor),i){const a=(r=t.storedMarks)!=null?r:i.marks();return i.parent.type.allowsMarkType(n)&&(!!n.isInSet(a)||!a.some(c=>c.type.excludes(n)))}const{ranges:o}=s;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(u,d,f)=>{if(c)return!1;if(u.isInline){const p=!f||f.type.allowsMarkType(n),m=!!n.isInSet(u.marks)||!u.marks.some(g=>g.type.excludes(n));c=p&&m}return!c}),c})}var LY=(t,e={})=>({tr:n,state:r,dispatch:s})=>{const{selection:i}=n,{empty:o,ranges:a}=i,l=oi(t,r.schema);if(s)if(o){const c=EM(r,l);n.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(f,p)=>{const m=Math.max(p,u),g=Math.min(p+f.nodeSize,d);f.marks.find(v=>v.type===l)?f.marks.forEach(v=>{l===v.type&&n.addMark(m,g,l.create({...v.attrs,...e}))}):n.addMark(m,g,l.create(e))})});return DY(r,n,l)},$Y=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),FY=(t,e={})=>({state:n,dispatch:r,chain:s})=>{const i=Ot(t,n.schema);let o;return n.selection.$anchor.sameParent(n.selection.$head)&&(o=n.selection.$anchor.parent.attrs),i.isTextblock?s().command(({commands:a})=>iC(i,{...o,...e})(n)?!0:a.clearNodes()).command(({state:a})=>iC(i,{...o,...e})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},BY=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,s=Ws(t,0,r.content.size),i=de.create(r,s);e.setSelection(i)}return!0},UY=(t,e)=>({tr:n,state:r,dispatch:s})=>{const{selection:i}=r;let o,a;return typeof e=="number"?(o=e,a=e):e&&"from"in e&&"to"in e?(o=e.from,a=e.to):(o=i.from,a=i.to),s&&n.doc.nodesBetween(o,a,(l,c)=>{l.isText||n.setNodeMarkup(c,void 0,{...l.attrs,dir:t})}),!0},zY=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:s,to:i}=typeof t=="number"?{from:t,to:t}:t,o=xe.atStart(r).from,a=xe.atEnd(r).to,l=Ws(s,o,a),c=Ws(i,o,a),u=xe.create(r,l,c);e.setSelection(u)}return!0},VY=t=>({state:e,dispatch:n})=>{const r=Ot(t,e.schema);return LG(r)(e,n)};function KC(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(s=>e==null?void 0:e.includes(s.type.name));t.tr.ensureMarks(r)}}var HY=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:s})=>{const{selection:i,doc:o}=e,{$from:a,$to:l}=i,c=s.extensionManager.attributes,u=Eh(c,a.node().type.name,a.node().attrs);if(i instanceof de&&i.node.isBlock)return!a.parentOffset||!Js(o,a.pos)?!1:(r&&(t&&KC(n,s.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const d=l.parentOffset===l.parent.content.size,f=a.depth===0?void 0:xY(a.node(-1).contentMatchAt(a.indexAfter(-1)));let p=d&&f?[{type:f,attrs:u}]:void 0,m=Js(e.doc,e.mapping.map(a.pos),1,p);if(!p&&!m&&Js(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(m=!0,p=f?[{type:f,attrs:u}]:void 0),r){if(m&&(i instanceof xe&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,p),f&&!d&&!a.parentOffset&&a.parent.type!==f)){const g=e.mapping.map(a.before()),y=e.doc.resolve(g);a.node(-1).canReplaceWith(y.index(),y.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}t&&KC(n,s.extensionManager.splittableMarks),e.scrollIntoView()}return m},qY=(t,e={})=>({tr:n,state:r,dispatch:s,editor:i})=>{var o;const a=Ot(t,r.schema),{$from:l,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||l.depth<2||!l.sameParent(c))return!1;const d=l.node(-1);if(d.type!==a)return!1;const f=i.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(s){let v=M.empty;const x=l.index(-1)?1:l.index(-2)?2:3;for(let T=l.depth-x;T>=l.depth-3;T-=1)v=M.from(l.node(T).copy(v));const b=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,S={...Eh(f,l.node().type.name,l.node().attrs),...e},k=((o=a.contentMatch.defaultType)==null?void 0:o.createAndFill(S))||void 0;v=v.append(M.from(a.createAndFill(null,k)||void 0));const E=l.before(l.depth-(x-1));n.replace(E,l.after(-b),new Q(v,4-x,0));let _=-1;n.doc.nodesBetween(E,n.doc.content.size,(T,A)=>{if(_>-1)return!1;T.isTextblock&&T.content.size===0&&(_=A+1)}),_>-1&&n.setSelection(xe.near(n.doc.resolve(_))),n.scrollIntoView()}return!0}const p=c.pos===l.end()?d.contentMatchAt(0).defaultType:null,m={...Eh(f,d.type.name,d.attrs),...e},g={...Eh(f,l.node().type.name,l.node().attrs),...e};n.delete(l.pos,c.pos);const y=p?[{type:a,attrs:m},{type:p,attrs:g}]:[{type:a,attrs:m}];if(!Js(n.doc,l.pos,2))return!1;if(s){const{selection:v,storedMarks:x}=r,{splittableMarks:b}=i.extensionManager,S=x||v.$to.parentOffset&&v.$from.marks();if(n.split(l.pos,2,y).scrollIntoView(),!S||!s)return!0;const k=S.filter(E=>b.includes(E.type.name));n.ensureMarks(k)}return!0},Jy=(t,e)=>{const n=Cg(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const s=t.doc.nodeAt(r);return n.node.type===(s==null?void 0:s.type)&&No(t.doc,n.pos)&&t.join(n.pos),!0},Yy=(t,e)=>{const n=Cg(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const s=t.doc.nodeAt(r);return n.node.type===(s==null?void 0:s.type)&&No(t.doc,r)&&t.join(r),!0},WY=(t,e,n,r={})=>({editor:s,tr:i,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:f}=s.extensionManager,p=Ot(t,o.schema),m=Ot(e,o.schema),{selection:g,storedMarks:y}=o,{$from:v,$to:x}=g,b=v.blockRange(x),S=y||g.$to.parentOffset&&g.$from.marks();if(!b)return!1;const k=Cg(E=>WC(E.type.name,d))(g);if(b.depth>=1&&k&&b.depth-k.depth<=1){if(k.node.type===p)return c.liftListItem(m);if(WC(k.node.type.name,d)&&p.validContent(k.node.content)&&a)return l().command(()=>(i.setNodeMarkup(k.pos,p),!0)).command(()=>Jy(i,p)).command(()=>Yy(i,p)).run()}return!n||!S||!a?l().command(()=>u().wrapInList(p,r)?!0:c.clearNodes()).wrapInList(p,r).command(()=>Jy(i,p)).command(()=>Yy(i,p)).run():l().command(()=>{const E=u().wrapInList(p,r),_=S.filter(T=>f.includes(T.type.name));return i.ensureMarks(_),E?!0:c.clearNodes()}).wrapInList(p,r).command(()=>Jy(i,p)).command(()=>Yy(i,p)).run()},KY=(t,e={},n={})=>({state:r,commands:s})=>{const{extendEmptyMarkRange:i=!1}=n,o=oi(t,r.schema);return Rx(r,o,e)?s.unsetMark(o,{extendEmptyMarkRange:i}):s.setMark(o,e)},GY=(t,e,n={})=>({state:r,commands:s})=>{const i=Ot(t,r.schema),o=Ot(e,r.schema),a=xo(r,i,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?s.setNode(o,l):s.setNode(i,{...l,...n})},QY=(t,e={})=>({state:n,commands:r})=>{const s=Ot(t,n.schema);return xo(n,s,e)?r.lift(s):r.wrapIn(s,e)},JY=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const s=n[r];let i;if(s.spec.isInputRules&&(i=s.getState(t))){if(e){const o=t.tr,a=i.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(i.text){const l=o.doc.resolve(i.from).marks();o.replaceWith(i.from,i.to,t.schema.text(i.text,l))}else o.delete(i.from,i.to)}return!0}}return!1},YY=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:s}=n;return r||e&&s.forEach(i=>{t.removeMark(i.$from.pos,i.$to.pos)}),!0},ZY=(t,e={})=>({tr:n,state:r,dispatch:s})=>{var i;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=n,l=oi(t,r.schema),{$from:c,empty:u,ranges:d}=a;if(!s)return!0;if(u&&o){let{from:f,to:p}=a;const m=(i=c.marks().find(y=>y.type===l))==null?void 0:i.attrs,g=CS(c,l,m);g&&(f=g.from,p=g.to),n.removeMark(f,p,l)}else d.forEach(f=>{n.removeMark(f.$from.pos,f.$to.pos,l)});return n.removeStoredMark(l),!0},XY=t=>({tr:e,state:n,dispatch:r})=>{const{selection:s}=n;let i,o;return typeof t=="number"?(i=t,o=t):t&&"from"in t&&"to"in t?(i=t.from,o=t.to):(i=s.from,o=s.to),r&&e.doc.nodesBetween(i,o,(a,l)=>{if(a.isText)return;const c={...a.attrs};delete c.dir,e.setNodeMarkup(l,void 0,c)}),!0},eZ=(t,e={})=>({tr:n,state:r,dispatch:s})=>{let i=null,o=null;const a=Eg(typeof t=="string"?t:t.name,r.schema);if(!a)return!1;a==="node"&&(i=Ot(t,r.schema)),a==="mark"&&(o=oi(t,r.schema));let l=!1;return n.selection.ranges.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;let f,p,m,g;n.selection.empty?r.doc.nodesBetween(u,d,(y,v)=>{i&&i===y.type&&(l=!0,m=Math.max(v,u),g=Math.min(v+y.nodeSize,d),f=v,p=y)}):r.doc.nodesBetween(u,d,(y,v)=>{v<u&&i&&i===y.type&&(l=!0,m=Math.max(v,u),g=Math.min(v+y.nodeSize,d),f=v,p=y),v>=u&&v<=d&&(i&&i===y.type&&(l=!0,s&&n.setNodeMarkup(v,void 0,{...y.attrs,...e})),o&&y.marks.length&&y.marks.forEach(x=>{if(o===x.type&&(l=!0,s)){const b=Math.max(v,u),S=Math.min(v+y.nodeSize,d);n.addMark(b,S,o.create({...x.attrs,...e}))}}))}),p&&(f!==void 0&&s&&n.setNodeMarkup(f,void 0,{...p.attrs,...e}),o&&p.marks.length&&p.marks.forEach(y=>{o===y.type&&s&&n.addMark(m,g,o.create({...y.attrs,...e}))}))}),l},tZ=(t,e={})=>({state:n,dispatch:r})=>{const s=Ot(t,n.schema);return AG(s,e)(n,r)},nZ=(t,e={})=>({state:n,dispatch:r})=>{const s=Ot(t,n.schema);return RG(s,e)(n,r)},rZ=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach(r=>r.apply(this,e)),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter(r=>r!==e):delete this.callbacks[t]),this}once(t,e){const n=(...r)=>{this.off(t,n),e.apply(this,r)};return this.on(t,n)}removeAllListeners(){this.callbacks={}}},Tg=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},sZ=(t,e)=>{if(ES(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Qf(t){var e;const{editor:n,from:r,to:s,text:i,rules:o,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||(e=c.nodeBefore||c.nodeAfter)!=null&&e.marks.find(f=>f.type.spec.code))return!1;let u=!1;const d=AY(c)+i;return o.forEach(f=>{if(u)return;const p=sZ(d,f.find);if(!p)return;const m=l.state.tr,g=kg({state:l.state,transaction:m}),y={from:r-(p[0].length-i.length),to:s},{commands:v,chain:x,can:b}=new _g({editor:n,state:g});f.handler({state:g,range:y,match:p,commands:v,chain:x,can:b})===null||!m.steps.length||(f.undoable&&m.setMeta(a,{transform:m,from:r,to:s,text:i}),l.dispatch(m),u=!0)}),u}function iZ(t){const{editor:e,rules:n}=t,r=new nt({state:{init(){return null},apply(s,i,o){const a=s.getMeta(r);if(a)return a;const l=s.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:u}=l;typeof u=="string"?u=u:u=OS(M.from(u),o.schema);const{from:d}=l,f=d+u.length;Qf({editor:e,from:d,to:f,text:u,rules:n,plugin:r})}),s.selectionSet||s.docChanged?null:i}},props:{handleTextInput(s,i,o,a){return Qf({editor:e,from:i,to:o,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:s=>(setTimeout(()=>{const{$cursor:i}=s.state.selection;i&&Qf({editor:e,from:i.pos,to:i.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(s,i){if(i.key!=="Enter")return!1;const{$cursor:o}=s.state.selection;return o?Qf({editor:e,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function oZ(t){return Object.prototype.toString.call(t).slice(8,-1)}function Jf(t){return oZ(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function $M(t,e){const n={...t};return Jf(t)&&Jf(e)&&Object.keys(e).forEach(r=>{Jf(e[r])&&Jf(t[r])?n[r]=$M(t[r],e[r]):n[r]=e[r]}),n}var jS=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...Ve(ue(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...Ve(ue(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>$M(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},Ba=class FM extends jS{constructor(){super(...arguments),this.type="mark"}static create(e={}){const n=typeof e=="function"?e():e;return new FM(n)}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,s=e.state.selection.$from;if(s.pos===s.end()){const o=s.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const l=o.find(c=>(c==null?void 0:c.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",s.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function aZ(t){return typeof t=="number"}var lZ=class{constructor(t){this.find=t.find,this.handler=t.handler}},cZ=(t,e,n)=>{if(ES(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(s=>{const i=[s.text];return i.index=s.index,i.input=t,i.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(s.replaceWith)),i}):[]};function uZ(t){const{editor:e,state:n,from:r,to:s,rule:i,pasteEvent:o,dropEvent:a}=t,{commands:l,chain:c,can:u}=new _g({editor:e,state:n}),d=[];return n.doc.nodesBetween(r,s,(p,m)=>{var g,y,v,x,b;if((y=(g=p.type)==null?void 0:g.spec)!=null&&y.code||!(p.isText||p.isTextblock||p.isInline))return;const S=(b=(x=(v=p.content)==null?void 0:v.size)!=null?x:p.nodeSize)!=null?b:0,k=Math.max(r,m),E=Math.min(s,m+S);if(k>=E)return;const _=p.isText?p.text||"":p.textBetween(k-m,E-m,void 0,"");cZ(_,i.find,o).forEach(A=>{if(A.index===void 0)return;const O=k+A.index+1,U=O+A[0].length,P={from:n.tr.mapping.map(O),to:n.tr.mapping.map(U)},L=i.handler({state:n,range:P,match:A,commands:l,chain:c,can:u,pasteEvent:o,dropEvent:a});d.push(L)})}),d.every(p=>p!==null)}var Yf=null,dZ=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)==null||e.setData("text/html",t),n};function fZ(t){const{editor:e,rules:n}=t;let r=null,s=!1,i=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:u,from:d,to:f,rule:p,pasteEvt:m})=>{const g=u.tr,y=kg({state:u,transaction:g});if(!(!uZ({editor:e,state:y,from:Math.max(d-1,0),to:f.b-1,rule:p,pasteEvent:m,dropEvent:a})||!g.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g}};return n.map(u=>new nt({view(d){const f=m=>{var g;r=(g=d.dom.parentElement)!=null&&g.contains(m.target)?d.dom.parentElement:null,r&&(Yf=e)},p=()=>{Yf&&(Yf=null)};return window.addEventListener("dragstart",f),window.addEventListener("dragend",p),{destroy(){window.removeEventListener("dragstart",f),window.removeEventListener("dragend",p)}}},props:{handleDOMEvents:{drop:(d,f)=>{if(i=r===d.dom.parentElement,a=f,!i){const p=Yf;p!=null&&p.isEditable&&setTimeout(()=>{const m=p.state.selection;m&&p.commands.deleteRange({from:m.from,to:m.to})},10)}return!1},paste:(d,f)=>{var p;const m=(p=f.clipboardData)==null?void 0:p.getData("text/html");return o=f,s=!!(m!=null&&m.includes("data-pm-slice")),!1}}},appendTransaction:(d,f,p)=>{const m=d[0],g=m.getMeta("uiEvent")==="paste"&&!s,y=m.getMeta("uiEvent")==="drop"&&!i,v=m.getMeta("applyPasteRules"),x=!!v;if(!g&&!y&&!x)return;if(x){let{text:k}=v;typeof k=="string"?k=k:k=OS(M.from(k),p.schema);const{from:E}=v,_=E+k.length,T=dZ(k);return l({rule:u,state:p,from:E,to:{b:_},pasteEvt:T})}const b=f.doc.content.findDiffStart(p.doc.content),S=f.doc.content.findDiffEnd(p.doc.content);if(!(!aZ(b)||!S||b===S.b))return l({rule:u,state:p,from:b,to:S,pasteEvt:o})}}))}var Og=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=OM(t),this.schema=_Y(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Gf(e.name,this.schema)},r=ue(e,"addCommands",n);return r?{...t,...r()}:t},{})}get plugins(){const{editor:t}=this;return Bp([...this.extensions].reverse()).flatMap(r=>{const s={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:Gf(r.name,this.schema)},i=[],o=ue(r,"addKeyboardShortcuts",s);let a={};if(r.type==="mark"&&ue(r,"exitable",s)&&(a.ArrowRight=()=>Ba.handleExit({editor:t,mark:r})),o){const f=Object.fromEntries(Object.entries(o()).map(([p,m])=>[p,()=>m({editor:t})]));a={...a,...f}}const l=NJ(a);i.push(l);const c=ue(r,"addInputRules",s);if(qC(r,t.options.enableInputRules)&&c){const f=c();if(f&&f.length){const p=iZ({editor:t,rules:f}),m=Array.isArray(p)?p:[p];i.push(...m)}}const u=ue(r,"addPasteRules",s);if(qC(r,t.options.enablePasteRules)&&u){const f=u();if(f&&f.length){const p=fZ({editor:t,rules:f});i.push(...p)}}const d=ue(r,"addProseMirrorPlugins",s);if(d){const f=d();i.push(...f)}return i})}get attributes(){return TM(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=wc(this.extensions);return Object.fromEntries(e.filter(n=>!!ue(n,"addNodeView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),s={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:Ot(n.name,this.schema)},i=ue(n,"addNodeView",s);if(!i)return[];const o=i();if(!o)return[];const a=(l,c,u,d,f)=>{const p=Id(l,r);return o({node:l,view:c,getPos:u,decorations:d,innerDecorations:f,editor:t,extension:n,HTMLAttributes:p})};return[n.name,a]}))}dispatchTransaction(t){const{editor:e}=this;return Bp([...this.extensions].reverse()).reduceRight((r,s)=>{const i={name:s.name,options:s.options,storage:this.editor.extensionStorage[s.name],editor:e,type:Gf(s.name,this.schema)},o=ue(s,"dispatchTransaction",i);return o?a=>{o.call(i,{transaction:a,next:r})}:r},t)}get markViews(){const{editor:t}=this,{markExtensions:e}=wc(this.extensions);return Object.fromEntries(e.filter(n=>!!ue(n,"addMarkView")).map(n=>{const r=this.attributes.filter(a=>a.type===n.name),s={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:oi(n.name,this.schema)},i=ue(n,"addMarkView",s);if(!i)return[];const o=(a,l,c)=>{const u=Id(a,r);return i()({mark:a,view:l,inline:c,editor:t,extension:n,HTMLAttributes:u,updateAttributes:d=>{CZ(a,t,d)}})};return[n.name,o]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var n;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Gf(e.name,this.schema)};e.type==="mark"&&((n=Ve(ue(e,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(e.name);const s=ue(e,"onBeforeCreate",r),i=ue(e,"onCreate",r),o=ue(e,"onUpdate",r),a=ue(e,"onSelectionUpdate",r),l=ue(e,"onTransaction",r),c=ue(e,"onFocus",r),u=ue(e,"onBlur",r),d=ue(e,"onDestroy",r);s&&this.editor.on("beforeCreate",s),i&&this.editor.on("create",i),o&&this.editor.on("update",o),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),d&&this.editor.on("destroy",d)})}};Og.resolve=OM;Og.sort=Bp;Og.flatten=TS;var hZ={};_S(hZ,{ClipboardTextSerializer:()=>UM,Commands:()=>zM,Delete:()=>VM,Drop:()=>HM,Editable:()=>qM,FocusEvents:()=>KM,Keymap:()=>GM,Paste:()=>QM,Tabindex:()=>JM,TextDirection:()=>YM,focusEventsPluginKey:()=>WM});var ft=class BM extends jS{constructor(){super(...arguments),this.type="extension"}static create(e={}){const n=typeof e=="function"?e():e;return new BM(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},UM=ft.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new nt({key:new at("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:s}=e,{ranges:i}=s,o=Math.min(...i.map(u=>u.$from.pos)),a=Math.max(...i.map(u=>u.$to.pos)),l=AS(n);return AM(r,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),zM=ft.create({name:"commands",addCommands(){return{...bM}}}),VM=ft.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var n,r,s;const i=()=>{var o,a,l,c;if((c=(l=(a=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:a.filterTransaction)==null?void 0:l.call(a,t))!=null?c:t.getMeta("y-sync$"))return;const u=CM(t.before,[t,...e]);IM(u).forEach(p=>{u.mapping.mapResult(p.oldRange.from).deletedAfter&&u.mapping.mapResult(p.oldRange.to).deletedBefore&&u.before.nodesBetween(p.oldRange.from,p.oldRange.to,(m,g)=>{const y=g+m.nodeSize-2,v=p.oldRange.from<=g&&y<=p.oldRange.to;this.editor.emit("delete",{type:"node",node:m,from:g,to:y,newFrom:u.mapping.map(g),newTo:u.mapping.map(y),deletedRange:p.oldRange,newRange:p.newRange,partial:!v,editor:this.editor,transaction:t,combinedTransform:u})})});const f=u.mapping;u.steps.forEach((p,m)=>{var g,y;if(p instanceof Vr){const v=f.slice(m).map(p.from,-1),x=f.slice(m).map(p.to),b=f.invert().map(v,-1),S=f.invert().map(x),k=(g=u.doc.nodeAt(v-1))==null?void 0:g.marks.some(_=>_.eq(p.mark)),E=(y=u.doc.nodeAt(x))==null?void 0:y.marks.some(_=>_.eq(p.mark));this.editor.emit("delete",{type:"mark",mark:p.mark,from:p.from,to:p.to,deletedRange:{from:b,to:S},newRange:{from:v,to:x},partial:!!(E||k),editor:this.editor,transaction:t,combinedTransform:u})}})};(s=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||s?setTimeout(i,0):i()}}),HM=ft.create({name:"drop",addProseMirrorPlugins(){return[new nt({key:new at("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),qM=ft.create({name:"editable",addProseMirrorPlugins(){return[new nt({key:new at("editable"),props:{editable:()=>this.editor.options.editable}})]}}),WM=new at("focusEvents"),KM=ft.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new nt({key:WM,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),GM=ft.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:f,parent:p}=d,m=d.parent.isTextblock&&f>0?a.doc.resolve(f-1):d,g=m.parent.type.spec.isolating,y=d.pos-d.parentOffset,v=g&&m.parent.childCount===1?y===d.pos:ve.atStart(c).from===f;return!u||!p.type.isTextblock||p.textContent.length||!v||v&&d.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},s={...r},i={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Fp()||_M()?i:s},addProseMirrorPlugins(){return[new nt({key:new at("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(g=>g.getMeta("composition")))return;const r=t.some(g=>g.docChanged)&&!e.doc.eq(n.doc),s=t.some(g=>g.getMeta("preventClearDocument"));if(!r||s)return;const{empty:i,from:o,to:a}=e.selection,l=ve.atStart(e.doc).from,c=ve.atEnd(e.doc).to;if(i||!(o===l&&a===c)||!Ng(n.doc))return;const f=n.tr,p=kg({state:n,transaction:f}),{commands:m}=new _g({editor:this.editor,state:p});if(m.clearNodes(),!!f.steps.length)return f}})]}}),QM=ft.create({name:"paste",addProseMirrorPlugins(){return[new nt({key:new at("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),JM=ft.create({name:"tabindex",addProseMirrorPlugins(){return[new nt({key:new at("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),YM=ft.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:t}=wc(this.extensions);return[{types:t.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const n=e.getAttribute("dir");return n&&(n==="ltr"||n==="rtl"||n==="auto")?n:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new nt({key:new at("textDirection"),props:{attributes:()=>{const t=this.options.direction;return t?{dir:t}:{}}}})]}}),pZ=class vu{constructor(e,n,r=!1,s=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=s}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new vu(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new vu(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new vu(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const s=n.isBlock&&!n.isTextblock,i=n.isAtom&&!n.isText,o=n.isInline,a=this.pos+r+(i?0:1);if(a<0||a>this.resolvedPos.doc.nodeSize-2)return;const l=this.resolvedPos.doc.resolve(a);if(!s&&!o&&l.depth<=this.depth)return;const c=new vu(l,this.editor,s,s||o?n:null);s&&(c.actualDepth=this.depth+1),e.push(c)}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,s=this.parent;for(;s&&!r;){if(s.node.type.name===e)if(Object.keys(n).length>0){const i=s.node.attrs,o=Object.keys(n);for(let a=0;a<o.length;a+=1){const l=o[a];if(i[l]!==n[l])break}}else r=s;s=s.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let s=[];if(!this.children||this.children.length===0)return s;const i=Object.keys(n);return this.children.forEach(o=>{r&&s.length>0||(o.node.type.name===e&&i.every(l=>n[l]===o.node.attrs[l])&&s.push(o),!(r&&s.length>0)&&(s=s.concat(o.querySelectorAll(e,n,r))))}),s}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}},mZ=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function gZ(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const s=document.createElement("style");return e&&s.setAttribute("nonce",e),s.setAttribute("data-tiptap-style",""),s.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(s),s}var yZ=class extends rZ{constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:PY,createMappablePosition:MY},this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:s,moved:i})=>this.options.onDrop(r,s,i)),this.on("paste",({event:r,slice:s})=>this.options.onPaste(r,s)),this.on("delete",this.options.onDelete);const e=this.createDoc(),n=SM(e,this.options.autofocus);this.editorState=kl.create({doc:e,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t!=null&&t.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=gZ(mZ,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const n=NM(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let n=e;if([].concat(t).forEach(s=>{const i=typeof s=="string"?`${s}$`:s.key;n=n.filter(o=>!o.key.startsWith(i))}),e.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var t,e;const r=[...this.options.enableCoreExtensions?[qM,UM.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),zM,KM,GM,JM,HM,QM,VM,YM.configure({direction:this.options.textDirection})].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new Og(r,this)}createCommandManager(){this.commandManager=new _g({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=Ax(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),t=Ax(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){const{editorProps:e,enableExtensionDispatchTransaction:n}=this.options,r=e.dispatchTransaction||this.dispatchTransaction.bind(this),s=n?this.extensionManager.dispatchTransaction(r):r;this.editorView=new xM(t,{...e,attributes:{role:"textbox",...e==null?void 0:e.attributes},dispatchTransaction:s,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.prependClass(),this.injectCSS();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(c=>{var u;return(u=this.capturedTransaction)==null?void 0:u.step(c)});return}const{state:e,transactions:n}=this.state.applyTransaction(t),r=!this.state.selection.eq(e.selection),s=n.includes(t),i=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!s)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:t});const o=n.findLast(c=>c.getMeta("focus")||c.getMeta("blur")),a=o==null?void 0:o.getMeta("focus"),l=o==null?void 0:o.getMeta("blur");a&&this.emit("focus",{editor:this,event:a.event,transaction:o}),l&&this.emit("blur",{editor:this,event:l.event,transaction:o}),!(t.getMeta("preventUpdate")||!n.some(c=>c.docChanged)||i.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:n.slice(1)})}getAttributes(t){return jM(this.state,t)}isActive(t,e){const n=typeof t=="string"?t:null,r=typeof t=="string"?e:t;return RY(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return OS(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:n={}}=t||{};return RM(this.state.doc,{blockSeparator:e,textSerializers:{...AS(this.schema),...n}})}get isEmpty(){return Ng(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelector(t,e))||null}$nodes(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new pZ(e,this)}get $doc(){return this.$pos(0)}};function Sc(t){return new Tg({find:t.find,handler:({state:e,range:n,match:r})=>{const s=Ve(t.getAttributes,void 0,r);if(s===!1||s===null)return null;const{tr:i}=e,o=r[r.length-1],a=r[0];if(o){const l=a.search(/\S/),c=n.from+a.indexOf(o),u=c+o.length;if(RS(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(g=>g===t.type&&g!==p.mark.type)).filter(p=>p.to>c).length)return null;u<n.to&&i.delete(u,n.to),c>n.from&&i.delete(n.from+l,c);const f=n.from+l+o.length;i.addMark(n.from+l,f,t.type.create(s||{})),i.removeStoredMark(t.type)}},undoable:t.undoable})}function vZ(t){return new Tg({find:t.find,handler:({state:e,range:n,match:r})=>{const s=Ve(t.getAttributes,void 0,r)||{},{tr:i}=e,o=n.from;let a=n.to;const l=t.type.create(s);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=o+c;u>a?u=a:a=u+r[1].length;const d=r[0][r[0].length-1];i.insertText(d,o+r[0].length-1),i.replaceWith(u,a,l)}else if(r[0]){const c=t.type.isInline?o:o-1;i.insert(c,t.type.create(s)).delete(i.mapping.map(o),i.mapping.map(a))}i.scrollIntoView()},undoable:t.undoable})}function jx(t){return new Tg({find:t.find,handler:({state:e,range:n,match:r})=>{const s=e.doc.resolve(n.from),i=Ve(t.getAttributes,void 0,r)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,i)},undoable:t.undoable})}function kc(t){return new Tg({find:t.find,handler:({state:e,range:n,match:r,chain:s})=>{const i=Ve(t.getAttributes,void 0,r)||{},o=e.tr.delete(n.from,n.to),l=o.doc.resolve(n.from).blockRange(),c=l&&aS(l,t.type,i);if(!c)return null;if(o.wrap(l,c),t.keepMarks&&t.editor){const{selection:d,storedMarks:f}=e,{splittableMarks:p}=t.editor.extensionManager,m=f||d.$to.parentOffset&&d.$from.marks();if(m){const g=m.filter(y=>p.includes(y.type.name));o.ensureMarks(g)}}if(t.keepAttributes){const d=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";s().updateAttributes(d,i).run()}const u=o.doc.resolve(n.from-1).nodeBefore;u&&u.type===t.type&&No(o.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,u))&&o.join(n.from-1)},undoable:t.undoable})}function xZ(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof de){const i=r.index();return r.parent.canReplaceWith(i,i+1,e)}let s=r.depth;for(;s>=0;){const i=r.index(s);if(r.node(s).contentMatchAt(i).matchType(e))return!0;s-=1}return!1}var bZ={};_S(bZ,{createAtomBlockMarkdownSpec:()=>wZ,createBlockMarkdownSpec:()=>SZ,createInlineMarkdownSpec:()=>EZ,parseAttributes:()=>IS,parseIndentedBlocks:()=>Ix,renderNestedMarkdownContent:()=>MS,serializeAttributes:()=>PS});function IS(t){if(!(t!=null&&t.trim()))return{};const e={},n=[],r=t.replace(/["']([^"']*)["']/g,c=>(n.push(c),`__QUOTED_${n.length-1}__`)),s=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(s){const c=s.map(u=>u.trim().slice(1));e.class=c.join(" ")}const i=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);i&&(e.id=i[1]);const o=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(o)).forEach(([,c,u])=>{var d;const f=parseInt(((d=u.match(/__QUOTED_(\d+)__/))==null?void 0:d[1])||"0",10),p=n[f];p&&(e[c]=p.slice(1,-1))});const l=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return l&&l.split(/\s+/).filter(Boolean).forEach(u=>{u.match(/^[a-zA-Z][\w-]*$/)&&(e[u]=!0)}),e}function PS(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(r=>e.push(`.${r}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([n,r])=>{n==="class"||n==="id"||(r===!0?e.push(n):r!==!1&&r!=null&&e.push(`${n}="${String(r)}"`))}),e.join(" ")}function wZ(t){const{nodeName:e,name:n,parseAttributes:r=IS,serializeAttributes:s=PS,defaultAttributes:i={},requiredAttributes:o=[],allowedAttributes:a}=t,l=n||e,c=u=>{if(!a)return u;const d={};return a.forEach(f=>{f in u&&(d[f]=u[f])}),d};return{parseMarkdown:(u,d)=>{const f={...i,...u.attributes};return d.createNode(e,f,[])},markdownTokenizer:{name:e,level:"block",start(u){var d;const f=new RegExp(`^:::${l}(?:\\s|$)`,"m"),p=(d=u.match(f))==null?void 0:d.index;return p!==void 0?p:-1},tokenize(u,d,f){const p=new RegExp(`^:::${l}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),m=u.match(p);if(!m)return;const g=m[1]||"",y=r(g);if(!o.find(x=>!(x in y)))return{type:e,raw:m[0],attributes:y}}},renderMarkdown:u=>{const d=c(u.attrs||{}),f=s(d),p=f?` {${f}}`:"";return`:::${l}${p} :::`}}}function SZ(t){const{nodeName:e,name:n,getContent:r,parseAttributes:s=IS,serializeAttributes:i=PS,defaultAttributes:o={},content:a="block",allowedAttributes:l}=t,c=n||e,u=d=>{if(!l)return d;const f={};return l.forEach(p=>{p in d&&(f[p]=d[p])}),f};return{parseMarkdown:(d,f)=>{let p;if(r){const g=r(d);p=typeof g=="string"?[{type:"text",text:g}]:g}else a==="block"?p=f.parseChildren(d.tokens||[]):p=f.parseInline(d.tokens||[]);const m={...o,...d.attributes};return f.createNode(e,m,p)},markdownTokenizer:{name:e,level:"block",start(d){var f;const p=new RegExp(`^:::${c}`,"m"),m=(f=d.match(p))==null?void 0:f.index;return m!==void 0?m:-1},tokenize(d,f,p){var m;const g=new RegExp(`^:::${c}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),y=d.match(g);if(!y)return;const[v,x=""]=y,b=s(x);let S=1;const k=v.length;let E="";const _=/^:::([\w-]*)(\s.*)?/gm,T=d.slice(k);for(_.lastIndex=0;;){const A=_.exec(T);if(A===null)break;const O=A.index,U=A[1];if(!((m=A[2])!=null&&m.endsWith(":::"))){if(U)S+=1;else if(S-=1,S===0){const P=T.slice(0,O);E=P.trim();const L=d.slice(0,k+O+A[0].length);let z=[];if(E)if(a==="block")for(z=p.blockTokens(P),z.forEach(K=>{K.text&&(!K.tokens||K.tokens.length===0)&&(K.tokens=p.inlineTokens(K.text))});z.length>0;){const K=z[z.length-1];if(K.type==="paragraph"&&(!K.text||K.text.trim()===""))z.pop();else break}else z=p.inlineTokens(E);return{type:e,raw:L,attributes:b,content:E,tokens:z}}}}}},renderMarkdown:(d,f)=>{const p=u(d.attrs||{}),m=i(p),g=m?` {${m}}`:"",y=f.renderChildren(d.content||[],`

`);return`:::${c}${g}

${y}

:::`}}}function kZ(t){if(!t.trim())return{};const e={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=n.exec(t);for(;r!==null;){const[,s,i,o]=r;e[s]=i||o,r=n.exec(t)}return e}function _Z(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,n])=>`${e}="${n}"`).join(" ")}function EZ(t){const{nodeName:e,name:n,getContent:r,parseAttributes:s=kZ,serializeAttributes:i=_Z,defaultAttributes:o={},selfClosing:a=!1,allowedAttributes:l}=t,c=n||e,u=f=>{if(!l)return f;const p={};return l.forEach(m=>{const g=typeof m=="string"?m:m.name,y=typeof m=="string"?void 0:m.skipIfDefault;if(g in f){const v=f[g];if(y!==void 0&&v===y)return;p[g]=v}}),p},d=c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(f,p)=>{const m={...o,...f.attributes};if(a)return p.createNode(e,m);const g=r?r(f):f.content||"";return g?p.createNode(e,m,[p.createTextNode(g)]):p.createNode(e,m,[])},markdownTokenizer:{name:e,level:"inline",start(f){const p=a?new RegExp(`\\[${d}\\s*[^\\]]*\\]`):new RegExp(`\\[${d}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${d}\\]`),m=f.match(p),g=m==null?void 0:m.index;return g!==void 0?g:-1},tokenize(f,p,m){const g=a?new RegExp(`^\\[${d}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${d}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${d}\\]`),y=f.match(g);if(!y)return;let v="",x="";if(a){const[,S]=y;x=S}else{const[,S,k]=y;x=S,v=k||""}const b=s(x.trim());return{type:e,raw:y[0],content:v.trim(),attributes:b}}},renderMarkdown:f=>{let p="";r?p=r(f):f.content&&f.content.length>0&&(p=f.content.filter(v=>v.type==="text").map(v=>v.text).join(""));const m=u(f.attrs||{}),g=i(m),y=g?` ${g}`:"";return a?`[${c}${y}]`:`[${c}${y}]${p}[/${c}]`}}}function Ix(t,e,n){var r,s,i,o;const a=t.split(`
`),l=[];let c="",u=0;const d=e.baseIndentSize||2;for(;u<a.length;){const f=a[u],p=f.match(e.itemPattern);if(!p){if(l.length>0)break;if(f.trim()===""){u+=1,c=`${c}${f}
`;continue}else return}const m=e.extractItemData(p),{indentLevel:g,mainContent:y}=m;c=`${c}${f}
`;const v=[y];for(u+=1;u<a.length;){const k=a[u];if(k.trim()===""){const _=a.slice(u+1).findIndex(O=>O.trim()!=="");if(_===-1)break;if((((s=(r=a[u+1+_].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:s.length)||0)>g){v.push(k),c=`${c}${k}
`,u+=1;continue}else break}if((((o=(i=k.match(/^(\s*)/))==null?void 0:i[1])==null?void 0:o.length)||0)>g)v.push(k),c=`${c}${k}
`,u+=1;else break}let x;const b=v.slice(1);if(b.length>0){const k=b.map(E=>E.slice(g+d)).join(`
`);k.trim()&&(e.customNestedParser?x=e.customNestedParser(k):x=n.blockTokens(k))}const S=e.createToken(m,x);l.push(S)}if(l.length!==0)return{items:l,raw:c}}function MS(t,e,n,r){if(!t||!Array.isArray(t.content))return"";const s=typeof n=="function"?n(r):n,[i,...o]=t.content,a=e.renderChildren([i]),l=[`${s}${a}`];return o&&o.length>0&&o.forEach(c=>{const u=e.renderChildren([c]);if(u){const d=u.split(`
`).map(f=>f?e.indent(f):"").join(`
`);l.push(d)}}),l.join(`
`)}function CZ(t,e,n={}){const{state:r}=e,{doc:s,tr:i}=r,o=t;s.descendants((a,l)=>{const c=i.mapping.map(l),u=i.mapping.map(l)+a.nodeSize;let d=null;if(a.marks.forEach(p=>{if(p!==o)return!1;d=p}),!d)return;let f=!1;if(Object.keys(n).forEach(p=>{n[p]!==d.attrs[p]&&(f=!0)}),f){const p=t.type.create({...t.attrs,...n});i.removeMark(c,u,t.type),i.addMark(c,u,p)}}),i.docChanged&&e.view.dispatch(i)}var ar=class ZM extends jS{constructor(){super(...arguments),this.type="node"}static create(e={}){const n=typeof e=="function"?e():e;return new ZM(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function Ia(t){return new lZ({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:s})=>{const i=Ve(t.getAttributes,void 0,r,s);if(i===!1||i===null)return null;const{tr:o}=e,a=r[r.length-1],l=r[0];let c=n.to;if(a){const u=l.search(/\S/),d=n.from+l.indexOf(a),f=d+a.length;if(RS(n.from,n.to,e.doc).filter(m=>m.mark.type.excluded.find(y=>y===t.type&&y!==m.mark.type)).filter(m=>m.to>d).length)return null;f<n.to&&o.delete(f,n.to),d>n.from&&o.delete(n.from+u,d),c=n.from+u+a.length,o.addMark(n.from+u,c,t.type.create(i||{})),o.removeStoredMark(t.type)}}})}const{getOwnPropertyNames:NZ,getOwnPropertySymbols:TZ}=Object,{hasOwnProperty:OZ}=Object.prototype;function Zy(t,e){return function(r,s,i){return t(r,s,i)&&e(r,s,i)}}function Zf(t){return function(n,r,s){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,s);const{cache:i}=s,o=i.get(n),a=i.get(r);if(o&&a)return o===r&&a===n;i.set(n,r),i.set(r,n);const l=t(n,r,s);return i.delete(n),i.delete(r),l}}function AZ(t){return t!=null?t[Symbol.toStringTag]:void 0}function GC(t){return NZ(t).concat(TZ(t))}const RZ=Object.hasOwn||((t,e)=>OZ.call(t,e));function Ua(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const jZ="__v",IZ="__o",PZ="_owner",{getOwnPropertyDescriptor:QC,keys:JC}=Object;function MZ(t,e){return t.byteLength===e.byteLength&&Up(new Uint8Array(t),new Uint8Array(e))}function DZ(t,e,n){let r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function LZ(t,e){return t.byteLength===e.byteLength&&Up(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function $Z(t,e){return Ua(t.getTime(),e.getTime())}function FZ(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function BZ(t,e){return t===e}function YC(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const s=new Array(r),i=t.entries();let o,a,l=0;for(;(o=i.next())&&!o.done;){const c=e.entries();let u=!1,d=0;for(;(a=c.next())&&!a.done;){if(s[d]){d++;continue}const f=o.value,p=a.value;if(n.equals(f[0],p[0],l,d,t,e,n)&&n.equals(f[1],p[1],f[0],p[0],t,e,n)){u=s[d]=!0;break}d++}if(!u)return!1;l++}return!0}const UZ=Ua;function zZ(t,e,n){const r=JC(t);let s=r.length;if(JC(e).length!==s)return!1;for(;s-- >0;)if(!XM(t,e,n,r[s]))return!1;return!0}function nu(t,e,n){const r=GC(t);let s=r.length;if(GC(e).length!==s)return!1;let i,o,a;for(;s-- >0;)if(i=r[s],!XM(t,e,n,i)||(o=QC(t,i),a=QC(e,i),(o||a)&&(!o||!a||o.configurable!==a.configurable||o.enumerable!==a.enumerable||o.writable!==a.writable)))return!1;return!0}function VZ(t,e){return Ua(t.valueOf(),e.valueOf())}function HZ(t,e){return t.source===e.source&&t.flags===e.flags}function ZC(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const s=new Array(r),i=t.values();let o,a;for(;(o=i.next())&&!o.done;){const l=e.values();let c=!1,u=0;for(;(a=l.next())&&!a.done;){if(!s[u]&&n.equals(o.value,a.value,o.value,a.value,t,e,n)){c=s[u]=!0;break}u++}if(!c)return!1}return!0}function Up(t,e){let n=t.byteLength;if(e.byteLength!==n||t.byteOffset!==e.byteOffset)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function qZ(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function XM(t,e,n,r){return(r===PZ||r===IZ||r===jZ)&&(t.$$typeof||e.$$typeof)?!0:RZ(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}const WZ="[object ArrayBuffer]",KZ="[object Arguments]",GZ="[object Boolean]",QZ="[object DataView]",JZ="[object Date]",YZ="[object Error]",ZZ="[object Map]",XZ="[object Number]",eX="[object Object]",tX="[object RegExp]",nX="[object Set]",rX="[object String]",sX={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},iX="[object URL]",oX=Object.prototype.toString;function aX({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:s,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:a,areObjectsEqual:l,arePrimitiveWrappersEqual:c,areRegExpsEqual:u,areSetsEqual:d,areTypedArraysEqual:f,areUrlsEqual:p,unknownTagComparators:m}){return function(y,v,x){if(y===v)return!0;if(y==null||v==null)return!1;const b=typeof y;if(b!==typeof v)return!1;if(b!=="object")return b==="number"?a(y,v,x):b==="function"?i(y,v,x):!1;const S=y.constructor;if(S!==v.constructor)return!1;if(S===Object)return l(y,v,x);if(Array.isArray(y))return e(y,v,x);if(S===Date)return r(y,v,x);if(S===RegExp)return u(y,v,x);if(S===Map)return o(y,v,x);if(S===Set)return d(y,v,x);const k=oX.call(y);if(k===JZ)return r(y,v,x);if(k===tX)return u(y,v,x);if(k===ZZ)return o(y,v,x);if(k===nX)return d(y,v,x);if(k===eX)return typeof y.then!="function"&&typeof v.then!="function"&&l(y,v,x);if(k===iX)return p(y,v,x);if(k===YZ)return s(y,v,x);if(k===KZ)return l(y,v,x);if(sX[k])return f(y,v,x);if(k===WZ)return t(y,v,x);if(k===QZ)return n(y,v,x);if(k===GZ||k===XZ||k===rX)return c(y,v,x);if(m){let E=m[k];if(!E){const _=AZ(y);_&&(E=m[_])}if(E)return E(y,v,x)}return!1}}function lX({circular:t,createCustomConfig:e,strict:n}){let r={areArrayBuffersEqual:MZ,areArraysEqual:n?nu:DZ,areDataViewsEqual:LZ,areDatesEqual:$Z,areErrorsEqual:FZ,areFunctionsEqual:BZ,areMapsEqual:n?Zy(YC,nu):YC,areNumbersEqual:UZ,areObjectsEqual:n?nu:zZ,arePrimitiveWrappersEqual:VZ,areRegExpsEqual:HZ,areSetsEqual:n?Zy(ZC,nu):ZC,areTypedArraysEqual:n?Zy(Up,nu):Up,areUrlsEqual:qZ,unknownTagComparators:void 0};if(e&&(r=Object.assign({},r,e(r))),t){const s=Zf(r.areArraysEqual),i=Zf(r.areMapsEqual),o=Zf(r.areObjectsEqual),a=Zf(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:s,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:a})}return r}function cX(t){return function(e,n,r,s,i,o,a){return t(e,n,a)}}function uX({circular:t,comparator:e,createState:n,equals:r,strict:s}){if(n)return function(a,l){const{cache:c=t?new WeakMap:void 0,meta:u}=n();return e(a,l,{cache:c,equals:r,meta:u,strict:s})};if(t)return function(a,l){return e(a,l,{cache:new WeakMap,equals:r,meta:void 0,strict:s})};const i={cache:void 0,equals:r,meta:void 0,strict:s};return function(a,l){return e(a,l,i)}}const dX=Oo();Oo({strict:!0});Oo({circular:!0});Oo({circular:!0,strict:!0});Oo({createInternalComparator:()=>Ua});Oo({strict:!0,createInternalComparator:()=>Ua});Oo({circular:!0,createInternalComparator:()=>Ua});Oo({circular:!0,createInternalComparator:()=>Ua,strict:!0});function Oo(t={}){const{circular:e=!1,createInternalComparator:n,createState:r,strict:s=!1}=t,i=lX(t),o=aX(i),a=n?n(o):cX(o);return uX({circular:e,comparator:o,createState:r,equals:a,strict:s})}var e2={exports:{}},t2={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ag=w,fX=sS;function hX(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var pX=typeof Object.is=="function"?Object.is:hX,mX=fX.useSyncExternalStore,gX=Ag.useRef,yX=Ag.useEffect,vX=Ag.useMemo,xX=Ag.useDebugValue;t2.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=gX(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=vX(function(){function l(p){if(!c){if(c=!0,u=p,p=r(p),s!==void 0&&o.hasValue){var m=o.value;if(s(m,p))return d=m}return d=p}if(m=d,pX(u,p))return m;var g=r(p);return s!==void 0&&s(m,g)?(u=p,m):(u=p,d=g)}var c=!1,u,d,f=n===void 0?null:n;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,n,r,s]);var a=mX(t,i[0],i[1]);return yX(function(){o.hasValue=!0,o.value=a},[a]),xX(a),a};e2.exports=t2;var bX=e2.exports;let Px,Mx;if(typeof WeakMap<"u"){let t=new WeakMap;Px=e=>t.get(e),Mx=(e,n)=>(t.set(e,n),n)}else{const t=[];let n=0;Px=r=>{for(let s=0;s<t.length;s+=2)if(t[s]==r)return t[s+1]},Mx=(r,s)=>(n==10&&(n=0),t[n++]=r,t[n++]=s)}var Ds=class{constructor(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r}findCell(t){for(let e=0;e<this.map.length;e++){const n=this.map[e];if(n!=t)continue;const r=e%this.width,s=e/this.width|0;let i=r+1,o=s+1;for(let a=1;i<this.width&&this.map[e+a]==n;a++)i++;for(let a=1;o<this.height&&this.map[e+this.width*a]==n;a++)o++;return{left:r,top:s,right:i,bottom:o}}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,e,n){const{left:r,right:s,top:i,bottom:o}=this.findCell(t);return e=="horiz"?(n<0?r==0:s==this.width)?null:this.map[i*this.width+(n<0?r-1:s)]:(n<0?i==0:o==this.height)?null:this.map[r+this.width*(n<0?i-1:o)]}rectBetween(t,e){const{left:n,right:r,top:s,bottom:i}=this.findCell(t),{left:o,right:a,top:l,bottom:c}=this.findCell(e);return{left:Math.min(n,o),top:Math.min(s,l),right:Math.max(r,a),bottom:Math.max(i,c)}}cellsInRect(t){const e=[],n={};for(let r=t.top;r<t.bottom;r++)for(let s=t.left;s<t.right;s++){const i=r*this.width+s,o=this.map[i];n[o]||(n[o]=!0,!(s==t.left&&s&&this.map[i-1]==o||r==t.top&&r&&this.map[i-this.width]==o)&&e.push(o))}return e}positionAt(t,e,n){for(let r=0,s=0;;r++){const i=s+n.child(r).nodeSize;if(r==t){let o=e+t*this.width;const a=(t+1)*this.width;for(;o<a&&this.map[o]<s;)o++;return o==a?i-1:this.map[o]}s=i}}static get(t){return Px(t)||Mx(t,wX(t))}};function wX(t){if(t.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+t.type.name);const e=SX(t),n=t.childCount,r=[];let s=0,i=null;const o=[];for(let c=0,u=e*n;c<u;c++)r[c]=0;for(let c=0,u=0;c<n;c++){const d=t.child(c);u++;for(let m=0;;m++){for(;s<r.length&&r[s]!=0;)s++;if(m==d.childCount)break;const g=d.child(m),{colspan:y,rowspan:v,colwidth:x}=g.attrs;for(let b=0;b<v;b++){if(b+c>=n){(i||(i=[])).push({type:"overlong_rowspan",pos:u,n:v-b});break}const S=s+b*e;for(let k=0;k<y;k++){r[S+k]==0?r[S+k]=u:(i||(i=[])).push({type:"collision",row:c,pos:u,n:y-k});const E=x&&x[k];if(E){const _=(S+k)%e*2,T=o[_];T==null||T!=E&&o[_+1]==1?(o[_]=E,o[_+1]=1):T==E&&o[_+1]++}}}s+=y,u+=g.nodeSize}const f=(c+1)*e;let p=0;for(;s<f;)r[s++]==0&&p++;p&&(i||(i=[])).push({type:"missing",row:c,n:p}),u++}(e===0||n===0)&&(i||(i=[])).push({type:"zero_sized"});const a=new Ds(e,n,r,i);let l=!1;for(let c=0;!l&&c<o.length;c+=2)o[c]!=null&&o[c+1]<n&&(l=!0);return l&&kX(a,o,t),a}function SX(t){let e=-1,n=!1;for(let r=0;r<t.childCount;r++){const s=t.child(r);let i=0;if(n)for(let o=0;o<r;o++){const a=t.child(o);for(let l=0;l<a.childCount;l++){const c=a.child(l);o+c.attrs.rowspan>r&&(i+=c.attrs.colspan)}}for(let o=0;o<s.childCount;o++){const a=s.child(o);i+=a.attrs.colspan,a.attrs.rowspan>1&&(n=!0)}e==-1?e=i:e!=i&&(e=Math.max(e,i))}return e}function kX(t,e,n){t.problems||(t.problems=[]);const r={};for(let s=0;s<t.map.length;s++){const i=t.map[s];if(r[i])continue;r[i]=!0;const o=n.nodeAt(i);if(!o)throw new RangeError(`No cell with offset ${i} found`);let a=null;const l=o.attrs;for(let c=0;c<l.colspan;c++){const u=e[(s+c)%t.width*2];u!=null&&(!l.colwidth||l.colwidth[c]!=u)&&((a||(a=_X(l)))[c]=u)}a&&t.problems.unshift({type:"colwidth mismatch",pos:i,colwidth:a})}}function _X(t){if(t.colwidth)return t.colwidth.slice();const e=[];for(let n=0;n<t.colspan;n++)e.push(0);return e}function DS(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(const n in t.nodes){const r=t.nodes[n],s=r.spec.tableRole;s&&(e[s]=r)}}return e}new at("selectingCells");function EX(t){for(let e=t.depth-1;e>0;e--)if(t.node(e).type.spec.tableRole=="row")return t.node(0).resolve(t.before(e+1));return null}function n2(t){const e=t.selection.$head;for(let n=e.depth;n>0;n--)if(e.node(n).type.spec.tableRole=="row")return!0;return!1}function CX(t){const e=t.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const n=EX(e.$head)||NX(e.$head);if(n)return n;throw new RangeError(`No cell found around position ${e.head}`)}function NX(t){for(let e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n)}for(let e=t.nodeBefore,n=t.pos;e;e=e.lastChild,n--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n-e.nodeSize)}}function XC(t){return t.parent.type.spec.tableRole=="row"&&!!t.nodeAfter}function r2(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function s2(t,e,n){const r=t.node(-1),s=Ds.get(r),i=t.start(-1),o=s.nextCell(t.pos-i,e,n);return o==null?null:t.node(0).resolve(i+o)}function eN(t,e,n=1){const r={...t,colspan:t.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some(s=>s>0)||(r.colwidth=null)),r}var ms=class Os extends ve{constructor(e,n=e){const r=e.node(-1),s=Ds.get(r),i=e.start(-1),o=s.rectBetween(e.pos-i,n.pos-i),a=e.node(0),l=s.cellsInRect(o).filter(u=>u!=n.pos-i);l.unshift(n.pos-i);const c=l.map(u=>{const d=r.nodeAt(u);if(!d)throw new RangeError(`No cell with offset ${u} found`);const f=i+u+1;return new _P(a.resolve(f),a.resolve(f+d.content.size))});super(c[0].$from,c[0].$to,c),this.$anchorCell=e,this.$headCell=n}map(e,n){const r=e.resolve(n.map(this.$anchorCell.pos)),s=e.resolve(n.map(this.$headCell.pos));if(XC(r)&&XC(s)&&r2(r,s)){const i=this.$anchorCell.node(-1)!=r.node(-1);return i&&this.isRowSelection()?Os.rowSelection(r,s):i&&this.isColSelection()?Os.colSelection(r,s):new Os(r,s)}return xe.between(r,s)}content(){const e=this.$anchorCell.node(-1),n=Ds.get(e),r=this.$anchorCell.start(-1),s=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),i={},o=[];for(let l=s.top;l<s.bottom;l++){const c=[];for(let u=l*n.width+s.left,d=s.left;d<s.right;d++,u++){const f=n.map[u];if(i[f])continue;i[f]=!0;const p=n.findCell(f);let m=e.nodeAt(f);if(!m)throw new RangeError(`No cell with offset ${f} found`);const g=s.left-p.left,y=p.right-s.right;if(g>0||y>0){let v=m.attrs;if(g>0&&(v=eN(v,0,g)),y>0&&(v=eN(v,v.colspan-y,y)),p.left<s.left){if(m=m.type.createAndFill(v),!m)throw new RangeError(`Could not create cell with attrs ${JSON.stringify(v)}`)}else m=m.type.create(v,m.content)}if(p.top<s.top||p.bottom>s.bottom){const v={...m.attrs,rowspan:Math.min(p.bottom,s.bottom)-Math.max(p.top,s.top)};p.top<s.top?m=m.type.createAndFill(v):m=m.type.create(v,m.content)}c.push(m)}o.push(e.child(l).copy(M.from(c)))}const a=this.isColSelection()&&this.isRowSelection()?e:o;return new Q(M.from(a),1,1)}replace(e,n=Q.empty){const r=e.steps.length,s=this.ranges;for(let o=0;o<s.length;o++){const{$from:a,$to:l}=s[o],c=e.mapping.slice(r);e.replace(c.map(a.pos),c.map(l.pos),o?Q.empty:n)}const i=ve.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);i&&e.setSelection(i)}replaceWith(e,n){this.replace(e,new Q(M.from(n),0,0))}forEachCell(e){const n=this.$anchorCell.node(-1),r=Ds.get(n),s=this.$anchorCell.start(-1),i=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-s,this.$headCell.pos-s));for(let o=0;o<i.length;o++)e(n.nodeAt(i[o]),s+i[o])}isColSelection(){const e=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(e,n)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,s=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,s)==this.$headCell.node(-1).childCount}static colSelection(e,n=e){const r=e.node(-1),s=Ds.get(r),i=e.start(-1),o=s.findCell(e.pos-i),a=s.findCell(n.pos-i),l=e.node(0);return o.top<=a.top?(o.top>0&&(e=l.resolve(i+s.map[o.left])),a.bottom<s.height&&(n=l.resolve(i+s.map[s.width*(s.height-1)+a.right-1]))):(a.top>0&&(n=l.resolve(i+s.map[a.left])),o.bottom<s.height&&(e=l.resolve(i+s.map[s.width*(s.height-1)+o.right-1]))),new Os(e,n)}isRowSelection(){const e=this.$anchorCell.node(-1),n=Ds.get(e),r=this.$anchorCell.start(-1),s=n.colCount(this.$anchorCell.pos-r),i=n.colCount(this.$headCell.pos-r);if(Math.min(s,i)>0)return!1;const o=s+this.$anchorCell.nodeAfter.attrs.colspan,a=i+this.$headCell.nodeAfter.attrs.colspan;return Math.max(o,a)==n.width}eq(e){return e instanceof Os&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,n=e){const r=e.node(-1),s=Ds.get(r),i=e.start(-1),o=s.findCell(e.pos-i),a=s.findCell(n.pos-i),l=e.node(0);return o.left<=a.left?(o.left>0&&(e=l.resolve(i+s.map[o.top*s.width])),a.right<s.width&&(n=l.resolve(i+s.map[s.width*(a.top+1)-1]))):(a.left>0&&(n=l.resolve(i+s.map[a.top*s.width])),o.right<s.width&&(e=l.resolve(i+s.map[s.width*(o.top+1)-1]))),new Os(e,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,n){return new Os(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){return new Os(e.resolve(n),e.resolve(r))}getBookmark(){return new TX(this.$anchorCell.pos,this.$headCell.pos)}};ms.prototype.visible=!1;ve.jsonID("cell",ms);var TX=class i2{constructor(e,n){this.anchor=e,this.head=n}map(e){return new i2(e.map(this.anchor),e.map(this.head))}resolve(e){const n=e.resolve(this.anchor),r=e.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&r2(n,r)?new ms(n,r):ve.near(r,1)}};new at("fix-tables");function o2(t){const e=t.selection,n=CX(t),r=n.node(-1),s=n.start(-1),i=Ds.get(r);return{...e instanceof ms?i.rectBetween(e.$anchorCell.pos-s,e.$headCell.pos-s):i.findCell(n.pos-s),tableStart:s,map:i,table:r}}function OX(t){return function(e,n){if(!n2(e))return!1;if(n){const r=DS(e.schema),s=o2(e),i=e.tr,o=s.map.cellsInRect(t=="column"?{left:s.left,top:0,right:s.right,bottom:s.map.height}:t=="row"?{left:0,top:s.top,right:s.map.width,bottom:s.bottom}:s),a=o.map(l=>s.table.nodeAt(l));for(let l=0;l<o.length;l++)a[l].type==r.header_cell&&i.setNodeMarkup(s.tableStart+o[l],r.cell,a[l].attrs);if(i.steps.length===0)for(let l=0;l<o.length;l++)i.setNodeMarkup(s.tableStart+o[l],r.header_cell,a[l].attrs);n(i)}return!0}}function tN(t,e,n){const r=e.map.cellsInRect({left:0,top:0,right:t=="row"?e.map.width:1,bottom:t=="column"?e.map.height:1});for(let s=0;s<r.length;s++){const i=e.table.nodeAt(r[s]);if(i&&i.type!==n.header_cell)return!1}return!0}function LS(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?OX(t):function(n,r){if(!n2(n))return!1;if(r){const s=DS(n.schema),i=o2(n),o=n.tr,a=tN("row",i,s),l=tN("column",i,s),c=(t==="column"?a:t==="row"&&l)?1:0,u=t=="column"?{left:0,top:c,right:1,bottom:i.map.height}:t=="row"?{left:c,top:0,right:i.map.width,bottom:1}:i,d=t=="column"?l?s.cell:s.header_cell:t=="row"?a?s.cell:s.header_cell:s.cell;i.map.cellsInRect(u).forEach(f=>{const p=f+i.tableStart,m=o.doc.nodeAt(p);m&&o.setNodeMarkup(p,d,m.attrs)}),r(o)}return!0}}LS("row",{useDeprecatedLogic:!0});LS("column",{useDeprecatedLogic:!0});LS("cell",{useDeprecatedLogic:!0});function Xf(t,e){const n=t.selection;if(!(n instanceof ms))return!1;if(e){const r=t.tr,s=DS(t.schema).cell.createAndFill().content;n.forEachCell((i,o)=>{i.content.eq(s)||r.replace(r.mapping.map(o+1),r.mapping.map(o+i.nodeSize-1),new Q(s,0,0))}),r.docChanged&&e(r)}return!0}kS({ArrowLeft:eh("horiz",-1),ArrowRight:eh("horiz",1),ArrowUp:eh("vert",-1),ArrowDown:eh("vert",1),"Shift-ArrowLeft":th("horiz",-1),"Shift-ArrowRight":th("horiz",1),"Shift-ArrowUp":th("vert",-1),"Shift-ArrowDown":th("vert",1),Backspace:Xf,"Mod-Backspace":Xf,Delete:Xf,"Mod-Delete":Xf});function Ch(t,e,n){return n.eq(t.selection)?!1:(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function eh(t,e){return(n,r,s)=>{if(!s)return!1;const i=n.selection;if(i instanceof ms)return Ch(n,r,ve.near(i.$headCell,e));if(t!="horiz"&&!i.empty)return!1;const o=a2(s,t,e);if(o==null)return!1;if(t=="horiz")return Ch(n,r,ve.near(n.doc.resolve(i.head+e),e));{const a=n.doc.resolve(o),l=s2(a,t,e);let c;return l?c=ve.near(l,1):e<0?c=ve.near(n.doc.resolve(a.before(-1)),-1):c=ve.near(n.doc.resolve(a.after(-1)),1),Ch(n,r,c)}}}function th(t,e){return(n,r,s)=>{if(!s)return!1;const i=n.selection;let o;if(i instanceof ms)o=i;else{const l=a2(s,t,e);if(l==null)return!1;o=new ms(n.doc.resolve(l))}const a=s2(o.$headCell,t,e);return a?Ch(n,r,new ms(o.$anchorCell,a)):!1}}function a2(t,e,n){if(!(t.state.selection instanceof xe))return null;const{$head:r}=t.state.selection;for(let s=r.depth-1;s>=0;s--){const i=r.node(s);if((n<0?r.index(s):r.indexAfter(s))!=(n<0?0:i.childCount))return null;if(i.type.spec.tableRole=="cell"||i.type.spec.tableRole=="header_cell"){const o=r.before(s),a=e=="vert"?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(a)?o:null}}return null}new at("tableColumnResizing");function AX(t,e){const n=Math.min(t.top,e.top),r=Math.max(t.bottom,e.bottom),s=Math.min(t.left,e.left),o=Math.max(t.right,e.right)-s,a=r-n,l=s,c=n;return new DOMRect(l,c,o,a)}var RX=class{constructor({editor:t,element:e,view:n,updateDelay:r=250,resizeDelay:s=60,shouldShow:i,appendTo:o,getReferencedVirtualElement:a,options:l}){this.preventHide=!1,this.isVisible=!1,this.scrollTarget=window,this.floatingUIOptions={strategy:"absolute",placement:"top",offset:8,flip:{},shift:{},arrow:!1,size:!1,autoPlacement:!1,hide:!1,inline:!1,onShow:void 0,onHide:void 0,onUpdate:void 0,onDestroy:void 0},this.shouldShow=({view:u,state:d,from:f,to:p})=>{const{doc:m,selection:g}=d,{empty:y}=g,v=!m.textBetween(f,p).length&&NS(d.selection),x=this.element.contains(document.activeElement);return!(!(u.hasFocus()||x)||y||v||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.resizeHandler=()=>{this.resizeDebounceTimer&&clearTimeout(this.resizeDebounceTimer),this.resizeDebounceTimer=window.setTimeout(()=>{this.updatePosition()},this.resizeDelay)},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:u})=>{var d;if(this.editor.isDestroyed){this.destroy();return}if(this.preventHide){this.preventHide=!1;return}u!=null&&u.relatedTarget&&((d=this.element.parentNode)!=null&&d.contains(u.relatedTarget))||(u==null?void 0:u.relatedTarget)!==this.editor.view.dom&&this.hide()},this.handleDebouncedUpdate=(u,d)=>{const f=!(d!=null&&d.selection.eq(u.state.selection)),p=!(d!=null&&d.doc.eq(u.state.doc));!f&&!p||(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(u,f,p,d)},this.updateDelay))},this.updateHandler=(u,d,f,p)=>{const{composing:m}=u;if(m||!d&&!f)return;if(!this.getShouldShow(p)){this.hide();return}this.updatePosition(),this.show()},this.transactionHandler=({transaction:u})=>{const d=u.getMeta("bubbleMenu");d==="updatePosition"?this.updatePosition():d&&typeof d=="object"&&d.type==="updateOptions"&&this.updateOptions(d.options)};var c;this.editor=t,this.element=e,this.view=n,this.updateDelay=r,this.resizeDelay=s,this.appendTo=o,this.scrollTarget=(c=l==null?void 0:l.scrollTarget)!=null?c:window,this.getReferencedVirtualElement=a,this.floatingUIOptions={...this.floatingUIOptions,...l},this.element.tabIndex=0,i&&(this.shouldShow=i),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.editor.on("transaction",this.transactionHandler),window.addEventListener("resize",this.resizeHandler),this.scrollTarget.addEventListener("scroll",this.resizeHandler),this.update(n,n.state),this.getShouldShow()&&(this.show(),this.updatePosition())}get middlewares(){const t=[];return this.floatingUIOptions.flip&&t.push(Yw(typeof this.floatingUIOptions.flip!="boolean"?this.floatingUIOptions.flip:void 0)),this.floatingUIOptions.shift&&t.push(Jw(typeof this.floatingUIOptions.shift!="boolean"?this.floatingUIOptions.shift:void 0)),this.floatingUIOptions.offset&&t.push(Qw(typeof this.floatingUIOptions.offset!="boolean"?this.floatingUIOptions.offset:void 0)),this.floatingUIOptions.arrow&&t.push(wp(this.floatingUIOptions.arrow)),this.floatingUIOptions.size&&t.push(Zw(typeof this.floatingUIOptions.size!="boolean"?this.floatingUIOptions.size:void 0)),this.floatingUIOptions.autoPlacement&&t.push(Dj(typeof this.floatingUIOptions.autoPlacement!="boolean"?this.floatingUIOptions.autoPlacement:void 0)),this.floatingUIOptions.hide&&t.push(Xw(typeof this.floatingUIOptions.hide!="boolean"?this.floatingUIOptions.hide:void 0)),this.floatingUIOptions.inline&&t.push(Lj(typeof this.floatingUIOptions.inline!="boolean"?this.floatingUIOptions.inline:void 0)),t}get virtualElement(){var t,e,n;const{selection:r}=this.editor.state,s=(t=this.getReferencedVirtualElement)==null?void 0:t.call(this);if(s)return s;if(!((n=(e=this.view)==null?void 0:e.dom)!=null&&n.parentNode))return;const i=LM(this.view,r.from,r.to);let o={getBoundingClientRect:()=>i,getClientRects:()=>[i]};if(r instanceof de){let a=this.view.nodeDOM(r.from);const l=a.dataset.nodeViewWrapper?a:a.querySelector("[data-node-view-wrapper]");l&&(a=l),a&&(o={getBoundingClientRect:()=>a.getBoundingClientRect(),getClientRects:()=>[a.getBoundingClientRect()]})}if(r instanceof ms){const{$anchorCell:a,$headCell:l}=r,c=a?a.pos:l.pos,u=l?l.pos:a.pos,d=this.view.nodeDOM(c),f=this.view.nodeDOM(u);if(!d||!f)return;const p=d===f?d.getBoundingClientRect():AX(d.getBoundingClientRect(),f.getBoundingClientRect());o={getBoundingClientRect:()=>p,getClientRects:()=>[p]}}return o}updatePosition(){const t=this.virtualElement;t&&eS(t,this.element,{placement:this.floatingUIOptions.placement,strategy:this.floatingUIOptions.strategy,middleware:this.middlewares}).then(({x:e,y:n,strategy:r,middlewareData:s})=>{var i,o;if((i=s.hide)!=null&&i.referenceHidden||(o=s.hide)!=null&&o.escaped){this.element.style.visibility="hidden";return}this.element.style.visibility="visible",this.element.style.width="max-content",this.element.style.position=r,this.element.style.left=`${e}px`,this.element.style.top=`${n}px`,this.isVisible&&this.floatingUIOptions.onUpdate&&this.floatingUIOptions.onUpdate()})}update(t,e){const{state:n}=t,r=n.selection.from!==n.selection.to;if(this.updateDelay>0&&r){this.handleDebouncedUpdate(t,e);return}const s=!(e!=null&&e.selection.eq(t.state.selection)),i=!(e!=null&&e.doc.eq(t.state.doc));this.updateHandler(t,s,i,e)}getShouldShow(t){var e;const{state:n}=this.view,{selection:r}=n,{ranges:s}=r,i=Math.min(...s.map(l=>l.$from.pos)),o=Math.max(...s.map(l=>l.$to.pos));return((e=this.shouldShow)==null?void 0:e.call(this,{editor:this.editor,element:this.element,view:this.view,state:n,oldState:t,from:i,to:o}))||!1}show(){var t;if(this.isVisible)return;this.element.style.visibility="visible",this.element.style.opacity="1";const e=typeof this.appendTo=="function"?this.appendTo():this.appendTo;(t=e??this.view.dom.parentElement)==null||t.appendChild(this.element),this.floatingUIOptions.onShow&&this.floatingUIOptions.onShow(),this.isVisible=!0}hide(){this.isVisible&&(this.element.style.visibility="hidden",this.element.style.opacity="0",this.element.remove(),this.floatingUIOptions.onHide&&this.floatingUIOptions.onHide(),this.isVisible=!1)}updateOptions(t){var e;if(t.updateDelay!==void 0&&(this.updateDelay=t.updateDelay),t.resizeDelay!==void 0&&(this.resizeDelay=t.resizeDelay),t.appendTo!==void 0&&(this.appendTo=t.appendTo),t.getReferencedVirtualElement!==void 0&&(this.getReferencedVirtualElement=t.getReferencedVirtualElement),t.shouldShow!==void 0&&t.shouldShow&&(this.shouldShow=t.shouldShow),t.options!==void 0){const n=(e=t.options.scrollTarget)!=null?e:window;n!==this.scrollTarget&&(this.scrollTarget.removeEventListener("scroll",this.resizeHandler),this.scrollTarget=n,this.scrollTarget.addEventListener("scroll",this.resizeHandler)),this.floatingUIOptions={...this.floatingUIOptions,...t.options}}}destroy(){this.hide(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),window.removeEventListener("resize",this.resizeHandler),this.scrollTarget.removeEventListener("scroll",this.resizeHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler),this.editor.off("transaction",this.transactionHandler),this.floatingUIOptions.onDestroy&&this.floatingUIOptions.onDestroy()}},l2=t=>new nt({key:typeof t.pluginKey=="string"?new at(t.pluginKey):t.pluginKey,view:e=>new RX({view:e,...t})});ft.create({name:"bubbleMenu",addOptions(){return{element:null,pluginKey:"bubbleMenu",updateDelay:void 0,appendTo:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[l2({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,updateDelay:this.options.updateDelay,options:this.options.options,appendTo:this.options.appendTo,getReferencedVirtualElement:this.options.getReferencedVirtualElement,shouldShow:this.options.shouldShow})]:[]}});var jX=class{constructor({editor:t,element:e,view:n,updateDelay:r=250,resizeDelay:s=60,options:i,appendTo:o,shouldShow:a}){this.preventHide=!1,this.isVisible=!1,this.scrollTarget=window,this.shouldShow=({view:c,state:u})=>{const{selection:d}=u,{$anchor:f,empty:p}=d,m=f.depth===1,g=f.parent.isTextblock&&!f.parent.type.spec.code&&!f.parent.textContent&&f.parent.childCount===0&&!this.getTextContent(f.parent);return!(!c.hasFocus()||!p||!m||!g||!this.editor.isEditable)},this.floatingUIOptions={strategy:"absolute",placement:"right",offset:8,flip:{},shift:{},arrow:!1,size:!1,autoPlacement:!1,hide:!1,inline:!1},this.updateHandler=(c,u,d,f)=>{const{composing:p}=c;if(p||!u&&!d)return;if(!this.getShouldShow(f)){this.hide();return}this.updatePosition(),this.show()},this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:c})=>{var u;if(this.preventHide){this.preventHide=!1;return}c!=null&&c.relatedTarget&&((u=this.element.parentNode)!=null&&u.contains(c.relatedTarget))||(c==null?void 0:c.relatedTarget)!==this.editor.view.dom&&this.hide()},this.transactionHandler=({transaction:c})=>{const u=c.getMeta("floatingMenu");u==="updatePosition"?this.updatePosition():u&&typeof u=="object"&&u.type==="updateOptions"&&this.updateOptions(u.options)},this.resizeHandler=()=>{this.resizeDebounceTimer&&clearTimeout(this.resizeDebounceTimer),this.resizeDebounceTimer=window.setTimeout(()=>{this.updatePosition()},this.resizeDelay)};var l;this.editor=t,this.element=e,this.view=n,this.updateDelay=r,this.resizeDelay=s,this.appendTo=o,this.scrollTarget=(l=i==null?void 0:i.scrollTarget)!=null?l:window,this.floatingUIOptions={...this.floatingUIOptions,...i},this.element.tabIndex=0,a&&(this.shouldShow=a),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.editor.on("transaction",this.transactionHandler),window.addEventListener("resize",this.resizeHandler),this.scrollTarget.addEventListener("scroll",this.resizeHandler),this.update(n,n.state),this.getShouldShow()&&(this.show(),this.updatePosition())}getTextContent(t){return RM(t,{textSerializers:AS(this.editor.schema)})}get middlewares(){const t=[];return this.floatingUIOptions.flip&&t.push(Yw(typeof this.floatingUIOptions.flip!="boolean"?this.floatingUIOptions.flip:void 0)),this.floatingUIOptions.shift&&t.push(Jw(typeof this.floatingUIOptions.shift!="boolean"?this.floatingUIOptions.shift:void 0)),this.floatingUIOptions.offset&&t.push(Qw(typeof this.floatingUIOptions.offset!="boolean"?this.floatingUIOptions.offset:void 0)),this.floatingUIOptions.arrow&&t.push(wp(this.floatingUIOptions.arrow)),this.floatingUIOptions.size&&t.push(Zw(typeof this.floatingUIOptions.size!="boolean"?this.floatingUIOptions.size:void 0)),this.floatingUIOptions.autoPlacement&&t.push(Dj(typeof this.floatingUIOptions.autoPlacement!="boolean"?this.floatingUIOptions.autoPlacement:void 0)),this.floatingUIOptions.hide&&t.push(Xw(typeof this.floatingUIOptions.hide!="boolean"?this.floatingUIOptions.hide:void 0)),this.floatingUIOptions.inline&&t.push(Lj(typeof this.floatingUIOptions.inline!="boolean"?this.floatingUIOptions.inline:void 0)),t}getShouldShow(t){var e;const{state:n}=this.view,{selection:r}=n,{ranges:s}=r,i=Math.min(...s.map(l=>l.$from.pos)),o=Math.max(...s.map(l=>l.$to.pos));return(e=this.shouldShow)==null?void 0:e.call(this,{editor:this.editor,view:this.view,state:n,oldState:t,from:i,to:o})}updateOptions(t){var e;if(t.updateDelay!==void 0&&(this.updateDelay=t.updateDelay),t.resizeDelay!==void 0&&(this.resizeDelay=t.resizeDelay),t.appendTo!==void 0&&(this.appendTo=t.appendTo),t.shouldShow!==void 0&&t.shouldShow&&(this.shouldShow=t.shouldShow),t.options!==void 0){const n=(e=t.options.scrollTarget)!=null?e:window;n!==this.scrollTarget&&(this.scrollTarget.removeEventListener("scroll",this.resizeHandler),this.scrollTarget=n,this.scrollTarget.addEventListener("scroll",this.resizeHandler)),this.floatingUIOptions={...this.floatingUIOptions,...t.options}}}updatePosition(){const{selection:t}=this.editor.state,e=LM(this.view,t.from,t.to);eS({getBoundingClientRect:()=>e,getClientRects:()=>[e]},this.element,{placement:this.floatingUIOptions.placement,strategy:this.floatingUIOptions.strategy,middleware:this.middlewares}).then(({x:r,y:s,strategy:i,middlewareData:o})=>{var a,l;if((a=o.hide)!=null&&a.referenceHidden||(l=o.hide)!=null&&l.escaped){this.element.style.visibility="hidden";return}this.element.style.visibility="visible",this.element.style.width="max-content",this.element.style.position=i,this.element.style.left=`${r}px`,this.element.style.top=`${s}px`,this.isVisible&&this.floatingUIOptions.onUpdate&&this.floatingUIOptions.onUpdate()})}update(t,e){const n=!(e!=null&&e.selection.eq(t.state.selection)),r=!(e!=null&&e.doc.eq(t.state.doc));this.updateHandler(t,n,r,e)}show(){var t;if(this.isVisible)return;this.element.style.visibility="visible",this.element.style.opacity="1";const e=typeof this.appendTo=="function"?this.appendTo():this.appendTo;(t=e??this.view.dom.parentElement)==null||t.appendChild(this.element),this.floatingUIOptions.onShow&&this.floatingUIOptions.onShow(),this.isVisible=!0}hide(){this.isVisible&&(this.element.style.visibility="hidden",this.element.style.opacity="0",this.element.remove(),this.floatingUIOptions.onHide&&this.floatingUIOptions.onHide(),this.isVisible=!1)}destroy(){this.hide(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),window.removeEventListener("resize",this.resizeHandler),this.scrollTarget.removeEventListener("scroll",this.resizeHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler),this.editor.off("transaction",this.transactionHandler),this.floatingUIOptions.onDestroy&&this.floatingUIOptions.onDestroy()}},c2=t=>new nt({key:typeof t.pluginKey=="string"?new at(t.pluginKey):t.pluginKey,view:e=>new jX({view:e,...t})});ft.create({name:"floatingMenu",addOptions(){return{element:null,options:{},pluginKey:"floatingMenu",updateDelay:void 0,resizeDelay:void 0,appendTo:void 0,shouldShow:null}},addCommands(){return{updateFloatingMenuPosition:()=>({tr:t,dispatch:e})=>(e&&t.setMeta("floatingMenu","updatePosition"),!0)}},addProseMirrorPlugins(){return this.options.element?[c2({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,updateDelay:this.options.updateDelay,resizeDelay:this.options.resizeDelay,options:this.options.options,appendTo:this.options.appendTo,shouldShow:this.options.shouldShow})]:[]}});var IX=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},PX=({contentComponent:t})=>{const e=sS.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return h.jsx(h.Fragment,{children:Object.values(e)})};function MX(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:KO.createPortal(r.reactElement,r.element,n)},t.forEach(s=>s())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(s=>s())}}}var DX=class extends se.Component{constructor(t){var e;super(t),this.editorContentRef=se.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var t;const e=this.props.editor;if(e&&!e.isDestroyed&&((t=e.view.dom)!=null&&t.parentNode)){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:n}),e.contentComponent=MX(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.parentNode))return;const n=document.createElement("div");n.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:n})}catch{}}}render(){const{editor:t,innerRef:e,...n}=this.props;return h.jsxs(h.Fragment,{children:[h.jsx("div",{ref:IX(e,this.editorContentRef),...n}),(t==null?void 0:t.contentComponent)&&h.jsx(PX,{contentComponent:t.contentComponent})]})}},LX=w.forwardRef((t,e)=>{const n=se.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return se.createElement(DX,{key:n,innerRef:e,...t})}),u2=se.memo(LX),$X=typeof window<"u"?w.useLayoutEffect:w.useEffect,FX=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",e),()=>{n.off("transaction",e)}}}};function BX(t){var e;const[n]=w.useState(()=>new FX(t.editor)),r=bX.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:dX);return $X(()=>n.watch(t.editor),[t.editor,n]),w.useDebugValue(r),r}var UX=!1,Dx=typeof window>"u",zX=Dx||!!(typeof window<"u"&&window.next),VX=class d2{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?Dx||zX?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var s,i;return(i=(s=this.options.current).onBeforeCreate)==null?void 0:i.call(s,...r)},onBlur:(...r)=>{var s,i;return(i=(s=this.options.current).onBlur)==null?void 0:i.call(s,...r)},onCreate:(...r)=>{var s,i;return(i=(s=this.options.current).onCreate)==null?void 0:i.call(s,...r)},onDestroy:(...r)=>{var s,i;return(i=(s=this.options.current).onDestroy)==null?void 0:i.call(s,...r)},onFocus:(...r)=>{var s,i;return(i=(s=this.options.current).onFocus)==null?void 0:i.call(s,...r)},onSelectionUpdate:(...r)=>{var s,i;return(i=(s=this.options.current).onSelectionUpdate)==null?void 0:i.call(s,...r)},onTransaction:(...r)=>{var s,i;return(i=(s=this.options.current).onTransaction)==null?void 0:i.call(s,...r)},onUpdate:(...r)=>{var s,i;return(i=(s=this.options.current).onUpdate)==null?void 0:i.call(s,...r)},onContentError:(...r)=>{var s,i;return(i=(s=this.options.current).onContentError)==null?void 0:i.call(s,...r)},onDrop:(...r)=>{var s,i;return(i=(s=this.options.current).onDrop)==null?void 0:i.call(s,...r)},onPaste:(...r)=>{var s,i;return(i=(s=this.options.current).onPaste)==null?void 0:i.call(s,...r)},onDelete:(...r)=>{var s,i;return(i=(s=this.options.current).onDelete)==null?void 0:i.call(s,...r)}};return new yZ(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((s,i)=>{var o;return s===((o=n.extensions)==null?void 0:o[i])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?d2.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,s)=>r===e[s]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function HX(t={},e=[]){const n=w.useRef(t);n.current=t;const[r]=w.useState(()=>new VX(n)),s=sS.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return w.useDebugValue(s),w.useEffect(r.onRender(e)),BX({editor:s,selector:({transactionNumber:i})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&i===0?0:i+1}),s}var $S=w.createContext({editor:null});$S.Consumer;var f2=()=>w.useContext($S),qX=w.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),WX=()=>w.useContext(qX);se.forwardRef((t,e)=>{const{onDragStart:n}=WX(),r=t.as||"div";return h.jsx(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});se.createContext({markViewContentRef:()=>{}});var KX=se.forwardRef(({pluginKey:t="bubbleMenu",editor:e,updateDelay:n,resizeDelay:r,appendTo:s,shouldShow:i=null,getReferencedVirtualElement:o,options:a,children:l,...c},u)=>{const d=w.useRef(document.createElement("div"));typeof u=="function"?u(d.current):u&&(u.current=d.current);const{editor:f}=f2(),p=e||f,m={updateDelay:n,resizeDelay:r,appendTo:s,pluginKey:t,shouldShow:i,getReferencedVirtualElement:o,options:a},g=w.useRef(m);g.current=m;const[y,v]=w.useState(!1),x=w.useRef(!0);return w.useEffect(()=>{if(p!=null&&p.isDestroyed)return;if(!p){console.warn("BubbleMenu component is not rendered inside of an editor component or does not have editor prop.");return}const b=d.current;b.style.visibility="hidden",b.style.position="absolute";const S=l2({...g.current,editor:p,element:b});p.registerPlugin(S);const k=g.current.pluginKey;return x.current=!0,v(!0),()=>{v(!1),p.unregisterPlugin(k),window.requestAnimationFrame(()=>{b.parentNode&&b.parentNode.removeChild(b)})}},[p]),w.useEffect(()=>{if(!(!y||!p||p.isDestroyed)){if(x.current){x.current=!1;return}p.view.dispatch(p.state.tr.setMeta("bubbleMenu",{type:"updateOptions",options:g.current}))}},[y,p,n,r,i,a,s,o]),ko.createPortal(h.jsx("div",{...c,children:l}),d.current)}),GX=se.forwardRef(({pluginKey:t="floatingMenu",editor:e,updateDelay:n,resizeDelay:r,appendTo:s,shouldShow:i=null,options:o,children:a,...l},c)=>{const u=w.useRef(document.createElement("div"));typeof c=="function"?c(u.current):c&&(c.current=u.current);const{editor:d}=f2(),f=e||d,p={updateDelay:n,resizeDelay:r,appendTo:s,pluginKey:t,shouldShow:i,options:o},m=w.useRef(p);m.current=p;const[g,y]=w.useState(!1),v=w.useRef(!0);return w.useEffect(()=>{if(f!=null&&f.isDestroyed)return;if(!f){console.warn("FloatingMenu component is not rendered inside of an editor component or does not have editor prop.");return}const x=u.current;x.style.visibility="hidden",x.style.position="absolute";const b=c2({...m.current,editor:f,element:x});f.registerPlugin(b);const S=m.current.pluginKey;return v.current=!0,y(!0),()=>{y(!1),f.unregisterPlugin(S),window.requestAnimationFrame(()=>{x.parentNode&&x.parentNode.removeChild(x)})}},[f]),w.useEffect(()=>{if(!(!g||!f||f.isDestroyed)){if(v.current){v.current=!1;return}f.view.dispatch(f.state.tr.setMeta("floatingMenu",{type:"updateOptions",options:m.current}))}},[g,f,n,r,i,o,s]),ko.createPortal(h.jsx("div",{...l,children:a}),u.current)}),FS=w.createContext({editor:null,isReady:!1});FS.displayName="TiptapContext";var Rg=()=>w.useContext(FS);function h2({instance:t,children:e}){var n;const[r,s]=w.useState((n=t==null?void 0:t.isInitialized)!=null?n:!1);w.useEffect(()=>{if(!t){s(!1);return}if(t.isInitialized){s(!0);return}const a=()=>{s(!0)};return t.on("create",a),()=>{t.off("create",a)}},[t]);const i=w.useMemo(()=>({editor:t,isReady:r}),[t,r]),o=w.useMemo(()=>({editor:t}),[t]);return h.jsx($S.Provider,{value:o,children:h.jsx(FS.Provider,{value:i,children:e})})}h2.displayName="Tiptap";function p2({...t}){const{editor:e}=Rg();return h.jsx(u2,{editor:e,...t})}p2.displayName="Tiptap.Content";function m2({children:t}){const{isReady:e}=Rg();return e?null:t}m2.displayName="Tiptap.Loading";function g2({children:t,...e}){const{editor:n}=Rg();return n?h.jsx(KX,{editor:n,...e,children:t}):null}g2.displayName="Tiptap.BubbleMenu";function y2({children:t,...e}){const{editor:n}=Rg();return n?h.jsx(GX,{...e,editor:n,children:t}):null}y2.displayName="Tiptap.FloatingMenu";Object.assign(h2,{Content:p2,Loading:m2,BubbleMenu:g2,FloatingMenu:y2});var zp=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:n,...r}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,r,n]},QX=/^\s*>\s$/,JX=ar.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return zp("blockquote",{...At(this.options.HTMLAttributes,t),children:zp("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const n=">",r=[];return t.content.forEach(s=>{const a=e.renderChildren([s]).split(`
`).map(l=>l.trim()===""?n:`${n} ${l}`);r.push(a.join(`
`))}),r.join(`
${n}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[kc({find:QX,type:this.type})]}}),YX=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,ZX=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,XX=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,eee=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,tee=Ba.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return zp("strong",{...At(this.options.HTMLAttributes,t),children:zp("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Sc({find:YX,type:this.type}),Sc({find:XX,type:this.type})]},addPasteRules(){return[Ia({find:ZX,type:this.type}),Ia({find:eee,type:this.type})]}}),nee=/(^|[^`])`([^`]+)`(?!`)$/,ree=/(^|[^`])`([^`]+)`(?!`)/g,see=Ba.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",At(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Sc({find:nee,type:this.type})]},addPasteRules(){return[Ia({find:ree,type:this.type})]}}),Xy=4,iee=/^```([a-z]+)?[\s\n]$/,oee=/^~~~([a-z]+)?[\s\n]$/,aee=ar.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:Xy,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options;if(!n)return null;const i=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return i||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",At(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var n;return((n=t.raw)==null?void 0:n.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var n;let r="";const s=((n=t.attrs)==null?void 0:n.language)||"";return t.content?r=[`\`\`\`${s}`,e.renderChildren(t.content),"```"].join(`
`):r=`\`\`\`${s}

\`\`\``,r},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:Xy,{state:r}=t,{selection:s}=r,{$from:i,empty:o}=s;if(i.parent.type!==this.type)return!1;const a=" ".repeat(n);return o?t.commands.insertContent(a):t.commands.command(({tr:l})=>{const{from:c,to:u}=s,p=r.doc.textBetween(c,u,`
`,`
`).split(`
`).map(m=>a+m).join(`
`);return l.replaceWith(c,u,r.schema.text(p)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:Xy,{state:r}=t,{selection:s}=r,{$from:i,empty:o}=s;return i.parent.type!==this.type?!1:o?t.commands.command(({tr:a})=>{var l;const{pos:c}=i,u=i.start(),d=i.end(),p=r.doc.textBetween(u,d,`
`,`
`).split(`
`);let m=0,g=0;const y=c-u;for(let E=0;E<p.length;E+=1){if(g+p[E].length>=y){m=E;break}g+=p[E].length+1}const x=((l=p[m].match(/^ */))==null?void 0:l[0])||"",b=Math.min(x.length,n);if(b===0)return!0;let S=u;for(let E=0;E<m;E+=1)S+=p[E].length+1;return a.delete(S,S+b),c-S<=b&&a.setSelection(xe.create(a.doc,S)),!0}):t.commands.command(({tr:a})=>{const{from:l,to:c}=s,f=r.doc.textBetween(l,c,`
`,`
`).split(`
`).map(p=>{var m;const g=((m=p.match(/^ */))==null?void 0:m[0])||"",y=Math.min(g.length,n);return p.slice(y)}).join(`
`);return a.replaceWith(l,c,r.schema.text(f)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:s}=n;if(!s||r.parent.type!==this.type)return!1;const i=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!i||!o?!1:t.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:s,empty:i}=n;if(!i||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const a=s.after();return a===void 0?!1:r.nodeAt(a)?t.commands.command(({tr:c})=>(c.setSelection(ve.near(r.resolve(a))),!0)):t.commands.exitCode()}}},addInputRules(){return[jx({find:iee,type:this.type,getAttributes:t=>({language:t[1]})}),jx({find:oee,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new nt({key:new at("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),s=r?JSON.parse(r):void 0,i=s==null?void 0:s.mode;if(!n||!i)return!1;const{tr:o,schema:a}=t.state,l=a.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:i},l)),o.selection.$from.parent.type!==this.type&&o.setSelection(xe.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),lee=ar.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),cee=ar.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",At(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:s,storedMarks:i}=n;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=r.extensionManager,l=i||s.$to.parentOffset&&s.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&o){const d=l.filter(f=>a.includes(f.type.name));c.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),uee=ar.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,At(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var n;const r=(n=t.attrs)!=null&&n.level?parseInt(t.attrs.level,10):1,s="#".repeat(r);return t.content?`${s} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>jx({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),dee=ar.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",At(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!xZ(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$to:r}=n,s=t();return PM(n)?s.insertContentAt(r.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({state:i,tr:o,dispatch:a})=>{if(a){const{$to:l}=o.selection,c=l.end();if(l.nodeAfter)l.nodeAfter.isTextblock?o.setSelection(xe.create(o.doc,l.pos+1)):l.nodeAfter.isBlock?o.setSelection(de.create(o.doc,l.pos)):o.setSelection(xe.create(o.doc,l.pos));else{const u=i.schema.nodes[this.options.nextNodeType]||l.parent.type.contentMatch.defaultType,d=u==null?void 0:u.create();d&&(o.insert(c,d),o.setSelection(xe.create(o.doc,c+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[vZ({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),fee=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,hee=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,pee=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,mee=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,gee=Ba.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",At(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Sc({find:fee,type:this.type}),Sc({find:pee,type:this.type})]},addPasteRules(){return[Ia({find:hee,type:this.type}),Ia({find:mee,type:this.type})]}});const yee="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",vee="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",Lx="numeric",$x="ascii",Fx="alpha",$u="asciinumeric",xu="alphanumeric",Bx="domain",v2="emoji",xee="scheme",bee="slashscheme",ev="whitespace";function wee(t,e){return t in e||(e[t]=[]),e[t]}function Qo(t,e,n){e[Lx]&&(e[$u]=!0,e[xu]=!0),e[$x]&&(e[$u]=!0,e[Fx]=!0),e[$u]&&(e[xu]=!0),e[Fx]&&(e[xu]=!0),e[xu]&&(e[Bx]=!0),e[v2]&&(e[Bx]=!0);for(const r in e){const s=wee(r,n);s.indexOf(t)<0&&s.push(t)}}function See(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function $n(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}$n.groups={};$n.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const s=e.jr[r][0],i=e.jr[r][1];if(i&&s.test(t))return i}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let s=0;s<t.length;s++)this.tt(t[s],e,n,r)},tr(t,e,n,r){r=r||$n.groups;let s;return e&&e.j?s=e:(s=new $n(e),n&&r&&Qo(e,n,r)),this.jr.push([t,s]),s},ts(t,e,n,r){let s=this;const i=t.length;if(!i)return s;for(let o=0;o<i-1;o++)s=s.tt(t[o]);return s.tt(t[i-1],e,n,r)},tt(t,e,n,r){r=r||$n.groups;const s=this;if(e&&e.j)return s.j[t]=e,e;const i=e;let o,a=s.go(t);if(a?(o=new $n,Object.assign(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new $n,i){if(r)if(o.t&&typeof o.t=="string"){const l=Object.assign(See(o.t,r),n);Qo(i,l,r)}else n&&Qo(i,n,r);o.t=i}return s.j[t]=o,o}};const _e=(t,e,n,r,s)=>t.ta(e,n,r,s),ht=(t,e,n,r,s)=>t.tr(e,n,r,s),nN=(t,e,n,r,s)=>t.ts(e,n,r,s),$=(t,e,n,r,s)=>t.tt(e,n,r,s),As="WORD",Ux="UWORD",x2="ASCIINUMERICAL",b2="ALPHANUMERICAL",Pd="LOCALHOST",zx="TLD",Vx="UTLD",Nh="SCHEME",cl="SLASH_SCHEME",BS="NUM",Hx="WS",US="NL",Fu="OPENBRACE",Bu="CLOSEBRACE",Vp="OPENBRACKET",Hp="CLOSEBRACKET",qp="OPENPAREN",Wp="CLOSEPAREN",Kp="OPENANGLEBRACKET",Gp="CLOSEANGLEBRACKET",Qp="FULLWIDTHLEFTPAREN",Jp="FULLWIDTHRIGHTPAREN",Yp="LEFTCORNERBRACKET",Zp="RIGHTCORNERBRACKET",Xp="LEFTWHITECORNERBRACKET",em="RIGHTWHITECORNERBRACKET",tm="FULLWIDTHLESSTHAN",nm="FULLWIDTHGREATERTHAN",rm="AMPERSAND",sm="APOSTROPHE",im="ASTERISK",_i="AT",om="BACKSLASH",am="BACKTICK",lm="CARET",Ri="COLON",zS="COMMA",cm="DOLLAR",ts="DOT",um="EQUALS",VS="EXCLAMATION",ur="HYPHEN",Uu="PERCENT",dm="PIPE",fm="PLUS",hm="POUND",zu="QUERY",HS="QUOTE",w2="FULLWIDTHMIDDLEDOT",qS="SEMI",ns="SLASH",Vu="TILDE",pm="UNDERSCORE",S2="EMOJI",mm="SYM";var k2=Object.freeze({__proto__:null,ALPHANUMERICAL:b2,AMPERSAND:rm,APOSTROPHE:sm,ASCIINUMERICAL:x2,ASTERISK:im,AT:_i,BACKSLASH:om,BACKTICK:am,CARET:lm,CLOSEANGLEBRACKET:Gp,CLOSEBRACE:Bu,CLOSEBRACKET:Hp,CLOSEPAREN:Wp,COLON:Ri,COMMA:zS,DOLLAR:cm,DOT:ts,EMOJI:S2,EQUALS:um,EXCLAMATION:VS,FULLWIDTHGREATERTHAN:nm,FULLWIDTHLEFTPAREN:Qp,FULLWIDTHLESSTHAN:tm,FULLWIDTHMIDDLEDOT:w2,FULLWIDTHRIGHTPAREN:Jp,HYPHEN:ur,LEFTCORNERBRACKET:Yp,LEFTWHITECORNERBRACKET:Xp,LOCALHOST:Pd,NL:US,NUM:BS,OPENANGLEBRACKET:Kp,OPENBRACE:Fu,OPENBRACKET:Vp,OPENPAREN:qp,PERCENT:Uu,PIPE:dm,PLUS:fm,POUND:hm,QUERY:zu,QUOTE:HS,RIGHTCORNERBRACKET:Zp,RIGHTWHITECORNERBRACKET:em,SCHEME:Nh,SEMI:qS,SLASH:ns,SLASH_SCHEME:cl,SYM:mm,TILDE:Vu,TLD:zx,UNDERSCORE:pm,UTLD:Vx,UWORD:Ux,WORD:As,WS:Hx});const Cs=/[a-z]/,ru=new RegExp("\\p{L}","u"),tv=new RegExp("\\p{Emoji}","u"),Ns=/\d/,nv=/\s/,rN="\r",rv=`
`,kee="",_ee="",sv="";let nh=null,rh=null;function Eee(t=[]){const e={};$n.groups=e;const n=new $n;nh==null&&(nh=sN(yee)),rh==null&&(rh=sN(vee)),$(n,"'",sm),$(n,"{",Fu),$(n,"}",Bu),$(n,"[",Vp),$(n,"]",Hp),$(n,"(",qp),$(n,")",Wp),$(n,"<",Kp),$(n,">",Gp),$(n,"",Qp),$(n,"",Jp),$(n,"",Yp),$(n,"",Zp),$(n,"",Xp),$(n,"",em),$(n,"",tm),$(n,"",nm),$(n,"&",rm),$(n,"*",im),$(n,"@",_i),$(n,"`",am),$(n,"^",lm),$(n,":",Ri),$(n,",",zS),$(n,"$",cm),$(n,".",ts),$(n,"=",um),$(n,"!",VS),$(n,"-",ur),$(n,"%",Uu),$(n,"|",dm),$(n,"+",fm),$(n,"#",hm),$(n,"?",zu),$(n,'"',HS),$(n,"/",ns),$(n,";",qS),$(n,"~",Vu),$(n,"_",pm),$(n,"\\",om),$(n,"",w2);const r=ht(n,Ns,BS,{[Lx]:!0});ht(r,Ns,r);const s=ht(r,Cs,x2,{[$u]:!0}),i=ht(r,ru,b2,{[xu]:!0}),o=ht(n,Cs,As,{[$x]:!0});ht(o,Ns,s),ht(o,Cs,o),ht(s,Ns,s),ht(s,Cs,s);const a=ht(n,ru,Ux,{[Fx]:!0});ht(a,Cs),ht(a,Ns,i),ht(a,ru,a),ht(i,Ns,i),ht(i,Cs),ht(i,ru,i);const l=$(n,rv,US,{[ev]:!0}),c=$(n,rN,Hx,{[ev]:!0}),u=ht(n,nv,Hx,{[ev]:!0});$(n,sv,u),$(c,rv,l),$(c,sv,u),ht(c,nv,u),$(u,rN),$(u,rv),ht(u,nv,u),$(u,sv,u);const d=ht(n,tv,S2,{[v2]:!0});$(d,"#"),ht(d,tv,d),$(d,kee,d);const f=$(d,_ee);$(f,"#"),ht(f,tv,d);const p=[[Cs,o],[Ns,s]],m=[[Cs,null],[ru,a],[Ns,i]];for(let g=0;g<nh.length;g++)hi(n,nh[g],zx,As,p);for(let g=0;g<rh.length;g++)hi(n,rh[g],Vx,Ux,m);Qo(zx,{tld:!0,ascii:!0},e),Qo(Vx,{utld:!0,alpha:!0},e),hi(n,"file",Nh,As,p),hi(n,"mailto",Nh,As,p),hi(n,"http",cl,As,p),hi(n,"https",cl,As,p),hi(n,"ftp",cl,As,p),hi(n,"ftps",cl,As,p),Qo(Nh,{scheme:!0,ascii:!0},e),Qo(cl,{slashscheme:!0,ascii:!0},e),t=t.sort((g,y)=>g[0]>y[0]?1:-1);for(let g=0;g<t.length;g++){const y=t[g][0],x=t[g][1]?{[xee]:!0}:{[bee]:!0};y.indexOf("-")>=0?x[Bx]=!0:Cs.test(y)?Ns.test(y)?x[$u]=!0:x[$x]=!0:x[Lx]=!0,nN(n,y,y,x)}return nN(n,"localhost",Pd,{ascii:!0}),n.jd=new $n(mm),{start:n,tokens:Object.assign({groups:e},k2)}}function _2(t,e){const n=Cee(e.replace(/[A-Z]/g,a=>a.toLowerCase())),r=n.length,s=[];let i=0,o=0;for(;o<r;){let a=t,l=null,c=0,u=null,d=-1,f=-1;for(;o<r&&(l=a.go(n[o]));)a=l,a.accepts()?(d=0,f=0,u=a):d>=0&&(d+=n[o].length,f++),c+=n[o].length,i+=n[o].length,o++;i-=d,o-=f,c-=d,s.push({t:u.t,v:e.slice(i-c,i),s:i-c,e:i})}return s}function Cee(t){const e=[],n=t.length;let r=0;for(;r<n;){let s=t.charCodeAt(r),i,o=s<55296||s>56319||r+1===n||(i=t.charCodeAt(r+1))<56320||i>57343?t[r]:t.slice(r,r+2);e.push(o),r+=o.length}return e}function hi(t,e,n,r,s){let i;const o=e.length;for(let a=0;a<o-1;a++){const l=e[a];t.j[l]?i=t.j[l]:(i=new $n(r),i.jr=s.slice(),t.j[l]=i),t=i}return i=new $n(n),i.jr=s.slice(),t.j[e[o-1]]=i,i}function sN(t){const e=[],n=[];let r=0,s="0123456789";for(;r<t.length;){let i=0;for(;s.indexOf(t[r+i])>=0;)i++;if(i>0){e.push(n.join(""));for(let o=parseInt(t.substring(r,r+i),10);o>0;o--)n.pop();r+=i}else n.push(t[r]),r++}return e}const Md={defaultProtocol:"http",events:null,format:iN,formatHref:iN,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function WS(t,e=null){let n=Object.assign({},Md);t&&(n=Object.assign(n,t instanceof WS?t.o:t));const r=n.ignoreTags,s=[];for(let i=0;i<r.length;i++)s.push(r[i].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=s}WS.prototype={o:Md,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let s=this.o[t];return s&&(typeof s=="object"?(s=n.t in s?s[n.t]:Md[t],typeof s=="function"&&r&&(s=s(e,n))):typeof s=="function"&&r&&(s=s(e,n.t,n)),s)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function iN(t){return t}function E2(t,e){this.t="token",this.v=t,this.tk=e}E2.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=Md.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),s=t.get("tagName",n,e),i=this.toFormattedString(t),o={},a=t.get("className",n,e),l=t.get("target",n,e),c=t.get("rel",n,e),u=t.getObj("attributes",n,e),d=t.getObj("events",n,e);return o.href=r,a&&(o.class=a),l&&(o.target=l),c&&(o.rel=c),u&&Object.assign(o,u),{tagName:s,attributes:o,content:i,eventListeners:d}}};function jg(t,e){class n extends E2{constructor(s,i){super(s,i),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const oN=jg("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),aN=jg("text"),Nee=jg("nl"),sh=jg("url",{isLink:!0,toHref(t=Md.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Pd&&t[1].t===Ri}}),cr=t=>new $n(t);function Tee({groups:t}){const e=t.domain.concat([rm,im,_i,om,am,lm,cm,um,ur,BS,Uu,dm,fm,hm,ns,mm,Vu,pm]),n=[sm,Ri,zS,ts,VS,Uu,zu,HS,qS,Kp,Gp,Fu,Bu,Hp,Vp,qp,Wp,Qp,Jp,Yp,Zp,Xp,em,tm,nm],r=[rm,sm,im,om,am,lm,cm,um,ur,Fu,Bu,Uu,dm,fm,hm,zu,ns,mm,Vu,pm],s=cr(),i=$(s,Vu);_e(i,r,i),_e(i,t.domain,i);const o=cr(),a=cr(),l=cr();_e(s,t.domain,o),_e(s,t.scheme,a),_e(s,t.slashscheme,l),_e(o,r,i),_e(o,t.domain,o);const c=$(o,_i);$(i,_i,c),$(a,_i,c),$(l,_i,c);const u=$(i,ts);_e(u,r,i),_e(u,t.domain,i);const d=cr();_e(c,t.domain,d),_e(d,t.domain,d);const f=$(d,ts);_e(f,t.domain,d);const p=cr(oN);_e(f,t.tld,p),_e(f,t.utld,p),$(c,Pd,p);const m=$(d,ur);$(m,ur,m),_e(m,t.domain,d),_e(p,t.domain,d),$(p,ts,f),$(p,ur,m);const g=$(p,Ri);_e(g,t.numeric,oN);const y=$(o,ur),v=$(o,ts);$(y,ur,y),_e(y,t.domain,o),_e(v,r,i),_e(v,t.domain,o);const x=cr(sh);_e(v,t.tld,x),_e(v,t.utld,x),_e(x,t.domain,o),_e(x,r,i),$(x,ts,v),$(x,ur,y),$(x,_i,c);const b=$(x,Ri),S=cr(sh);_e(b,t.numeric,S);const k=cr(sh),E=cr();_e(k,e,k),_e(k,n,E),_e(E,e,k),_e(E,n,E),$(x,ns,k),$(S,ns,k);const _=$(a,Ri),T=$(l,Ri),A=$(T,ns),O=$(A,ns);_e(a,t.domain,o),$(a,ts,v),$(a,ur,y),_e(l,t.domain,o),$(l,ts,v),$(l,ur,y),_e(_,t.domain,k),$(_,ns,k),$(_,zu,k),_e(O,t.domain,k),_e(O,e,k),$(O,ns,k);const U=[[Fu,Bu],[Vp,Hp],[qp,Wp],[Kp,Gp],[Qp,Jp],[Yp,Zp],[Xp,em],[tm,nm]];for(let P=0;P<U.length;P++){const[L,z]=U[P],K=$(k,L);$(E,L,K),$(K,z,k);const W=cr(sh);_e(K,e,W);const re=cr();_e(K,n),_e(W,e,W),_e(W,n,re),_e(re,e,W),_e(re,n,re),$(W,z,k),$(re,z,k)}return $(s,Pd,x),$(s,US,Nee),{start:s,tokens:k2}}function Oee(t,e,n){let r=n.length,s=0,i=[],o=[];for(;s<r;){let a=t,l=null,c=null,u=0,d=null,f=-1;for(;s<r&&!(l=a.go(n[s].t));)o.push(n[s++]);for(;s<r&&(c=l||a.go(n[s].t));)l=null,a=c,a.accepts()?(f=0,d=a):f>=0&&f++,s++,u++;if(f<0)s-=u,s<r&&(o.push(n[s]),s++);else{o.length>0&&(i.push(iv(aN,e,o)),o=[]),s-=f,u-=f;const p=d.t,m=n.slice(s-u,s);i.push(iv(p,e,m))}}return o.length>0&&i.push(iv(aN,e,o)),i}function iv(t,e,n){const r=n[0].s,s=n[n.length-1].e,i=e.slice(r,s);return new t(i,n)}const Aee=typeof console<"u"&&console&&console.warn||(()=>{}),Ree="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Xe={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function jee(){return $n.groups={},Xe.scanner=null,Xe.parser=null,Xe.tokenQueue=[],Xe.pluginQueue=[],Xe.customSchemes=[],Xe.initialized=!1,Xe}function lN(t,e=!1){if(Xe.initialized&&Aee(`linkifyjs: already initialized - will not register custom scheme "${t}" ${Ree}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Xe.customSchemes.push([t,e])}function Iee(){Xe.scanner=Eee(Xe.customSchemes);for(let t=0;t<Xe.tokenQueue.length;t++)Xe.tokenQueue[t][1]({scanner:Xe.scanner});Xe.parser=Tee(Xe.scanner.tokens);for(let t=0;t<Xe.pluginQueue.length;t++)Xe.pluginQueue[t][1]({scanner:Xe.scanner,parser:Xe.parser});return Xe.initialized=!0,Xe}function KS(t){return Xe.initialized||Iee(),Oee(Xe.parser.start,t,_2(Xe.scanner.start,t))}KS.scan=_2;function C2(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new WS(n),s=KS(t),i=[];for(let o=0;o<s.length;o++){const a=s[o];a.isLink&&(!e||a.t===e)&&r.check(a)&&i.push(a.toFormattedObject(r))}return i}var GS="[\0- -\u2029]",Pee=new RegExp(GS),Mee=new RegExp(`${GS}$`),Dee=new RegExp(GS,"g");function Lee(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function $ee(t){return new nt({key:new at("autolink"),appendTransaction:(e,n,r)=>{const s=e.some(c=>c.docChanged)&&!n.doc.eq(r.doc),i=e.some(c=>c.getMeta("preventAutolink"));if(!s||i)return;const{tr:o}=r,a=CM(n.doc,[...e]);if(IM(a).forEach(({newRange:c})=>{const u=bY(r.doc,c,p=>p.isTextblock);let d,f;if(u.length>1)d=u[0],f=r.doc.textBetween(d.pos,d.pos+d.node.nodeSize,void 0," ");else if(u.length){const p=r.doc.textBetween(c.from,c.to," "," ");if(!Mee.test(p))return;d=u[0],f=r.doc.textBetween(d.pos,c.to,void 0," ")}if(d&&f){const p=f.split(Pee).filter(Boolean);if(p.length<=0)return!1;const m=p[p.length-1],g=d.pos+f.lastIndexOf(m);if(!m)return!1;const y=KS(m).map(v=>v.toObject(t.defaultProtocol));if(!Lee(y))return!1;y.filter(v=>v.isLink).map(v=>({...v,from:g+v.start+1,to:g+v.end+1})).filter(v=>r.schema.marks.code?!r.doc.rangeHasMark(v.from,v.to,r.schema.marks.code):!0).filter(v=>t.validate(v.value)).filter(v=>t.shouldAutoLink(v.value)).forEach(v=>{RS(v.from,v.to,r.doc).some(x=>x.mark.type===t.type)||o.addMark(v.from,v.to,t.type.create({href:v.href}))})}}),!!o.steps.length)return o}})}function Fee(t){return new nt({key:new at("handleClickLink"),props:{handleClick:(e,n,r)=>{var s,i;if(r.button!==0||!e.editable)return!1;let o=null;if(r.target instanceof HTMLAnchorElement)o=r.target;else{const l=r.target;if(!l)return!1;const c=t.editor.view.dom;o=l.closest("a"),o&&!c.contains(o)&&(o=null)}if(!o)return!1;let a=!1;if(t.enableClickSelection&&(a=t.editor.commands.extendMarkRange(t.type.name)),t.openOnClick){const l=jM(e.state,t.type.name),c=(s=o.href)!=null?s:l.href,u=(i=o.target)!=null?i:l.target;c&&(window.open(c,u),a=!0)}return a}}})}function Bee(t){return new nt({key:new at("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{shouldAutoLink:s}=t,{state:i}=e,{selection:o}=i,{empty:a}=o;if(a)return!1;let l="";r.content.forEach(u=>{l+=u.textContent});const c=C2(l,{defaultProtocol:t.defaultProtocol}).find(u=>u.isLink&&u.value===l);return!l||!c||s!==void 0&&!s(c.value)?!1:t.editor.commands.setMark(t.type,{href:c.href})}}})}function Po(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const s=typeof r=="string"?r:r.scheme;s&&n.push(s)}),!t||t.replace(Dee,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var Uee=Ba.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){lN(t);return}lN(t.scheme,t.optionalSlashes)})},onDestroy(){jee()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!Po(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>{const e=/^[a-z][a-z0-9+.-]*:\/\//i.test(t),n=/^[a-z][a-z0-9+.-]*:/i.test(t);if(e||n&&!t.includes("@"))return!0;const s=(t.includes("@")?t.split("@").pop():t).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(s)||!/\./.test(s))}}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!Po(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!Po(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",At(this.options.HTMLAttributes,t),0]:["a",At(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var n;const r=((n=t.attrs)==null?void 0:n.href)||"";return`[${e.renderChildren(t)}](${r})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!Po(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!Po(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Ia({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,s=C2(t).filter(i=>i.isLink&&this.options.isAllowedUri(i.value,{defaultValidate:o=>!!Po(o,n),protocols:n,defaultProtocol:r}));s.length&&s.forEach(i=>{this.options.shouldAutoLink(i.value)&&e.push({text:i.value,data:{href:i.href},index:i.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push($ee({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:s=>!!Po(s,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),t.push(Fee({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(Bee({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),zee=Object.defineProperty,Vee=(t,e)=>{for(var n in e)zee(t,n,{get:e[n],enumerable:!0})},Hee="listItem",cN="textStyle",uN=/^\s*([-+*])\s$/,N2=ar.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",At(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Hee,this.editor.getAttributes(cN)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=kc({find:uN,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=kc({find:uN,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(cN),editor:this.editor})),[t]}}),T2=ar.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",At(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let n=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(s=>s.type==="paragraph"))n=e.parseChildren(t.tokens);else{const s=t.tokens[0];if(s&&s.type==="text"&&s.tokens&&s.tokens.length>0){if(n=[{type:"paragraph",content:e.parseInline(s.tokens)}],t.tokens.length>1){const o=t.tokens.slice(1),a=e.parseChildren(o);n.push(...a)}}else n=e.parseChildren(t.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(t,e,n)=>MS(t,e,r=>{var s,i;return r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${(((i=(s=r.meta)==null?void 0:s.parentAttrs)==null?void 0:i.start)||1)+r.index}. `:"- "},n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),qee={};Vee(qee,{findListItemPos:()=>rf,getNextListDepth:()=>QS,handleBackspace:()=>qx,handleDelete:()=>Wx,hasListBefore:()=>O2,hasListItemAfter:()=>Wee,hasListItemBefore:()=>A2,listItemHasSubList:()=>R2,nextListIsDeeper:()=>j2,nextListIsHigher:()=>I2});var rf=(t,e)=>{const{$from:n}=e.selection,r=Ot(t,e.schema);let s=null,i=n.depth,o=n.pos,a=null;for(;i>0&&a===null;)s=n.node(i),s.type===r?a=i:(i-=1,o-=1);return a===null?null:{$pos:e.doc.resolve(o),depth:a}},QS=(t,e)=>{const n=rf(t,e);if(!n)return!1;const[,r]=OY(e,t,n.$pos.pos+4);return r},O2=(t,e,n)=>{const{$anchor:r}=t.selection,s=Math.max(0,r.pos-2),i=t.doc.resolve(s).node();return!(!i||!n.includes(i.type.name))},A2=(t,e)=>{var n;const{$anchor:r}=e.selection,s=e.doc.resolve(r.pos-2);return!(s.index()===0||((n=s.nodeBefore)==null?void 0:n.type.name)!==t)},R2=(t,e,n)=>{if(!n)return!1;const r=Ot(t,e.schema);let s=!1;return n.descendants(i=>{i.type===r&&(s=!0)}),s},qx=(t,e,n)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!xo(t.state,e)&&O2(t.state,e,n)){const{$anchor:a}=t.state.selection,l=t.state.doc.resolve(a.before()-1),c=[];l.node().descendants((f,p)=>{f.type.name===e&&c.push({node:f,pos:p})});const u=c.at(-1);if(!u)return!1;const d=t.state.doc.resolve(l.start()+u.pos+1);return t.chain().cut({from:a.start()-1,to:a.end()+1},d.end()).joinForward().run()}if(!xo(t.state,e)||!IY(t.state))return!1;const r=rf(e,t.state);if(!r)return!1;const i=t.state.doc.resolve(r.$pos.pos-2).node(r.depth),o=R2(e,t.state,i);return A2(e,t.state)&&!o?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},j2=(t,e)=>{const n=QS(t,e),r=rf(t,e);return!r||!n?!1:n>r.depth},I2=(t,e)=>{const n=QS(t,e),r=rf(t,e);return!r||!n?!1:n<r.depth},Wx=(t,e)=>{if(!xo(t.state,e)||!jY(t.state,e))return!1;const{selection:n}=t.state,{$from:r,$to:s}=n;return!n.empty&&r.sameParent(s)?!1:j2(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():I2(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},Wee=(t,e)=>{var n;const{$anchor:r}=e.selection,s=e.doc.resolve(r.pos-r.parentOffset-2);return!(s.index()===s.parent.childCount-1||((n=s.nodeAfter)==null?void 0:n.type.name)!==t)},P2=ft.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&Wx(t,n)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&Wx(t,n)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&qx(t,n,r)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&qx(t,n,r)&&(e=!0)}),e}}}}),dN=/^(\s*)(\d+)\.\s+(.*)$/,Kee=/^\s/;function Gee(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n],i=s.match(dN);if(!i)break;const[,o,a,l]=i,c=o.length;let u=l,d=n+1;const f=[s];for(;d<t.length;){const p=t[d];if(p.match(dN))break;if(p.trim()==="")f.push(p),u+=`
`,d+=1;else if(p.match(Kee))f.push(p),u+=`
${p.slice(c+2)}`,d+=1;else break}e.push({indent:c,number:parseInt(a,10),content:u.trim(),raw:f.join(`
`)}),r=d,n=d}return[e,r]}function M2(t,e,n){var r;const s=[];let i=0;for(;i<t.length;){const o=t[i];if(o.indent===e){const a=o.content.split(`
`),l=((r=a[0])==null?void 0:r.trim())||"",c=[];l&&c.push({type:"paragraph",raw:l,tokens:n.inlineTokens(l)});const u=a.slice(1).join(`
`).trim();if(u){const p=n.blockTokens(u);c.push(...p)}let d=i+1;const f=[];for(;d<t.length&&t[d].indent>e;)f.push(t[d]),d+=1;if(f.length>0){const p=Math.min(...f.map(g=>g.indent)),m=M2(f,p,n);c.push({type:"list",ordered:!0,start:f[0].number,items:m,raw:f.map(g=>g.raw).join(`
`)})}s.push({type:"list_item",raw:o.raw,tokens:c}),i=d}else i+=1}return s}function Qee(t,e){return t.map(n=>{if(n.type!=="list_item")return e.parseChildren([n])[0];const r=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(s=>{if(s.type==="paragraph"||s.type==="list"||s.type==="blockquote"||s.type==="code")r.push(...e.parseChildren([s]));else if(s.type==="text"&&s.tokens){const i=e.parseChildren([s]);r.push({type:"paragraph",content:i})}else{const i=e.parseChildren([s]);i.length>0&&r.push(...i)}}),{type:"listItem",content:r}})}var Jee="listItem",fN="textStyle",hN=/^(\d+)\.\s$/,D2=ar.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",At(this.options.HTMLAttributes,n),0]:["ol",At(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const n=t.start||1,r=t.items?Qee(t.items,e):[];return n!==1?{type:"orderedList",attrs:{start:n},content:r}:{type:"orderedList",content:r}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),n=e==null?void 0:e.index;return n!==void 0?n:-1},tokenize:(t,e,n)=>{var r;const s=t.split(`
`),[i,o]=Gee(s);if(i.length===0)return;const a=M2(i,0,n);return a.length===0?void 0:{type:"list",ordered:!0,start:((r=i[0])==null?void 0:r.number)||1,items:a,raw:s.slice(0,o).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Jee,this.editor.getAttributes(fN)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=kc({find:hN,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=kc({find:hN,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(fN)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),Yee=/^\s*(\[([( |x])?\])\s$/,Zee=ar.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",At(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const n=[];if(t.tokens&&t.tokens.length>0?n.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?n.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):n.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const r=e.parseChildren(t.nestedTokens);n.push(...r)}return e.createNode("taskItem",{checked:t.checked||!1},n)},renderMarkdown:(t,e)=>{var n;const s=`- [${(n=t.attrs)!=null&&n.checked?"x":" "}] `;return MS(t,e,s)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const s=document.createElement("li"),i=document.createElement("label"),o=document.createElement("span"),a=document.createElement("input"),l=document.createElement("div"),c=d=>{var f,p;a.ariaLabel=((p=(f=this.options.a11y)==null?void 0:f.checkboxLabel)==null?void 0:p.call(f,d,a.checked))||`Task item checkbox for ${d.textContent||"empty task item"}`};c(t),i.contentEditable="false",a.type="checkbox",a.addEventListener("mousedown",d=>d.preventDefault()),a.addEventListener("change",d=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){a.checked=!a.checked;return}const{checked:f}=d.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:p})=>{const m=n();if(typeof m!="number")return!1;const g=p.doc.nodeAt(m);return p.setNodeMarkup(m,void 0,{...g==null?void 0:g.attrs,checked:f}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,f)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([d,f])=>{s.setAttribute(d,f)}),s.dataset.checked=t.attrs.checked,a.checked=t.attrs.checked,i.append(a,o),s.append(i,l),Object.entries(e).forEach(([d,f])=>{s.setAttribute(d,f)});let u=new Set(Object.keys(e));return{dom:s,contentDOM:l,update:d=>{if(d.type!==this.type)return!1;s.dataset.checked=d.attrs.checked,a.checked=d.attrs.checked,c(d);const f=r.extensionManager.attributes,p=Id(d,f),m=new Set(Object.keys(p)),g=this.options.HTMLAttributes;return u.forEach(y=>{m.has(y)||(y in g?s.setAttribute(y,g[y]):s.removeAttribute(y))}),Object.entries(p).forEach(([y,v])=>{v==null?y in g?s.setAttribute(y,g[y]):s.removeAttribute(y):s.setAttribute(y,v)}),u=m,!0}}}},addInputRules(){return[kc({find:Yee,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),Xee=ar.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",At(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const n=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return n!==void 0?n:-1},tokenize(t,e,n){const r=i=>{const o=Ix(i,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,l)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:n.inlineTokens(a.mainContent),nestedTokens:l}),customNestedParser:r},n);return o?[{type:"taskList",raw:o.raw,items:o.items}]:n.blockTokens(i)},s=Ix(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:i=>({indentLevel:i[1].length,mainContent:i[4],checked:i[3].toLowerCase()==="x"}),createToken:(i,o)=>({type:"taskItem",raw:"",mainContent:i.mainContent,indentLevel:i.indentLevel,checked:i.checked,text:i.mainContent,tokens:n.inlineTokens(i.mainContent),nestedTokens:o}),customNestedParser:r},n);if(s)return{type:"taskList",raw:s.raw,items:s.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});ft.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(N2.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(T2.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(P2.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(D2.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(Zee.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(Xee.configure(this.options.taskList)),t}});var pN="&nbsp;",ete="",tte=ar.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",At(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const n=t.tokens||[];if(n.length===1&&n[0].type==="image")return e.parseChildren([n[0]]);const r=e.parseInline(n);return r.length===1&&r[0].type==="text"&&(r[0].text===pN||r[0].text===ete)?e.createNode("paragraph",void 0,[]):e.createNode("paragraph",void 0,r)},renderMarkdown:(t,e)=>{if(!t)return"";const n=Array.isArray(t.content)?t.content:[];return n.length===0?pN:e.renderChildren(n)},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),nte=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,rte=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,ste=Ba.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",At(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Sc({find:nte,type:this.type})]},addPasteRules(){return[Ia({find:rte,type:this.type})]}}),ite=ar.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),L2=Ba.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",At(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,n){const s=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!s)return;const i=s[2].trim();return{type:"underline",raw:s[0],text:i,tokens:n.inlineTokens(i)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),ote=L2;function ate(t={}){return new nt({view(e){return new lte(e,t)}})}class lte{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let i=o=>{this[s](o)};return e.dom.addEventListener(s,i),{name:s,handler:i}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,s=this.editorView.dom,i=s.getBoundingClientRect(),o=i.width/s.offsetWidth,a=i.height/s.offsetHeight;if(n){let d=e.nodeBefore,f=e.nodeAfter;if(d||f){let p=this.editorView.nodeDOM(this.cursorPos-(d?d.nodeSize:0));if(p){let m=p.getBoundingClientRect(),g=d?m.bottom:m.top;d&&f&&(g=(g+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let y=this.width/2*a;r={left:m.left,right:m.right,top:g-y,bottom:g+y}}}}if(!r){let d=this.editorView.coordsAtPos(this.cursorPos),f=this.width/2*o;r={left:d.left-f,right:d.left+f,top:d.top,bottom:d.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let c,u;if(!l||l==document.body&&getComputedStyle(l).position=="static")c=-pageXOffset,u=-pageYOffset;else{let d=l.getBoundingClientRect(),f=d.width/l.offsetWidth,p=d.height/l.offsetHeight;c=d.left-l.scrollLeft*f,u=d.top-l.scrollTop*p}this.element.style.left=(r.left-c)/o+"px",this.element.style.top=(r.top-u)/a+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),s=r&&r.type.spec.disableDropCursor,i=typeof s=="function"?s(this.editorView,n,e):s;if(n&&!i){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=vP(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class yt extends ve{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return yt.valid(r)?new yt(r):ve.near(r)}content(){return Q.empty}eq(e){return e instanceof yt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new yt(e.resolve(n.pos))}getBookmark(){return new JS(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!cte(e)||!ute(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let s=n.contentMatchAt(e.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&yt.valid(e))return e;let s=e.pos,i=null;for(let o=e.depth;;o--){let a=e.node(o);if(n>0?e.indexAfter(o)<a.childCount:e.index(o)>0){i=a.child(n>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;s+=n;let l=e.doc.resolve(s);if(yt.valid(l))return l}for(;;){let o=n>0?i.firstChild:i.lastChild;if(!o){if(i.isAtom&&!i.isText&&!de.isSelectable(i)){e=e.doc.resolve(s+i.nodeSize*n),r=!1;continue e}break}i=o,s+=n;let a=e.doc.resolve(s);if(yt.valid(a))return a}return null}}}yt.prototype.visible=!1;yt.findFrom=yt.findGapCursorFrom;ve.jsonID("gapcursor",yt);class JS{constructor(e){this.pos=e}map(e){return new JS(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return yt.valid(n)?new yt(n):ve.near(n)}}function $2(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function cte(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||$2(s.type))return!0;if(s.inlineContent)return!1}}return!0}function ute(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||$2(s.type))return!0;if(s.inlineContent)return!1}}return!0}function dte(){return new nt({props:{decorations:mte,createSelectionBetween(t,e,n){return e.pos==n.pos&&yt.valid(n)?new yt(n):null},handleClick:hte,handleKeyDown:fte,handleDOMEvents:{beforeinput:pte}}})}const fte=kS({ArrowLeft:ih("horiz",-1),ArrowRight:ih("horiz",1),ArrowUp:ih("vert",-1),ArrowDown:ih("vert",1)});function ih(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,s,i){let o=r.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof xe){if(!i.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=yt.findGapCursorFrom(a,e,l);return c?(s&&s(r.tr.setSelection(new yt(c))),!0):!1}}function hte(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!yt.valid(r))return!1;let s=t.posAtCoords({left:n.clientX,top:n.clientY});return s&&s.inside>-1&&de.isSelectable(t.state.doc.nodeAt(s.inside))?!1:(t.dispatch(t.state.tr.setSelection(new yt(r))),!0)}function pte(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof yt))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let s=M.empty;for(let o=r.length-1;o>=0;o--)s=M.from(r[o].createAndFill(null,s));let i=t.state.tr.replace(n.pos,n.pos,new Q(s,0,0));return i.setSelection(xe.near(i.doc.resolve(n.pos+1))),t.dispatch(i),!1}function mte(t){if(!(t.selection instanceof yt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",ct.create(t.doc,[_n.widget(t.selection.head,e,{key:"gapcursor"})])}var gm=200,qt=function(){};qt.prototype.append=function(e){return e.length?(e=qt.from(e),!this.length&&e||e.length<gm&&this.leafAppend(e)||this.length<gm&&e.leafPrepend(this)||this.appendInner(e)):this};qt.prototype.prepend=function(e){return e.length?qt.from(e).append(this):this};qt.prototype.appendInner=function(e){return new gte(this,e)};qt.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?qt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};qt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};qt.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};qt.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var s=[];return this.forEach(function(i,o){return s.push(e(i,o))},n,r),s};qt.from=function(e){return e instanceof qt?e:e&&e.length?new F2(e):qt.empty};var F2=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(s,i){return s==0&&i==this.length?this:new e(this.values.slice(s,i))},e.prototype.getInner=function(s){return this.values[s]},e.prototype.forEachInner=function(s,i,o,a){for(var l=i;l<o;l++)if(s(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(s,i,o,a){for(var l=i-1;l>=o;l--)if(s(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(s){if(this.length+s.length<=gm)return new e(this.values.concat(s.flatten()))},e.prototype.leafPrepend=function(s){if(this.length+s.length<=gm)return new e(s.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(qt);qt.empty=new F2([]);var gte=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,s,i,o){var a=this.left.length;if(s<a&&this.left.forEachInner(r,s,Math.min(i,a),o)===!1||i>a&&this.right.forEachInner(r,Math.max(s-a,0),Math.min(this.length,i)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,s,i,o){var a=this.left.length;if(s>a&&this.right.forEachInvertedInner(r,s-a,Math.max(i,a)-a,o+a)===!1||i<a&&this.left.forEachInvertedInner(r,Math.min(s,a),i,o)===!1)return!1},e.prototype.sliceInner=function(r,s){if(r==0&&s==this.length)return this;var i=this.left.length;return s<=i?this.left.slice(r,s):r>=i?this.right.slice(r-i,s-i):this.left.slice(r,i).append(this.right.slice(0,s-i))},e.prototype.leafAppend=function(r){var s=this.right.leafAppend(r);if(s)return new e(this.left,s)},e.prototype.leafPrepend=function(r){var s=this.left.leafPrepend(r);if(s)return new e(s,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(qt);const yte=500;class Br{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let s,i;n&&(s=this.remapping(r,this.items.length),i=s.maps.length);let o=e.tr,a,l,c=[],u=[];return this.items.forEach((d,f)=>{if(!d.step){s||(s=this.remapping(r,f+1),i=s.maps.length),i--,u.push(d);return}if(s){u.push(new pi(d.map));let p=d.step.map(s.slice(i)),m;p&&o.maybeStep(p).doc&&(m=o.mapping.maps[o.mapping.maps.length-1],c.push(new pi(m,void 0,void 0,c.length+u.length))),i--,m&&s.appendMap(m,i)}else o.maybeStep(d.step);if(d.selection)return a=s?d.selection.map(s.slice(i)):d.selection,l=new Br(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,n,r,s){let i=[],o=this.eventCount,a=this.items,l=!s&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),f=new pi(e.mapping.maps[u],d,n),p;(p=l&&l.merge(f))&&(f=p,u?i.pop():a=a.slice(0,a.length-1)),i.push(f),n&&(o++,n=void 0),s||(l=f)}let c=o-r.depth;return c>xte&&(a=vte(a,c),o-=c),new Br(a.append(i),o)}remapping(e,n){let r=new Nd;return this.items.forEach((s,i)=>{let o=s.mirrorOffset!=null&&i-s.mirrorOffset>=e?r.maps.length-s.mirrorOffset:void 0;r.appendMap(s.map,o)},e,n),r}addMaps(e){return this.eventCount==0?this:new Br(this.items.append(e.map(n=>new pi(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],s=Math.max(0,this.items.length-n),i=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(f=>{f.selection&&a--},s);let l=n;this.items.forEach(f=>{let p=i.getMirror(--l);if(p==null)return;o=Math.min(o,p);let m=i.maps[p];if(f.step){let g=e.steps[p].invert(e.docs[p]),y=f.selection&&f.selection.map(i.slice(l+1,p));y&&a++,r.push(new pi(m,g,y))}else r.push(new pi(m))},s);let c=[];for(let f=n;f<o;f++)c.push(new pi(i.maps[f]));let u=this.items.slice(0,s).append(c).append(r),d=new Br(u,a);return d.emptyItemCount()>yte&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,s=[],i=0;return this.items.forEach((o,a)=>{if(a>=e)s.push(o),o.selection&&i++;else if(o.step){let l=o.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=o.selection&&o.selection.map(n.slice(r));u&&i++;let d=new pi(c.invert(),l,u),f,p=s.length-1;(f=s.length&&s[p].merge(d))?s[p]=f:s.push(d)}}else o.map&&r--},this.items.length,0),new Br(qt.from(s.reverse()),i)}}Br.empty=new Br(qt.empty,0);function vte(t,e){let n;return t.forEach((r,s)=>{if(r.selection&&e--==0)return n=s,!1}),t.slice(n)}let pi=class B2{constructor(e,n,r,s){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=s}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new B2(n.getMap().invert(),n,this.selection)}}};class Ei{constructor(e,n,r,s,i){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=s,this.prevComposition=i}}const xte=20;function bte(t,e,n,r){let s=n.getMeta(da),i;if(s)return s.historyState;n.getMeta(kte)&&(t=new Ei(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(da))return o.getMeta(da).redo?new Ei(t.done.addTransform(n,void 0,r,Th(e)),t.undone,mN(n.mapping.maps),t.prevTime,t.prevComposition):new Ei(t.done,t.undone.addTransform(n,void 0,r,Th(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!o&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!wte(n,t.prevRanges)),c=o?ov(t.prevRanges,n.mapping):mN(n.mapping.maps);return new Ei(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,Th(e)),Br.empty,c,n.time,a??t.prevComposition)}else return(i=n.getMeta("rebased"))?new Ei(t.done.rebased(n,i),t.undone.rebased(n,i),ov(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Ei(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),ov(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function wte(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,s)=>{for(let i=0;i<e.length;i+=2)r<=e[i+1]&&s>=e[i]&&(n=!0)}),n}function mN(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,s,i,o)=>e.push(i,o));return e}function ov(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let s=e.map(t[r],1),i=e.map(t[r+1],-1);s<=i&&n.push(s,i)}return n}function Ste(t,e,n){let r=Th(e),s=da.get(e).spec.config,i=(n?t.undone:t.done).popEvent(e,r);if(!i)return null;let o=i.selection.resolve(i.transform.doc),a=(n?t.done:t.undone).addTransform(i.transform,e.selection.getBookmark(),s,r),l=new Ei(n?a:i.remaining,n?i.remaining:a,null,0,-1);return i.transform.setSelection(o).setMeta(da,{redo:n,historyState:l})}let av=!1,gN=null;function Th(t){let e=t.plugins;if(gN!=e){av=!1,gN=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){av=!0;break}}return av}const da=new at("history"),kte=new at("closeHistory");function _te(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new nt({key:da,state:{init(){return new Ei(Br.empty,Br.empty,null,0,-1)},apply(e,n,r){return bte(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,s=r=="historyUndo"?z2:r=="historyRedo"?V2:null;return!s||!e.editable?!1:(n.preventDefault(),s(e.state,e.dispatch))}}}})}function U2(t,e){return(n,r)=>{let s=da.getState(n);if(!s||(t?s.undone:s.done).eventCount==0)return!1;if(r){let i=Ste(s,n,t);i&&r(e?i.scrollIntoView():i)}return!0}}const z2=U2(!1,!0),V2=U2(!0,!0);ft.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc;if(((t==null?void 0:t.mode)||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let t=!1;return[new nt({key:new at("characterCount"),appendTransaction:(e,n,r)=>{if(t)return;const s=this.options.limit;if(s==null||s===0){t=!0;return}const i=this.storage.characters({node:r.doc});if(i>s){const o=i-s,a=0,l=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${s} characters. Content was automatically trimmed.`);const c=r.tr.deleteRange(a,l);return t=!0,c}t=!0},filterTransaction:(e,n)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const s=this.storage.characters({node:n.doc}),i=this.storage.characters({node:e.doc});if(i<=r||s>r&&i>r&&i<=s)return!0;if(s>r&&i>r&&i>s||!e.getMeta("paste"))return!1;const a=e.selection.$head.pos,l=i-r,c=a-l,u=a;return e.deleteRange(c,u),!(this.storage.characters({node:e.doc})>r)}})]}});var Ete=ft.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[ate(this.options)]}});ft.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new nt({key:new at("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:s}=e,i=[];if(!n||!r)return ct.create(t,[]);let o=0;this.options.mode==="deepest"&&t.descendants((l,c)=>{if(l.isText)return;if(!(s>=c&&s<=c+l.nodeSize-1))return!1;o+=1});let a=0;return t.descendants((l,c)=>{if(l.isText||!(s>=c&&s<=c+l.nodeSize-1))return!1;if(a+=1,this.options.mode==="deepest"&&o-a>0||this.options.mode==="shallowest"&&a>1)return this.options.mode==="deepest";i.push(_n.node(c,c+l.nodeSize,{class:this.options.className}))}),ct.create(t,i)}}})]}});var Cte=ft.create({name:"gapCursor",addProseMirrorPlugins(){return[dte()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=Ve(ue(t,"allowGapCursor",n)))!=null?e:null}}}),yN="placeholder";function Nte(t){return t.replace(/\s+/g,"-").replace(/[^a-zA-Z0-9-]/g,"").replace(/^[0-9-]+/,"").replace(/^-+/,"").toLowerCase()}var Tte=ft.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",dataAttribute:yN,placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){const t=this.options.dataAttribute?`data-${Nte(this.options.dataAttribute)}`:`data-${yN}`;return[new nt({key:new at("placeholder"),props:{decorations:({doc:e,selection:n})=>{const r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:s}=n,i=[];if(!r)return null;const o=this.editor.isEmpty;return e.descendants((a,l)=>{const c=s>=l&&s<=l+a.nodeSize,u=!a.isLeaf&&Ng(a);if((c||!this.options.showOnlyCurrent)&&u){const d=[this.options.emptyNodeClass];o&&d.push(this.options.emptyEditorClass);const f=_n.node(l,l+a.nodeSize,{class:d.join(" "),[t]:typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:a,pos:l,hasAnchor:c}):this.options.placeholder});i.push(f)}return this.options.includeChildren}),ct.create(e,i)}}})]}});ft.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new nt({key:new at("selection"),props:{decorations(n){return n.selection.empty||t.isFocused||!t.isEditable||PM(n.selection)||t.view.dragging?null:ct.create(n.doc,[_n.inline(n.selection.from,n.selection.to,{class:e.className})])}}})]}});function vN({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||(e==null?void 0:e.type)===t}var Ote=ft.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new at(this.name),n=this.options.node||((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,s])=>s).filter(s=>(this.options.notAfter||[]).concat(n).includes(s.name));return[new nt({key:e,appendTransaction:(s,i,o)=>{const{doc:a,tr:l,schema:c}=o,u=e.getState(o),d=a.content.size,f=c.nodes[n];if(u)return l.insert(d,f.create())},state:{init:(s,i)=>{const o=i.tr.doc.lastChild;return!vN({node:o,types:r})},apply:(s,i)=>{if(!s.docChanged||s.getMeta("__uniqueIDTransaction"))return i;const o=s.doc.lastChild;return!vN({node:o,types:r})}}})]}}),Ate=ft.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>z2(t,e),redo:()=>({state:t,dispatch:e})=>V2(t,e)}},addProseMirrorPlugins(){return[_te(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),Rte=ft.create({name:"starterKit",addExtensions(){var t,e,n,r;const s=[];return this.options.bold!==!1&&s.push(tee.configure(this.options.bold)),this.options.blockquote!==!1&&s.push(JX.configure(this.options.blockquote)),this.options.bulletList!==!1&&s.push(N2.configure(this.options.bulletList)),this.options.code!==!1&&s.push(see.configure(this.options.code)),this.options.codeBlock!==!1&&s.push(aee.configure(this.options.codeBlock)),this.options.document!==!1&&s.push(lee.configure(this.options.document)),this.options.dropcursor!==!1&&s.push(Ete.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&s.push(Cte.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&s.push(cee.configure(this.options.hardBreak)),this.options.heading!==!1&&s.push(uee.configure(this.options.heading)),this.options.undoRedo!==!1&&s.push(Ate.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&s.push(dee.configure(this.options.horizontalRule)),this.options.italic!==!1&&s.push(gee.configure(this.options.italic)),this.options.listItem!==!1&&s.push(T2.configure(this.options.listItem)),this.options.listKeymap!==!1&&s.push(P2.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&s.push(Uee.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&s.push(D2.configure(this.options.orderedList)),this.options.paragraph!==!1&&s.push(tte.configure(this.options.paragraph)),this.options.strike!==!1&&s.push(ste.configure(this.options.strike)),this.options.text!==!1&&s.push(ite.configure(this.options.text)),this.options.underline!==!1&&s.push(L2.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&s.push(Ote.configure((r=this.options)==null?void 0:r.trailingNode)),s}}),jte=Rte,Ite=Tte;const Or=({onClick:t,isActive:e=!1,disabled:n=!1,children:r,title:s})=>h.jsx("button",{type:"button",onClick:t,disabled:n,title:s,className:tt("p-2 rounded hover:bg-gray-200 transition-colors",e&&"bg-purple-100 text-purple-700",n&&"opacity-50 cursor-not-allowed"),children:r});function xN({value:t,onChange:e,placeholder:n,className:r}){const[s,i]=w.useState(!1),[o,a]=w.useState(""),l=HX({extensions:[jte.configure({heading:{levels:[2,3]}}),Ite.configure({placeholder:n||"Start typing..."}),ote],content:t,onUpdate:({editor:p})=>{e(p.getHTML())},editorProps:{attributes:{class:"prose prose-sm max-w-none focus:outline-none min-h-[120px] px-3 py-2"}}});w.useEffect(()=>{l&&t!==l.getHTML()&&l.commands.setContent(t)},[t,l]);const c=()=>{if(o&&l){const p=`<span class="math-inline" data-math="${o}">[${o}]</span>`;l.chain().focus().insertContent(p).run(),a(""),i(!1)}},u=()=>{l&&l.chain().focus().insertContent("<sup>a</sup>/<sub>b</sub>").run()},d=()=>{if(l){const{from:p,to:m}=l.state.selection;if(p===m)l.chain().focus().insertContent("<sup>x</sup>").run();else{const g=l.state.doc.textBetween(p,m);l.chain().focus().deleteSelection().insertContent(`<sup>${g}</sup>`).run()}}},f=()=>{if(l){const{from:p,to:m}=l.state.selection;if(p===m)l.chain().focus().insertContent("<sub>x</sub>").run();else{const g=l.state.doc.textBetween(p,m);l.chain().focus().deleteSelection().insertContent(`<sub>${g}</sub>`).run()}}};return l?h.jsxs("div",{className:tt("border rounded-md bg-white",r),children:[h.jsxs("div",{className:"flex flex-wrap items-center gap-1 p-2 border-b bg-gray-50",children:[h.jsx(Or,{onClick:()=>l.chain().focus().toggleBold().run(),isActive:l.isActive("bold"),title:"Bold",children:h.jsx(zz,{className:"h-4 w-4"})}),h.jsx(Or,{onClick:()=>l.chain().focus().toggleItalic().run(),isActive:l.isActive("italic"),title:"Italic",children:h.jsx(Xz,{className:"h-4 w-4"})}),h.jsx(Or,{onClick:()=>l.chain().focus().toggleUnderline().run(),isActive:l.isActive("underline"),title:"Underline",children:h.jsx(hV,{className:"h-4 w-4"})}),h.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),h.jsx(Or,{onClick:()=>l.chain().focus().toggleHeading({level:2}).run(),isActive:l.isActive("heading",{level:2}),title:"Heading",children:h.jsx(Zz,{className:"h-4 w-4"})}),h.jsx(Or,{onClick:()=>l.chain().focus().toggleBulletList().run(),isActive:l.isActive("bulletList"),title:"Bullet List",children:h.jsx(rV,{className:"h-4 w-4"})}),h.jsx(Or,{onClick:()=>l.chain().focus().toggleOrderedList().run(),isActive:l.isActive("orderedList"),title:"Numbered List",children:h.jsx(nV,{className:"h-4 w-4"})}),h.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),h.jsx(Or,{onClick:d,title:"Superscript (x)",children:h.jsx(dV,{className:"h-4 w-4"})}),h.jsx(Or,{onClick:f,title:"Subscript (x)",children:h.jsx(uV,{className:"h-4 w-4"})}),h.jsx(Or,{onClick:u,title:"Fraction (a/b)",children:h.jsx("span",{className:"text-sm font-medium",children:""})}),h.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),h.jsx(Or,{onClick:()=>l.chain().focus().undo().run(),disabled:!l.can().undo(),title:"Undo",children:h.jsx(pV,{className:"h-4 w-4"})}),h.jsx(Or,{onClick:()=>l.chain().focus().redo().run(),disabled:!l.can().redo(),title:"Redo",children:h.jsx(oV,{className:"h-4 w-4"})}),h.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),h.jsxs("div",{className:"relative",children:[h.jsx("button",{type:"button",onClick:()=>i(!s),className:"px-2 py-1 text-sm bg-purple-100 text-purple-700 rounded hover:bg-purple-200 transition-colors",title:"Insert Math Symbol",children:"  "}),s&&h.jsxs("div",{className:"absolute top-full left-0 mt-1 p-3 bg-white border rounded-lg shadow-lg z-50 min-w-[280px]",children:[h.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Common Math Symbols (click to insert):"}),h.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:["","","","","","","","","","","","","","",""].map(p=>h.jsx("button",{type:"button",onClick:()=>{l.chain().focus().insertContent(p).run(),i(!1)},className:"w-8 h-8 flex items-center justify-center border rounded hover:bg-purple-100 text-lg",children:p},p))}),h.jsxs("div",{className:"border-t pt-2",children:[h.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Custom expression:"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("input",{type:"text",value:o,onChange:p=>a(p.target.value),placeholder:"e.g., x + y",className:"flex-1 px-2 py-1 border rounded text-sm"}),h.jsx("button",{type:"button",onClick:c,className:"px-3 py-1 bg-purple-600 text-white rounded text-sm hover:bg-purple-700",children:"Insert"})]})]})]})]})]}),h.jsx(u2,{editor:l})]}):null}var lv="rovingFocusGroup.onEntryFocus",Pte={bubbles:!1,cancelable:!0},sf="RovingFocusGroup",[Kx,H2,Mte]=vj(sf),[Dte,q2]=$a(sf,[Mte]),[Lte,$te]=Dte(sf),W2=w.forwardRef((t,e)=>h.jsx(Kx.Provider,{scope:t.__scopeRovingFocusGroup,children:h.jsx(Kx.Slot,{scope:t.__scopeRovingFocusGroup,children:h.jsx(Fte,{...t,ref:e})})}));W2.displayName=sf;var Fte=w.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=t,f=w.useRef(null),p=ot(e,f),m=Uw(i),[g,y]=kd({prop:o,defaultProp:a??null,onChange:l,caller:sf}),[v,x]=w.useState(!1),b=go(c),S=H2(n),k=w.useRef(!1),[E,_]=w.useState(0);return w.useEffect(()=>{const T=f.current;if(T)return T.addEventListener(lv,b),()=>T.removeEventListener(lv,b)},[b]),h.jsx(Lte,{scope:n,orientation:r,dir:m,loop:s,currentTabStopId:g,onItemFocus:w.useCallback(T=>y(T),[y]),onItemShiftTab:w.useCallback(()=>x(!0),[]),onFocusableItemAdd:w.useCallback(()=>_(T=>T+1),[]),onFocusableItemRemove:w.useCallback(()=>_(T=>T-1),[]),children:h.jsx($e.div,{tabIndex:v||E===0?-1:0,"data-orientation":r,...d,ref:p,style:{outline:"none",...t.style},onMouseDown:Ie(t.onMouseDown,()=>{k.current=!0}),onFocus:Ie(t.onFocus,T=>{const A=!k.current;if(T.target===T.currentTarget&&A&&!v){const O=new CustomEvent(lv,Pte);if(T.currentTarget.dispatchEvent(O),!O.defaultPrevented){const U=S().filter(W=>W.focusable),P=U.find(W=>W.active),L=U.find(W=>W.id===g),K=[P,L,...U].filter(Boolean).map(W=>W.ref.current);Q2(K,u)}}k.current=!1}),onBlur:Ie(t.onBlur,()=>x(!1))})})}),K2="RovingFocusGroupItem",G2=w.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,children:o,...a}=t,l=ag(),c=i||l,u=$te(K2,n),d=u.currentTabStopId===c,f=H2(n),{onFocusableItemAdd:p,onFocusableItemRemove:m,currentTabStopId:g}=u;return w.useEffect(()=>{if(r)return p(),()=>m()},[r,p,m]),h.jsx(Kx.ItemSlot,{scope:n,id:c,focusable:r,active:s,children:h.jsx($e.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:Ie(t.onMouseDown,y=>{r?u.onItemFocus(c):y.preventDefault()}),onFocus:Ie(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:Ie(t.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){u.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const v=zte(y,u.orientation,u.dir);if(v!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let b=f().filter(S=>S.focusable).map(S=>S.ref.current);if(v==="last")b.reverse();else if(v==="prev"||v==="next"){v==="prev"&&b.reverse();const S=b.indexOf(y.currentTarget);b=u.loop?Vte(b,S+1):b.slice(S+1)}setTimeout(()=>Q2(b))}}),children:typeof o=="function"?o({isCurrentTabStop:d,hasTabStop:g!=null}):o})})});G2.displayName=K2;var Bte={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Ute(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function zte(t,e,n){const r=Ute(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Bte[r]}function Q2(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function Vte(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Hte=W2,qte=G2,YS="Radio",[Wte,J2]=$a(YS),[Kte,Gte]=Wte(YS),Y2=w.forwardRef((t,e)=>{const{__scopeRadio:n,name:r,checked:s=!1,required:i,disabled:o,value:a="on",onCheck:l,form:c,...u}=t,[d,f]=w.useState(null),p=ot(e,y=>f(y)),m=w.useRef(!1),g=d?c||!!d.closest("form"):!0;return h.jsxs(Kte,{scope:n,checked:s,disabled:o,children:[h.jsx($e.button,{type:"button",role:"radio","aria-checked":s,"data-state":tD(s),"data-disabled":o?"":void 0,disabled:o,value:a,...u,ref:p,onClick:Ie(t.onClick,y=>{s||l==null||l(),g&&(m.current=y.isPropagationStopped(),m.current||y.stopPropagation())})}),g&&h.jsx(eD,{control:d,bubbles:!m.current,name:r,value:a,checked:s,required:i,disabled:o,form:c,style:{transform:"translateX(-100%)"}})]})});Y2.displayName=YS;var Z2="RadioIndicator",X2=w.forwardRef((t,e)=>{const{__scopeRadio:n,forceMount:r,...s}=t,i=Gte(Z2,n);return h.jsx(Lw,{present:r||i.checked,children:h.jsx($e.span,{"data-state":tD(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e})})});X2.displayName=Z2;var Qte="RadioBubbleInput",eD=w.forwardRef(({__scopeRadio:t,control:e,checked:n,bubbles:r=!0,...s},i)=>{const o=w.useRef(null),a=ot(o,i),l=Mw(n),c=Dw(e);return w.useEffect(()=>{const u=o.current;if(!u)return;const d=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(d,"checked").set;if(l!==n&&p){const m=new Event("click",{bubbles:r});p.call(u,n),u.dispatchEvent(m)}},[l,n,r]),h.jsx($e.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:a,style:{...s.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});eD.displayName=Qte;function tD(t){return t?"checked":"unchecked"}var Jte=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Ig="RadioGroup",[Yte]=$a(Ig,[q2,J2]),nD=q2(),rD=J2(),[Zte,Xte]=Yte(Ig),sD=w.forwardRef((t,e)=>{const{__scopeRadioGroup:n,name:r,defaultValue:s,value:i,required:o=!1,disabled:a=!1,orientation:l,dir:c,loop:u=!0,onValueChange:d,...f}=t,p=nD(n),m=Uw(c),[g,y]=kd({prop:i,defaultProp:s??null,onChange:d,caller:Ig});return h.jsx(Zte,{scope:n,name:r,required:o,disabled:a,value:g,onValueChange:y,children:h.jsx(Hte,{asChild:!0,...p,orientation:l,dir:m,loop:u,children:h.jsx($e.div,{role:"radiogroup","aria-required":o,"aria-orientation":l,"data-disabled":a?"":void 0,dir:m,...f,ref:e})})})});sD.displayName=Ig;var iD="RadioGroupItem",oD=w.forwardRef((t,e)=>{const{__scopeRadioGroup:n,disabled:r,...s}=t,i=Xte(iD,n),o=i.disabled||r,a=nD(n),l=rD(n),c=w.useRef(null),u=ot(e,c),d=i.value===s.value,f=w.useRef(!1);return w.useEffect(()=>{const p=g=>{Jte.includes(g.key)&&(f.current=!0)},m=()=>f.current=!1;return document.addEventListener("keydown",p),document.addEventListener("keyup",m),()=>{document.removeEventListener("keydown",p),document.removeEventListener("keyup",m)}},[]),h.jsx(qte,{asChild:!0,...a,focusable:!o,active:d,children:h.jsx(Y2,{disabled:o,required:i.required,checked:d,...l,...s,name:i.name,ref:u,onCheck:()=>i.onValueChange(s.value),onKeyDown:Ie(p=>{p.key==="Enter"&&p.preventDefault()}),onFocus:Ie(s.onFocus,()=>{var p;f.current&&((p=c.current)==null||p.click())})})})});oD.displayName=iD;var ene="RadioGroupIndicator",aD=w.forwardRef((t,e)=>{const{__scopeRadioGroup:n,...r}=t,s=rD(n);return h.jsx(X2,{...s,...r,ref:e})});aD.displayName=ene;var lD=sD,cD=oD,tne=aD;const uD=w.forwardRef(({className:t,...e},n)=>h.jsx(lD,{className:tt("grid gap-2",t),...e,ref:n}));uD.displayName=lD.displayName;const dD=w.forwardRef(({className:t,...e},n)=>h.jsx(cD,{ref:n,className:tt("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:h.jsx(tne,{className:"flex items-center justify-center",children:h.jsx(Jz,{className:"h-2.5 w-2.5 fill-current text-current"})})}));dD.displayName=cD.displayName;const fD=["multiple_choice","mcq_multi","text_input","boolean","reorder_steps"],nne=Jd({skill_id:hn().uuid(),type:m5(fD),content:hn().min(1,"Question text is required"),options:$1(),solution:$1(),explanation:hn().optional(),points:q0.number().min(1),is_published:Ow().default(!1)});function hD({initialData:t}){var v;const e=ws(),n=o7(),r=a7(),{data:s,isLoading:i}=tj(),o=x=>{if(!(x!=null&&x.options))return{options:[{id:"a",text:""},{id:"b",text:""}]};const b=x.options;return b.options&&Array.isArray(b.options)?b:{options:[{id:"a",text:""},{id:"b",text:""}]}},a=x=>x!=null&&x.solution&&x.solution.correct_option_id||"",l=pd({resolver:md(nne),defaultValues:{skill_id:(t==null?void 0:t.skill_id)||"",type:(t==null?void 0:t.type)||"multiple_choice",content:(t==null?void 0:t.content)||"",explanation:(t==null?void 0:t.explanation)||"",points:(t==null?void 0:t.points)||1,is_published:(t==null?void 0:t.is_published)||!1,options:o(t),solution:a(t)}}),c=l.watch("type"),u=async x=>{try{const b={...x};if(x.type==="multiple_choice"){const S=x.options,k=x.solution;if(!k){l.setError("solution",{message:"Please select a correct answer"});return}b.options=S,b.solution={correct_option_id:k}}t?await r.mutateAsync({id:t.id,...b}):await n.mutateAsync(b),e("/questions")}catch(b){console.error("Failed to save question:",b)}},d=n.isPending||r.isPending,f=((v=l.watch("options"))==null?void 0:v.options)||[],p=x=>{l.setValue("options",{options:x})},m=()=>{const x=String.fromCharCode(97+f.length);p([...f,{id:x,text:""}])},g=x=>{const b=[...f];b.splice(x,1),p(b)},y=(x,b)=>{const S=[...f];S[x].text=b,p(S)};return i?h.jsx(oc,{className:"animate-spin"}):h.jsx(aj,{...l,children:h.jsxs("form",{onSubmit:l.handleSubmit(u),className:"space-y-6 max-w-3xl",children:[h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsx(Kn,{control:l.control,name:"skill_id",render:({field:x})=>h.jsxs(Pn,{children:[h.jsx(Mn,{children:"Skill"}),h.jsxs(fx,{onValueChange:x.onChange,defaultValue:x.value,children:[h.jsx(Dn,{children:h.jsx(_p,{children:h.jsx(hx,{placeholder:"Select a skill"})})}),h.jsx(Ep,{children:s==null?void 0:s.map(b=>h.jsx(Cp,{value:b.id,children:b.title},b.id))})]}),h.jsx(gr,{})]})}),h.jsx(Kn,{control:l.control,name:"type",render:({field:x})=>h.jsxs(Pn,{children:[h.jsx(Mn,{children:"Question Type"}),h.jsxs(fx,{onValueChange:x.onChange,defaultValue:x.value,children:[h.jsx(Dn,{children:h.jsx(_p,{children:h.jsx(hx,{placeholder:"Select type"})})}),h.jsx(Ep,{children:fD.map(b=>h.jsx(Cp,{value:b,children:b.replace("_"," ").toUpperCase()},b))})]}),h.jsx(gr,{})]})})]}),h.jsx(Kn,{control:l.control,name:"content",render:({field:x})=>h.jsxs(Pn,{children:[h.jsx(Mn,{children:"Question Text"}),h.jsx(Dn,{children:h.jsx(xN,{value:x.value,onChange:x.onChange,placeholder:"What is 2 + 2?"})}),h.jsx(gr,{})]})}),c==="multiple_choice"&&h.jsxs("div",{className:"space-y-4 border p-4 rounded-md",children:[h.jsx("h3",{className:"font-medium text-sm",children:"Multiple Choice Options"}),h.jsx(uD,{onValueChange:x=>l.setValue("solution",x),defaultValue:l.watch("solution"),children:f.map((x,b)=>h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx(dD,{value:x.id,id:x.id}),h.jsxs("div",{className:"flex-1 flex gap-2",children:[h.jsx("span",{className:"flex h-10 w-8 items-center justify-center rounded-md border bg-muted text-sm font-medium",children:x.id.toUpperCase()}),h.jsx(dn,{value:x.text,onChange:S=>y(b,S.target.value),placeholder:`Option ${x.id.toUpperCase()}`})]}),h.jsx(Et,{type:"button",variant:"ghost",size:"icon",onClick:()=>g(b),children:h.jsx(eg,{className:"h-4 w-4 text-muted-foreground"})})]},b))}),h.jsxs(Et,{type:"button",variant:"outline",size:"sm",onClick:m,className:"mt-2",children:[h.jsx(fs,{className:"mr-2 h-4 w-4"})," Add Option"]}),l.formState.errors.solution&&h.jsx("p",{className:"text-sm font-medium text-destructive",children:l.formState.errors.solution.message})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsx(Kn,{control:l.control,name:"points",render:({field:x})=>h.jsxs(Pn,{children:[h.jsx(Mn,{children:"Points"}),h.jsx(Dn,{children:h.jsx(dn,{type:"number",min:1,...x})}),h.jsx(gr,{})]})}),h.jsx(Kn,{control:l.control,name:"is_published",render:({field:x})=>h.jsxs(Pn,{className:"flex flex-row items-center space-x-3 space-y-0 rounded-md border p-4 mt-8",children:[h.jsx(Dn,{children:h.jsx(Bw,{checked:x.value,onCheckedChange:x.onChange})}),h.jsx("div",{className:"space-y-1 leading-none",children:h.jsx(Mn,{children:"Published"})})]})})]}),h.jsx(Kn,{control:l.control,name:"explanation",render:({field:x})=>h.jsxs(Pn,{children:[h.jsx(Mn,{children:"Explanation"}),h.jsx(Dn,{children:h.jsx(xN,{value:x.value||"",onChange:x.onChange,placeholder:"Explain why the answer is correct..."})}),h.jsx(gr,{})]})}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx(Et,{type:"button",variant:"outline",onClick:()=>e("/questions"),children:"Cancel"}),h.jsxs(Et,{type:"submit",disabled:d,children:[d&&h.jsx(oc,{className:"mr-2 h-4 w-4 animate-spin"}),t?"Update Question":"Create Question"]})]})]})})}function rne(){return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Create Question"}),h.jsx("p",{className:"text-muted-foreground",children:"Add a new question to a skill."})]}),h.jsx(hD,{})]})}function sne(){const{id:t}=mw(),{data:e,isLoading:n,error:r}=i7(t);return n?h.jsx("div",{className:"flex h-[50vh] justify-center items-center",children:h.jsx(oc,{className:"h-8 w-8 animate-spin"})}):r||!e?h.jsx("div",{children:"Question not found"}):h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Edit Question"}),h.jsx("p",{className:"text-muted-foreground",children:"Update question details and answers."})]}),h.jsx(hD,{initialData:e})]})}function ine(){return Cr({queryKey:["publish-preview"],queryFn:async()=>{const t=[],[e,n,r,s,i,o,a]=await Promise.all([Y.from("curriculum_meta").select("version, last_published_at").eq("id","singleton").single(),Y.from("domains").select("*",{count:"exact",head:!0}).is("deleted_at",null).eq("is_published",!0),Y.from("domains").select("*",{count:"exact",head:!0}).is("deleted_at",null).eq("is_published",!1),Y.from("skills").select("*",{count:"exact",head:!0}).is("deleted_at",null).eq("is_published",!0),Y.from("skills").select("*",{count:"exact",head:!0}).is("deleted_at",null).eq("is_published",!1),Y.from("questions").select("*",{count:"exact",head:!0}).is("deleted_at",null).eq("is_published",!0),Y.from("questions").select("*",{count:"exact",head:!0}).is("deleted_at",null).eq("is_published",!1)]);if(e.error)throw e.error;if(n.error)throw n.error;if(r.error)throw r.error;if(s.error)throw s.error;if(i.error)throw i.error;if(o.error)throw o.error;if(a.error)throw a.error;const l={publishedDomains:n.count??0,unpublishedDomains:r.count??0,publishedSkills:s.count??0,unpublishedSkills:i.count??0,publishedQuestions:o.count??0,unpublishedQuestions:a.count??0};return l.publishedDomains===0&&t.push({type:"warning",message:"No domains are marked as published"}),l.publishedSkills===0&&t.push({type:"warning",message:"No skills are marked as published"}),l.publishedQuestions===0&&t.push({type:"warning",message:"No questions are marked as published"}),{meta:e.data,stats:l,validationIssues:t,canPublish:!0}},refetchInterval:3e4})}function one(){const t=Rt();return Kt({mutationFn:async()=>{const{data:e,error:n}=await Y.rpc("publish_curriculum");if(n)throw n;return e},onSuccess:()=>{t.invalidateQueries({queryKey:["curriculum-meta"]}),t.invalidateQueries({queryKey:["publish-preview"]})}})}function ane(){const t=one(),{data:e,isLoading:n}=ine(),[r,s]=w.useState(!1),[i,o]=w.useState(null),[a,l]=w.useState(null),c=async()=>{s(!1),l(null);const d=((e==null?void 0:e.meta.version)||0)+1;try{await t.mutateAsync(),o(d),s(!0)}catch(f){l(f.message||"Failed to publish")}},u=d=>d?new Date(d).toLocaleString():"Never";return h.jsxs("div",{className:"space-y-6 max-w-3xl",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Publish Curriculum"}),h.jsx("p",{className:"mt-1 text-gray-500",children:"Validate integrity and release the latest version to students."})]}),h.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[h.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[h.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-xl bg-purple-100",children:h.jsx(pR,{className:"w-5 h-5 text-purple-600"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-gray-900",children:"Current Version"}),h.jsx("p",{className:"text-sm text-gray-500",children:"Published to students"})]})]}),n?h.jsx("div",{className:"animate-pulse h-12 bg-gray-100 rounded"}):h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-baseline gap-2",children:[h.jsxs("span",{className:"text-4xl font-bold text-purple-600",children:["v",(e==null?void 0:e.meta.version)||1]}),h.jsx("span",{className:"text-gray-400",children:""}),h.jsxs("span",{className:"text-2xl font-semibold text-green-600",children:["v",((e==null?void 0:e.meta.version)||0)+1]})]}),h.jsxs("p",{className:"text-sm text-gray-500",children:["Last published: ",u((e==null?void 0:e.meta.last_published_at)||null)]})]})]}),h.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[h.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-xl bg-blue-100",children:h.jsx(ip,{className:"w-5 h-5 text-blue-600"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-gray-900",children:"Content Overview"}),h.jsx("p",{className:"text-sm text-gray-500",children:"What students will see"})]})]}),n?h.jsx("div",{className:"animate-pulse h-20 bg-gray-100 rounded"}):h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Vz,{className:"w-4 h-4 text-gray-400"}),h.jsx("span",{className:"text-gray-700",children:"Domains"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 rounded text-sm font-medium",children:[(e==null?void 0:e.stats.publishedDomains)||0," published"]}),h.jsxs("span",{className:"text-gray-400 text-sm",children:[(e==null?void 0:e.stats.unpublishedDomains)||0," draft"]})]})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(ip,{className:"w-4 h-4 text-gray-400"}),h.jsx("span",{className:"text-gray-700",children:"Skills"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 rounded text-sm font-medium",children:[(e==null?void 0:e.stats.publishedSkills)||0," published"]}),h.jsxs("span",{className:"text-gray-400 text-sm",children:[(e==null?void 0:e.stats.unpublishedSkills)||0," draft"]})]})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(P0,{className:"w-4 h-4 text-gray-400"}),h.jsx("span",{className:"text-gray-700",children:"Questions"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 rounded text-sm font-medium",children:[(e==null?void 0:e.stats.publishedQuestions)||0," published"]}),h.jsxs("span",{className:"text-gray-400 text-sm",children:[(e==null?void 0:e.stats.unpublishedQuestions)||0," draft"]})]})]})]})]})]}),!n&&(e==null?void 0:e.validationIssues)&&e.validationIssues.length>0&&h.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[h.jsx("div",{className:"p-4 border-b border-gray-100 bg-gray-50",children:h.jsx("h3",{className:"font-semibold text-gray-900",children:"Validation Results"})}),h.jsx("div",{className:"p-4 space-y-3",children:e.validationIssues.map((d,f)=>h.jsxs("div",{className:`flex items-start gap-3 p-3 rounded-xl ${d.type==="error"?"bg-red-50 border border-red-100":"bg-amber-50 border border-amber-100"}`,children:[d.type==="error"?h.jsx(lR,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}):h.jsx(u1,{className:"w-5 h-5 text-amber-500 flex-shrink-0 mt-0.5"}),h.jsxs("div",{children:[h.jsx("p",{className:`font-medium ${d.type==="error"?"text-red-800":"text-amber-800"}`,children:d.type==="error"?"Error":"Warning"}),h.jsx("p",{className:`text-sm ${d.type==="error"?"text-red-700":"text-amber-700"}`,children:d.message})]})]},f))})]}),h.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[h.jsx("div",{className:"p-6 border-b border-gray-100",children:h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-xl bg-gradient-to-r from-purple-500 to-blue-500",children:h.jsx(hd,{className:"w-6 h-6 text-white"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Release New Version"}),h.jsxs("p",{className:"text-sm text-gray-500",children:["Publish curriculum v",((e==null?void 0:e.meta.version)||0)+1," to all students"]})]})]})}),h.jsxs("div",{className:"p-6 space-y-4",children:[h.jsx("p",{className:"text-gray-600",children:"This will validate all domains, skills, and questions for integrity issues and publish a new curriculum version. Students will receive updates automatically when they sync."}),r&&h.jsxs("div",{className:"bg-green-50 border border-green-200 text-green-800 p-4 rounded-xl flex items-center gap-3",children:[h.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-green-100",children:h.jsx(cR,{className:"h-5 w-5 text-green-600"})}),h.jsxs("div",{children:[h.jsx("p",{className:"font-medium",children:"Success!"}),h.jsxs("p",{className:"text-sm text-green-700",children:["Curriculum v",i," published successfully."]})]})]}),a&&h.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-800 p-4 rounded-xl flex items-center gap-3",children:[h.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-red-100",children:h.jsx(u1,{className:"h-5 w-5 text-red-600"})}),h.jsxs("div",{children:[h.jsx("p",{className:"font-medium",children:"Publication Failed"}),h.jsx("p",{className:"text-sm text-red-700",children:a})]})]})]}),h.jsxs("div",{className:"p-6 bg-gray-50 border-t border-gray-100",children:[h.jsx("button",{onClick:c,disabled:t.isPending||e&&!e.canPublish,className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-medium rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:t.isPending?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"h-5 w-5 animate-spin rounded-full border-2 border-white border-r-transparent"}),"Publishing..."]}):h.jsxs(h.Fragment,{children:[h.jsx(hd,{className:"h-5 w-5"}),"Publish v",((e==null?void 0:e.meta.version)||0)+1]})}),e&&!e.canPublish&&h.jsx("p",{className:"mt-3 text-sm text-red-600",children:"Fix the errors above before publishing."})]})]})]})}function bN(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function lne(){const{data:t,isLoading:e}=Cr({queryKey:["publish-history"],queryFn:async()=>{const{data:r,error:s}=await Y.from("curriculum_snapshots").select("version, published_at, domains_count, skills_count, questions_count").order("version",{ascending:!1}).limit(50);return s?(console.warn("No publish history table found or error:",s),[]):r||[]}}),{data:n}=Cr({queryKey:["curriculum-meta"],queryFn:async()=>{const{data:r,error:s}=await Y.from("curriculum_meta").select("version, last_published_at").eq("id","singleton").single();if(s)throw s;return r}});return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Version History"}),h.jsx("p",{className:"text-muted-foreground",children:"View past published versions of the curriculum."})]}),h.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 rounded-2xl p-6 shadow-lg",children:h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-xl bg-white/20",children:h.jsx(iV,{className:"w-6 h-6 text-white"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold text-white",children:"Current Version"}),h.jsxs("p",{className:"text-purple-100",children:["v",(n==null?void 0:n.version)??0,(n==null?void 0:n.last_published_at)&&h.jsxs("span",{className:"ml-2 text-sm",children:["(Published ",bN(n.last_published_at),")"]})]})]})]})}),h.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:e?h.jsx("div",{className:"flex items-center justify-center h-64",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-purple-600 border-r-transparent"}),h.jsx("p",{className:"mt-4 text-gray-500",children:"Loading version history..."})]})}):t!=null&&t.length?h.jsx("div",{className:"divide-y divide-gray-100",children:t.map(r=>h.jsx("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-xl bg-purple-100",children:h.jsxs("span",{className:"text-purple-700 font-bold",children:["v",r.version]})}),h.jsx("div",{children:h.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[h.jsx(Hz,{className:"w-4 h-4"}),bN(r.published_at)]})})]}),h.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[h.jsxs("div",{className:"text-center",children:[h.jsx("p",{className:"font-semibold text-gray-900",children:r.domains_count}),h.jsx("p",{className:"text-gray-500",children:"Domains"})]}),h.jsxs("div",{className:"text-center",children:[h.jsx("p",{className:"font-semibold text-gray-900",children:r.skills_count}),h.jsx("p",{className:"text-gray-500",children:"Skills"})]}),h.jsxs("div",{className:"text-center",children:[h.jsx("p",{className:"font-semibold text-gray-900",children:r.questions_count}),h.jsx("p",{className:"text-gray-500",children:"Questions"})]})]})]})},r.version))}):h.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[h.jsx("div",{className:"flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 mb-4",children:h.jsx(hR,{className:"w-8 h-8 text-gray-400"})}),h.jsx("p",{className:"text-gray-500 mb-2",children:"No version history available"}),h.jsx("p",{className:"text-sm text-gray-400",children:"Publish your curriculum to create the first version."})]})})]})}function cne(){const t=ws(),[e,n]=w.useState(null),[r,s]=w.useState(!0),[i,o]=w.useState(!1),[a,l]=w.useState(!1),[c,u]=w.useState(""),[d,f]=w.useState(!1),[p,m]=w.useState(null);w.useEffect(()=>{async function v(){var b;const{data:{user:x}}=await Y.auth.getUser();if(x){const{data:S}=await Y.from("profiles").select("*").eq("id",x.id).single();n(S||{id:x.id,email:x.email||"",full_name:((b=x.user_metadata)==null?void 0:b.full_name)||null,role:"admin",created_at:x.created_at})}s(!1)}v()},[]);const g=async()=>{f(!0),m(null);try{const{error:v}=await Y.rpc("deactivate_own_account");if(v)throw v;await Y.auth.signOut(),t("/login")}catch(v){m("Failed to deactivate account. Please try again."),console.error("Deactivate error:",v),f(!1)}},y=async()=>{if(c!=="DELETE"){m("Please type DELETE to confirm");return}f(!0),m(null);try{const{error:v}=await Y.rpc("delete_own_account");if(v)throw v;await Y.auth.signOut(),t("/login")}catch(v){m("Failed to delete account. Please contact support."),console.error("Delete error:",v),f(!1)}};return r?h.jsx("div",{className:"flex items-center justify-center h-64",children:h.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):h.jsxs("div",{className:"max-w-2xl mx-auto space-y-8",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Account Settings"}),h.jsx("p",{className:"text-gray-500 mt-1",children:"Manage your account preferences and security"})]}),p&&h.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:h.jsx("p",{className:"text-sm text-red-600",children:p})}),h.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[h.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Profile Information"}),h.jsx("div",{className:"space-y-4",children:h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-sm text-gray-500",children:"Full Name"}),h.jsx("p",{className:"text-gray-900 font-medium",children:(e==null?void 0:e.full_name)||"Not set"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-sm text-gray-500",children:"Email"}),h.jsx("p",{className:"text-gray-900 font-medium",children:e==null?void 0:e.email})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-sm text-gray-500",children:"Role"}),h.jsx("p",{className:"text-gray-900 font-medium capitalize",children:e==null?void 0:e.role})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-sm text-gray-500",children:"Member Since"}),h.jsx("p",{className:"text-gray-900 font-medium",children:e!=null&&e.created_at?new Date(e.created_at).toLocaleDateString():"Unknown"})]})]})})]}),h.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[h.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Deactivate Account"}),h.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"Temporarily disable your account. You can reactivate it later by contacting support."}),a?h.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 space-y-4",children:[h.jsx("p",{className:"text-sm text-orange-800",children:"Are you sure you want to deactivate your account? You will be logged out immediately."}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx(Et,{onClick:g,disabled:d,className:"bg-orange-600 hover:bg-orange-700 text-white",children:d?"Deactivating...":"Yes, Deactivate"}),h.jsx(Et,{onClick:()=>l(!1),variant:"outline",disabled:d,children:"Cancel"})]})]}):h.jsx(Et,{onClick:()=>l(!0),variant:"outline",className:"border-orange-300 text-orange-600 hover:bg-orange-50",children:"Deactivate Account"})]}),h.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-red-100",children:[h.jsx("h2",{className:"text-lg font-semibold text-red-600 mb-2",children:"Delete Account"}),h.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"Permanently delete your account and all associated data. This action cannot be undone."}),i?h.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 space-y-4",children:[h.jsxs("p",{className:"text-sm text-red-800",children:["This will permanently delete your account. Type ",h.jsx("strong",{children:"DELETE"})," to confirm."]}),h.jsx(dn,{value:c,onChange:v=>u(v.target.value),placeholder:"Type DELETE to confirm",className:"max-w-xs"}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx(Et,{onClick:y,disabled:d||c!=="DELETE",className:"bg-red-600 hover:bg-red-700 text-white",children:d?"Deleting...":"Delete My Account"}),h.jsx(Et,{onClick:()=>{o(!1),u("")},variant:"outline",disabled:d,children:"Cancel"})]})]}):h.jsx(Et,{onClick:()=>o(!0),variant:"outline",className:"border-red-300 text-red-600 hover:bg-red-50",children:"Delete Account"})]})]})}function une(){const[t,e]=w.useState([]),[n,r]=w.useState(!0),[s,i]=w.useState(!1),[o,a]=w.useState(null),[l,c]=w.useState(null),[u,d]=w.useState("1"),[f,p]=w.useState(""),[m,g]=w.useState(null),y=async()=>{r(!0);const{data:k,error:E}=await Y.from("invitation_codes").select("*").order("created_at",{ascending:!1});E?(a("Failed to load invitation codes"),console.error(E)):e(k||[]),r(!1)};w.useEffect(()=>{y()},[]);const v=async()=>{i(!0),a(null),c(null);try{const{data:k,error:E}=await Y.rpc("generate_invitation_code",{p_max_uses:parseInt(u)||1,p_expires_days:f?parseInt(f):null});if(E)throw E;c(`New invitation code generated: ${k}`),await y(),d("1"),p("")}catch(k){a("Failed to generate invitation code. Make sure you are a super admin."),console.error(k)}finally{i(!1)}},x=async k=>{try{const{error:E}=await Y.rpc("deactivate_invitation_code",{p_code_id:k});if(E)throw E;await y()}catch(E){a("Failed to deactivate code"),console.error(E)}},b=async(k,E)=>{try{await navigator.clipboard.writeText(k),g(E),setTimeout(()=>g(null),2e3)}catch(_){console.error("Failed to copy:",_)}},S=k=>k?new Date(k).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Never";return n?h.jsx("div",{className:"flex items-center justify-center h-64",children:h.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:"Invitation Codes"}),h.jsx("p",{className:"text-gray-500 mt-1",children:"Generate and manage invitation codes for new admin users"})]}),o&&h.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:h.jsx("p",{className:"text-sm text-red-600",children:o})}),l&&h.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:h.jsx("p",{className:"text-sm text-green-600",children:l})}),h.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[h.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Generate New Code"}),h.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Max Uses"}),h.jsx(dn,{type:"number",min:"1",value:u,onChange:k=>d(k.target.value),className:"w-32",placeholder:"1"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Expires In (days)"}),h.jsx(dn,{type:"number",min:"1",value:f,onChange:k=>p(k.target.value),className:"w-32",placeholder:"Never"})]}),h.jsx(Et,{onClick:v,disabled:s,className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white",children:s?"Generating...":"Generate Code"})]})]}),h.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[h.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:h.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"All Invitation Codes"})}),t.length===0?h.jsx("div",{className:"px-6 py-12 text-center text-gray-500",children:"No invitation codes yet. Generate your first code above."}):h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full",children:[h.jsx("thead",{className:"bg-gray-50",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),h.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),h.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usage"}),h.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expires"}),h.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),h.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),h.jsx("tbody",{className:"divide-y divide-gray-100",children:t.map(k=>{const E=k.expires_at&&new Date(k.expires_at)<new Date,_=k.times_used>=k.max_uses,T=k.is_active&&!E&&!_;return h.jsxs("tr",{className:"hover:bg-gray-50",children:[h.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:h.jsx("code",{className:"bg-gray-100 px-3 py-1 rounded font-mono text-sm",children:k.code})}),h.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:h.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${T?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:k.is_active?E?"Expired":_?"Exhausted":"Active":"Deactivated"})}),h.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:[k.times_used," / ",k.max_uses]}),h.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:S(k.expires_at)}),h.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:S(k.created_at)}),h.jsxs("td",{className:"px-6 py-4 whitespace-nowrap space-x-2",children:[h.jsx(Et,{variant:"outline",size:"sm",onClick:()=>b(k.code,k.id),className:"text-purple-600 border-purple-200 hover:bg-purple-50",children:m===k.id?"Copied!":"Copy"}),k.is_active&&h.jsx(Et,{variant:"outline",size:"sm",onClick:()=>x(k.id),className:"text-red-600 border-red-200 hover:bg-red-50",children:"Deactivate"})]})]},k.id)})})]})})]})]})}function dne(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}function fne(){const[t,e]=w.useState([]),[n,r]=w.useState(!0),[s,i]=w.useState(""),[o,a]=w.useState(null);w.useEffect(()=>{c(),l()},[]);const l=async()=>{const{data:{user:g}}=await Y.auth.getUser();g&&a(g.id)},c=async()=>{r(!0);const{data:g,error:y}=await Y.from("profiles").select("id, email, full_name, role, created_at, deleted_at").in("role",["admin","super_admin"]).order("created_at",{ascending:!1});y?console.error("Error fetching users:",y):e(g||[]),r(!1)},u=async g=>{if(!confirm("Are you sure you want to deactivate this admin user?"))return;const{error:y}=await Y.from("profiles").update({deleted_at:new Date().toISOString()}).eq("id",g);y?alert("Failed to deactivate user"):c()},d=async g=>{const{error:y}=await Y.from("profiles").update({deleted_at:null}).eq("id",g);y?alert("Failed to reactivate user"):c()},f=t.filter(g=>{var v,x;if(!s)return!0;const y=s.toLowerCase();return((v=g.email)==null?void 0:v.toLowerCase().includes(y))||((x=g.full_name)==null?void 0:x.toLowerCase().includes(y))}),p=f.filter(g=>!g.deleted_at),m=f.filter(g=>g.deleted_at);return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"User Management"}),h.jsx("p",{className:"text-muted-foreground",children:"Manage admin users and their access."})]}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("div",{className:"relative flex-1 max-w-md",children:[h.jsx(Xm,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),h.jsx("input",{type:"text",placeholder:"Search users...",value:s,onChange:g=>i(g.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg border border-gray-200 bg-white text-gray-700 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-colors"})]}),h.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-purple-100 rounded-lg",children:[h.jsx(M0,{className:"w-5 h-5 text-purple-600"}),h.jsxs("span",{className:"font-medium text-purple-700",children:[p.length," Active Users"]})]})]}),h.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:n?h.jsx("div",{className:"flex items-center justify-center h-64",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-purple-600 border-r-transparent"}),h.jsx("p",{className:"mt-4 text-gray-500",children:"Loading users..."})]})}):h.jsxs("table",{className:"w-full",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"bg-gray-50 border-b border-gray-100",children:[h.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-600",children:"User"}),h.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-600",children:"Role"}),h.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-600",children:"Joined"}),h.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-gray-600",children:"Status"}),h.jsx("th",{className:"text-right px-6 py-4 text-sm font-semibold text-gray-600",children:"Actions"})]})}),h.jsx("tbody",{className:"divide-y divide-gray-100",children:f.length===0?h.jsx("tr",{children:h.jsx("td",{colSpan:5,className:"px-6 py-12 text-center",children:h.jsxs("div",{className:"flex flex-col items-center",children:[h.jsx("div",{className:"flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 mb-4",children:h.jsx(M0,{className:"w-8 h-8 text-gray-400"})}),h.jsx("p",{className:"text-gray-500",children:"No admin users found."})]})})}):f.map(g=>{var y;return h.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${g.deleted_at?"opacity-60":""}`,children:[h.jsx("td",{className:"px-6 py-4",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-purple-100",children:h.jsx("span",{className:"text-purple-700 font-semibold",children:(y=g.full_name||g.email)==null?void 0:y.charAt(0).toUpperCase()})}),h.jsxs("div",{children:[h.jsxs("p",{className:"font-medium text-gray-900",children:[g.full_name||"No name",g.id===o&&h.jsx("span",{className:"ml-2 text-xs text-purple-600",children:"(You)"})]}),h.jsx("p",{className:"text-sm text-gray-500",children:g.email})]})]})}),h.jsx("td",{className:"px-6 py-4",children:h.jsx("div",{className:"flex items-center gap-2",children:g.role==="super_admin"?h.jsxs(h.Fragment,{children:[h.jsx(lV,{className:"w-4 h-4 text-purple-600"}),h.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-medium",children:"Super Admin"})]}):h.jsxs(h.Fragment,{children:[h.jsx(cV,{className:"w-4 h-4 text-blue-600"}),h.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium",children:"Admin"})]})})}),h.jsx("td",{className:"px-6 py-4 text-gray-600",children:dne(g.created_at)}),h.jsx("td",{className:"px-6 py-4",children:g.deleted_at?h.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-700 rounded-full text-xs font-medium",children:"Deactivated"}):h.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium",children:"Active"})}),h.jsx("td",{className:"px-6 py-4 text-right",children:g.id!==o&&(g.deleted_at?h.jsx("button",{onClick:()=>d(g.id),className:"px-3 py-2 text-sm font-medium text-green-600 hover:text-green-700 hover:bg-green-50 rounded-lg transition-colors",children:"Reactivate"}):h.jsxs("button",{onClick:()=>u(g.id),className:"inline-flex items-center gap-1 px-3 py-2 text-sm font-medium text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors",children:[h.jsx(mV,{className:"h-4 w-4"}),"Deactivate"]}))})]},g.id)})})]})}),m.length>0&&h.jsxs("p",{className:"text-sm text-gray-500",children:[m.length," deactivated user(s) shown"]})]})}function wN({children:t}){const e=ws(),[n,r]=w.useState(!0),[s,i]=w.useState(!1);return w.useEffect(()=>{(async()=>{const{data:{user:a}}=await Y.auth.getUser();if(!a){e("/login");return}const{data:l,error:c}=await Y.from("profiles").select("role").eq("id",a.id).single();if(c||!l||l.role!=="super_admin"){e("/");return}i(!0),r(!1)})()},[e]),n?h.jsx("div",{className:"flex items-center justify-center h-64",children:h.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):s?h.jsx(h.Fragment,{children:t}):null}const hne=new v3;function pne(){return h.jsx(x3,{client:hne,children:h.jsx(gV,{children:h.jsx(Iz,{children:h.jsxs(Cz,{children:[h.jsx(It,{path:"/login",element:h.jsx(Iq,{})}),h.jsxs(It,{element:h.jsx(Pq,{children:h.jsx(Fq,{})}),children:[h.jsx(It,{path:"/",element:h.jsx(zq,{})}),h.jsx(It,{path:"/domains",element:h.jsx(Yq,{})}),h.jsx(It,{path:"/domains/new",element:h.jsx(Xq,{})}),h.jsx(It,{path:"/domains/:id/edit",element:h.jsx(eW,{})}),h.jsx(It,{path:"/skills",element:h.jsx(dW,{})}),h.jsx(It,{path:"/skills/new",element:h.jsx(n7,{})}),h.jsx(It,{path:"/skills/:id/edit",element:h.jsx(r7,{})}),h.jsx(It,{path:"/questions",element:h.jsx(p7,{})}),h.jsx(It,{path:"/questions/new",element:h.jsx(rne,{})}),h.jsx(It,{path:"/questions/:id/edit",element:h.jsx(sne,{})}),h.jsx(It,{path:"/publish",element:h.jsx(ane,{})}),h.jsx(It,{path:"/versions",element:h.jsx(lne,{})}),h.jsx(It,{path:"/invitation-codes",element:h.jsx(wN,{children:h.jsx(une,{})})}),h.jsx(It,{path:"/users",element:h.jsx(wN,{children:h.jsx(fne,{})})}),h.jsx(It,{path:"/settings",element:h.jsx(cne,{})})]}),h.jsx(It,{path:"*",element:h.jsx(kz,{to:"/",replace:!0})})]})})})})}const SN="";LU({dsn:SN,enabled:!!SN,environment:"production",tracesSampleRate:1});cv.createRoot(document.getElementById("root")).render(h.jsx(se.StrictMode,{children:h.jsx(sw,{fallback:h.jsx("div",{children:"Something went wrong."}),children:h.jsx(pne,{})})}));
