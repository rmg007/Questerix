[{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\components\\ErrorBoundary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\components\\layout\\app-layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\components\\layout\\sidebar.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'X' is defined but never used.","line":2,"column":98,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":99}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Link, useLocation, useNavigate } from 'react-router-dom'\r\nimport { LayoutDashboard, Book, Layers, FileText, Upload, LogOut, Settings, Key, History, Users, X, UserCog, Shield, Bug, AlertTriangle, Globe, Boxes, Layout } from 'lucide-react'\r\nimport { useApp } from '@/contexts/AppContext'\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select'\r\nimport { cn } from '@/lib/utils'\r\nimport { supabase } from '@/lib/supabase'\r\nimport { useState, useEffect } from 'react'\r\n\r\ninterface SidebarProps {\r\n  isOpen?: boolean\r\n  onClose?: () => void\r\n  isMobile?: boolean\r\n}\r\n\r\nconst baseNavigation = [\r\n  { name: 'Dashboard', href: '/', icon: LayoutDashboard },\r\n  { name: 'My Groups', href: '/groups', icon: Users },\r\n  { name: 'Domains', href: '/domains', icon: Book },\r\n  { name: 'Skills', href: '/skills', icon: Layers },\r\n  { name: 'Questions', href: '/questions', icon: FileText },\r\n  { name: 'Publish', href: '/publish', icon: Upload },\r\n  { name: 'Version History', href: '/versions', icon: History },\r\n  { name: 'Error Logs', href: '/error-logs', icon: AlertTriangle },\r\n  { name: 'Known Issues', href: '/known-issues', icon: Bug },\r\n]\r\n\r\nconst superAdminNavigation = [\r\n  { name: 'Invitation Codes', href: '/invitation-codes', icon: Key },\r\n  { name: 'User Management', href: '/users', icon: UserCog },\r\n  { name: 'AI Governance', href: '/governance', icon: Shield },\r\n]\r\n\r\nconst platformNavigation = [\r\n  { name: 'Subjects', href: '/platform/subjects', icon: Boxes },\r\n  { name: 'Apps', href: '/platform/apps', icon: Layout },\r\n  { name: 'Landing Pages', href: '/platform/landings', icon: Globe },\r\n]\r\n\r\nconst bottomNavigation = [\r\n  { name: 'Settings', href: '/settings', icon: Settings },\r\n]\r\n\r\ninterface UserInfo {\r\n  email: string\r\n  fullName: string | null\r\n  role: string\r\n}\r\n\r\nexport function Sidebar({ isOpen = true, onClose, isMobile = false }: SidebarProps) {\r\n  const location = useLocation()\r\n  const navigate = useNavigate()\r\n  const { currentApp, setCurrentApp, apps, isLoading: appsLoading } = useApp()\r\n  const [isSuperAdmin, setIsSuperAdmin] = useState(false)\r\n  const [userInfo, setUserInfo] = useState<UserInfo | null>(null)\r\n\r\n  const handleNavClick = () => {\r\n    if (isMobile && onClose) {\r\n      onClose()\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    const checkRole = async () => {\r\n      const { data: { user } } = await supabase.auth.getUser()\r\n      console.log('Sidebar: Current user:', user?.email)\r\n      \r\n      if (user) {\r\n        const { data: profile, error } = await supabase\r\n          .from('profiles' as never)\r\n          .select('role, full_name, email')\r\n          .eq('id', user.id)\r\n          .single()\r\n        \r\n        console.log('Sidebar: Profile data:', profile, 'Error:', error)\r\n        \r\n        if (profile) {\r\n          const profileData = profile as { role: string; full_name: string | null; email: string }\r\n          setUserInfo({\r\n            email: profileData.email || user.email || '',\r\n            fullName: profileData.full_name,\r\n            role: profileData.role\r\n          })\r\n          \r\n          if (profileData.role === 'super_admin') {\r\n            console.log('Sidebar: User is super_admin, showing invitation codes')\r\n            setIsSuperAdmin(true)\r\n          }\r\n        }\r\n      }\r\n    }\r\n    checkRole()\r\n  }, [])\r\n\r\n  const navigation = [\r\n    ...baseNavigation.filter(item => !(isSuperAdmin && item.name === 'My Groups')),\r\n    ...(isSuperAdmin ? platformNavigation : []),\r\n    ...(isSuperAdmin ? superAdminNavigation : []),\r\n    ...bottomNavigation,\r\n  ]\r\n\r\n  const handleLogout = async () => {\r\n    await supabase.auth.signOut()\r\n    navigate('/login')\r\n  }\r\n\r\n  return (\r\n    <div \r\n      className={cn(\r\n        \"flex w-72 flex-col h-screen border-r border-white/5\",\r\n        \"bg-gradient-to-b from-[#1a1b4b] via-[#2e1065] to-[#1a1b4b]\",\r\n        isMobile && \"fixed inset-y-0 left-0 z-50 transform transition-transform duration-300 ease-in-out shadow-2xl\",\r\n        isMobile && !isOpen && \"-translate-x-full\",\r\n        isMobile && isOpen && \"translate-x-0\"\r\n      )}\r\n    >\r\n      {/* Header */}\r\n      <div className=\"flex h-20 items-center px-6 border-b border-white/10 bg-white/5 backdrop-blur-sm\">\r\n        <div className=\"flex items-center gap-3 flex-1\">\r\n          <div className=\"flex items-center justify-center w-10 h-10 rounded-xl bg-gradient-to-br from-purple-500 to-blue-600 shadow-lg shadow-purple-500/20\">\r\n            <svg className=\"w-5 h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z\" />\r\n            </svg>\r\n          </div>\r\n          <div>\r\n            <h1 className=\"text-lg font-bold text-white tracking-tight leading-none mb-1\">Questerix</h1>\r\n            <p className=\"text-[10px] text-purple-300 font-medium uppercase tracking-widest\">Admin Panel</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      {/* App Selector */}\r\n      <div className=\"px-4 py-4 border-b border-white/5 bg-white/5 backdrop-blur-sm\">\r\n        <label className=\"text-[10px] font-semibold text-purple-300/60 uppercase tracking-wider mb-2 block px-2\">\r\n          Current Application\r\n        </label>\r\n        <Select\r\n          value={currentApp?.app_id}\r\n          onValueChange={(value) => {\r\n            const app = apps.find(a => a.app_id === value)\r\n            if (app) setCurrentApp(app)\r\n          }}\r\n        >\r\n          <SelectTrigger className=\"w-full bg-white/5 border-white/10 text-white hover:bg-white/10 transition-colors rounded-xl focus:ring-0\">\r\n            <SelectValue placeholder={appsLoading ? \"Loading apps...\" : \"Select app\"} />\r\n          </SelectTrigger>\r\n          <SelectContent className=\"bg-[#1a1b4b] border-white/10 text-white\">\r\n            {apps.map((app) => (\r\n              <SelectItem \r\n                key={app.app_id} \r\n                value={app.app_id}\r\n                className=\"focus:bg-purple-500/20 focus:text-white\"\r\n              >\r\n                {app.display_name}\r\n              </SelectItem>\r\n            ))}\r\n          </SelectContent>\r\n        </Select>\r\n      </div>\r\n      \r\n      {/* Navigation - Scrollable Area */}\r\n      <nav className=\"flex-1 px-4 py-6 space-y-2 overflow-y-auto custom-scrollbar\">\r\n        {navigation.map((item) => {\r\n          const isActive = location.pathname === item.href || \r\n            (item.href !== '/' && location.pathname.startsWith(item.href))\r\n          return (\r\n            <Link\r\n              key={item.name}\r\n              to={item.href}\r\n              onClick={handleNavClick}\r\n              className={cn(\r\n                \"flex items-center gap-3 rounded-xl px-4 py-3 text-sm font-medium transition-all duration-200 group relative\",\r\n                isActive \r\n                  ? \"bg-white/10 text-white shadow-inner border border-white/5\" \r\n                  : \"text-purple-200 hover:bg-white/5 hover:text-white\"\r\n              )}\r\n            >\r\n              <item.icon className={cn(\"h-5 w-5 transition-colors\", isActive ? \"text-purple-300\" : \"text-purple-400 group-hover:text-purple-200\")} />\r\n              {item.name}\r\n              {isActive && (\r\n                <div className=\"absolute left-0 top-1/2 -translate-y-1/2 w-1 h-8 bg-purple-400 rounded-r-full shadow-[0_0_8px_rgba(192,132,252,0.5)]\" />\r\n              )}\r\n            </Link>\r\n          )\r\n        })}\r\n      </nav>\r\n\r\n      {/* User Footer - Pinned to Bottom */}\r\n      <div className=\"px-4 py-4 border-t border-white/10 bg-black/20 backdrop-blur-md\">\r\n        {userInfo && (\r\n          <div className=\"mb-3 px-4 py-3 bg-white/5 rounded-xl border border-white/5\">\r\n            <div className=\"flex items-center justify-between mb-2\">\r\n                 <p className=\"text-sm font-semibold text-white truncate\">\r\n                  {userInfo.fullName || userInfo.email.split('@')[0]}\r\n                </p>\r\n                <button\r\n                    onClick={handleLogout}\r\n                     className=\"text-purple-300 hover:text-white transition-colors p-1 hover:bg-white/10 rounded\"\r\n                     title=\"Sign Out\"\r\n                >\r\n                    <LogOut className=\"h-4 w-4\" />\r\n                </button>\r\n            </div>\r\n            \r\n            <div className=\"flex items-center justify-between\">\r\n                <span className={cn(\r\n                  \"inline-flex px-2 py-0.5 text-[10px] font-medium rounded-full uppercase tracking-wider\",\r\n                  userInfo.role === 'super_admin' \r\n                    ? \"bg-purple-500/20 text-purple-200 border border-purple-500/30\" \r\n                    : \"bg-blue-500/20 text-blue-200 border border-blue-500/30\"\r\n                )}>\r\n                  {userInfo.role === 'super_admin' ? 'Super Admin' : 'Admin'}\r\n                </span>\r\n                <p className=\"text-[10px] text-purple-300/60 truncate max-w-[100px]\">{userInfo.email}</p>\r\n            </div>\r\n          </div>\r\n        )}\r\n        {!userInfo && (\r\n            <button\r\n            onClick={handleLogout}\r\n            className=\"flex items-center justify-center gap-2 w-full rounded-xl px-4 py-3 text-sm font-medium text-white bg-white/5 hover:bg-white/10 border border-white/5 transition-all duration-200\"\r\n            >\r\n            <LogOut className=\"h-4 w-4\" />\r\n            Sign Out\r\n            </button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\components\\ui\\avatar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\components\\ui\\badge.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":37,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":37,"endColumn":30,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\components\\ui\\button.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":57,"column":18,"nodeType":"Identifier","messageId":"namedExport","endLine":57,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground shadow hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2\",\n        sm: \"h-8 rounded-md px-3 text-xs\",\n        lg: \"h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\components\\ui\\button_variants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\components\\ui\\card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\components\\ui\\checkbox.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\components\\ui\\data-toolbar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\components\\ui\\dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\components\\ui\\dropdown-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\components\\ui\\form.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":168,"column":3,"nodeType":"Identifier","messageId":"namedExport","endLine":168,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue | null>(null)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  if (!itemContext) {\n    throw new Error(\"useFormField should be used within <FormItem>\")\n  }\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue | null>(null)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-[0.8rem] text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-[0.8rem] font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\components\\ui\\input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\components\\ui\\label.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\components\\ui\\pagination.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\components\\ui\\progress.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\components\\ui\\radio-group.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\components\\ui\\rich-text-editor.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\components\\ui\\select.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\components\\ui\\separator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\components\\ui\\sheet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\components\\ui\\sortable-header.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\components\\ui\\switch.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\components\\ui\\table.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\components\\ui\\tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\components\\ui\\textarea.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\components\\ui\\toast.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\components\\ui\\toaster.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\config\\env.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\contexts\\AppContext.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":45,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":45,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1453,1456],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1453,1456],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":78,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":78,"endColumn":23}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createContext, useContext, useEffect, useState } from 'react';\r\nimport { supabase } from '@/lib/supabase';\r\nimport type { Database } from '@/lib/database.types';\r\n\r\ntype App = Database['public']['Tables']['apps']['Row'];\r\n\r\ninterface AppContextType {\r\n  currentApp: App | null;\r\n  setCurrentApp: (app: App) => void;\r\n  apps: App[];\r\n  isLoading: boolean;\r\n  refreshApps: () => Promise<void>;\r\n}\r\n\r\nconst AppContext = createContext<AppContextType | undefined>(undefined);\r\n\r\nconst STORAGE_KEY = 'questerix_admin_current_app_id';\r\n\r\nexport function AppProvider({ children }: { children: React.ReactNode }) {\r\n  const [currentApp, setCurrentApp] = useState<App | null>(null);\r\n  const [apps, setApps] = useState<App[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  async function loadApps() {\r\n    setIsLoading(true);\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('apps')\r\n        .select('*')\r\n        .order('display_name');\r\n      \r\n      if (error) throw error;\r\n      \r\n      if (data && data.length > 0) {\r\n        setApps(data);\r\n        \r\n        // Try to restore from localStorage\r\n        const savedAppId = localStorage.getItem(STORAGE_KEY);\r\n        const savedApp = data.find(a => a.app_id === savedAppId);\r\n        \r\n        if (savedApp) {\r\n          setCurrentApp(savedApp);\r\n        } else {\r\n          // Auto-select first active app or first app\r\n          const activeApp = (data as any[]).find(a => a.is_active) || data[0];\r\n          setCurrentApp(activeApp);\r\n        }\r\n      }\r\n    } catch (err) {\r\n      console.error('Failed to load apps:', err);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    loadApps();\r\n  }, []);\r\n\r\n  const handleSetCurrentApp = (app: App) => {\r\n    setCurrentApp(app);\r\n    localStorage.setItem(STORAGE_KEY, app.app_id);\r\n  };\r\n\r\n  return (\r\n    <AppContext.Provider value={{ \r\n      currentApp, \r\n      setCurrentApp: handleSetCurrentApp, \r\n      apps, \r\n      isLoading,\r\n      refreshApps: loadApps\r\n    }}>\r\n      {children}\r\n    </AppContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useApp() {\r\n  const context = useContext(AppContext);\r\n  if (context === undefined) {\r\n    throw new Error('useApp must be used within an AppProvider');\r\n  }\r\n  return context;\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\ai-assistant\\api\\generateQuestions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\ai-assistant\\api\\governedGeneration.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":23,"column":69,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":72,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[949,952],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[949,952],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":47,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":47,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1828,1831],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1828,1831],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { generateQuestions, GenerateQuestionsRequest, GenerateQuestionsResponse } from './generateQuestions';\r\nimport { validateContent, ValidationResponse } from './validateContent';\r\nimport { supabase } from '@/lib/supabase';\r\n\r\nexport interface GovernedGenerationResponse extends GenerateQuestionsResponse {\r\n  validation?: ValidationResponse;\r\n  governance: {\r\n    tokens_consumed: number;\r\n    quota_remaining: number;\r\n    throttled: boolean;\r\n  };\r\n}\r\n\r\nexport async function governedGenerateQuestions(\r\n  appId: string,\r\n  request: GenerateQuestionsRequest\r\n): Promise<GovernedGenerationResponse> {\r\n  // 1. Pre-check (Optional: could use estimatedTokens for soft-locking quota)\r\n  // const estimatedTokens = Math.ceil(request.text.length / 4) + 2000;\r\n\r\n  // 2. Initial quota check\r\n  // Note: consume_tenant_tokens RPC will be typed after regenerating database.types.ts\r\n  const { data: quotaData, error: quotaError } = await (supabase as any).rpc('consume_tenant_tokens', {\r\n    p_app_id: appId,\r\n    p_token_count: 0,\r\n  });\r\n\r\n  if (quotaError) throw quotaError;\r\n  const initialQuota = quotaData as { success: boolean; message?: string };\r\n  if (!initialQuota.success) {\r\n    throw new Error(initialQuota.message || 'Quota exceeded or tenant throttled');\r\n  }\r\n\r\n  // 3. Generate Content (Gemini Flash)\r\n  const generationResult = await generateQuestions(request);\r\n\r\n  // 4. Validate Content (Gemini Pro)\r\n  const validationResult = await validateContent({\r\n    questions: generationResult.questions,\r\n    source_text: request.text,\r\n  });\r\n\r\n  // 5. Final token consumption (Exact amount)\r\n  const actualTokens = generationResult.metadata.token_count + \r\n                      Math.ceil(JSON.stringify(validationResult).length / 4);\r\n                      \r\n  const { data: finalQuotaData } = await (supabase as any).rpc('consume_tenant_tokens', {\r\n    p_app_id: appId,\r\n    p_token_count: actualTokens,\r\n  });\r\n\r\n  const finalQuota = (finalQuotaData ?? {}) as { success: boolean; remaining: number; is_throttled?: boolean };\r\n\r\n  return {\r\n    ...generationResult,\r\n    validation: validationResult,\r\n    governance: {\r\n      tokens_consumed: actualTokens,\r\n      quota_remaining: finalQuota?.remaining ?? 0,\r\n      throttled: finalQuota?.is_throttled ?? false,\r\n    }\r\n  };\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\ai-assistant\\api\\validateContent.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":6,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[130,133],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[130,133],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":10,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[192,195],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[192,195],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { supabase } from '@/lib/supabase';\r\n\r\nexport interface ValidationRule {\r\n  name: string;\r\n  rule_type: string;\r\n  params: any;\r\n}\r\n\r\nexport interface ValidationRequest {\r\n  questions: any[];\r\n  source_text: string;\r\n  rules?: ValidationRule[];\r\n}\r\n\r\nexport interface ValidationResponse {\r\n  overall_score: number;\r\n  status: 'approved' | 'flagged' | 'rejected';\r\n  consensus_reached: boolean;\r\n  findings: Array<{\r\n    question_id: number;\r\n    score: number;\r\n    issues: string[];\r\n    suggestions: string;\r\n  }>;\r\n  summary: string;\r\n  metadata: {\r\n    model: string;\r\n    validation_time_ms: number;\r\n  };\r\n}\r\n\r\nexport async function validateContent(\r\n  request: ValidationRequest\r\n): Promise<ValidationResponse> {\r\n  const { data, error } = await supabase.functions.invoke('validate-content', {\r\n    body: request,\r\n  });\r\n\r\n  if (error) throw error;\r\n  if (!data) throw new Error('No data returned from validation Edge Function');\r\n\r\n  return data as ValidationResponse;\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\ai-assistant\\components\\DocumentUploader.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":38,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":38,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1362,1365],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1362,1365],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useCallback, useState } from 'react';\r\nimport { useDropzone } from 'react-dropzone';\r\nimport { Upload, File, CheckCircle2, XCircle, Loader2 } from 'lucide-react';\r\nimport * as pdfjsLib from 'pdfjs-dist';\r\nimport mammoth from 'mammoth';\r\n\r\n// Configure PDF.js worker\r\npdfjsLib.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjsLib.version}/pdf.worker.min.js`;\r\n\r\ninterface DocumentUploaderProps {\r\n  onTextExtracted: (text: string, filename: string) => void;\r\n  maxSizeMB?: number;\r\n}\r\n\r\ninterface UploadState {\r\n  status: 'idle' | 'uploading' | 'extracting' | 'success' | 'error';\r\n  message?: string;\r\n  filename?: string;\r\n  extractedText?: string;\r\n}\r\n\r\nexport  const DocumentUploader: React.FC<DocumentUploaderProps> = ({\r\n  onTextExtracted,\r\n  maxSizeMB = 10,\r\n}) => {\r\n  const [uploadState, setUploadState] = useState<UploadState>({ status: 'idle' });\r\n\r\n  const extractTextFromPDF = async (file: File): Promise<string> => {\r\n    const arrayBuffer = await file.arrayBuffer();\r\n    const pdf = await pdfjsLib.getDocument({ data: arrayBuffer }).promise;\r\n    \r\n    const textChunks: string[] = [];\r\n    \r\n    for (let i = 1; i <= pdf.numPages; i++) {\r\n      const page = await pdf.getPage(i);\r\n      const textContent = await page.getTextContent();\r\n      const pageText = textContent.items\r\n        .map((item: any) => item.str)\r\n        .join(' ');\r\n      textChunks.push(pageText);\r\n    }\r\n    \r\n    return textChunks.join('\\n\\n');\r\n  };\r\n\r\n  const extractTextFromDOCX = async (file: File): Promise<string> => {\r\n    const arrayBuffer = await file.arrayBuffer();\r\n    const result = await mammoth.extractRawText({ arrayBuffer });\r\n    return result.value;\r\n  };\r\n\r\n  const extractTextFromImage = async (file: File): Promise<string> => {\r\n    // For images, we'll need to use Gemini Vision API via Edge Function\r\n    // For now, return a placeholder that the Edge Function will handle\r\n    return `[IMAGE: ${file.name}. Use Gemini Vision for OCR]`;\r\n  };\r\n\r\n  const handleFileDrop = useCallback(async (acceptedFiles: File[]) => {\r\n    if (acceptedFiles.length === 0) return;\r\n\r\n    const file = acceptedFiles[0];\r\n    const fileSizeMB = file.size / (1024 * 1024);\r\n    \r\n    if (fileSizeMB > maxSizeMB) {\r\n      setUploadState({\r\n        status: 'error',\r\n        message: `File size (${fileSizeMB.toFixed(2)}MB) exceeds ${maxSizeMB}MB limit`,\r\n      });\r\n      return;\r\n    }\r\n\r\n    setUploadState({\r\n      status: 'extracting',\r\n      message: 'Extracting text from document...',\r\n      filename: file.name,\r\n    });\r\n\r\n    try {\r\n      let extractedText: string;\r\n\r\n      if (file.type === 'application/pdf') {\r\n        extractedText = await extractTextFromPDF(file);\r\n      } else if (file.type === 'application/vnd.openxmlformats-officedocument.wordprocessingml.document') {\r\n        extractedText = await extractTextFromDOCX(file);\r\n      } else if (file.type.startsWith('image/')) {\r\n        extractedText = await extractTextFromImage(file);\r\n      } else {\r\n        throw new Error('Unsupported file type');\r\n      }\r\n\r\n      setUploadState({\r\n        status: 'success',\r\n        message: `Successfully extracted ${extractedText.length} characters`,\r\n        filename: file.name,\r\n        extractedText,\r\n      });\r\n\r\n      onTextExtracted(extractedText, file.name);\r\n    } catch (error) {\r\n      console.error('Text extraction error:', error);\r\n      setUploadState({\r\n        status: 'error',\r\n        message: error instanceof Error ? error.message : 'Failed to extract text',\r\n      });\r\n    }\r\n  }, [maxSizeMB, onTextExtracted]);\r\n\r\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\r\n    onDrop: handleFileDrop,\r\n    accept: {\r\n      'application/pdf': ['.pdf'],\r\n      'application/vnd.openxmlformats-officedocument.wordprocessingml.document': ['.docx'],\r\n      'image/png': ['.png'],\r\n      'image/jpeg': ['.jpg', '.jpeg'],\r\n    },\r\n    maxFiles: 1,\r\n    multiple: false,\r\n  });\r\n\r\n  const getStatusIcon = () => {\r\n    switch (uploadState.status) {\r\n      case 'extracting':\r\n        return <Loader2 className=\"w-12 h-12 text-blue-500 animate-spin\" />;\r\n      case 'success':\r\n        return <CheckCircle2 className=\"w-12 h-12 text-green-500\" />;\r\n      case 'error':\r\n        return <XCircle className=\"w-12 h-12 text-red-500\" />;\r\n      default:\r\n        return <Upload className=\"w-12 h-12 text-gray-400\" />;\r\n    }\r\n  };\r\n\r\n  const getStatusColor = () => {\r\n    switch (uploadState.status) {\r\n      case 'extracting':\r\n        return 'border-blue-300 bg-blue-50';\r\n      case 'success':\r\n        return 'border-green-300 bg-green-50';\r\n      case 'error':\r\n        return 'border-red-300 bg-red-50';\r\n      default:\r\n        return isDragActive ? 'border-blue-500 bg-blue-50' : 'border-gray-300 bg-white';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-full\">\r\n      <div\r\n        {...getRootProps()}\r\n        className={`\r\n          border-2 border-dashed rounded-lg p-8 text-center cursor-pointer\r\n          transition-all duration-200 ease-in-out\r\n          ${getStatusColor()}\r\n          hover:border-blue-400 hover:bg-blue-50\r\n        `}\r\n      >\r\n        <input {...getInputProps()} />\r\n        \r\n        <div className=\"flex flex-col items-center gap-4\">\r\n          {getStatusIcon()}\r\n          \r\n          <div>\r\n            {uploadState.status === 'idle' && (\r\n              <>\r\n                <p className=\"text-lg font-semibold text-gray-700 mb-1\">\r\n                  {isDragActive ? 'Drop the file here' : 'Upload Source Document'}\r\n                </p>\r\n                <p className=\"text-sm text-gray-500\">\r\n                  Drag & drop or click to select\r\n                </p>\r\n                <p className=\"text-xs text-gray-400 mt-2\">\r\n                  PDF, DOCX, PNG, JPG (max {maxSizeMB}MB)\r\n                </p>\r\n              </>\r\n            )}\r\n            \r\n            {uploadState.status === 'extracting' && (\r\n              <>\r\n                <p className=\"text-lg font-semibold text-blue-700 mb-1\">\r\n                  Processing {uploadState.filename}\r\n                </p>\r\n                <p className=\"text-sm text-blue-600\">\r\n                  {uploadState.message}\r\n                </p>\r\n              </>\r\n            )}\r\n            \r\n            {uploadState.status === 'success' && (\r\n              <>\r\n                <p className=\"text-lg font-semibold text-green-700 mb-1\">\r\n                  <File className=\"inline w-5 h-5 mr-2\" />\r\n                  {uploadState.filename}\r\n                </p>\r\n                <p className=\"text-sm text-green-600\">\r\n                  {uploadState.message}\r\n                </p>\r\n                <button\r\n                  onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    setUploadState({ status: 'idle' });\r\n                  }}\r\n                  className=\"mt-3 text-sm text-blue-600 hover:text-blue-800 underline\"\r\n                >\r\n                  Upload another document\r\n                </button>\r\n              </>\r\n            )}\r\n            \r\n            {uploadState.status === 'error' && (\r\n              <>\r\n                <p className=\"text-lg font-semibold text-red-700 mb-1\">\r\n                  Upload Failed\r\n                </p>\r\n                <p className=\"text-sm text-red-600\">\r\n                  {uploadState.message}\r\n                </p>\r\n                <button\r\n                  onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    setUploadState({ status: 'idle' });\r\n                  }}\r\n                  className=\"mt-3 text-sm text-blue-600 hover:text-blue-800 underline\"\r\n                >\r\n                  Try again\r\n                </button>\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      {uploadState.extractedText && (\r\n        <div className=\"mt-4 p-4 bg-gray-50 rounded-lg border border-gray-200\">\r\n          <h4 className=\"text-sm font-semibold text-gray-700 mb-2\">\r\n            Extracted Text Preview\r\n          </h4>\r\n          <div className=\"text-xs text-gray-600 font-mono max-h-32 overflow-y-auto whitespace-pre-wrap\">\r\n            {uploadState.extractedText.substring(0, 500)}\r\n            {uploadState.extractedText.length > 500 && '...'}\r\n          </div>\r\n          <p className=\"text-xs text-gray-500 mt-2\">\r\n            Total characters: {uploadState.extractedText.length.toLocaleString()}\r\n          </p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\ai-assistant\\components\\QuestionReviewGrid.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\ai-assistant\\pages\\GenerationPage.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":33,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1573,1576],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1573,1576],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":34,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1641,1644],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1641,1644],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":172,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":172,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6505,6508],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6505,6508],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":374,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":374,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15339,15342],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15339,15342],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\ai-assistant\\pages\\GovernancePage.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchQuotas'. Either include it or remove the dependency array.","line":23,"column":6,"nodeType":"ArrayExpression","endLine":23,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [fetchQuotas]","fix":{"range":[712,714],"text":"[fetchQuotas]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":30,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":30,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[990,993],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[990,993],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":45,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":45,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1330,1333],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1330,1333],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\r\nimport { supabase } from '@/lib/supabase';\r\nimport { Shield, Coins, CheckCircle, AlertTriangle, Search } from 'lucide-react';\r\nimport { useToast } from '@/hooks/use-toast';\r\n\r\ninterface TenantQuota {\r\n  app_id: string;\r\n  display_name: string;\r\n  monthly_token_limit: number;\r\n  current_token_usage: number;\r\n  is_throttled: boolean;\r\n  updated_at: string;\r\n}\r\n\r\nexport const GovernancePage: React.FC = () => {\r\n  const [quotas, setQuotas] = useState<TenantQuota[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const { toast } = useToast();\r\n\r\n  useEffect(() => {\r\n    fetchQuotas();\r\n  }, []);\r\n\r\n  const fetchQuotas = async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      // Joined query to get app names and quotas\r\n      // Note: tenant_quotas table types will be available after regenerating database.types.ts\r\n      const { data, error } = await (supabase as any)\r\n        .from('tenant_quotas')\r\n        .select(`\r\n          app_id,\r\n          monthly_token_limit,\r\n          current_token_usage,\r\n          is_throttled,\r\n          updated_at,\r\n          apps!inner (\r\n            display_name\r\n          )\r\n        `);\r\n\r\n      if (error) throw error;\r\n\r\n      const formattedData = data.map((q: any) => ({\r\n        app_id: q.app_id,\r\n        display_name: q.apps.display_name,\r\n        monthly_token_limit: q.monthly_token_limit,\r\n        current_token_usage: q.current_token_usage,\r\n        is_throttled: q.is_throttled,\r\n        updated_at: q.updated_at\r\n      }));\r\n\r\n      setQuotas(formattedData);\r\n    } catch (err) {\r\n      console.error('Failed to fetch quotas:', err);\r\n      toast({\r\n        title: 'Error',\r\n        description: 'Failed to load governance data',\r\n        variant: 'destructive'\r\n      });\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const filteredQuotas = quotas.filter(q => \r\n    q.display_name.toLowerCase().includes(searchTerm.toLowerCase())\r\n  );\r\n\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto p-6 space-y-8\">\r\n      {/* Header */}\r\n      <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4 bg-gradient-to-r from-slate-900 to-indigo-900 p-8 rounded-2xl text-white shadow-xl\">\r\n        <div>\r\n          <div className=\"flex items-center gap-3 mb-2\">\r\n            <Shield className=\"w-8 h-8 text-blue-400\" />\r\n            <h1 className=\"text-3xl font-bold tracking-tight\">AI Governance</h1>\r\n          </div>\r\n          <p className=\"text-blue-100/80 max-w-xl\">\r\n            Monitor AI resource allocation, content quality standards, and token consumption across all tenants.\r\n          </p>\r\n        </div>\r\n        <div className=\"flex items-center gap-6\">\r\n          <div className=\"text-center\">\r\n            <p className=\"text-xs font-semibold uppercase tracking-wider text-blue-300/60 mb-1\">Total Consumption</p>\r\n            <p className=\"text-2xl font-bold\">\r\n              {quotas.reduce((acc, q) => acc + q.current_token_usage, 0).toLocaleString()}\r\n            </p>\r\n          </div>\r\n          <div className=\"h-10 w-px bg-white/10\" />\r\n          <div className=\"text-center\">\r\n            <p className=\"text-xs font-semibold uppercase tracking-wider text-blue-300/60 mb-1\">Active Tenants</p>\r\n            <p className=\"text-2xl font-bold\">{quotas.length}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Main Content Area */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n        \r\n        {/* Left Col: Tenant Quotas */}\r\n        <div className=\"lg:col-span-2 space-y-6\">\r\n          <div className=\"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden\">\r\n            <div className=\"p-6 border-b border-gray-100 flex items-center justify-between\">\r\n              <h2 className=\"text-lg font-bold text-gray-900\">Tenant Resource Allocation</h2>\r\n              <div className=\"relative\">\r\n                <Search className=\"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\" />\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Search tenants...\"\r\n                  value={searchTerm}\r\n                  onChange={(e) => setSearchTerm(e.target.value)}\r\n                  className=\"pl-9 pr-4 py-2 bg-gray-50 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none w-64\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {isLoading ? (\r\n              <div className=\"p-12 text-center text-gray-500\">Loading quota data...</div>\r\n            ) : (\r\n              <div className=\"divide-y divide-gray-50\">\r\n                {filteredQuotas.map((quota) => {\r\n                  const usagePercent = (quota.current_token_usage / quota.monthly_token_limit) * 100;\r\n                  return (\r\n                    <div key={quota.app_id} className=\"p-6 hover:bg-gray-50/50 transition-colors\">\r\n                      <div className=\"flex items-center justify-between mb-4\">\r\n                        <div>\r\n                          <h3 className=\"font-bold text-gray-900\">{quota.display_name}</h3>\r\n                          <code className=\"text-[10px] text-gray-400 uppercase tracking-tighter\">{quota.app_id}</code>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-3\">\r\n                          {quota.is_throttled && (\r\n                            <span className=\"flex items-center gap-1.5 px-2 py-1 bg-red-100 text-red-700 text-[10px] font-bold rounded-full uppercase\">\r\n                              <AlertTriangle className=\"w-3 h-3\" />\r\n                              Throttled\r\n                            </span>\r\n                          )}\r\n                          <span className=\"flex items-center gap-1.5 px-2 py-1 bg-blue-100 text-blue-700 text-[10px] font-bold rounded-full uppercase\">\r\n                            <Coins className=\"w-3 h-3\" />\r\n                            Active Quota\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className=\"space-y-2\">\r\n                        <div className=\"flex items-center justify-between text-xs mb-1\">\r\n                          <span className=\"text-gray-500 uppercase font-bold tracking-widest\">Global AI Tokens</span>\r\n                          <span className=\"font-mono\">\r\n                            {quota.current_token_usage.toLocaleString()} / {quota.monthly_token_limit.toLocaleString()}\r\n                          </span>\r\n                        </div>\r\n                        <div className=\"w-full h-3 bg-gray-100 rounded-full overflow-hidden border border-gray-200 shadow-inner\">\r\n                          <div \r\n                            className={`h-full transition-all duration-1000 ${\r\n                              usagePercent > 90 ? 'bg-red-500' : usagePercent > 75 ? 'bg-amber-400' : 'bg-gradient-to-r from-blue-500 to-indigo-600'\r\n                            }`}\r\n                            style={{ width: `${Math.min(usagePercent, 100)}%` }}\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Right Col: Governance Status */}\r\n        <div className=\"space-y-6\">\r\n          <div className=\"bg-white rounded-xl shadow-sm border border-gray-100 p-6\">\r\n            <h2 className=\"text-lg font-bold text-gray-900 mb-6 flex items-center gap-2\">\r\n              <CheckCircle className=\"w-5 h-5 text-green-500\" />\r\n              Sovereignty Status\r\n            </h2>\r\n            <div className=\"space-y-4\">\r\n              <GovernanceCheckItem \r\n                label=\"Cross-Model Verification\" \r\n                status=\"active\" \r\n                desc=\"Gemini Pro 1.5 auditing Flash outputs\"\r\n              />\r\n              <GovernanceCheckItem \r\n                label=\"Shadow Deduplication\" \r\n                status=\"active\" \r\n                desc=\"Preventing redundant content generation\"\r\n              />\r\n              <GovernanceCheckItem \r\n                label=\"Atomic Token Budgeting\" \r\n                status=\"active\" \r\n                desc=\"Enforced via PL/pgSQL RPC triggers\"\r\n              />\r\n              <GovernanceCheckItem \r\n                label=\"PII Sanitization\" \r\n                status=\"monitored\" \r\n                desc=\"Edge function scrubbing in review\"\r\n              />\r\n            </div>\r\n            \r\n            <button className=\"w-full mt-6 py-3 bg-gray-50 hover:bg-gray-100 text-gray-600 font-semibold text-sm rounded-lg border border-gray-200 transition-colors\">\r\n              Update Validation Rules\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"bg-indigo-50 border border-indigo-100 rounded-xl p-6 shadow-inner\">\r\n            <h3 className=\"text-sm font-bold text-indigo-900 uppercase tracking-widest mb-2\">Security Note</h3>\r\n            <p className=\"text-sm text-indigo-800 leading-relaxed\">\r\n              All AI generation requests are audited against the **Content Sovereignty Protocol**.\r\n              Direct model access is disabled; all requests must pass through the **Governance Bridge**.\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst GovernanceCheckItem: React.FC<{ label: string; status: 'active' | 'monitored' | 'disabled'; desc: string }> = ({ \r\n  label, status, desc \r\n}) => (\r\n  <div className=\"flex items-start gap-3 p-3 bg-gray-50/50 rounded-lg border border-gray-100\">\r\n    <div className={`mt-1 w-2 h-2 rounded-full ${\r\n      status === 'active' ? 'bg-green-500' : status === 'monitored' ? 'bg-blue-400' : 'bg-gray-300'\r\n    }`} />\r\n    <div>\r\n      <p className=\"text-sm font-bold text-gray-900 leading-none mb-1\">{label}</p>\r\n      <p className=\"text-[11px] text-gray-500 leading-tight\">{desc}</p>\r\n    </div>\r\n  </div>\r\n);\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\ai-assistant\\pages\\SessionsPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\auth\\components\\auth-guard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\auth\\components\\super-admin-guard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\auth\\pages\\AccountSettingsPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\auth\\pages\\InvitationCodesPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\auth\\pages\\LoginPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\auth\\pages\\UserManagementPage.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchUsers'. Either include it or remove the dependency array.","line":34,"column":6,"nodeType":"ArrayExpression","endLine":34,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [fetchUsers]","fix":{"range":[1020,1022],"text":"[fetchUsers]"}}]}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":84,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":84,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2629,2632],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2629,2632],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":93,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":93,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2891,2894],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2891,2894],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":106,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":106,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3215,3218],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3215,3218],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/* eslint-disable @typescript-eslint/no-explicit-any */\r\nimport { useState, useEffect } from 'react';\r\nimport { supabase } from '@/lib/supabase';\r\nimport { Users, Shield, ShieldAlert, UserX, Search } from 'lucide-react';\r\n\r\ninterface AdminUser {\r\n  id: string;\r\n  email: string;\r\n  full_name: string | null;\r\n  role: string;\r\n  created_at: string;\r\n  deleted_at: string | null;\r\n}\r\n\r\nfunction formatDate(dateString: string): string {\r\n  const date = new Date(dateString);\r\n  return date.toLocaleDateString('en-US', {\r\n    year: 'numeric',\r\n    month: 'short',\r\n    day: 'numeric',\r\n  });\r\n}\r\n\r\nexport function UserManagementPage() {\r\n  const [users, setUsers] = useState<AdminUser[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [currentUserId, setCurrentUserId] = useState<string | null>(null);\r\n  const [currentUserRole, setCurrentUserRole] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    fetchUsers();\r\n    getCurrentUser();\r\n  }, []);\r\n\r\n  const getCurrentUser = async () => {\r\n    const { data: { user } } = await supabase.auth.getUser();\r\n    if (user) {\r\n      setCurrentUserId(user.id);\r\n      const { data: profile } = await supabase\r\n        .from('profiles')\r\n        .select('role')\r\n        .eq('id', user.id)\r\n        .single();\r\n      if (profile) {\r\n        setCurrentUserRole(profile.role);\r\n      }\r\n    }\r\n  };\r\n\r\n  const fetchUsers = async () => {\r\n    setLoading(true);\r\n    \r\n    // Get current profile for role check\r\n    const { data: { user: authUser } } = await supabase.auth.getUser();\r\n    let userRole = currentUserRole;\r\n    \r\n    if (authUser && !userRole) {\r\n      const { data: profile } = await supabase\r\n        .from('profiles')\r\n        .select('role')\r\n        .eq('id', authUser.id)\r\n        .single();\r\n      userRole = profile?.role || null;\r\n      if (userRole) setCurrentUserRole(userRole);\r\n    }\r\n\r\n    let query = supabase.from('profiles').select('id, email, full_name, role, created_at, deleted_at');\r\n    \r\n    // Super admins should only see regular admins (and themselves)\r\n    // Admins seeing this page is technically a violation of current design, but if they reach it, \r\n    // they shouldn't see anyone higher than them.\r\n    if (userRole === 'super_admin') {\r\n      query = query.or(`role.eq.admin,id.eq.${authUser?.id}`);\r\n    } else {\r\n      query = query.in('role', ['admin']);\r\n    }\r\n\r\n    const { data, error } = await query.order('created_at', { ascending: false });\r\n\r\n    if (error) {\r\n      console.error('Error fetching users:', error);\r\n    } else {\r\n      setUsers((data as any[]) || []);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const handleDeactivate = async (userId: string) => {\r\n    if (!confirm('Are you sure you want to deactivate this admin user?')) return;\r\n\r\n    const { error } = await (supabase\r\n      .from('profiles') as any)\r\n      .update({ deleted_at: new Date().toISOString() })\r\n      .eq('id', userId);\r\n\r\n    if (error) {\r\n      alert('Failed to deactivate user');\r\n    } else {\r\n      fetchUsers();\r\n    }\r\n  };\r\n\r\n  const handleReactivate = async (userId: string) => {\r\n    const { error } = await (supabase\r\n      .from('profiles') as any)\r\n      .update({ deleted_at: null })\r\n      .eq('id', userId);\r\n\r\n    if (error) {\r\n      alert('Failed to reactivate user');\r\n    } else {\r\n      fetchUsers();\r\n    }\r\n  };\r\n\r\n  const filteredUsers = users.filter((user) => {\r\n    if (!searchQuery) return true;\r\n    const query = searchQuery.toLowerCase();\r\n    return (\r\n      user.email?.toLowerCase().includes(query) ||\r\n      user.full_name?.toLowerCase().includes(query)\r\n    );\r\n  });\r\n\r\n  const activeUsers = filteredUsers.filter((u) => !u.deleted_at);\r\n  const deactivatedUsers = filteredUsers.filter((u) => u.deleted_at);\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div>\r\n        <h1 className=\"text-3xl font-bold tracking-tight\">User Management</h1>\r\n        <p className=\"text-muted-foreground\">\r\n          Manage admin users and their access.\r\n        </p>\r\n      </div>\r\n\r\n      <div className=\"flex items-center gap-4\">\r\n        <div className=\"relative flex-1 max-w-md\">\r\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400\" />\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Search users...\"\r\n            value={searchQuery}\r\n            onChange={(e) => setSearchQuery(e.target.value)}\r\n            className=\"w-full pl-10 pr-4 py-2 rounded-lg border border-gray-200 bg-white text-gray-700 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-colors\"\r\n          />\r\n        </div>\r\n        <div className=\"flex items-center gap-2 px-4 py-2 bg-purple-100 rounded-lg\">\r\n          <Users className=\"w-5 h-5 text-purple-600\" />\r\n          <span className=\"font-medium text-purple-700\">{activeUsers.length} Active Users</span>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden\">\r\n        {loading ? (\r\n          <div className=\"flex items-center justify-center h-64\">\r\n            <div className=\"text-center\">\r\n              <div className=\"inline-block h-8 w-8 animate-spin rounded-full border-4 border-purple-600 border-r-transparent\"></div>\r\n              <p className=\"mt-4 text-gray-500\">Loading users...</p>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <table className=\"w-full\">\r\n            <thead>\r\n              <tr className=\"bg-gray-50 border-b border-gray-100\">\r\n                <th className=\"text-left px-6 py-4 text-sm font-semibold text-gray-600\">User</th>\r\n                <th className=\"text-left px-6 py-4 text-sm font-semibold text-gray-600\">Role</th>\r\n                <th className=\"text-left px-6 py-4 text-sm font-semibold text-gray-600\">Joined</th>\r\n                <th className=\"text-left px-6 py-4 text-sm font-semibold text-gray-600\">Status</th>\r\n                <th className=\"text-right px-6 py-4 text-sm font-semibold text-gray-600\">Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"divide-y divide-gray-100\">\r\n              {filteredUsers.length === 0 ? (\r\n                <tr>\r\n                  <td colSpan={5} className=\"px-6 py-12 text-center\">\r\n                    <div className=\"flex flex-col items-center\">\r\n                      <div className=\"flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 mb-4\">\r\n                        <Users className=\"w-8 h-8 text-gray-400\" />\r\n                      </div>\r\n                      <p className=\"text-gray-500\">No admin users found.</p>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ) : (\r\n                filteredUsers.map((user) => (\r\n                  <tr key={user.id} className={`hover:bg-gray-50 transition-colors ${user.deleted_at ? 'opacity-60' : ''}`}>\r\n                    <td className=\"px-6 py-4\">\r\n                      <div className=\"flex items-center gap-3\">\r\n                        <div className=\"flex items-center justify-center w-10 h-10 rounded-full bg-purple-100\">\r\n                          <span className=\"text-purple-700 font-semibold\">\r\n                            {(user.full_name || user.email)?.charAt(0).toUpperCase()}\r\n                          </span>\r\n                        </div>\r\n                        <div>\r\n                          <p className=\"font-medium text-gray-900\">\r\n                            {user.full_name || 'No name'}\r\n                            {user.id === currentUserId && (\r\n                              <span className=\"ml-2 text-xs text-purple-600\">(You)</span>\r\n                            )}\r\n                          </p>\r\n                          <p className=\"text-sm text-gray-500\">{user.email}</p>\r\n                        </div>\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        {user.role === 'super_admin' ? (\r\n                          <>\r\n                            <ShieldAlert className=\"w-4 h-4 text-purple-600\" />\r\n                            <span className=\"px-2 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-medium\">\r\n                              Super Admin\r\n                            </span>\r\n                          </>\r\n                        ) : (\r\n                          <>\r\n                            <Shield className=\"w-4 h-4 text-blue-600\" />\r\n                            <span className=\"px-2 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium\">\r\n                              Admin\r\n                            </span>\r\n                          </>\r\n                        )}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4 text-gray-600\">\r\n                      {formatDate(user.created_at)}\r\n                    </td>\r\n                    <td className=\"px-6 py-4\">\r\n                      {user.deleted_at ? (\r\n                        <span className=\"px-2 py-1 bg-red-100 text-red-700 rounded-full text-xs font-medium\">\r\n                          Deactivated\r\n                        </span>\r\n                      ) : (\r\n                        <span className=\"px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium\">\r\n                          Active\r\n                        </span>\r\n                      )}\r\n                    </td>\r\n                    <td className=\"px-6 py-4 text-right\">\r\n                      {user.id !== currentUserId && (\r\n                        user.deleted_at ? (\r\n                          <button\r\n                            onClick={() => handleReactivate(user.id)}\r\n                            className=\"px-3 py-2 text-sm font-medium text-green-600 hover:text-green-700 hover:bg-green-50 rounded-lg transition-colors\"\r\n                          >\r\n                            Reactivate\r\n                          </button>\r\n                        ) : (\r\n                          <button\r\n                            onClick={() => handleDeactivate(user.id)}\r\n                            className=\"inline-flex items-center gap-1 px-3 py-2 text-sm font-medium text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors\"\r\n                          >\r\n                            <UserX className=\"h-4 w-4\" />\r\n                            Deactivate\r\n                          </button>\r\n                        )\r\n                      )}\r\n                    </td>\r\n                  </tr>\r\n                ))\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        )}\r\n      </div>\r\n\r\n      {deactivatedUsers.length > 0 && (\r\n        <p className=\"text-sm text-gray-500\">\r\n          {deactivatedUsers.length} deactivated user(s) shown\r\n        </p>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\curriculum\\components\\domain-form.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\curriculum\\components\\domain-list.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'domains' logical expression could make the dependencies of useMemo Hook (at line 276) change on every render. To fix this, wrap the initialization of 'domains' in its own useMemo() Hook.","line":272,"column":9,"nodeType":"VariableDeclarator","endLine":272,"endColumn":44}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":111,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":111,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3744,3747],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3744,3747],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":189,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":189,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6694,6697],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6694,6697],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":462,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":462,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15262,15265],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15262,15265],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/* eslint-disable @typescript-eslint/no-explicit-any */\r\nimport { Link } from 'react-router-dom'\r\nimport { Plus, CheckSquare, Square, Search, X, Trash, Book, GripVertical } from 'lucide-react'\r\nimport { usePaginatedDomains, useDeleteDomain, useBulkDeleteDomains, useBulkUpdateDomainsStatus, useUpdateDomainOrder } from '../hooks/use-domains'\r\nimport { useState, useEffect, useMemo } from 'react'\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { Pagination } from '@/components/ui/pagination'\r\nimport { SortableHeader } from '@/components/ui/sortable-header'\r\nimport { DataToolbar } from '@/components/ui/data-toolbar'\r\nimport type { DataColumn } from '@/lib/data-utils'\r\n\r\nconst DOMAIN_COLUMNS: DataColumn[] = [\r\n  { key: 'title', header: 'title' },\r\n  { key: 'slug', header: 'slug' },\r\n  { key: 'sort_order', header: 'sort_order' },\r\n  { key: 'status', header: 'status' },\r\n]\r\nimport {\r\n  DndContext,\r\n  closestCenter,\r\n  KeyboardSensor,\r\n  PointerSensor,\r\n  TouchSensor,\r\n  useSensor,\r\n  useSensors,\r\n  DragEndEvent,\r\n} from '@dnd-kit/core'\r\nimport {\r\n  arrayMove,\r\n  SortableContext,\r\n  sortableKeyboardCoordinates,\r\n  useSortable,\r\n  verticalListSortingStrategy,\r\n} from '@dnd-kit/sortable'\r\nimport { CSS } from '@dnd-kit/utilities'\r\n\r\nconst DEFAULT_PAGE_SIZE = 10\r\n\r\ninterface Domain {\r\n  id: string\r\n  title: string\r\n  slug: string\r\n  sort_order: number\r\n  status?: string\r\n}\r\n\r\ninterface SortableRowProps {\r\n  domain: Domain\r\n  isSelected: boolean\r\n  onSelect: (id: string) => void\r\n  onDelete: (id: string) => void\r\n  renderStatusBadge: (status: string) => JSX.Element\r\n  isDragDisabled: boolean\r\n}\r\n\r\nfunction SortableRow({ domain, isSelected, onSelect, onDelete, renderStatusBadge, isDragDisabled }: SortableRowProps) {\r\n  const {\r\n    attributes,\r\n    listeners,\r\n    setNodeRef,\r\n    transform,\r\n    transition,\r\n    isDragging,\r\n  } = useSortable({ id: domain.id, disabled: isDragDisabled })\r\n\r\n  const style = {\r\n    transform: CSS.Transform.toString(transform),\r\n    transition,\r\n    opacity: isDragging ? 0.5 : 1,\r\n    boxShadow: isDragging ? '0 4px 12px rgba(0, 0, 0, 0.15)' : undefined,\r\n    backgroundColor: isDragging ? '#f9fafb' : undefined,\r\n    position: 'relative' as const,\r\n    zIndex: isDragging ? 10 : undefined,\r\n  }\r\n\r\n  return (\r\n    <tr ref={setNodeRef} style={style} className=\"hover:bg-gray-50 transition-colors\">\r\n      <td className=\"px-2 py-4 w-10\">\r\n        {!isDragDisabled ? (\r\n          <button\r\n            {...attributes}\r\n            {...listeners}\r\n            className=\"p-2 text-gray-400 hover:text-gray-600 cursor-grab active:cursor-grabbing touch-none\"\r\n            aria-label=\"Drag to reorder\"\r\n          >\r\n            <GripVertical className=\"h-5 w-5\" />\r\n          </button>\r\n        ) : (\r\n          <div className=\"p-2 text-gray-200\">\r\n            <GripVertical className=\"h-5 w-5\" />\r\n          </div>\r\n        )}\r\n      </td>\r\n      <td className=\"px-4 py-4\">\r\n        <button onClick={() => onSelect(domain.id)} className=\"text-gray-400 hover:text-gray-600\">\r\n          {isSelected ? <CheckSquare className=\"h-5 w-5 text-purple-600\" /> : <Square className=\"h-5 w-5\" />}\r\n        </button>\r\n      </td>\r\n      <td className=\"px-6 py-4\">\r\n        <span className=\"inline-flex items-center justify-center w-8 h-8 rounded-lg bg-purple-100 text-purple-700 font-semibold text-sm\">\r\n          {domain.sort_order}\r\n        </span>\r\n      </td>\r\n      <td className=\"px-6 py-4\">\r\n        <span className=\"font-medium text-gray-900\">{domain.title}</span>\r\n      </td>\r\n      <td className=\"px-6 py-4\">\r\n        <code className=\"px-2 py-1 bg-gray-100 rounded text-sm text-gray-600\">{domain.slug}</code>\r\n      </td>\r\n      <td className=\"px-6 py-4\">\r\n        {renderStatusBadge((domain as any).status || 'draft')}\r\n      </td>\r\n      <td className=\"px-6 py-4 text-right\">\r\n        <div className=\"flex items-center justify-end gap-2\">\r\n          <Link\r\n            to={`/domains/${domain.id}/edit`}\r\n            className=\"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium hover:bg-blue-200 transition-colors\"\r\n          >\r\n            Edit\r\n          </Link>\r\n          <button\r\n            onClick={() => onDelete(domain.id)}\r\n            className=\"px-3 py-1 bg-red-100 text-red-700 rounded-full text-sm font-medium hover:bg-red-200 transition-colors\"\r\n          >\r\n            Delete\r\n          </button>\r\n        </div>\r\n      </td>\r\n    </tr>\r\n  )\r\n}\r\n\r\nfunction SortableCard({ domain, isSelected, onSelect, onDelete, renderStatusBadge, isDragDisabled }: SortableRowProps) {\r\n  const {\r\n    attributes,\r\n    listeners,\r\n    setNodeRef,\r\n    transform,\r\n    transition,\r\n    isDragging,\r\n  } = useSortable({ id: domain.id, disabled: isDragDisabled })\r\n\r\n  const style = {\r\n    transform: CSS.Transform.toString(transform),\r\n    transition,\r\n    opacity: isDragging ? 0.5 : 1,\r\n    boxShadow: isDragging ? '0 8px 16px rgba(0, 0, 0, 0.15)' : undefined,\r\n    position: 'relative' as const,\r\n    zIndex: isDragging ? 10 : undefined,\r\n  }\r\n\r\n  return (\r\n    <div\r\n      ref={setNodeRef}\r\n      style={style}\r\n      className={`bg-white rounded-xl border ${isSelected ? 'border-purple-300 bg-purple-50' : 'border-gray-200'} p-4 space-y-3 transition-colors`}\r\n    >\r\n      <div className=\"flex items-start gap-3\">\r\n        {!isDragDisabled ? (\r\n          <button\r\n            {...attributes}\r\n            {...listeners}\r\n            className=\"p-2 text-gray-400 hover:text-gray-600 cursor-grab active:cursor-grabbing touch-none flex-shrink-0\"\r\n            aria-label=\"Drag to reorder\"\r\n          >\r\n            <GripVertical className=\"h-5 w-5\" />\r\n          </button>\r\n        ) : (\r\n          <div className=\"p-2 text-gray-200 flex-shrink-0\">\r\n            <GripVertical className=\"h-5 w-5\" />\r\n          </div>\r\n        )}\r\n        <button\r\n          onClick={() => onSelect(domain.id)}\r\n          className=\"p-2 text-gray-400 hover:text-gray-600 flex-shrink-0\"\r\n        >\r\n          {isSelected ? <CheckSquare className=\"h-5 w-5 text-purple-600\" /> : <Square className=\"h-5 w-5\" />}\r\n        </button>\r\n        <div className=\"flex-1 min-w-0\">\r\n          <div className=\"flex items-center gap-2 mb-1\">\r\n            <span className=\"inline-flex items-center justify-center w-7 h-7 rounded-lg bg-purple-100 text-purple-700 font-semibold text-xs flex-shrink-0\">\r\n              {domain.sort_order}\r\n            </span>\r\n            <h3 className=\"font-medium text-gray-900 truncate\">{domain.title}</h3>\r\n          </div>\r\n          <code className=\"px-2 py-0.5 bg-gray-100 rounded text-xs text-gray-600\">{domain.slug}</code>\r\n        </div>\r\n        <div className=\"flex-shrink-0\">\r\n          {renderStatusBadge((domain as any).status || 'draft')}\r\n        </div>\r\n      </div>\r\n      <div className=\"flex items-center justify-end gap-2 pt-2 border-t border-gray-100\">\r\n        <Link\r\n          to={`/domains/${domain.id}/edit`}\r\n          className=\"px-4 py-2 bg-blue-100 text-blue-700 rounded-full text-sm font-medium hover:bg-blue-200 transition-colors\"\r\n        >\r\n          Edit\r\n        </Link>\r\n        <button\r\n          onClick={() => onDelete(domain.id)}\r\n          className=\"px-4 py-2 bg-red-100 text-red-700 rounded-full text-sm font-medium hover:bg-red-200 transition-colors\"\r\n        >\r\n          Delete\r\n        </button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function DomainList() {\r\n  const [selectedIds, setSelectedIds] = useState<Set<string>>(new Set())\r\n  const [statusFilter, setStatusFilter] = useState<'all' | 'draft' | 'published' | 'live'>('all')\r\n  const [searchQuery, setSearchQuery] = useState<string>('')\r\n  const [debouncedSearch, setDebouncedSearch] = useState<string>('')\r\n  const [page, setPage] = useState(1)\r\n  const [pageSize, setPageSize] = useState(DEFAULT_PAGE_SIZE)\r\n  const [sortBy, setSortBy] = useState<string>('sort_order')\r\n  const [sortOrder, setSortOrder] = useState<'asc' | 'desc'>('asc')\r\n\r\n  const { data: paginatedData, isLoading, error } = usePaginatedDomains({\r\n    page,\r\n    pageSize,\r\n    search: debouncedSearch,\r\n    status: statusFilter,\r\n    sortBy,\r\n    sortOrder,\r\n  })\r\n\r\n  const deleteDomain = useDeleteDomain()\r\n  const bulkDelete = useBulkDeleteDomains()\r\n  const bulkUpdateStatus = useBulkUpdateDomainsStatus()\r\n  const updateDomainOrder = useUpdateDomainOrder()\r\n  const { toast } = useToast()\r\n  \r\n  const showToast = (title: string, type: 'success' | 'error' = 'success') => {\r\n    toast({\r\n      title,\r\n      variant: type === 'error' ? 'destructive' : 'default',\r\n    })\r\n  }\r\n\r\n  const sensors = useSensors(\r\n    useSensor(PointerSensor, {\r\n      activationConstraint: {\r\n        distance: 8,\r\n      },\r\n    }),\r\n    useSensor(TouchSensor, {\r\n      activationConstraint: {\r\n        delay: 200,\r\n        tolerance: 5,\r\n      },\r\n    }),\r\n    useSensor(KeyboardSensor, {\r\n      coordinateGetter: sortableKeyboardCoordinates,\r\n    })\r\n  )\r\n\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setDebouncedSearch(searchQuery)\r\n      setPage(1)\r\n    }, 300)\r\n    return () => clearTimeout(timer)\r\n  }, [searchQuery])\r\n\r\n  useEffect(() => {\r\n    setSelectedIds(new Set())\r\n    setPage(1)\r\n  }, [statusFilter])\r\n\r\n  const domains = paginatedData?.data ?? []\r\n  const totalCount = paginatedData?.totalCount ?? 0\r\n  const totalPages = paginatedData?.totalPages ?? 1\r\n\r\n  const domainIds = useMemo(() => domains.map(d => d.id), [domains])\r\n\r\n  const isDragDisabled = Boolean(debouncedSearch) || statusFilter !== 'all' || sortBy !== 'sort_order'\r\n\r\n  const handleDragEnd = async (event: DragEndEvent) => {\r\n    const { active, over } = event\r\n\r\n    if (over && active.id !== over.id) {\r\n      const oldIndex = domains.findIndex(d => d.id === active.id)\r\n      const newIndex = domains.findIndex(d => d.id === over.id)\r\n\r\n      if (oldIndex !== -1 && newIndex !== -1) {\r\n        const reorderedDomains = arrayMove(domains, oldIndex, newIndex)\r\n        \r\n        const updates = reorderedDomains.map((domain, index) => ({\r\n          id: domain.id,\r\n          sort_order: index + 1 + (page - 1) * pageSize,\r\n        }))\r\n\r\n        try {\r\n          await updateDomainOrder.mutateAsync(updates)\r\n          showToast('Domain order updated', 'success')\r\n        } catch {\r\n          showToast('Failed to update domain order', 'error')\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  const handleSort = (column: string) => {\r\n    if (sortBy === column) {\r\n      setSortOrder(sortOrder === 'asc' ? 'desc' : 'asc')\r\n    } else {\r\n      setSortBy(column)\r\n      setSortOrder('asc')\r\n    }\r\n    setPage(1)\r\n  }\r\n\r\n  const handleSelectAll = () => {\r\n    if (selectedIds.size === domains.length) {\r\n      setSelectedIds(new Set())\r\n    } else {\r\n      setSelectedIds(new Set(domains.map(d => d.id)))\r\n    }\r\n  }\r\n\r\n  const handleSelectOne = (id: string) => {\r\n    const newSelected = new Set(selectedIds)\r\n    if (newSelected.has(id)) {\r\n      newSelected.delete(id)\r\n    } else {\r\n      newSelected.add(id)\r\n    }\r\n    setSelectedIds(newSelected)\r\n  }\r\n\r\n  const handleBulkDelete = async () => {\r\n    if (selectedIds.size === 0) return\r\n    if (confirm(`Are you sure you want to delete ${selectedIds.size} domain(s)?`)) {\r\n      try {\r\n        await bulkDelete.mutateAsync(Array.from(selectedIds))\r\n        showToast(`${selectedIds.size} domain(s) deleted`, 'success')\r\n        setSelectedIds(new Set())\r\n      } catch {\r\n        showToast('Failed to delete domains', 'error')\r\n      }\r\n    }\r\n  }\r\n\r\n  const handleMarkLive = async () => {\r\n    if (selectedIds.size === 0) return\r\n    try {\r\n      await bulkUpdateStatus.mutateAsync({ ids: Array.from(selectedIds), status: 'live' })\r\n      showToast(`${selectedIds.size} domain(s) marked as live`, 'success')\r\n      setSelectedIds(new Set())\r\n    } catch {\r\n      showToast('Failed to update domains', 'error')\r\n    }\r\n  }\r\n\r\n  const handleMarkDraft = async () => {\r\n    if (selectedIds.size === 0) return\r\n    try {\r\n      await bulkUpdateStatus.mutateAsync({ ids: Array.from(selectedIds), status: 'draft' })\r\n      showToast(`${selectedIds.size} domain(s) marked as draft`, 'success')\r\n      setSelectedIds(new Set())\r\n    } catch {\r\n      showToast('Failed to update domains', 'error')\r\n    }\r\n  }\r\n\r\n  const handleMarkPublished = async () => {\r\n    if (selectedIds.size === 0) return\r\n    try {\r\n      await bulkUpdateStatus.mutateAsync({ ids: Array.from(selectedIds), status: 'published' })\r\n      showToast(`${selectedIds.size} domain(s) marked as published (ready for release)`, 'success')\r\n      setSelectedIds(new Set())\r\n    } catch {\r\n      showToast('Failed to update domains', 'error')\r\n    }\r\n  }\r\n\r\n  const handleDelete = async (id: string) => {\r\n    if (confirm('Are you sure you want to delete this domain?')) {\r\n      try {\r\n        await deleteDomain.mutateAsync(id)\r\n        showToast('Domain deleted', 'success')\r\n      } catch {\r\n        showToast('Failed to delete domain', 'error')\r\n      }\r\n    }\r\n  }\r\n\r\n  const handlePageChange = (newPage: number) => {\r\n    setPage(newPage)\r\n    setSelectedIds(new Set())\r\n  }\r\n\r\n  const handlePageSizeChange = (newPageSize: number) => {\r\n    setPageSize(newPageSize)\r\n    setPage(1)\r\n    setSelectedIds(new Set())\r\n  }\r\n\r\n  const hasActiveFilters = searchQuery || statusFilter !== 'all'\r\n\r\n  const clearFilters = () => {\r\n    setSearchQuery('')\r\n    setStatusFilter('all')\r\n    setPage(1)\r\n  }\r\n\r\n  const renderStatusBadge = (status: string) => {\r\n    switch (status) {\r\n      case 'live':\r\n        return (\r\n          <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800\">\r\n            Live\r\n          </span>\r\n        )\r\n      case 'published':\r\n        return (\r\n          <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-800\">\r\n            Published\r\n          </span>\r\n        )\r\n      default:\r\n        return (\r\n          <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-600\">\r\n            Draft\r\n          </span>\r\n        )\r\n    }\r\n  }\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-64\">\r\n        <div className=\"text-center\">\r\n          <div className=\"inline-block h-8 w-8 animate-spin rounded-full border-4 border-purple-600 border-r-transparent\"></div>\r\n          <p className=\"mt-4 text-gray-500\">Loading domains...</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"bg-red-50 border border-red-200 rounded-2xl p-6 text-center\">\r\n        <p className=\"text-red-600\">Error loading domains. Please try again.</p>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const isAllSelected = domains.length ? selectedIds.size === domains.length : false\r\n\r\n  return (\r\n    <div className=\"space-y-4 md:space-y-6\">\r\n      <div className=\"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between\">\r\n        <div>\r\n          <h2 className=\"text-2xl md:text-3xl font-bold text-gray-900\">Domains</h2>\r\n          <p className=\"mt-1 text-sm md:text-base text-gray-500\">Manage curriculum domains</p>\r\n        </div>\r\n        <div className=\"flex flex-col gap-2 sm:flex-row sm:items-center\">\r\n          <DataToolbar\r\n            data={domains as any[]}\r\n            columns={DOMAIN_COLUMNS}\r\n            entityName=\"Domains\"\r\n            importDisabled={true}\r\n            importDisabledMessage=\"Domain import is not available. Please create domains manually.\"\r\n          />\r\n          <Link\r\n            to=\"/domains/new\"\r\n            className=\"inline-flex items-center justify-center gap-2 px-5 py-3 min-h-[48px] bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-medium rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl w-full sm:w-auto\"\r\n          >\r\n            <Plus className=\"h-5 w-5\" />\r\n            <span>New Domain</span>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"bg-white rounded-2xl shadow-sm border border-gray-100 p-3 md:p-4\">\r\n        <div className=\"space-y-3 md:space-y-4 mb-4\">\r\n          <div className=\"flex flex-col gap-3 sm:flex-row sm:items-center\">\r\n            <div className=\"relative flex-1\">\r\n              <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400\" />\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Search domains...\"\r\n                value={searchQuery}\r\n                onChange={(e) => setSearchQuery(e.target.value)}\r\n                className=\"w-full pl-10 pr-4 py-3 min-h-[48px] rounded-lg border border-gray-200 bg-white text-gray-700 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-colors text-base\"\r\n              />\r\n            </div>\r\n            {hasActiveFilters && (\r\n              <button\r\n                onClick={clearFilters}\r\n                className=\"inline-flex items-center justify-center gap-1 px-4 py-3 min-h-[48px] text-sm font-medium text-gray-600 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors\"\r\n              >\r\n                <X className=\"h-4 w-4\" />\r\n                <span>Clear filters</span>\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"flex flex-col gap-3 sm:flex-row sm:flex-wrap sm:items-center\">\r\n            <div className=\"flex flex-col gap-1 sm:flex-row sm:items-center sm:gap-2 w-full sm:w-auto\">\r\n              <label className=\"text-sm font-medium text-gray-600\">Status:</label>\r\n              <select\r\n                value={statusFilter}\r\n                onChange={(e) => setStatusFilter(e.target.value as 'all' | 'draft' | 'published' | 'live')}\r\n                className=\"px-3 py-3 min-h-[48px] rounded-lg border border-gray-200 bg-white text-gray-700 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-colors text-base w-full sm:w-auto\"\r\n              >\r\n                <option value=\"all\">All Status</option>\r\n                <option value=\"draft\">Draft</option>\r\n                <option value=\"published\">Published</option>\r\n                <option value=\"live\">Live</option>\r\n              </select>\r\n            </div>\r\n\r\n            {isDragDisabled && sortBy === 'sort_order' && (\r\n              <span className=\"text-xs md:text-sm text-amber-600 bg-amber-50 px-3 py-2 rounded-lg\">\r\n                Clear filters to enable drag reordering\r\n              </span>\r\n            )}\r\n\r\n            {selectedIds.size > 0 && (\r\n              <div className=\"flex flex-wrap items-center gap-2 sm:ml-auto\">\r\n                <span className=\"text-sm text-gray-600 w-full sm:w-auto\">{selectedIds.size} selected</span>\r\n                <button\r\n                  onClick={handleMarkPublished}\r\n                  disabled={bulkUpdateStatus.isPending}\r\n                  className=\"inline-flex items-center justify-center gap-1 px-4 py-3 min-h-[48px] text-sm font-medium text-amber-600 hover:text-amber-700 hover:bg-amber-50 rounded-lg transition-colors flex-1 sm:flex-none\"\r\n                >\r\n                  Mark Published\r\n                </button>\r\n                <button\r\n                  onClick={handleMarkLive}\r\n                  disabled={bulkUpdateStatus.isPending}\r\n                  className=\"inline-flex items-center justify-center gap-1 px-4 py-3 min-h-[48px] text-sm font-medium text-green-600 hover:text-green-700 hover:bg-green-50 rounded-lg transition-colors flex-1 sm:flex-none\"\r\n                >\r\n                  Mark Live\r\n                </button>\r\n                <button\r\n                  onClick={handleMarkDraft}\r\n                  disabled={bulkUpdateStatus.isPending}\r\n                  className=\"inline-flex items-center justify-center gap-1 px-4 py-3 min-h-[48px] text-sm font-medium text-gray-600 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors flex-1 sm:flex-none\"\r\n                >\r\n                  Mark Draft\r\n                </button>\r\n                <button\r\n                  onClick={handleBulkDelete}\r\n                  disabled={bulkDelete.isPending}\r\n                  className=\"inline-flex items-center justify-center gap-1 px-4 py-3 min-h-[48px] text-sm font-medium text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors flex-1 sm:flex-none\"\r\n                >\r\n                  <Trash className=\"h-4 w-4\" />\r\n                  <span>Delete</span>\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <DndContext\r\n          sensors={sensors}\r\n          collisionDetection={closestCenter}\r\n          onDragEnd={handleDragEnd}\r\n        >\r\n          {/* Desktop Table View */}\r\n          <div className=\"hidden md:block overflow-hidden rounded-xl border border-gray-100\">\r\n            <table className=\"w-full\">\r\n              <thead>\r\n                <tr className=\"bg-gray-50 border-b border-gray-100\">\r\n                  <th className=\"text-left px-2 py-4 w-10\">\r\n                    <span className=\"sr-only\">Drag handle</span>\r\n                  </th>\r\n                  <th className=\"text-left px-4 py-4 w-10\">\r\n                    <button onClick={handleSelectAll} className=\"text-gray-400 hover:text-gray-600\">\r\n                      {isAllSelected && domains.length > 0 ? <CheckSquare className=\"h-5 w-5 text-purple-600\" /> : <Square className=\"h-5 w-5\" />}\r\n                    </button>\r\n                  </th>\r\n                  <th className=\"text-left px-6 py-4\">\r\n                    <SortableHeader\r\n                      label=\"Order\"\r\n                      column=\"sort_order\"\r\n                      currentSortBy={sortBy}\r\n                      currentSortOrder={sortOrder}\r\n                      onSort={handleSort}\r\n                    />\r\n                  </th>\r\n                  <th className=\"text-left px-6 py-4\">\r\n                    <SortableHeader\r\n                      label=\"Title\"\r\n                      column=\"title\"\r\n                      currentSortBy={sortBy}\r\n                      currentSortOrder={sortOrder}\r\n                      onSort={handleSort}\r\n                    />\r\n                  </th>\r\n                  <th className=\"text-left px-6 py-4\">\r\n                    <SortableHeader\r\n                      label=\"Slug\"\r\n                      column=\"slug\"\r\n                      currentSortBy={sortBy}\r\n                      currentSortOrder={sortOrder}\r\n                      onSort={handleSort}\r\n                    />\r\n                  </th>\r\n                  <th className=\"text-left px-6 py-4\">\r\n                    <SortableHeader\r\n                      label=\"Status\"\r\n                      column=\"status\"\r\n                      currentSortBy={sortBy}\r\n                      currentSortOrder={sortOrder}\r\n                      onSort={handleSort}\r\n                    />\r\n                  </th>\r\n                  <th className=\"text-right px-6 py-4 text-sm font-semibold text-gray-600\">Actions</th>\r\n                </tr>\r\n              </thead>\r\n              <SortableContext items={domainIds} strategy={verticalListSortingStrategy}>\r\n                <tbody className=\"divide-y divide-gray-100\">\r\n                  {!domains.length ? (\r\n                    <tr>\r\n                      <td colSpan={7} className=\"px-6 py-12 text-center\">\r\n                        <div className=\"flex flex-col items-center\">\r\n                          <div className=\"flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 mb-4\">\r\n                            <Book className=\"w-8 h-8 text-gray-400\" />\r\n                          </div>\r\n                          <p className=\"text-gray-500 mb-4\">\r\n                            {hasActiveFilters ? 'No domains match your filters.' : 'No domains found. Create one to get started.'}\r\n                          </p>\r\n                          {hasActiveFilters ? (\r\n                            <button\r\n                              onClick={clearFilters}\r\n                              className=\"inline-flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium rounded-lg transition-colors\"\r\n                            >\r\n                              <X className=\"h-4 w-4\" />\r\n                              Clear filters\r\n                            </button>\r\n                          ) : (\r\n                            <Link\r\n                              to=\"/domains/new\"\r\n                              className=\"inline-flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white font-medium rounded-lg transition-colors\"\r\n                            >\r\n                              <Plus className=\"h-4 w-4\" />\r\n                              Create Domain\r\n                            </Link>\r\n                          )}\r\n                        </div>\r\n                      </td>\r\n                    </tr>\r\n                  ) : (\r\n                    domains.map((domain) => (\r\n                      <SortableRow\r\n                        key={domain.id}\r\n                        domain={domain}\r\n                        isSelected={selectedIds.has(domain.id)}\r\n                        onSelect={handleSelectOne}\r\n                        onDelete={handleDelete}\r\n                        renderStatusBadge={renderStatusBadge}\r\n                        isDragDisabled={isDragDisabled}\r\n                      />\r\n                    ))\r\n                  )}\r\n                </tbody>\r\n              </SortableContext>\r\n            </table>\r\n          </div>\r\n\r\n          {/* Mobile Card View */}\r\n          <div className=\"md:hidden\">\r\n            <SortableContext items={domainIds} strategy={verticalListSortingStrategy}>\r\n              {!domains.length ? (\r\n                <div className=\"rounded-xl border border-gray-100 p-8 text-center\">\r\n                  <div className=\"flex flex-col items-center\">\r\n                    <div className=\"flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 mb-4\">\r\n                      <Book className=\"w-8 h-8 text-gray-400\" />\r\n                    </div>\r\n                    <p className=\"text-gray-500 mb-4\">\r\n                      {hasActiveFilters ? 'No domains match your filters.' : 'No domains found. Create one to get started.'}\r\n                    </p>\r\n                    {hasActiveFilters ? (\r\n                      <button\r\n                        onClick={clearFilters}\r\n                        className=\"inline-flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium rounded-lg transition-colors\"\r\n                      >\r\n                        <X className=\"h-4 w-4\" />\r\n                        Clear filters\r\n                      </button>\r\n                    ) : (\r\n                      <Link\r\n                        to=\"/domains/new\"\r\n                        className=\"inline-flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white font-medium rounded-lg transition-colors\"\r\n                      >\r\n                        <Plus className=\"h-4 w-4\" />\r\n                        Create Domain\r\n                      </Link>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <div className=\"space-y-3\">\r\n                  {domains.map((domain) => (\r\n                    <SortableCard\r\n                      key={domain.id}\r\n                      domain={domain}\r\n                      isSelected={selectedIds.has(domain.id)}\r\n                      onSelect={handleSelectOne}\r\n                      onDelete={handleDelete}\r\n                      renderStatusBadge={renderStatusBadge}\r\n                      isDragDisabled={isDragDisabled}\r\n                    />\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </SortableContext>\r\n          </div>\r\n        </DndContext>\r\n\r\n        <Pagination\r\n          currentPage={page}\r\n          totalPages={totalPages}\r\n          totalCount={totalCount}\r\n          pageSize={pageSize}\r\n          onPageChange={handlePageChange}\r\n          onPageSizeChange={handlePageSizeChange}\r\n        />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\curriculum\\components\\file-uploader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\curriculum\\components\\question-form.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":107,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":107,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3931,3934],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3931,3934],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":139,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":139,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5056,5059],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5056,5059],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":232,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":232,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8867,8870],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8867,8870],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":234,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":234,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8949,8952],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8949,8952],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":245,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":245,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9263,9266],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9263,9266],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":246,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":246,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9319,9322],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9319,9322],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":289,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":289,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10764,10767],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10764,10767],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":292,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":292,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10884,10887],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10884,10887],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":330,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":330,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12329,12332],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12329,12332],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":356,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":356,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13661,13664],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13661,13664],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":381,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":381,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14997,15000],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14997,15000],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":417,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":417,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16812,16815],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16812,16815],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":451,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":451,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19316,19319],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19316,19319],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":574,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":574,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[27643,27646],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[27643,27646],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":600,"column":80,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":600,"endColumn":83,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[29641,29644],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[29641,29644],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":651,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":651,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[32997,33000],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[32997,33000],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":678,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":678,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[34200,34203],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[34200,34203],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":708,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":708,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[35934,35937],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[35934,35937],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":729,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":729,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[36817,36820],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[36817,36820],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\curriculum\\components\\question-list.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":355,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":355,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14002,14005],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14002,14005],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":363,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":363,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14374,14377],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14374,14377],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":364,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":364,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14457,14460],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14457,14460],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":369,"column":67,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":369,"endColumn":70,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14696,14699],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14696,14699],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":398,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":398,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15645,15648],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15645,15648],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":478,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":478,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18535,18538],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18535,18538],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":487,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":487,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18897,18900],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18897,18900],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":500,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":500,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19374,19377],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19374,19377],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":502,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":502,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19493,19496],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19493,19496],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":511,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":511,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19898,19901],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19898,19901],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":590,"column":74,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":590,"endColumn":77,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[22783,22786],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[22783,22786],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":620,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":620,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[24088,24091],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[24088,24091],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":661,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":661,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[26880,26883],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[26880,26883],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":816,"column":67,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":816,"endColumn":70,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[37617,37620],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[37617,37620],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":868,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":868,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[41166,41169],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[41166,41169],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\curriculum\\components\\skill-form.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":70,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":70,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2429,2432],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2429,2432],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useForm } from 'react-hook-form';\r\nimport { zodResolver } from '@hookform/resolvers/zod';\r\nimport { z } from 'zod';\r\nimport { Button } from '@/components/ui/button';\r\nimport {\r\n  Form,\r\n  FormControl,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n  FormDescription,\r\n} from '@/components/ui/form';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { useCreateSkill, useUpdateSkill } from '../hooks/use-skills';\r\nimport { useDomains } from '../hooks/use-domains';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Loader2 } from 'lucide-react';\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from \"@/components/ui/select\"\r\nimport { Database } from '@/lib/database.types';\r\n\r\ntype Skill = Database['public']['Tables']['skills']['Row'];\r\n\r\nconst STATUS_OPTIONS: { value: 'draft' | 'live'; label: string; description?: string }[] = [\r\n  { value: 'draft', label: 'Draft', description: 'Not visible to students' },\r\n  { value: 'live', label: 'Live', description: 'Visible to students' },\r\n];\r\n\r\nconst skillSchema = z.object({\r\n  domain_id: z.string().uuid(),\r\n  slug: z.string()\r\n    .regex(/^[a-z0-9_]+$/, 'Slug must contain only lowercase letters, numbers, and underscores')\r\n    .min(1, 'Slug is required')\r\n    .max(100, 'Slug is too long'),\r\n  title: z.string().min(1, 'Title is required').max(200),\r\n  description: z.string().optional(),\r\n  difficulty_level: z.coerce.number().min(1).max(5),\r\n  sort_order: z.coerce.number().default(0),\r\n  status: z.enum(['draft', 'live']).default('draft'),\r\n});\r\n\r\ntype SkillFormData = z.infer<typeof skillSchema>;\r\n\r\ninterface SkillFormProps {\r\n  initialData?: Skill;\r\n}\r\n\r\nexport function SkillForm({ initialData }: SkillFormProps) {\r\n  const navigate = useNavigate();\r\n  const createSkill = useCreateSkill();\r\n  const updateSkill = useUpdateSkill();\r\n  const { data: domains, isLoading: isLoadingDomains } = useDomains();\r\n\r\n  const form = useForm<SkillFormData>({\r\n    resolver: zodResolver(skillSchema),\r\n    defaultValues: {\r\n      domain_id: initialData?.domain_id || '',\r\n      slug: initialData?.slug || '',\r\n      title: initialData?.title || '',\r\n      description: initialData?.description || '',\r\n      difficulty_level: initialData?.difficulty_level || 1,\r\n      sort_order: initialData?.sort_order || 0,\r\n      status: (initialData as any)?.status || 'draft',\r\n    },\r\n  });\r\n\r\n  const onSubmit = async (data: SkillFormData) => {\r\n    try {\r\n      if (initialData) {\r\n        await updateSkill.mutateAsync({\r\n           id: initialData.id,\r\n           ...data\r\n        });\r\n      } else {\r\n        await createSkill.mutateAsync(data);\r\n      }\r\n      navigate('/skills');\r\n    } catch (error) {\r\n      console.error('Failed to save skill:', error);\r\n      // Ideally show a toast here\r\n    }\r\n  };\r\n\r\n  const isSubmitting = createSkill.isPending || updateSkill.isPending;\r\n\r\n  if (isLoadingDomains) return <Loader2 className=\"animate-spin\" />;\r\n\r\n  return (\r\n    <Form {...form}>\r\n      <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4 md:space-y-6 w-full max-w-2xl px-1\">\r\n        \r\n        <FormField\r\n          control={form.control}\r\n          name=\"domain_id\"\r\n          render={({ field }) => (\r\n            <FormItem>\r\n              <FormLabel>Domain</FormLabel>\r\n              <Select onValueChange={field.onChange} defaultValue={field.value}>\r\n                <FormControl>\r\n                  <SelectTrigger className=\"min-h-[48px] text-base\">\r\n                    <SelectValue placeholder=\"Select a domain\" />\r\n                  </SelectTrigger>\r\n                </FormControl>\r\n                <SelectContent>\r\n                    {domains?.map((domain) => (\r\n                        <SelectItem key={domain.id} value={domain.id}>\r\n                            {domain.title}\r\n                        </SelectItem>\r\n                    ))}\r\n                </SelectContent>\r\n              </Select>\r\n              <FormDescription>\r\n                The domain this skill belongs to.\r\n              </FormDescription>\r\n              <FormMessage />\r\n            </FormItem>\r\n          )}\r\n        />\r\n\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n            <FormField\r\n            control={form.control}\r\n            name=\"title\"\r\n            render={({ field }) => (\r\n                <FormItem>\r\n                <FormLabel>Title</FormLabel>\r\n                <FormControl>\r\n                    <Input placeholder=\"e.g. Addition\" {...field} className=\"min-h-[48px] text-base\" />\r\n                </FormControl>\r\n                <FormMessage />\r\n                </FormItem>\r\n            )}\r\n            />\r\n\r\n            <FormField\r\n            control={form.control}\r\n            name=\"slug\"\r\n            render={({ field }) => (\r\n                <FormItem>\r\n                <FormLabel>Slug</FormLabel>\r\n                <FormControl>\r\n                    <Input placeholder=\"e.g. addition\" {...field} className=\"min-h-[48px] text-base\" />\r\n                </FormControl>\r\n                <FormDescription>\r\n                    Unique identifier (URL-safe).\r\n                </FormDescription>\r\n                <FormMessage />\r\n                </FormItem>\r\n            )}\r\n            />\r\n        </div>\r\n\r\n        <FormField\r\n          control={form.control}\r\n          name=\"description\"\r\n          render={({ field }) => (\r\n            <FormItem>\r\n              <FormLabel>Description</FormLabel>\r\n              <FormControl>\r\n                <Textarea \r\n                  placeholder=\"Describe this skill...\" \r\n                  className=\"resize-none min-h-[100px] text-base\" \r\n                  {...field} \r\n                />\r\n              </FormControl>\r\n              <FormMessage />\r\n            </FormItem>\r\n          )}\r\n        />\r\n\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n             <FormField\r\n                control={form.control}\r\n                name=\"difficulty_level\"\r\n                render={({ field }) => (\r\n                    <FormItem>\r\n                    <FormLabel>Difficulty Level (1-5)</FormLabel>\r\n                    <FormControl>\r\n                        <Input type=\"number\" min={1} max={5} {...field} className=\"min-h-[48px] text-base\" />\r\n                    </FormControl>\r\n                    <FormMessage />\r\n                    </FormItem>\r\n                )}\r\n            />\r\n\r\n            <FormField\r\n            control={form.control}\r\n            name=\"sort_order\"\r\n            render={({ field }) => (\r\n                <FormItem>\r\n                <FormLabel>Sort Order</FormLabel>\r\n                <FormControl>\r\n                    <Input type=\"number\" {...field} className=\"min-h-[48px] text-base\" />\r\n                </FormControl>\r\n                <FormDescription>\r\n                    Order in which this appears in lists.\r\n                </FormDescription>\r\n                <FormMessage />\r\n                </FormItem>\r\n            )}\r\n            />\r\n        </div>\r\n\r\n        <FormField\r\n          control={form.control}\r\n          name=\"status\"\r\n          render={({ field }) => (\r\n            <FormItem>\r\n              <FormLabel>Status</FormLabel>\r\n              <Select onValueChange={field.onChange} defaultValue={field.value}>\r\n                <FormControl>\r\n                  <SelectTrigger className=\"min-h-[48px] text-base\">\r\n                    <SelectValue placeholder=\"Select status\" />\r\n                  </SelectTrigger>\r\n                </FormControl>\r\n                <SelectContent>\r\n                  {STATUS_OPTIONS.map((option) => (\r\n                    <SelectItem key={option.value} value={option.value}>\r\n                      {option.label}{option.description ? ` - ${option.description}` : ''}\r\n                    </SelectItem>\r\n                  ))}\r\n                </SelectContent>\r\n              </Select>\r\n              <FormDescription>\r\n                Controls visibility of this skill.\r\n              </FormDescription>\r\n              <FormMessage />\r\n            </FormItem>\r\n          )}\r\n        />\r\n\r\n        <div className=\"flex flex-col-reverse gap-3 pt-4 sm:flex-row sm:gap-4\">\r\n          <Button type=\"button\" variant=\"outline\" onClick={() => navigate('/skills')} className=\"w-full sm:w-auto min-h-[48px] px-6\">\r\n            Cancel\r\n          </Button>\r\n          <Button type=\"submit\" disabled={isSubmitting} className=\"w-full sm:w-auto min-h-[48px] px-6\">\r\n            {isSubmitting && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\r\n            {initialData ? 'Update Skill' : 'Create Skill'}\r\n          </Button>\r\n        </div>\r\n      </form>\r\n    </Form>\r\n  );\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\curriculum\\components\\skill-list.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'skills' logical expression could make the dependencies of useMemo Hook (at line 330) change on every render. To fix this, wrap the initialization of 'skills' in its own useMemo() Hook.","line":326,"column":11,"nodeType":"VariableDeclarator","endLine":326,"endColumn":45}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":330,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":330,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13449,13452],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13449,13452],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":338,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":338,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13816,13819],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13816,13819],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":339,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":339,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13896,13899],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13896,13899],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":344,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":344,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14123,14126],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14123,14126],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":373,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":373,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15054,15057],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15054,15057],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":517,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":517,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20317,20320],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20317,20320],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":712,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":712,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[33940,33943],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[33940,33943],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":764,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":764,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[37447,37450],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[37447,37450],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/* eslint-disable @typescript-eslint/no-explicit-any */\r\nimport { Link } from 'react-router-dom';\r\nimport { usePaginatedSkills, useDeleteSkill, useBulkDeleteSkills, useBulkUpdateSkillsStatus, useDuplicateSkill, useUpdateSkillOrder } from '../hooks/use-skills';\r\nimport { useDomains } from '../hooks/use-domains';\r\nimport { useState, useEffect, useMemo } from 'react';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { Pagination } from '@/components/ui/pagination';\r\nimport { SortableHeader } from '@/components/ui/sortable-header';\r\nimport { DataToolbar } from '@/components/ui/data-toolbar';\r\nimport type { DataColumn } from '@/lib/data-utils';\r\nimport { Plus, CheckSquare, Square, Search, X, Trash, Layers, GripVertical } from 'lucide-react';\r\n\r\nconst SKILL_COLUMNS: DataColumn[] = [\r\n    { key: 'title', header: 'title' },\r\n    { key: 'slug', header: 'slug' },\r\n    { key: 'domains', header: 'domain_title', transform: (v: unknown) => (v as { title?: string } | null)?.title ?? '' },\r\n    { key: 'difficulty_level', header: 'difficulty_level' },\r\n    { key: 'sort_order', header: 'sort_order' },\r\n    { key: 'status', header: 'status' },\r\n];\r\nimport {\r\n    DndContext,\r\n    closestCenter,\r\n    KeyboardSensor,\r\n    PointerSensor,\r\n    TouchSensor,\r\n    useSensor,\r\n    useSensors,\r\n    DragEndEvent,\r\n} from '@dnd-kit/core';\r\nimport {\r\n    arrayMove,\r\n    SortableContext,\r\n    sortableKeyboardCoordinates,\r\n    useSortable,\r\n    verticalListSortingStrategy,\r\n} from '@dnd-kit/sortable';\r\nimport { CSS } from '@dnd-kit/utilities';\r\n\r\nconst DEFAULT_PAGE_SIZE = 10;\r\n\r\ninterface Skill {\r\n    id: string;\r\n    title: string;\r\n    slug: string;\r\n    sort_order: number;\r\n    status?: string;\r\n    difficulty_level?: number;\r\n    domain_id?: string;\r\n    domains?: { title: string } | null;\r\n}\r\n\r\ninterface SortableRowProps {\r\n    skill: Skill;\r\n    isSelected: boolean;\r\n    onSelect: (id: string) => void;\r\n    onDelete: (id: string) => void;\r\n    onDuplicate: (id: string) => void;\r\n    renderStatusBadge: (status: string) => JSX.Element;\r\n    isDragDisabled: boolean;\r\n    isDuplicating: boolean;\r\n}\r\n\r\nfunction SortableRow({ skill, isSelected, onSelect, onDelete, onDuplicate, renderStatusBadge, isDragDisabled, isDuplicating }: SortableRowProps) {\r\n    const {\r\n        attributes,\r\n        listeners,\r\n        setNodeRef,\r\n        transform,\r\n        transition,\r\n        isDragging,\r\n    } = useSortable({ id: skill.id, disabled: isDragDisabled });\r\n\r\n    const style = {\r\n        transform: CSS.Transform.toString(transform),\r\n        transition,\r\n        opacity: isDragging ? 0.5 : 1,\r\n        boxShadow: isDragging ? '0 4px 12px rgba(0, 0, 0, 0.15)' : undefined,\r\n        backgroundColor: isDragging ? '#f9fafb' : undefined,\r\n        position: 'relative' as const,\r\n        zIndex: isDragging ? 10 : undefined,\r\n    };\r\n\r\n    return (\r\n        <tr ref={setNodeRef} style={style} className=\"hover:bg-gray-50 transition-colors\">\r\n            <td className=\"px-2 py-4 w-10\">\r\n                {!isDragDisabled ? (\r\n                    <button\r\n                        {...attributes}\r\n                        {...listeners}\r\n                        className=\"p-2 text-gray-400 hover:text-gray-600 cursor-grab active:cursor-grabbing touch-none\"\r\n                        aria-label=\"Drag to reorder\"\r\n                    >\r\n                        <GripVertical className=\"h-5 w-5\" />\r\n                    </button>\r\n                ) : (\r\n                    <div className=\"p-2 text-gray-200\">\r\n                        <GripVertical className=\"h-5 w-5\" />\r\n                    </div>\r\n                )}\r\n            </td>\r\n            <td className=\"px-4 py-4\">\r\n                <button onClick={() => onSelect(skill.id)} className=\"text-gray-400 hover:text-gray-600\">\r\n                    {isSelected ? <CheckSquare className=\"h-5 w-5 text-purple-600\" /> : <Square className=\"h-5 w-5\" />}\r\n                </button>\r\n            </td>\r\n            <td className=\"px-6 py-4\">\r\n                <div>\r\n                    <span className=\"font-medium text-gray-900\">{skill.title}</span>\r\n                    <p className=\"text-sm text-gray-500\">{skill.slug}</p>\r\n                </div>\r\n            </td>\r\n            <td className=\"px-6 py-4\">\r\n                <span className=\"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm font-medium\">\r\n                    {skill.domains?.title}\r\n                </span>\r\n            </td>\r\n            <td className=\"px-6 py-4\">\r\n                <span className=\"inline-flex items-center justify-center w-8 h-8 rounded-lg bg-gray-100 text-gray-700 font-semibold text-sm\">\r\n                    {skill.difficulty_level}\r\n                </span>\r\n            </td>\r\n            <td className=\"px-6 py-4\">\r\n                {renderStatusBadge(skill.status || 'draft')}\r\n            </td>\r\n            <td className=\"px-6 py-4\">\r\n                {!skill.domains ? (\r\n                    <span className=\"px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-sm font-medium\">\r\n                        Yes\r\n                    </span>\r\n                ) : (\r\n                    <span className=\"px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-sm font-medium\">\r\n                        No\r\n                    </span>\r\n                )}\r\n            </td>\r\n            <td className=\"px-6 py-4 text-right\">\r\n                <div className=\"flex items-center justify-end gap-2\">\r\n                    <Link\r\n                        to={`/skills/${skill.id}/edit`}\r\n                        className=\"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium hover:bg-blue-200 transition-colors\"\r\n                    >\r\n                        Edit\r\n                    </Link>\r\n                    <button\r\n                        onClick={() => onDuplicate(skill.id)}\r\n                        disabled={isDuplicating}\r\n                        className=\"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm font-medium hover:bg-purple-200 transition-colors disabled:opacity-50\"\r\n                    >\r\n                        Duplicate\r\n                    </button>\r\n                    <button\r\n                        onClick={() => onDelete(skill.id)}\r\n                        className=\"px-3 py-1 bg-red-100 text-red-700 rounded-full text-sm font-medium hover:bg-red-200 transition-colors\"\r\n                    >\r\n                        Delete\r\n                    </button>\r\n                </div>\r\n            </td>\r\n        </tr>\r\n    );\r\n}\r\n\r\nfunction SortableCard({ skill, isSelected, onSelect, onDelete, onDuplicate, renderStatusBadge, isDragDisabled, isDuplicating }: SortableRowProps) {\r\n    const {\r\n        attributes,\r\n        listeners,\r\n        setNodeRef,\r\n        transform,\r\n        transition,\r\n        isDragging,\r\n    } = useSortable({ id: skill.id, disabled: isDragDisabled });\r\n\r\n    const style = {\r\n        transform: CSS.Transform.toString(transform),\r\n        transition,\r\n        opacity: isDragging ? 0.5 : 1,\r\n        boxShadow: isDragging ? '0 8px 16px rgba(0, 0, 0, 0.15)' : undefined,\r\n        position: 'relative' as const,\r\n        zIndex: isDragging ? 10 : undefined,\r\n    };\r\n\r\n    return (\r\n        <div\r\n            ref={setNodeRef}\r\n            style={style}\r\n            className={`bg-white rounded-xl border ${isSelected ? 'border-purple-300 bg-purple-50' : 'border-gray-200'} p-4 space-y-3 transition-colors`}\r\n        >\r\n            <div className=\"flex items-start gap-3\">\r\n                {!isDragDisabled ? (\r\n                    <button\r\n                        {...attributes}\r\n                        {...listeners}\r\n                        className=\"p-2 text-gray-400 hover:text-gray-600 cursor-grab active:cursor-grabbing touch-none flex-shrink-0\"\r\n                        aria-label=\"Drag to reorder\"\r\n                    >\r\n                        <GripVertical className=\"h-5 w-5\" />\r\n                    </button>\r\n                ) : (\r\n                    <div className=\"p-2 text-gray-200 flex-shrink-0\">\r\n                        <GripVertical className=\"h-5 w-5\" />\r\n                    </div>\r\n                )}\r\n                <button\r\n                    onClick={() => onSelect(skill.id)}\r\n                    className=\"p-2 text-gray-400 hover:text-gray-600 flex-shrink-0\"\r\n                >\r\n                    {isSelected ? <CheckSquare className=\"h-5 w-5 text-purple-600\" /> : <Square className=\"h-5 w-5\" />}\r\n                </button>\r\n                <div className=\"flex-1 min-w-0\">\r\n                    <h3 className=\"font-medium text-gray-900 truncate\">{skill.title}</h3>\r\n                    <p className=\"text-sm text-gray-500 truncate\">{skill.slug}</p>\r\n                </div>\r\n                <div className=\"flex-shrink-0\">\r\n                    {renderStatusBadge(skill.status || 'draft')}\r\n                </div>\r\n            </div>\r\n            <div className=\"flex flex-wrap items-center gap-2 text-sm\">\r\n                {skill.domains?.title && (\r\n                    <span className=\"px-2 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-medium\">\r\n                        {skill.domains.title}\r\n                    </span>\r\n                )}\r\n                <span className=\"inline-flex items-center gap-1 text-gray-600\">\r\n                    <span className=\"text-xs\">Difficulty:</span>\r\n                    <span className=\"inline-flex items-center justify-center w-6 h-6 rounded bg-gray-100 text-gray-700 font-semibold text-xs\">\r\n                        {skill.difficulty_level}\r\n                    </span>\r\n                </span>\r\n                {!skill.domains && (\r\n                    <span className=\"px-2 py-1 bg-orange-100 text-orange-700 rounded-full text-xs font-medium\">\r\n                        Orphan\r\n                    </span>\r\n                )}\r\n            </div>\r\n            <div className=\"flex items-center justify-end gap-2 pt-2 border-t border-gray-100\">\r\n                <Link\r\n                    to={`/skills/${skill.id}/edit`}\r\n                    className=\"px-4 py-2 bg-blue-100 text-blue-700 rounded-full text-sm font-medium hover:bg-blue-200 transition-colors\"\r\n                >\r\n                    Edit\r\n                </Link>\r\n                <button\r\n                    onClick={() => onDuplicate(skill.id)}\r\n                    disabled={isDuplicating}\r\n                    className=\"px-4 py-2 bg-purple-100 text-purple-700 rounded-full text-sm font-medium hover:bg-purple-200 transition-colors disabled:opacity-50\"\r\n                >\r\n                    Duplicate\r\n                </button>\r\n                <button\r\n                    onClick={() => onDelete(skill.id)}\r\n                    className=\"px-4 py-2 bg-red-100 text-red-700 rounded-full text-sm font-medium hover:bg-red-200 transition-colors\"\r\n                >\r\n                    Delete\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport function SkillList() {\r\n    const [selectedDomainId, setSelectedDomainId] = useState<string>('all');\r\n    const [statusFilter, setStatusFilter] = useState<'all' | 'draft' | 'published' | 'live'>('all');\r\n    const [searchQuery, setSearchQuery] = useState<string>('');\r\n    const [debouncedSearch, setDebouncedSearch] = useState<string>('');\r\n    const [selectedIds, setSelectedIds] = useState<Set<string>>(new Set());\r\n    const [page, setPage] = useState(1);\r\n    const [pageSize, setPageSize] = useState(DEFAULT_PAGE_SIZE);\r\n    const [sortBy, setSortBy] = useState<string>('sort_order');\r\n    const [sortOrder, setSortOrder] = useState<'asc' | 'desc'>('asc');\r\n\r\n    const { data: paginatedData, isLoading } = usePaginatedSkills({\r\n        page,\r\n        pageSize,\r\n        search: debouncedSearch,\r\n        status: statusFilter,\r\n        domainId: selectedDomainId,\r\n        sortBy,\r\n        sortOrder,\r\n    });\r\n    const { data: domains } = useDomains();\r\n    const deleteSkill = useDeleteSkill();\r\n    const bulkDelete = useBulkDeleteSkills();\r\n    const bulkUpdateStatus = useBulkUpdateSkillsStatus();\r\n    const duplicateSkill = useDuplicateSkill();\r\n    const updateSkillOrder = useUpdateSkillOrder();\r\n    const { toast } = useToast();\r\n    \r\n    const showToast = (title: string, type: 'success' | 'error' = 'success') => {\r\n        toast({\r\n            title,\r\n            variant: type === 'error' ? 'destructive' : 'default',\r\n        });\r\n    };\r\n\r\n    const sensors = useSensors(\r\n        useSensor(PointerSensor, {\r\n            activationConstraint: {\r\n                distance: 8,\r\n            },\r\n        }),\r\n        useSensor(TouchSensor, {\r\n            activationConstraint: {\r\n                delay: 200,\r\n                tolerance: 5,\r\n            },\r\n        }),\r\n        useSensor(KeyboardSensor, {\r\n            coordinateGetter: sortableKeyboardCoordinates,\r\n        })\r\n    );\r\n\r\n    useEffect(() => {\r\n        const timer = setTimeout(() => {\r\n            setDebouncedSearch(searchQuery);\r\n            setPage(1);\r\n        }, 300);\r\n        return () => clearTimeout(timer);\r\n    }, [searchQuery]);\r\n\r\n    useEffect(() => {\r\n        setSelectedIds(new Set());\r\n        setPage(1);\r\n    }, [selectedDomainId, statusFilter]);\r\n\r\n    const skills = paginatedData?.data ?? [];\r\n    const totalCount = paginatedData?.totalCount ?? 0;\r\n    const totalPages = paginatedData?.totalPages ?? 1;\r\n\r\n    const skillIds = useMemo(() => skills.map((s: any) => s.id), [skills]);\r\n\r\n    const isDragDisabled = Boolean(debouncedSearch) || statusFilter !== 'all' || selectedDomainId !== 'all' || sortBy !== 'sort_order';\r\n\r\n    const handleDragEnd = async (event: DragEndEvent) => {\r\n        const { active, over } = event;\r\n\r\n        if (over && active.id !== over.id) {\r\n            const oldIndex = skills.findIndex((s: any) => s.id === active.id);\r\n            const newIndex = skills.findIndex((s: any) => s.id === over.id);\r\n\r\n            if (oldIndex !== -1 && newIndex !== -1) {\r\n                const reorderedSkills = arrayMove(skills, oldIndex, newIndex);\r\n\r\n                const updates = reorderedSkills.map((skill: any, index: number) => ({\r\n                    id: skill.id,\r\n                    sort_order: index + 1 + (page - 1) * pageSize,\r\n                }));\r\n\r\n                try {\r\n                    await updateSkillOrder.mutateAsync(updates);\r\n                    showToast('Skill order updated', 'success');\r\n                } catch {\r\n                    showToast('Failed to update skill order', 'error');\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleSort = (column: string) => {\r\n        if (sortBy === column) {\r\n            setSortOrder(sortOrder === 'asc' ? 'desc' : 'asc');\r\n        } else {\r\n            setSortBy(column);\r\n            setSortOrder('asc');\r\n        }\r\n        setPage(1);\r\n    };\r\n\r\n    const handleSelectAll = () => {\r\n        if (selectedIds.size === skills.length) {\r\n            setSelectedIds(new Set());\r\n        } else {\r\n            setSelectedIds(new Set(skills.map((s: any) => s.id)));\r\n        }\r\n    };\r\n\r\n    const handleSelectOne = (id: string) => {\r\n        const newSelected = new Set(selectedIds);\r\n        if (newSelected.has(id)) {\r\n            newSelected.delete(id);\r\n        } else {\r\n            newSelected.add(id);\r\n        }\r\n        setSelectedIds(newSelected);\r\n    };\r\n\r\n    const handleBulkDelete = async () => {\r\n        if (selectedIds.size === 0) return;\r\n        if (confirm(`Are you sure you want to delete ${selectedIds.size} skill(s)?`)) {\r\n            try {\r\n                await bulkDelete.mutateAsync(Array.from(selectedIds));\r\n                showToast(`${selectedIds.size} skill(s) deleted`, 'success');\r\n                setSelectedIds(new Set());\r\n            } catch {\r\n                showToast('Failed to delete skills', 'error');\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleMarkLive = async () => {\r\n        if (selectedIds.size === 0) return;\r\n        try {\r\n            await bulkUpdateStatus.mutateAsync({ ids: Array.from(selectedIds), status: 'live' });\r\n            showToast(`${selectedIds.size} skill(s) marked as live`, 'success');\r\n            setSelectedIds(new Set());\r\n        } catch {\r\n            showToast('Failed to update skills', 'error');\r\n        }\r\n    };\r\n\r\n    const handleMarkDraft = async () => {\r\n        if (selectedIds.size === 0) return;\r\n        try {\r\n            await bulkUpdateStatus.mutateAsync({ ids: Array.from(selectedIds), status: 'draft' });\r\n            showToast(`${selectedIds.size} skill(s) marked as draft`, 'success');\r\n            setSelectedIds(new Set());\r\n        } catch {\r\n            showToast('Failed to update skills', 'error');\r\n        }\r\n    };\r\n\r\n    const handleMarkPublished = async () => {\r\n        if (selectedIds.size === 0) return;\r\n        try {\r\n            await bulkUpdateStatus.mutateAsync({ ids: Array.from(selectedIds), status: 'published' });\r\n            showToast(`${selectedIds.size} skill(s) marked as published (ready for release)`, 'success');\r\n            setSelectedIds(new Set());\r\n        } catch {\r\n            showToast('Failed to update skills', 'error');\r\n        }\r\n    };\r\n\r\n    const handleDelete = async (id: string) => {\r\n        if (confirm('Are you sure you want to delete this skill?')) {\r\n            try {\r\n                await deleteSkill.mutateAsync(id);\r\n                showToast('Skill deleted', 'success');\r\n            } catch {\r\n                showToast('Failed to delete skill', 'error');\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleDuplicate = async (id: string) => {\r\n        try {\r\n            await duplicateSkill.mutateAsync(id);\r\n            showToast('Skill duplicated', 'success');\r\n        } catch {\r\n            showToast('Failed to duplicate skill', 'error');\r\n        }\r\n    };\r\n\r\n    const handlePageChange = (newPage: number) => {\r\n        setPage(newPage);\r\n        setSelectedIds(new Set());\r\n    };\r\n\r\n    const handlePageSizeChange = (newPageSize: number) => {\r\n        setPageSize(newPageSize);\r\n        setPage(1);\r\n        setSelectedIds(new Set());\r\n    };\r\n\r\n    const isAllSelected = skills.length ? selectedIds.size === skills.length : false;\r\n    const hasActiveFilters = searchQuery || statusFilter !== 'all' || selectedDomainId !== 'all';\r\n\r\n    const clearFilters = () => {\r\n        setSearchQuery('');\r\n        setStatusFilter('all');\r\n        setSelectedDomainId('all');\r\n        setPage(1);\r\n    };\r\n\r\n    const renderStatusBadge = (status: string) => {\r\n        switch (status) {\r\n            case 'live':\r\n                return (\r\n                    <span className=\"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium\">\r\n                        Live\r\n                    </span>\r\n                );\r\n            case 'published':\r\n                return (\r\n                    <span className=\"px-3 py-1 bg-amber-100 text-amber-800 rounded-full text-sm font-medium\">\r\n                        Published\r\n                    </span>\r\n                );\r\n            default:\r\n                return (\r\n                    <span className=\"px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-sm font-medium\">\r\n                        Draft\r\n                    </span>\r\n                );\r\n        }\r\n    };\r\n\r\n    if (isLoading) {\r\n        return (\r\n            <div className=\"flex items-center justify-center h-64\">\r\n                <div className=\"text-center\">\r\n                    <div className=\"inline-block h-8 w-8 animate-spin rounded-full border-4 border-purple-600 border-r-transparent\"></div>\r\n                    <p className=\"mt-4 text-gray-500\">Loading skills...</p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-4 md:space-y-6\">\r\n            <div className=\"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between\">\r\n                <div>\r\n                    <h2 className=\"text-2xl md:text-3xl font-bold text-gray-900\">Skills</h2>\r\n                    <p className=\"mt-1 text-sm md:text-base text-gray-500\">Manage learning skills</p>\r\n                </div>\r\n                <div className=\"flex flex-col gap-2 sm:flex-row sm:items-center\">\r\n                    <DataToolbar\r\n                        data={skills as any[]}\r\n                        columns={SKILL_COLUMNS}\r\n                        entityName=\"Skills\"\r\n                        importDisabled={true}\r\n                        importDisabledMessage=\"Skill import is not available. Please create skills manually.\"\r\n                    />\r\n                    <Link\r\n                        to=\"/skills/new\"\r\n                        className=\"inline-flex items-center justify-center gap-2 px-5 py-3 min-h-[48px] bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-medium rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl w-full sm:w-auto\"\r\n                    >\r\n                        <Plus className=\"h-5 w-5\" />\r\n                        <span>New Skill</span>\r\n                    </Link>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"bg-white rounded-2xl shadow-sm border border-gray-100 p-3 md:p-4\">\r\n                <div className=\"space-y-3 md:space-y-4 mb-4\">\r\n                    <div className=\"flex flex-col gap-3 sm:flex-row sm:items-center\">\r\n                        <div className=\"relative flex-1\">\r\n                            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400\" />\r\n                            <input\r\n                                type=\"text\"\r\n                                placeholder=\"Search skills...\"\r\n                                value={searchQuery}\r\n                                onChange={(e) => setSearchQuery(e.target.value)}\r\n                                className=\"w-full pl-10 pr-4 py-3 min-h-[48px] rounded-lg border border-gray-200 bg-white text-gray-700 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-colors text-base\"\r\n                            />\r\n                        </div>\r\n                        {hasActiveFilters && (\r\n                            <button\r\n                                onClick={clearFilters}\r\n                                className=\"inline-flex items-center justify-center gap-1 px-4 py-3 min-h-[48px] text-sm font-medium text-gray-600 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors\"\r\n                            >\r\n                                <X className=\"h-4 w-4\" />\r\n                                <span>Clear filters</span>\r\n                            </button>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"flex flex-col gap-3 sm:flex-row sm:flex-wrap sm:items-center\">\r\n                        <div className=\"flex flex-col gap-1 sm:flex-row sm:items-center sm:gap-2 w-full sm:w-auto\">\r\n                            <label className=\"text-sm font-medium text-gray-600\">Domain:</label>\r\n                            <select\r\n                                value={selectedDomainId}\r\n                                onChange={(e) => setSelectedDomainId(e.target.value)}\r\n                                className=\"px-3 py-3 min-h-[48px] rounded-lg border border-gray-200 bg-white text-gray-700 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-colors text-base w-full sm:w-auto\"\r\n                            >\r\n                                <option value=\"all\">All Domains</option>\r\n                                {domains?.map(domain => (\r\n                                    <option key={domain.id} value={domain.id}>{domain.title}</option>\r\n                                ))}\r\n                            </select>\r\n                        </div>\r\n                        <div className=\"flex flex-col gap-1 sm:flex-row sm:items-center sm:gap-2 w-full sm:w-auto\">\r\n                            <label className=\"text-sm font-medium text-gray-600\">Status:</label>\r\n                            <select\r\n                                value={statusFilter}\r\n                                onChange={(e) => setStatusFilter(e.target.value as 'all' | 'draft' | 'published' | 'live')}\r\n                                className=\"px-3 py-3 min-h-[48px] rounded-lg border border-gray-200 bg-white text-gray-700 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-colors text-base w-full sm:w-auto\"\r\n                            >\r\n                                <option value=\"all\">All Status</option>\r\n                                <option value=\"draft\">Draft</option>\r\n                                <option value=\"published\">Published</option>\r\n                                <option value=\"live\">Live</option>\r\n                            </select>\r\n                        </div>\r\n\r\n                        {isDragDisabled && sortBy === 'sort_order' && (\r\n                            <span className=\"text-xs md:text-sm text-amber-600 bg-amber-50 px-3 py-2 rounded-lg\">\r\n                                Clear filters to enable drag reordering\r\n                            </span>\r\n                        )}\r\n\r\n                        {selectedIds.size > 0 && (\r\n                            <div className=\"flex flex-wrap items-center gap-2 sm:ml-auto\">\r\n                                <span className=\"text-sm text-gray-600 w-full sm:w-auto\">{selectedIds.size} selected</span>\r\n                                <button\r\n                                    onClick={handleMarkPublished}\r\n                                    disabled={bulkUpdateStatus.isPending}\r\n                                    className=\"inline-flex items-center justify-center gap-1 px-4 py-3 min-h-[48px] text-sm font-medium text-amber-600 hover:text-amber-700 hover:bg-amber-50 rounded-lg transition-colors flex-1 sm:flex-none\"\r\n                                >\r\n                                    Mark Published\r\n                                </button>\r\n                                <button\r\n                                    onClick={handleMarkLive}\r\n                                    disabled={bulkUpdateStatus.isPending}\r\n                                    className=\"inline-flex items-center justify-center gap-1 px-4 py-3 min-h-[48px] text-sm font-medium text-green-600 hover:text-green-700 hover:bg-green-50 rounded-lg transition-colors flex-1 sm:flex-none\"\r\n                                >\r\n                                    Mark Live\r\n                                </button>\r\n                                <button\r\n                                    onClick={handleMarkDraft}\r\n                                    disabled={bulkUpdateStatus.isPending}\r\n                                    className=\"inline-flex items-center justify-center gap-1 px-4 py-3 min-h-[48px] text-sm font-medium text-gray-600 hover:text-gray-700 hover:bg-gray-50 rounded-lg transition-colors flex-1 sm:flex-none\"\r\n                                >\r\n                                    Mark Draft\r\n                                </button>\r\n                                <button\r\n                                    onClick={handleBulkDelete}\r\n                                    disabled={bulkDelete.isPending}\r\n                                    className=\"inline-flex items-center gap-1 px-3 py-2 text-sm font-medium text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors\"\r\n                                >\r\n                                    <Trash className=\"h-4 w-4\" />\r\n                                    Delete\r\n                                </button>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Desktop Table View */}\r\n                <DndContext\r\n                    sensors={sensors}\r\n                    collisionDetection={closestCenter}\r\n                    onDragEnd={handleDragEnd}\r\n                >\r\n                    {/* Desktop Table View */}\r\n                    <div className=\"hidden md:block overflow-hidden rounded-xl border border-gray-100\">\r\n                        <table className=\"w-full\">\r\n                            <thead>\r\n                                <tr className=\"bg-gray-50 border-b border-gray-100\">\r\n                                    <th className=\"text-left px-2 py-4 w-10\">\r\n                                        <span className=\"sr-only\">Drag handle</span>\r\n                                    </th>\r\n                                    <th className=\"text-left px-4 py-4 w-10\">\r\n                                        <button onClick={handleSelectAll} className=\"text-gray-400 hover:text-gray-600\">\r\n                                            {isAllSelected && skills.length > 0 ? <CheckSquare className=\"h-5 w-5 text-purple-600\" /> : <Square className=\"h-5 w-5\" />}\r\n                                        </button>\r\n                                    </th>\r\n                                    <th className=\"text-left px-6 py-4\">\r\n                                        <SortableHeader\r\n                                            label=\"Title\"\r\n                                            column=\"title\"\r\n                                            currentSortBy={sortBy}\r\n                                            currentSortOrder={sortOrder}\r\n                                            onSort={handleSort}\r\n                                        />\r\n                                    </th>\r\n                                    <th className=\"text-left px-6 py-4 text-sm font-semibold text-gray-600\">Domain</th>\r\n                                    <th className=\"text-left px-6 py-4\">\r\n                                        <SortableHeader\r\n                                            label=\"Difficulty\"\r\n                                            column=\"difficulty_level\"\r\n                                            currentSortBy={sortBy}\r\n                                            currentSortOrder={sortOrder}\r\n                                            onSort={handleSort}\r\n                                        />\r\n                                    </th>\r\n                                    <th className=\"text-left px-6 py-4\">\r\n                                        <SortableHeader\r\n                                            label=\"Status\"\r\n                                            column=\"status\"\r\n                                            currentSortBy={sortBy}\r\n                                            currentSortOrder={sortOrder}\r\n                                            onSort={handleSort}\r\n                                        />\r\n                                    </th>\r\n                                    <th className=\"text-left px-6 py-4 text-sm font-semibold text-gray-600\">Orphan</th>\r\n                                    <th className=\"text-right px-6 py-4 text-sm font-semibold text-gray-600\">Actions</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <SortableContext items={skillIds} strategy={verticalListSortingStrategy}>\r\n                                <tbody className=\"divide-y divide-gray-100\">\r\n                                    {!skills.length ? (\r\n                                        <tr>\r\n                                            <td colSpan={8} className=\"px-6 py-12 text-center\">\r\n                                                <div className=\"flex flex-col items-center\">\r\n                                                    <div className=\"flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 mb-4\">\r\n                                                        <Layers className=\"w-8 h-8 text-gray-400\" />\r\n                                                    </div>\r\n                                                    <p className=\"text-gray-500 mb-4\">\r\n                                                        {hasActiveFilters ? 'No skills match your filters.' : 'No skills found. Create one to get started.'}\r\n                                                    </p>\r\n                                                    {hasActiveFilters ? (\r\n                                                        <button\r\n                                                            onClick={clearFilters}\r\n                                                            className=\"inline-flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium rounded-lg transition-colors\"\r\n                                                        >\r\n                                                            <X className=\"h-4 w-4\" />\r\n                                                            Clear filters\r\n                                                        </button>\r\n                                                    ) : (\r\n                                                        <Link\r\n                                                            to=\"/skills/new\"\r\n                                                            className=\"inline-flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white font-medium rounded-lg transition-colors\"\r\n                                                        >\r\n                                                            <Plus className=\"h-4 w-4\" />\r\n                                                            Create Skill\r\n                                                        </Link>\r\n                                                    )}\r\n                                                </div>\r\n                                            </td>\r\n                                        </tr>\r\n                                    ) : (\r\n                                        skills.map((skill: any) => (\r\n                                            <SortableRow\r\n                                                key={skill.id}\r\n                                                skill={skill}\r\n                                                isSelected={selectedIds.has(skill.id)}\r\n                                                onSelect={handleSelectOne}\r\n                                                onDelete={handleDelete}\r\n                                                onDuplicate={handleDuplicate}\r\n                                                renderStatusBadge={renderStatusBadge}\r\n                                                isDragDisabled={isDragDisabled}\r\n                                                isDuplicating={duplicateSkill.isPending}\r\n                                            />\r\n                                        ))\r\n                                    )}\r\n                                </tbody>\r\n                            </SortableContext>\r\n                        </table>\r\n                    </div>\r\n\r\n                    {/* Mobile Card View */}\r\n                    <div className=\"md:hidden\">\r\n                        <SortableContext items={skillIds} strategy={verticalListSortingStrategy}>\r\n                            {!skills.length ? (\r\n                                <div className=\"rounded-xl border border-gray-100 p-8 text-center\">\r\n                                    <div className=\"flex flex-col items-center\">\r\n                                        <div className=\"flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 mb-4\">\r\n                                            <Layers className=\"w-8 h-8 text-gray-400\" />\r\n                                        </div>\r\n                                        <p className=\"text-gray-500 mb-4\">\r\n                                            {hasActiveFilters ? 'No skills match your filters.' : 'No skills found. Create one to get started.'}\r\n                                        </p>\r\n                                        {hasActiveFilters ? (\r\n                                            <button\r\n                                                onClick={clearFilters}\r\n                                                className=\"inline-flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium rounded-lg transition-colors\"\r\n                                            >\r\n                                                <X className=\"h-4 w-4\" />\r\n                                                Clear filters\r\n                                            </button>\r\n                                        ) : (\r\n                                            <Link\r\n                                                to=\"/skills/new\"\r\n                                                className=\"inline-flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white font-medium rounded-lg transition-colors\"\r\n                                            >\r\n                                                <Plus className=\"h-4 w-4\" />\r\n                                                Create Skill\r\n                                            </Link>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            ) : (\r\n                                <div className=\"space-y-3\">\r\n                                    {skills.map((skill: any) => (\r\n                                        <SortableCard\r\n                                            key={skill.id}\r\n                                            skill={skill}\r\n                                            isSelected={selectedIds.has(skill.id)}\r\n                                            onSelect={handleSelectOne}\r\n                                            onDelete={handleDelete}\r\n                                            onDuplicate={handleDuplicate}\r\n                                            renderStatusBadge={renderStatusBadge}\r\n                                            isDragDisabled={isDragDisabled}\r\n                                            isDuplicating={duplicateSkill.isPending}\r\n                                        />\r\n                                    ))}\r\n                                </div>\r\n                            )}\r\n                        </SortableContext>\r\n                    </div>\r\n                </DndContext>\r\n\r\n                <Pagination\r\n                    currentPage={page}\r\n                    totalPages={totalPages}\r\n                    totalCount={totalCount}\r\n                    pageSize={pageSize}\r\n                    onPageChange={handlePageChange}\r\n                    onPageSizeChange={handlePageSizeChange}\r\n                />\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\curriculum\\hooks\\use-dashboard.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":93,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":93,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4871,4874],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4871,4874],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":94,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":94,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4937,4940],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4937,4940],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":141,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":141,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6515,6518],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6515,6518],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":141,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":141,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6535,6538],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6535,6538],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":152,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":152,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6842,6845],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6842,6845],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":152,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":152,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6862,6865],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6862,6865],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":163,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":163,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7171,7174],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7171,7174],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":163,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":163,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7191,7194],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7191,7194],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\curriculum\\hooks\\use-domains.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":136,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":136,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3810,3813],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3810,3813],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":137,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":137,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3843,3846],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3843,3846],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":157,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":157,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4488,4491],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4488,4491],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":158,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":158,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4529,4532],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4529,4532],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":180,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":180,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5244,5247],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5244,5247],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":181,"column":69,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":181,"endColumn":72,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5318,5321],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5318,5321],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":199,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":199,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5869,5872],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5869,5872],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":200,"column":69,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":200,"endColumn":72,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5943,5946],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5943,5946],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":219,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":219,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6615,6618],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6615,6618],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":220,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":220,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6659,6662],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6659,6662],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":240,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":240,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7417,7420],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7417,7420],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":241,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":241,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7469,7472],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7469,7472],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\curriculum\\hooks\\use-publish.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":135,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":135,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4969,4972],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4969,4972],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":" \r\nimport { useMutation, useQuery, useQueryClient } from '@tanstack/react-query';\r\nimport { supabase } from '@/lib/supabase';\r\nimport { useApp } from '@/contexts/AppContext';\r\n\r\ninterface CurriculumMeta {\r\n  version: number;\r\n  last_published_at: string | null;\r\n}\r\n\r\ninterface PublishStats {\r\n  draftDomains: number;\r\n  liveDomains: number;\r\n  draftSkills: number;\r\n  liveSkills: number;\r\n  draftQuestions: number;\r\n  liveQuestions: number;\r\n}\r\n\r\ninterface ValidationIssue {\r\n  type: 'error' | 'warning';\r\n  message: string;\r\n}\r\n\r\ninterface PublishPreview {\r\n  meta: CurriculumMeta;\r\n  stats: PublishStats;\r\n  validationIssues: ValidationIssue[];\r\n  canPublish: boolean;\r\n  readyToPublishCount: number;\r\n}\r\n\r\nexport function useCurriculumMeta() {\r\n  const { currentApp } = useApp();\r\n  \r\n  // FIX M3: Query by app_id, not singleton\r\n  return useQuery({\r\n    queryKey: ['curriculum-meta', currentApp?.app_id],\r\n    queryFn: async (): Promise<CurriculumMeta> => {\r\n      if (!currentApp?.app_id) throw new Error('No app selected');\r\n      \r\n      const { data, error } = await supabase\r\n        .from('curriculum_meta')\r\n        .select('version, last_published_at')\r\n        .eq('app_id', currentApp.app_id)  // FIX: Tenant-scoped\r\n        .single();\r\n      \r\n      if (error && error.code !== 'PGRST116') throw error; // Ignore not found\r\n      return data as CurriculumMeta ?? { version: 0, last_published_at: null };\r\n    },\r\n    enabled: !!currentApp?.app_id,\r\n  });\r\n}\r\n\r\nexport function usePublishPreview() {\r\n  const { currentApp } = useApp();\r\n\r\n  return useQuery({\r\n    queryKey: ['publish-preview', currentApp?.app_id],\r\n    queryFn: async (): Promise<PublishPreview> => {\r\n      if (!currentApp?.app_id) throw new Error('No app selected');\r\n\r\n      const validationIssues: ValidationIssue[] = [];\r\n\r\n      // FIX M3: Separate meta query (tenant-scoped) from content counts\r\n      const [\r\n        metaResult,\r\n        draftDomainsResult,\r\n        liveDomainsResult,\r\n        draftSkillsResult,\r\n        liveSkillsResult,\r\n        draftQuestionsResult,\r\n        liveQuestionsResult,\r\n      ] = await Promise.all([\r\n        supabase.from('curriculum_meta').select('version, last_published_at').eq('app_id', currentApp.app_id).maybeSingle(),\r\n        supabase.from('domains').select('*', { count: 'exact', head: true }).eq('app_id', currentApp.app_id).is('deleted_at', null).eq('status', 'draft'),\r\n        supabase.from('domains').select('*', { count: 'exact', head: true }).eq('app_id', currentApp.app_id).is('deleted_at', null).eq('status', 'live'),\r\n        supabase.from('skills').select('*', { count: 'exact', head: true }).eq('app_id', currentApp.app_id).is('deleted_at', null).eq('status', 'draft'),\r\n        supabase.from('skills').select('*', { count: 'exact', head: true }).eq('app_id', currentApp.app_id).is('deleted_at', null).eq('status', 'live'),\r\n        supabase.from('questions').select('*', { count: 'exact', head: true }).eq('app_id', currentApp.app_id).is('deleted_at', null).eq('status', 'draft'),\r\n        supabase.from('questions').select('*', { count: 'exact', head: true }).eq('app_id', currentApp.app_id).is('deleted_at', null).eq('status', 'live'),\r\n      ]);\r\n\r\n      if (metaResult.error && metaResult.error.code !== 'PGRST116') throw metaResult.error;\r\n\r\n      const stats: PublishStats = {\r\n        draftDomains: draftDomainsResult.count ?? 0,\r\n        liveDomains: liveDomainsResult.count ?? 0,\r\n        draftSkills: draftSkillsResult.count ?? 0,\r\n        liveSkills: liveSkillsResult.count ?? 0,\r\n        draftQuestions: draftQuestionsResult.count ?? 0,\r\n        liveQuestions: liveQuestionsResult.count ?? 0,\r\n      };\r\n\r\n      const liveCount = stats.liveDomains + stats.liveSkills + stats.liveQuestions;\r\n      const draftCount = stats.draftDomains + stats.draftSkills + stats.draftQuestions;\r\n\r\n      if (liveCount === 0) {\r\n        validationIssues.push({\r\n          type: 'warning',\r\n          message: 'No content is currently live. Mark content as \"Live\" to make it visible to students.',\r\n        });\r\n      }\r\n\r\n      if (draftCount > 0) {\r\n        validationIssues.push({\r\n          type: 'warning',\r\n          message: `${draftCount} item(s) are in draft status and not visible to students.`,\r\n        });\r\n      }\r\n\r\n      return {\r\n        meta: metaResult.data as CurriculumMeta,\r\n        stats,\r\n        validationIssues,\r\n        canPublish: liveCount > 0,\r\n        readyToPublishCount: liveCount,\r\n      };\r\n    },\r\n    enabled: !!currentApp?.app_id,\r\n    refetchInterval: 30000,\r\n  });\r\n}\r\n\r\nexport function usePublishCurriculum() {\r\n  const queryClient = useQueryClient();\r\n  const { currentApp } = useApp();\r\n  \r\n  return useMutation({\r\n    mutationFn: async () => {\r\n      if (!currentApp?.app_id) throw new Error('No app selected');\r\n      \r\n      // FIX M4: Pass app_id to RPC\r\n      // Note: Type cast needed until database.types.ts is regenerated\r\n      const { data, error } = await (supabase.rpc as any)('publish_curriculum', {\r\n        p_app_id: currentApp.app_id\r\n      });\r\n      if (error) throw error;\r\n      return data;\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['curriculum-meta'] });\r\n      queryClient.invalidateQueries({ queryKey: ['publish-preview'] });\r\n      queryClient.invalidateQueries({ queryKey: ['publish-history'] });\r\n      queryClient.invalidateQueries({ queryKey: ['domains'] });\r\n      queryClient.invalidateQueries({ queryKey: ['domains-paginated'] });\r\n      queryClient.invalidateQueries({ queryKey: ['skills'] });\r\n      queryClient.invalidateQueries({ queryKey: ['skills-paginated'] });\r\n      queryClient.invalidateQueries({ queryKey: ['questions'] });\r\n      queryClient.invalidateQueries({ queryKey: ['questions-paginated'] });\r\n      queryClient.invalidateQueries({ queryKey: ['dashboard-stats'] });\r\n    },\r\n  });\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\curriculum\\hooks\\use-questions.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":93,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":93,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2865,2868],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2865,2868],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":151,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":151,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4505,4508],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4505,4508],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":181,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":181,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5377,5380],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5377,5380],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":202,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":202,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6055,6058],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6055,6058],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":225,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":225,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6805,6808],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6805,6808],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":244,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":244,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7419,7422],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7419,7422],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":264,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":264,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8166,8169],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8166,8169],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_' is assigned a value but never used.","line":297,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":297,"endColumn":26,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'created_at' is assigned a value but never used.","line":297,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":297,"endColumn":38,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'updated_at' is assigned a value but never used.","line":297,"column":40,"nodeType":"Identifier","messageId":"unusedVar","endLine":297,"endColumn":50,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'app_id' is assigned a value but never used.","line":297,"column":52,"nodeType":"Identifier","messageId":"unusedVar","endLine":297,"endColumn":58,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":297,"column":84,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":297,"endColumn":87,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9408,9411],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9408,9411],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":306,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":306,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9712,9715],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9712,9715],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":328,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":328,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10495,10498],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10495,10498],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\curriculum\\hooks\\use-skills.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":101,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":101,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2888,2891],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2888,2891],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":159,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":159,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4462,4465],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4462,4465],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":180,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":180,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5072,5075],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5072,5075],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":203,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":203,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5804,5807],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5804,5807],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":222,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":222,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6418,6421],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6418,6421],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":242,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":242,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7153,7156],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7153,7156],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_' is assigned a value but never used.","line":275,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":275,"endColumn":26,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'created_at' is assigned a value but never used.","line":275,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":275,"endColumn":38,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'updated_at' is assigned a value but never used.","line":275,"column":40,"nodeType":"Identifier","messageId":"unusedVar","endLine":275,"endColumn":50,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'app_id' is assigned a value but never used.","line":275,"column":52,"nodeType":"Identifier","messageId":"unusedVar","endLine":275,"endColumn":58,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":275,"column":84,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":275,"endColumn":87,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8380,8383],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8380,8383],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":285,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":285,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8767,8770],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8767,8770],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":307,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":307,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9535,9538],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9535,9538],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\curriculum\\pages\\ai-generator-page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":44,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":44,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1865,1868],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1865,1868],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":57,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":57,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2428,2431],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2428,2431],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":88,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":88,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3646,3649],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3646,3649],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":97,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":97,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4043,4046],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4043,4046],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":198,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":198,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9422,9425],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9422,9425],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\r\nimport { useSkills } from '../hooks/use-skills';\r\nimport { useAIGenerator } from '@/hooks/use-ai-generator';\r\nimport { FileUploader } from '../components/file-uploader';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { Wand2, Download, RefreshCw, AlertTriangle, CheckCircle2, FileText } from 'lucide-react';\r\nimport { AIQuestion } from '@/lib/gemini';\r\nimport { downloadFile } from '@/lib/data-utils';\r\nimport { Link } from 'react-router-dom';\r\n\r\nexport function AIGeneratorPage() {\r\n    // Stage: 'upload' | 'config' | 'review' | 'results'\r\n    const [stage, setStage] = useState<'upload' | 'config' | 'review' | 'results'>('upload');\r\n    \r\n    // Data State\r\n    const [fileContent, setFileContent] = useState('');\r\n    const [fileName, setFileName] = useState('');\r\n    const [config, setConfig] = useState({\r\n        skillId: '',\r\n        count: 10,\r\n        difficulty: 'Medium',\r\n        type: 'all' as 'all' | 'multiple_choice' | 'boolean'\r\n    });\r\n    const [promptInstruction, setPromptInstruction] = useState('');\r\n    const [generatedQuestions, setGeneratedQuestions] = useState<AIQuestion[]>([]);\r\n\r\n    // Hooks\r\n    const { data: skills } = useSkills();\r\n    const { generate, isGenerating } = useAIGenerator();\r\n\r\n    // Handlers\r\n    const handleFileParsed = (content: string, name: string) => {\r\n        setFileContent(content);\r\n        setFileName(name);\r\n        setStage('config');\r\n    };\r\n\r\n    const handleConfigSubmit = () => {\r\n        // Build initial prompt instruction based on config\r\n        const selectedSkill = skills?.find((s: any) => s.id === config.skillId);\r\n        const skillName = selectedSkill ? selectedSkill.title : \"General Math\";\r\n        \r\n        const initialPrompt = `Analyze the provided context material.\r\nFocus heavily on the topic: \"${skillName}\".\r\nGenerate ${config.count} questions at ${config.difficulty} difficulty.\r\nEnsure questions are clear, concise, and suitable for the curriculum.`;\r\n\r\n        setPromptInstruction(initialPrompt);\r\n        setStage('review');\r\n    };\r\n\r\n    const handleGenerate = async () => {\r\n        const selectedSkill = skills?.find((s: any) => s.id === config.skillId);\r\n        \r\n        const result = await generate({\r\n            context: fileContent,\r\n            count: config.count,\r\n            difficulty: config.difficulty,\r\n            skillTitle: selectedSkill?.title || 'Math',\r\n            promptInstruction: promptInstruction,\r\n            questionType: config.type\r\n        });\r\n\r\n        if (result) {\r\n            setGeneratedQuestions(result);\r\n            setStage('results');\r\n        }\r\n    };\r\n\r\n    const handleDownloadCSV = () => {\r\n        if (generatedQuestions.length === 0) return;\r\n\r\n        // Convert options array to JSON string for CSV compatibility\r\n        const csvRows = generatedQuestions.map(q => ({\r\n            content: q.content,\r\n            type: q.type,\r\n            points: q.points,\r\n            explanation: q.explanation,\r\n            // We map 'options' to a format that the bulk importer can read later\r\n            // For now, simpler is better: JSON string\r\n            options: q.options ? JSON.stringify(q.options) : '',\r\n            correct_answer: q.correct_answer,\r\n            // Important: We need to output the Skill Title so Bulk Import can map it\r\n            skill_title: skills?.find((s: any) => s.id === config.skillId)?.title || '',\r\n            status: 'draft'\r\n        }));\r\n\r\n        const headers = ['content', 'type', 'points', 'explanation', 'options', 'correct_answer', 'skill_title', 'status'];\r\n        const csvContent = [\r\n            headers.join(','),\r\n            ...csvRows.map(row => \r\n                headers.map(header => {\r\n                    const val = (row as any)[header];\r\n                    // Escape CSV values\r\n                    return `\"${String(val).replace(/\"/g, '\"\"')}\"`;\r\n                }).join(',')\r\n            )\r\n        ].join('\\n');\r\n\r\n        downloadFile(csvContent, `AI_Questions_${fileName.replace(/\\.[^/.]+$/, \"\")}.csv`, 'text/csv');\r\n    };\r\n\r\n    const handleReset = () => {\r\n        setStage('upload');\r\n        setFileContent('');\r\n        setFileName('');\r\n        setGeneratedQuestions([]);\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6 max-w-4xl mx-auto pb-12\">\r\n            <div className=\"flex flex-col gap-2\">\r\n                <h2 className=\"text-3xl font-bold text-gray-900 flex items-center gap-2\">\r\n                    <Wand2 className=\"h-8 w-8 text-purple-600\" />\r\n                    AI Curriculum Assistant\r\n                </h2>\r\n                <p className=\"text-gray-500\">\r\n                    Generate curriculum-aligned questions from your documents in minutes.\r\n                </p>\r\n                {!import.meta.env.VITE_GEMINI_API_KEY && (\r\n                    <div className=\"bg-amber-50 border border-amber-200 rounded-lg p-4 flex items-start gap-3 mt-2\">\r\n                        <AlertTriangle className=\"h-5 w-5 text-amber-600 mt-0.5\" />\r\n                        <div>\r\n                            <h4 className=\"font-semibold text-amber-800\">Missing API Key</h4>\r\n                            <p className=\"text-sm text-amber-700 mt-1\">\r\n                                VITE_GEMINI_API_KEY is not detected. The AI generation will fail. \r\n                                Please add your Google Gemini API key to your .env file.\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Stepper / Progress */}\r\n            <div className=\"flex items-center justify-between px-8 py-4 bg-white rounded-xl border border-gray-100 shadow-sm relative overflow-hidden\">\r\n                {['Upload', 'Configure', 'Review Prompt', 'Results'].map((step, idx) => {\r\n                    const stepStageMap = ['upload', 'config', 'review', 'results'];\r\n                    const currentIdx = stepStageMap.indexOf(stage);\r\n                    const isActive = currentIdx >= idx;\r\n                    const isCurrent = currentIdx === idx;\r\n                    \r\n                    return (\r\n                        <div key={step} className={`flex items-center gap-2 z-10 ${isActive ? 'text-purple-700' : 'text-gray-400'}`}>\r\n                            <div className={`\r\n                                w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold border-2 transition-colors\r\n                                ${isActive ? 'bg-purple-100 border-purple-600' : 'bg-white border-gray-200'}\r\n                                ${isCurrent ? 'ring-2 ring-purple-200 ring-offset-2' : ''}\r\n                            `}>\r\n                                {idx + 1}\r\n                            </div>\r\n                            <span className={`font-medium ${isActive ? 'text-gray-900' : 'text-gray-400'}`}>{step}</span>\r\n                        </div>\r\n                    );\r\n                })}\r\n                {/* Progress Bar Background */}\r\n                <div className=\"absolute left-0 top-1/2 w-full h-0.5 bg-gray-100 -z-0\" />\r\n            </div>\r\n\r\n            {/* Main Content Area */}\r\n            <div className=\"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 md:p-8 min-h-[400px]\">\r\n                \r\n                {/* STAGE 1: UPLOAD */}\r\n                {stage === 'upload' && (\r\n                    <div className=\"space-y-6 max-w-xl mx-auto text-center py-8\">\r\n                        <div>\r\n                            <h3 className=\"text-xl font-semibold mb-2\">Upload Source Material</h3>\r\n                            <p className=\"text-gray-500\">\r\n                                Upload a textbook chapter, lesson plan, or notes. We support PDF, Word, and Text files.\r\n                            </p>\r\n                        </div>\r\n                        <FileUploader onFileParsed={handleFileParsed} onClear={() => setFileContent('')} />\r\n                    </div>\r\n                )}\r\n\r\n                {/* STAGE 2: CONFIG */}\r\n                {stage === 'config' && (\r\n                    <div className=\"space-y-6 max-w-lg mx-auto\">\r\n                        <div>\r\n                            <h3 className=\"text-xl font-semibold\">Configuration</h3>\r\n                            <p className=\"text-gray-500\">Target the content to a specific skill and difficulty.</p>\r\n                        </div>\r\n\r\n                        <div className=\"space-y-4\">\r\n                            <div className=\"space-y-2\">\r\n                                <Label>Target Skill (Required)</Label>\r\n                                <Select \r\n                                    value={config.skillId} \r\n                                    onValueChange={(val) => setConfig({...config, skillId: val})}\r\n                                >\r\n                                    <SelectTrigger>\r\n                                        <SelectValue placeholder=\"Select a skill...\" />\r\n                                    </SelectTrigger>\r\n                                    <SelectContent>\r\n                                        {skills?.map((s: any) => (\r\n                                            <SelectItem key={s.id} value={s.id}>{s.title}</SelectItem>\r\n                                        ))}\r\n                                    </SelectContent>\r\n                                </Select>\r\n                                <p className=\"text-xs text-gray-500\">This ensures generated questions map correctly in your database.</p>\r\n                            </div>\r\n\r\n                            <div className=\"grid grid-cols-2 gap-4\">\r\n                                <div className=\"space-y-2\">\r\n                                    <Label>Question Count</Label>\r\n                                    <Input \r\n                                        type=\"number\" \r\n                                        min={1} \r\n                                        max={50} \r\n                                        value={config.count}\r\n                                        onChange={(e) => setConfig({...config, count: parseInt(e.target.value)})} \r\n                                    />\r\n                                </div>\r\n                                <div className=\"space-y-2\">\r\n                                    <Label>Difficulty</Label>\r\n                                    <Select \r\n                                        value={config.difficulty} \r\n                                        onValueChange={(val) => setConfig({...config, difficulty: val})}\r\n                                    >\r\n                                        <SelectTrigger>\r\n                                            <SelectValue />\r\n                                        </SelectTrigger>\r\n                                        <SelectContent>\r\n                                            <SelectItem value=\"Easy\">Easy</SelectItem>\r\n                                            <SelectItem value=\"Medium\">Medium</SelectItem>\r\n                                            <SelectItem value=\"Hard\">Hard</SelectItem>\r\n                                        </SelectContent>\r\n                                    </Select>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"space-y-2\">\r\n                                <Label>Data Source</Label>\r\n                                <div className=\"p-3 bg-gray-50 border border-gray-200 rounded-lg flex items-center gap-2 text-sm text-gray-600\">\r\n                                    <FileText className=\"h-4 w-4\" />\r\n                                    <span className=\"truncate flex-1\">{fileName}</span>\r\n                                    <span className=\"text-xs font-semibold px-2 py-1 bg-gray-200 rounded text-gray-700\">\r\n                                        {(fileContent.length / 1000).toFixed(1)}k chars\r\n                                    </span>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"pt-4 flex gap-3\">\r\n                                <Button variant=\"outline\" onClick={() => setStage('upload')} className=\"flex-1\">Back</Button>\r\n                                <Button \r\n                                    onClick={handleConfigSubmit} \r\n                                    className=\"flex-1 bg-purple-600 hover:bg-purple-700 text-white\"\r\n                                    disabled={!config.skillId}\r\n                                >\r\n                                    Next: Review Prompt\r\n                                </Button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* STAGE 3: REVIEW PROMPT */}\r\n                {stage === 'review' && (\r\n                    <div className=\"space-y-6\">\r\n                        <div className=\"flex items-center justify-between\">\r\n                            <div>\r\n                                <h3 className=\"text-xl font-semibold\">Review Instruction</h3>\r\n                                <p className=\"text-gray-500\">Review and edit the instructions we will send to the AI.</p>\r\n                            </div>\r\n                            <div className=\"text-sm px-3 py-1 bg-blue-50 text-blue-700 rounded-full font-medium\">\r\n                                Human-in-the-Loop\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"space-y-2\">\r\n                            <Label>AI Instruction</Label>\r\n                            <Textarea \r\n                                value={promptInstruction}\r\n                                onChange={(e) => setPromptInstruction(e.target.value)}\r\n                                className=\"min-h-[200px] font-mono text-sm leading-relaxed\"\r\n                                placeholder=\"Enter instructions...\"\r\n                            />\r\n                            <p className=\"text-xs text-gray-500\">\r\n                                Tip: Be specific. e.g., \"Avoid negative numbers\" or \"Focus on word problems\".\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div className=\"pt-4 flex gap-3\">\r\n                            <Button variant=\"outline\" onClick={() => setStage('config')} className=\"w-32\">Back</Button>\r\n                            <Button \r\n                                onClick={handleGenerate} \r\n                                disabled={isGenerating}\r\n                                className=\"flex-1 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white shadow-md\"\r\n                            >\r\n                                {isGenerating ? (\r\n                                    <>\r\n                                        <RefreshCw className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                                        Generating...\r\n                                    </>\r\n                                ) : (\r\n                                    <>\r\n                                        <Wand2 className=\"mr-2 h-4 w-4\" />\r\n                                        Generate Questions\r\n                                    </>\r\n                                )}\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* STAGE 4: RESULTS */}\r\n                {stage === 'results' && (\r\n                    <div className=\"space-y-8\">\r\n                        <div className=\"text-center space-y-2 py-4\">\r\n                            <div className=\"w-16 h-16 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                                <CheckCircle2 className=\"h-8 w-8\" />\r\n                            </div>\r\n                            <h3 className=\"text-2xl font-bold text-gray-900\">Success!</h3>\r\n                            <p className=\"text-gray-500\">\r\n                                We generated {generatedQuestions.length} questions based on your material.\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div className=\"border rounded-xl overflow-hidden\">\r\n                            <div className=\"bg-gray-50 px-4 py-2 border-b text-xs font-semibold text-gray-500 uppercase tracking-wider\">\r\n                                Preview (First 3)\r\n                            </div>\r\n                            <div className=\"divide-y divide-gray-100\">\r\n                                {generatedQuestions.slice(0, 3).map((q, i) => (\r\n                                    <div key={i} className=\"p-4 hover:bg-gray-50 transition-colors\">\r\n                                        <div className=\"flex justify-between gap-4 mb-1\">\r\n                                            <p className=\"font-medium text-gray-900\">{q.content}</p>\r\n                                            <span className=\"text-xs px-2 py-1 bg-gray-100 rounded text-gray-600 whitespace-nowrap h-fit\">\r\n                                                {q.type}\r\n                                            </span>\r\n                                        </div>\r\n                                        <p className=\"text-sm text-gray-500 mb-2\">Ans: {q.correct_answer}</p>\r\n                                        <div className=\"flex gap-2\">\r\n                                            {q.options?.map((opt, j) => (\r\n                                                <span key={j} className=\"text-xs px-2 py-1 border rounded bg-white text-gray-500\">\r\n                                                    {typeof opt === 'string' ? opt : JSON.stringify(opt)}\r\n                                                </span>\r\n                                            ))}\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"flex flex-col sm:flex-row gap-4 pt-4\">\r\n                            <Button \r\n                                variant=\"outline\" \r\n                                onClick={handleReset} \r\n                                className=\"flex-1\"\r\n                            >\r\n                                Start Over\r\n                            </Button>\r\n                            <Button \r\n                                onClick={handleDownloadCSV} \r\n                                className=\"flex-[2] bg-green-600 hover:bg-green-700 text-white\"\r\n                            >\r\n                                <Download className=\"mr-2 h-4 w-4\" />\r\n                                Download CSV for Bulk Import\r\n                            </Button>\r\n                            <Link to=\"/questions\" className=\"flex-1\">\r\n                                <Button variant=\"secondary\" className=\"w-full\">\r\n                                    Go to Questions\r\n                                </Button>\r\n                            </Link>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\curriculum\\pages\\dashboard-page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\curriculum\\pages\\domain-create-page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\curriculum\\pages\\domain-edit-page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\curriculum\\pages\\domains-page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\curriculum\\pages\\publish-page.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":21,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":21,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[985,988],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[985,988],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\curriculum\\pages\\question-create-page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\curriculum\\pages\\question-edit-page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\curriculum\\pages\\questions-page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\curriculum\\pages\\skill-create-page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\curriculum\\pages\\skill-edit-page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\curriculum\\pages\\skills-page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\curriculum\\pages\\version-history-page.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":39,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":39,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1208,1211],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1208,1211],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":103,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":103,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3269,3272],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3269,3272],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":104,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":104,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3321,3324],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3321,3324],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":106,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":106,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3457,3460],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3457,3460],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\mentorship\\hooks\\use-groups.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\mentorship\\pages\\AssignmentCreatePage.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":67,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":67,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2100,2103],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2100,2103],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\mentorship\\pages\\GroupCreatePage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\mentorship\\pages\\GroupDetailPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\mentorship\\pages\\GroupsPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\monitoring\\hooks\\use-error-logs.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\monitoring\\hooks\\use-known-issues.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":23,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[696,699],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[696,699],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useQuery } from '@tanstack/react-query';\r\nimport { supabase } from '@/lib/supabase';\r\n\r\nexport interface KnownIssue {\r\n  id: string;\r\n  title: string;\r\n  description: string;\r\n  error_message?: string;\r\n  root_cause?: string;\r\n  resolution?: string;\r\n  status: 'open' | 'closed' | 'recurring';\r\n  severity: 'low' | 'medium' | 'high' | 'critical';\r\n  sentry_link?: string;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport function useKnownIssues() {\r\n  return useQuery({\r\n    queryKey: ['known-issues'],\r\n    queryFn: async () => {\r\n      // Note: known_issues table types will be available after regenerating database.types.ts\r\n      const { data, error } = await (supabase as any)\r\n        .from('known_issues')\r\n        .select('*')\r\n        .order('created_at', { ascending: false });\r\n\r\n      if (error) throw error;\r\n      return data as KnownIssue[];\r\n    },\r\n  });\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\monitoring\\pages\\ErrorLogsPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\monitoring\\pages\\KnownIssuesPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\platform\\hooks\\use-apps.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\platform\\hooks\\use-landings.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\platform\\hooks\\use-subjects.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\platform\\pages\\AppsPage.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":24,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1270,1273],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1270,1273],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":34,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1501,1504],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1501,1504],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\r\nimport { Plus, Pencil, Trash2, Layout } from 'lucide-react';\r\nimport { useApps, useCreateApp, useUpdateApp, useDeleteApp } from '../hooks/use-apps';\r\nimport { useSubjects } from '../hooks/use-subjects';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter } from '@/components/ui/dialog';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { Switch } from '@/components/ui/switch';\r\nimport { useToast } from '@/hooks/use-toast';\r\n\r\nexport function AppsPage() {\r\n  const { data: apps, isLoading: appsLoading } = useApps();\r\n  const { data: subjects } = useSubjects();\r\n  const createApp = useCreateApp();\r\n  const updateApp = useUpdateApp();\r\n  const deleteApp = useDeleteApp();\r\n  const { toast } = useToast();\r\n\r\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\r\n  const [editingApp, setEditingApp] = useState<any>(null);\r\n  const [formData, setFormData] = useState({\r\n    subject_id: '',\r\n    display_name: '',\r\n    subdomain: '',\r\n    grade_level: '',\r\n    grade_number: 0,\r\n    is_active: true\r\n  });\r\n\r\n  const handleOpenDialog = (app?: any) => {\r\n    if (app) {\r\n      setEditingApp(app);\r\n      setFormData({\r\n        subject_id: app.subject_id,\r\n        display_name: app.display_name,\r\n        subdomain: app.subdomain,\r\n        grade_level: app.grade_level,\r\n        grade_number: app.grade_number || 0,\r\n        is_active: app.is_active\r\n      });\r\n    } else {\r\n      setEditingApp(null);\r\n      setFormData({\r\n        subject_id: subjects?.[0]?.subject_id ?? '',\r\n        display_name: '',\r\n        subdomain: '',\r\n        grade_level: '',\r\n        grade_number: 0,\r\n        is_active: true\r\n      });\r\n    }\r\n    setIsDialogOpen(true);\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!formData.subject_id) {\r\n        toast({ title: \"Error\", description: \"Please select a subject\", variant: \"destructive\" });\r\n        return;\r\n    }\r\n    try {\r\n      if (editingApp) {\r\n        await updateApp.mutateAsync({ id: editingApp.app_id, ...formData });\r\n        toast({ title: \"Success\", description: \"App updated successfully\" });\r\n      } else {\r\n        await createApp.mutateAsync(formData);\r\n        toast({ title: \"Success\", description: \"App created successfully\" });\r\n      }\r\n      setIsDialogOpen(false);\r\n    } catch (error) {\r\n      toast({ title: \"Error\", description: \"Failed to save app\", variant: \"destructive\" });\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id: string) => {\r\n    if (window.confirm('Are you sure? This will delete all content (domains, skills, questions) for this app!')) {\r\n      try {\r\n        await deleteApp.mutateAsync(id);\r\n        toast({ title: \"Success\", description: \"App deleted\" });\r\n      } catch (error) {\r\n        toast({ title: \"Error\", description: \"Failed to delete app\", variant: \"destructive\" });\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h2 className=\"text-3xl font-bold tracking-tight\">Applications</h2>\r\n          <p className=\"text-muted-foreground\">Manage grade-specific subject instances</p>\r\n        </div>\r\n        <Button onClick={() => handleOpenDialog()} className=\"gap-2\">\r\n          <Plus className=\"w-4 h-4\" /> Add Application\r\n        </Button>\r\n      </div>\r\n\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle className=\"flex items-center gap-2\">\r\n            <Layout className=\"w-5 h-5 text-blue-500\" />\r\n            Platform Applications\r\n          </CardTitle>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <Table>\r\n            <TableHeader>\r\n              <TableRow>\r\n                <TableHead>Display Name</TableHead>\r\n                <TableHead>Subject</TableHead>\r\n                <TableHead>Subdomain</TableHead>\r\n                <TableHead>Grade</TableHead>\r\n                <TableHead>Status</TableHead>\r\n                <TableHead className=\"text-right\">Actions</TableHead>\r\n              </TableRow>\r\n            </TableHeader>\r\n            <TableBody>\r\n              {appsLoading ? (\r\n                <TableRow><TableCell colSpan={6} className=\"text-center py-8\">Loading...</TableCell></TableRow>\r\n              ) : apps?.length === 0 ? (\r\n                <TableRow><TableCell colSpan={6} className=\"text-center py-8\">No applications found</TableCell></TableRow>\r\n              ) : apps?.map((app) => (\r\n                <TableRow key={app.app_id}>\r\n                  <TableCell className=\"font-medium\">{app.display_name}</TableCell>\r\n                  <TableCell>{app.subjects?.name ?? 'Unknown'}</TableCell>\r\n                  <TableCell className=\"font-mono text-xs\">{app.subdomain}.questerix.com</TableCell>\r\n                  <TableCell>{app.grade_level}</TableCell>\r\n                  <TableCell>\r\n                     <span className={`px-2 py-0.5 rounded-full text-[10px] uppercase font-bold tracking-wider ${\r\n                      app.is_active ? 'bg-green-500/10 text-green-500 border border-green-500/20' : 'bg-gray-500/10 text-gray-500 border border-gray-500/20'\r\n                    }`}>\r\n                      {app.is_active ? 'Active' : 'Inactive'}\r\n                    </span>\r\n                  </TableCell>\r\n                  <TableCell className=\"text-right\">\r\n                    <div className=\"flex justify-end gap-2\">\r\n                      <Button variant=\"ghost\" size=\"icon\" onClick={() => handleOpenDialog(app)}>\r\n                        <Pencil className=\"w-4 h-4\" />\r\n                      </Button>\r\n                      <Button variant=\"ghost\" size=\"icon\" onClick={() => handleDelete(app.app_id)} className=\"text-red-500 hover:text-red-600 hover:bg-red-500/10\">\r\n                        <Trash2 className=\"w-4 h-4\" />\r\n                      </Button>\r\n                    </div>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n            </TableBody>\r\n          </Table>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>\r\n        <DialogContent>\r\n          <DialogHeader>\r\n            <DialogTitle>{editingApp ? 'Edit Application' : 'Add Application'}</DialogTitle>\r\n          </DialogHeader>\r\n          <form onSubmit={handleSubmit} className=\"space-y-4 pt-4\">\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n                <div className=\"space-y-2\">\r\n                    <Label>Subject</Label>\r\n                    <Select \r\n                        value={formData.subject_id} \r\n                        onValueChange={(v) => setFormData({ ...formData, subject_id: v })}\r\n                    >\r\n                        <SelectTrigger>\r\n                            <SelectValue placeholder=\"Select Subject\" />\r\n                        </SelectTrigger>\r\n                        <SelectContent className=\"bg-[#1a1b4b] border-white/10 text-white\">\r\n                            {subjects?.map(s => (\r\n                                <SelectItem key={s.subject_id} value={s.subject_id}>{s.name}</SelectItem>\r\n                            ))}\r\n                        </SelectContent>\r\n                    </Select>\r\n                </div>\r\n                <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"display_name\">Display Name</Label>\r\n                    <Input \r\n                        id=\"display_name\" \r\n                        value={formData.display_name} \r\n                        onChange={(e) => setFormData({ ...formData, display_name: e.target.value })} \r\n                        placeholder=\"e.g. Math 7th Grade\"\r\n                        required\r\n                    />\r\n                </div>\r\n            </div>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n                <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"subdomain\">Subdomain</Label>\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <Input \r\n                            id=\"subdomain\" \r\n                            value={formData.subdomain} \r\n                            onChange={(e) => setFormData({ ...formData, subdomain: e.target.value })} \r\n                            placeholder=\"e.g. m7\"\r\n                            required\r\n                        />\r\n                        <span className=\"text-xs text-muted-foreground whitespace-nowrap\">.questerix.com</span>\r\n                    </div>\r\n                </div>\r\n                <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"grade_level\">Grade Level</Label>\r\n                    <Input \r\n                        id=\"grade_level\" \r\n                        value={formData.grade_level} \r\n                        onChange={(e) => setFormData({ ...formData, grade_level: e.target.value })} \r\n                        placeholder=\"e.g. 7th Grade\"\r\n                        required\r\n                    />\r\n                </div>\r\n            </div>\r\n            <div className=\"flex items-center justify-between p-2 rounded-lg bg-white/5 border border-white/10\">\r\n                <div className=\"space-y-0.5\">\r\n                    <Label>Active Status</Label>\r\n                    <p className=\"text-[10px] text-muted-foreground\">App is visible for students</p>\r\n                </div>\r\n                <Switch \r\n                    checked={formData.is_active} \r\n                    onCheckedChange={(v) => setFormData({ ...formData, is_active: v })} \r\n                />\r\n            </div>\r\n            <DialogFooter className=\"pt-4\">\r\n              <Button type=\"button\" variant=\"ghost\" onClick={() => setIsDialogOpen(false)}>Cancel</Button>\r\n              <Button type=\"submit\" disabled={createApp.isPending || updateApp.isPending}>\r\n                {editingApp ? 'Save Changes' : 'Create Application'}\r\n              </Button>\r\n            </DialogFooter>\r\n          </form>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\platform\\pages\\LandingsPage.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":17,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[849,852],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[849,852],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":25,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":25,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1046,1049],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1046,1049],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\r\nimport { Globe, Pencil, Save, ChevronLeft } from 'lucide-react';\r\nimport { useLandingPages, useUpdateLandingPage } from '../hooks/use-landings';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { useToast } from '@/hooks/use-toast';\r\n\r\nexport function LandingsPage() {\r\n  const { data: landings, isLoading } = useLandingPages();\r\n  const updateLanding = useUpdateLandingPage();\r\n  const { toast } = useToast();\r\n\r\n  const [editingLanding, setEditingLanding] = useState<any>(null);\r\n  const [formData, setFormData] = useState({\r\n    meta_title: '',\r\n    meta_description: '',\r\n    hero_headline: '',\r\n    hero_subheadline: ''\r\n  });\r\n\r\n  const handleEdit = (landing: any) => {\r\n    setEditingLanding(landing);\r\n    setFormData({\r\n      meta_title: landing.meta_title,\r\n      meta_description: landing.meta_description,\r\n      hero_headline: landing.hero_headline,\r\n      hero_subheadline: landing.hero_subheadline\r\n    });\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    try {\r\n      await updateLanding.mutateAsync({ \r\n        id: editingLanding.landing_page_id, \r\n        ...formData \r\n      });\r\n      toast({ title: \"Success\", description: \"Landing page updated\" });\r\n      setEditingLanding(null);\r\n    } catch (error) {\r\n      toast({ title: \"Error\", description: \"Failed to update landing page\", variant: \"destructive\" });\r\n    }\r\n  };\r\n\r\n  if (editingLanding) {\r\n    return (\r\n      <div className=\"space-y-6\">\r\n        <div className=\"flex items-center gap-4\">\r\n          <Button variant=\"ghost\" size=\"icon\" onClick={() => setEditingLanding(null)}>\r\n            <ChevronLeft className=\"w-5 h-5\" />\r\n          </Button>\r\n          <h2 className=\"text-3xl font-bold tracking-tight\">Edit Landing Page</h2>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>SEO Metadata</CardTitle>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label>Meta Title</Label>\r\n                <Input \r\n                  value={formData.meta_title} \r\n                  onChange={(e) => setFormData({ ...formData, meta_title: e.target.value })} \r\n                />\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                <Label>Meta Description</Label>\r\n                <Textarea \r\n                  rows={4}\r\n                  value={formData.meta_description} \r\n                  onChange={(e) => setFormData({ ...formData, meta_description: e.target.value })} \r\n                />\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>Hero Section</CardTitle>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label>Hero Headline</Label>\r\n                <Input \r\n                  value={formData.hero_headline} \r\n                  onChange={(e) => setFormData({ ...formData, hero_headline: e.target.value })} \r\n                />\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                <Label>Hero Subheadline</Label>\r\n                <Textarea \r\n                  rows={4}\r\n                  value={formData.hero_subheadline} \r\n                  onChange={(e) => setFormData({ ...formData, hero_subheadline: e.target.value })} \r\n                />\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n\r\n        <div className=\"flex justify-end gap-3\">\r\n          <Button variant=\"ghost\" onClick={() => setEditingLanding(null)}>Cancel</Button>\r\n          <Button onClick={handleSave} className=\"gap-2\" disabled={updateLanding.isPending}>\r\n            <Save className=\"w-4 h-4\" /> Save Changes\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div>\r\n        <h2 className=\"text-3xl font-bold tracking-tight\">Landing Pages</h2>\r\n        <p className=\"text-muted-foreground\">Manage SEO and marketing content for each application</p>\r\n      </div>\r\n\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle className=\"flex items-center gap-2\">\r\n            <Globe className=\"w-5 h-5 text-green-500\" />\r\n            Active Landing Pages\r\n          </CardTitle>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <Table>\r\n            <TableHeader>\r\n              <TableRow>\r\n                <TableHead>Application</TableHead>\r\n                <TableHead>Subdomain</TableHead>\r\n                <TableHead>Meta Title</TableHead>\r\n                <TableHead className=\"text-right\">Actions</TableHead>\r\n              </TableRow>\r\n            </TableHeader>\r\n            <TableBody>\r\n              {isLoading ? (\r\n                <TableRow><TableCell colSpan={4} className=\"text-center py-8\">Loading...</TableCell></TableRow>\r\n              ) : landings?.length === 0 ? (\r\n                <TableRow><TableCell colSpan={4} className=\"text-center py-8\">No landing pages found</TableCell></TableRow>\r\n              ) : landings?.map((l) => (\r\n                <TableRow key={l.landing_page_id}>\r\n                  <TableCell className=\"font-medium\">{l.apps?.display_name}</TableCell>\r\n                  <TableCell className=\"font-mono text-xs\">{l.apps?.subdomain}.questerix.com</TableCell>\r\n                  <TableCell className=\"max-w-md truncate\">{l.meta_title}</TableCell>\r\n                  <TableCell className=\"text-right\">\r\n                    <Button variant=\"ghost\" size=\"icon\" onClick={() => handleEdit(l)}>\r\n                      <Pencil className=\"w-4 h-4\" />\r\n                    </Button>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n            </TableBody>\r\n          </Table>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\features\\platform\\pages\\SubjectsPage.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'DialogTrigger' is defined but never used.","line":7,"column":60,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":73},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":20,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1081,1084],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1081,1084],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":29,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1289,1292],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1289,1292],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\r\nimport { Plus, Pencil, Trash2, Boxes } from 'lucide-react';\r\nimport { useSubjects, useCreateSubject, useUpdateSubject, useDeleteSubject } from '../hooks/use-subjects';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger, DialogFooter } from '@/components/ui/dialog';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { useToast } from '@/hooks/use-toast';\r\n\r\nexport function SubjectsPage() {\r\n  const { data: subjects, isLoading } = useSubjects();\r\n  const createSubject = useCreateSubject();\r\n  const updateSubject = useUpdateSubject();\r\n  const deleteSubject = useDeleteSubject();\r\n  const { toast } = useToast();\r\n\r\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\r\n  const [editingSubject, setEditingSubject] = useState<any>(null);\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    slug: '',\r\n    color_hex: '#3B82F6',\r\n    display_order: 1,\r\n    status: 'active'\r\n  });\r\n\r\n  const handleOpenDialog = (subject?: any) => {\r\n    if (subject) {\r\n      setEditingSubject(subject);\r\n      setFormData({\r\n        name: subject.name,\r\n        slug: subject.slug,\r\n        color_hex: subject.color_hex || '#3B82F6',\r\n        display_order: subject.display_order,\r\n        status: subject.status\r\n      });\r\n    } else {\r\n      setEditingSubject(null);\r\n      setFormData({\r\n        name: '',\r\n        slug: '',\r\n        color_hex: '#3B82F6',\r\n        display_order: (subjects?.length ?? 0) + 1,\r\n        status: 'active'\r\n      });\r\n    }\r\n    setIsDialogOpen(true);\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    try {\r\n      if (editingSubject) {\r\n        await updateSubject.mutateAsync({ id: editingSubject.subject_id, ...formData });\r\n        toast({ title: \"Success\", description: \"Subject updated successfully\" });\r\n      } else {\r\n        await createSubject.mutateAsync(formData);\r\n        toast({ title: \"Success\", description: \"Subject created successfully\" });\r\n      }\r\n      setIsDialogOpen(false);\r\n    } catch (error) {\r\n      toast({ title: \"Error\", description: \"Failed to save subject\", variant: \"destructive\" });\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id: string) => {\r\n    if (window.confirm('Are you sure? This will delete all associated apps.')) {\r\n      try {\r\n        await deleteSubject.mutateAsync(id);\r\n        toast({ title: \"Success\", description: \"Subject deleted\" });\r\n      } catch (error) {\r\n        toast({ title: \"Error\", description: \"Failed to delete subject\", variant: \"destructive\" });\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h2 className=\"text-3xl font-bold tracking-tight\">Subjects</h2>\r\n          <p className=\"text-muted-foreground\">Manage high-level learning subjects</p>\r\n        </div>\r\n        <Button onClick={() => handleOpenDialog()} className=\"gap-2\">\r\n          <Plus className=\"w-4 h-4\" /> Add Subject\r\n        </Button>\r\n      </div>\r\n\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle className=\"flex items-center gap-2\">\r\n            <Boxes className=\"w-5 h-5 text-purple-500\" />\r\n            Platform Subjects\r\n          </CardTitle>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <Table>\r\n            <TableHeader>\r\n              <TableRow>\r\n                <TableHead>Name</TableHead>\r\n                <TableHead>Slug</TableHead>\r\n                <TableHead>Color</TableHead>\r\n                <TableHead>Order</TableHead>\r\n                <TableHead>Status</TableHead>\r\n                <TableHead className=\"text-right\">Actions</TableHead>\r\n              </TableRow>\r\n            </TableHeader>\r\n            <TableBody>\r\n              {isLoading ? (\r\n                <TableRow><TableCell colSpan={6} className=\"text-center py-8\">Loading...</TableCell></TableRow>\r\n              ) : subjects?.length === 0 ? (\r\n                <TableRow><TableCell colSpan={6} className=\"text-center py-8\">No subjects found</TableCell></TableRow>\r\n              ) : subjects?.map((s) => (\r\n                <TableRow key={s.subject_id}>\r\n                  <TableCell className=\"font-medium\">{s.name}</TableCell>\r\n                  <TableCell className=\"font-mono text-xs\">{s.slug}</TableCell>\r\n                  <TableCell>\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <div className=\"w-4 h-4 rounded-full shadow-sm border border-white/10\" style={{ backgroundColor: s.color_hex || '#ccc' }} />\r\n                      <span className=\"text-xs uppercase\">{s.color_hex}</span>\r\n                    </div>\r\n                  </TableCell>\r\n                  <TableCell>{s.display_order}</TableCell>\r\n                  <TableCell>\r\n                    <span className={`px-2 py-0.5 rounded-full text-[10px] uppercase font-bold tracking-wider ${\r\n                      s.status === 'active' ? 'bg-green-500/10 text-green-500 border border-green-500/20' : 'bg-gray-500/10 text-gray-500 border border-gray-500/20'\r\n                    }`}>\r\n                      {s.status}\r\n                    </span>\r\n                  </TableCell>\r\n                  <TableCell className=\"text-right\">\r\n                    <div className=\"flex justify-end gap-2\">\r\n                      <Button variant=\"ghost\" size=\"icon\" onClick={() => handleOpenDialog(s)}>\r\n                        <Pencil className=\"w-4 h-4\" />\r\n                      </Button>\r\n                      <Button variant=\"ghost\" size=\"icon\" onClick={() => handleDelete(s.subject_id)} className=\"text-red-500 hover:text-red-600 hover:bg-red-500/10\">\r\n                        <Trash2 className=\"w-4 h-4\" />\r\n                      </Button>\r\n                    </div>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n            </TableBody>\r\n          </Table>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>\r\n        <DialogContent>\r\n          <DialogHeader>\r\n            <DialogTitle>{editingSubject ? 'Edit Subject' : 'Add Subject'}</DialogTitle>\r\n          </DialogHeader>\r\n          <form onSubmit={handleSubmit} className=\"space-y-4 pt-4\">\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"name\">Name</Label>\r\n                <Input \r\n                  id=\"name\" \r\n                  value={formData.name} \r\n                  onChange={(e) => setFormData({ ...formData, name: e.target.value })} \r\n                  placeholder=\"e.g. Mathematics\"\r\n                  required\r\n                />\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"slug\">URL Slug</Label>\r\n                <Input \r\n                  id=\"slug\" \r\n                  value={formData.slug} \r\n                  onChange={(e) => setFormData({ ...formData, slug: e.target.value })} \r\n                  placeholder=\"e.g. math\"\r\n                  required\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"color\">Theme Color</Label>\r\n                <div className=\"flex gap-2\">\r\n                    <Input \r\n                        id=\"color\" \r\n                        type=\"color\"\r\n                        className=\"w-12 p-1\"\r\n                        value={formData.color_hex} \r\n                        onChange={(e) => setFormData({ ...formData, color_hex: e.target.value })} \r\n                    />\r\n                    <Input \r\n                        value={formData.color_hex} \r\n                        onChange={(e) => setFormData({ ...formData, color_hex: e.target.value })} \r\n                        placeholder=\"#000000\"\r\n                    />\r\n                </div>\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"order\">Display Order</Label>\r\n                <Input \r\n                  id=\"order\" \r\n                  type=\"number\"\r\n                  value={formData.display_order} \r\n                  onChange={(e) => setFormData({ ...formData, display_order: parseInt(e.target.value) })} \r\n                  required\r\n                />\r\n              </div>\r\n            </div>\r\n            <DialogFooter className=\"pt-4\">\r\n              <Button type=\"button\" variant=\"ghost\" onClick={() => setIsDialogOpen(false)}>Cancel</Button>\r\n              <Button type=\"submit\" disabled={createSubject.isPending || updateSubject.isPending}>\r\n                {editingSubject ? 'Save Changes' : 'Create Subject'}\r\n              </Button>\r\n            </DialogFooter>\r\n          </form>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\hooks\\use-ai-generator.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\hooks\\use-toast.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\lib\\data-utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\lib\\database.types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\lib\\error-tracker.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_userId' is defined but never used.","line":69,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":69,"endColumn":40},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_email' is defined but never used.","line":69,"column":42,"nodeType":"Identifier","messageId":"unusedVar","endLine":69,"endColumn":57}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { supabase } from './supabase';\r\n\r\ninterface ErrorContext {\r\n  url?: string;\r\n  userAgent?: string;\r\n  appVersion?: string;\r\n  appId?: string;\r\n  extra?: Record<string, unknown>;\r\n}\r\n\r\n/**\r\n * Captures an exception and logs it to Supabase.\r\n * Zero-cost alternative to Sentry.\r\n */\r\nexport async function captureException(\r\n  error: Error | unknown,\r\n  context?: ErrorContext\r\n): Promise<string | null> {\r\n  try {\r\n    const errorObj = error instanceof Error ? error : new Error(String(error));\r\n    \r\n    const { data, error: rpcError } = await supabase.rpc('log_error' as never, {\r\n      p_platform: 'web',\r\n      p_error_type: errorObj.name || 'Error',\r\n      p_error_message: errorObj.message || String(error),\r\n      p_stack_trace: errorObj.stack || null,\r\n      p_url: context?.url || window.location.href,\r\n      p_user_agent: context?.userAgent || navigator.userAgent,\r\n      p_app_version: context?.appVersion || import.meta.env.VITE_APP_VERSION || '1.0.0',\r\n      p_app_id: context?.appId || null,\r\n      p_extra_context: context?.extra || {},\r\n    } as never);\r\n\r\n    if (rpcError) {\r\n      console.error('[ErrorTracker] Failed to log error:', rpcError);\r\n      return null;\r\n    }\r\n\r\n    if (import.meta.env.DEV) {\r\n      console.log('[ErrorTracker] Error logged:', data);\r\n    }\r\n\r\n    return data as string;\r\n  } catch (e) {\r\n    // Fail silently to avoid infinite loops\r\n    console.error('[ErrorTracker] Unexpected failure:', e);\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * Captures a message (non-error event) to the error log.\r\n */\r\nexport async function captureMessage(\r\n  message: string,\r\n  level: 'info' | 'warning' | 'error' = 'info',\r\n  context?: ErrorContext\r\n): Promise<string | null> {\r\n  return captureException(new Error(message), {\r\n    ...context,\r\n    extra: { ...context?.extra, level },\r\n  });\r\n}\r\n\r\n/**\r\n * Sets user context for future error reports.\r\n * This is a no-op in our system since we use auth.uid() server-side.\r\n */\r\nexport function setUser(_userId: string, _email?: string): void {\r\n  // User context is automatically captured via Supabase auth\r\n  // This function exists for API compatibility\r\n}\r\n\r\n/**\r\n * Global error handler for uncaught exceptions.\r\n */\r\nexport function initErrorTracking(): void {\r\n  // Capture unhandled promise rejections\r\n  window.addEventListener('unhandledrejection', (event) => {\r\n    captureException(event.reason, {\r\n      extra: { type: 'unhandledrejection' },\r\n    });\r\n  });\r\n\r\n  // Capture uncaught errors\r\n  window.addEventListener('error', (event) => {\r\n    captureException(event.error || event.message, {\r\n      extra: { \r\n        type: 'uncaught',\r\n        filename: event.filename,\r\n        lineno: event.lineno,\r\n        colno: event.colno,\r\n      },\r\n    });\r\n  });\r\n\r\n  if (import.meta.env.DEV) {\r\n    console.log('[ErrorTracker] Initialized (Supabase-native)');\r\n  }\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\lib\\file-parsers.ts","messages":[{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":2,"column":1,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":2,"endColumn":14,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[68,81],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":4,"column":1,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":4,"endColumn":14,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[134,147],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":53,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":53,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1884,1887],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1884,1887],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// React imports removed as they are not used in this utility file\r\n// @ts-ignore\r\nimport * as pdfjsLib from \"pdfjs-dist/build/pdf\";\r\n// @ts-ignore\r\nimport mammoth from \"mammoth\";\r\n\r\n// We need to set up the worker for PDF.js\r\n// Ideally this should be handled by a vite plugin, or copy the worker to public\r\n// For this implementation we will use a CDN for the worker to avoid complex build config changes\r\npdfjsLib.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjsLib.version}/pdf.worker.min.js`;\r\n\r\nexport interface ParsedFile {\r\n    name: string;\r\n    content: string;\r\n    type: 'pdf' | 'docx' | 'txt';\r\n}\r\n\r\nexport async function parseFile(file: File): Promise<ParsedFile> {\r\n    const fileType = file.name.split('.').pop()?.toLowerCase();\r\n\r\n    let content = '';\r\n\r\n    try {\r\n        if (fileType === 'pdf') {\r\n            content = await parsePdf(file);\r\n        } else if (fileType === 'docx') {\r\n            content = await parseDocx(file);\r\n        } else if (fileType === 'txt') {\r\n            content = await parseTxt(file);\r\n        } else {\r\n            throw new Error(`Unsupported file type: ${fileType}`);\r\n        }\r\n    } catch (error) {\r\n        console.error(\"Error parsing file:\", error);\r\n        throw new Error(`Failed to parse ${file.name}: ${(error as Error).message}`);\r\n    }\r\n\r\n    return {\r\n        name: file.name,\r\n        content: content,\r\n        type: fileType as 'pdf' | 'docx' | 'txt'\r\n    };\r\n}\r\n\r\nasync function parsePdf(file: File): Promise<string> {\r\n    const arrayBuffer = await file.arrayBuffer();\r\n    const pdf = await pdfjsLib.getDocument({ data: arrayBuffer }).promise;\r\n    let fullText = '';\r\n\r\n    for (let i = 1; i <= pdf.numPages; i++) {\r\n        const page = await pdf.getPage(i);\r\n        const textContent = await page.getTextContent();\r\n        const pageText = textContent.items.map((item: any) => item.str).join(' ');\r\n        fullText += `\\n--- Page ${i} ---\\n${pageText}`;\r\n    }\r\n\r\n    return fullText;\r\n}\r\n\r\nasync function parseDocx(file: File): Promise<string> {\r\n    const arrayBuffer = await file.arrayBuffer();\r\n    const result = await mammoth.extractRawText({ arrayBuffer });\r\n    return result.value;\r\n}\r\n\r\nasync function parseTxt(file: File): Promise<string> {\r\n    return new Promise((resolve, reject) => {\r\n        const reader = new FileReader();\r\n        reader.onload = () => resolve(reader.result as string);\r\n        reader.onerror = reject;\r\n        reader.readAsText(file);\r\n    });\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\lib\\gemini.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\lib\\supabase.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\lib\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\services\\SecurityLogger.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":8,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":8,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[258,261],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[258,261],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":19,"column":7,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":19,"endColumn":20,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[559,572],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":27,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":27,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[924,927],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[924,927],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":59,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":59,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1710,1713],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1710,1713],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { supabase } from '@/lib/supabase';\r\n\r\nexport type SecurityEventSeverity = 'info' | 'low' | 'medium' | 'high' | 'critical';\r\n\r\nexport interface SecurityEventData {\r\n  eventType: string;\r\n  severity: SecurityEventSeverity;\r\n  metadata?: Record<string, any>;\r\n  appId?: string;\r\n}\r\n\r\nclass SecurityLoggerService {\r\n  /**\r\n   * Logs a security event to the server-side audit log.\r\n   * Fails silently in production to avoid blocking user actions, but logs to console in dev.\r\n   */\r\n  async log(data: SecurityEventData): Promise<void> {\r\n    try {\r\n      // @ts-ignore\r\n      const { error } = await supabase.rpc('log_security_event', {\r\n        p_event_type: data.eventType,\r\n        p_severity: data.severity,\r\n        p_metadata: data.metadata || {},\r\n        p_app_id: data.appId || null,\r\n        // Location is optional and often handled by the edge function/RPC via headers\r\n        p_location: null \r\n      } as any);\r\n\r\n      if (error) {\r\n        if (import.meta.env.DEV) {\r\n          console.error('[SecurityLogger] Failed to log event:', error);\r\n        }\r\n      } else {\r\n        if (import.meta.env.DEV) {\r\n          console.log('[SecurityLogger] Event logged:', data.eventType);\r\n        }\r\n      }\r\n    } catch (err) {\r\n      // Catch-all to prevent app crashes due to logging failures\r\n      console.error('[SecurityLogger] Unexpected error:', err);\r\n    }\r\n  }\r\n\r\n  async logLogin(userId: string) {\r\n    return this.log({\r\n      eventType: 'login',\r\n      severity: 'info',\r\n      metadata: { userId }\r\n    });\r\n  }\r\n\r\n  async logLogout() {\r\n    return this.log({\r\n      eventType: 'logout',\r\n      severity: 'info'\r\n    });\r\n  }\r\n\r\n  async logSensitiveAction(action: string, metadata?: any) {\r\n    return this.log({\r\n      eventType: 'sensitive_action',\r\n      severity: 'medium',\r\n      metadata: { action, ...metadata }\r\n    });\r\n  }\r\n}\r\n\r\nexport const SecurityLogger = new SecurityLoggerService();\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\utils\\math.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\mhali\\OneDrive\\Desktop\\Important Projects\\Questerix\\admin-panel\\src\\vite-env.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]}]
